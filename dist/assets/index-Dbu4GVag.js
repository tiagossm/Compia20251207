var YM=Object.defineProperty;var XM=(e,t,r)=>t in e?YM(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Vg=(e,t,r)=>XM(e,typeof t!="symbol"?t+"":t,r);function g5(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const n in s)if(n!=="default"&&!(n in e)){const i=Object.getOwnPropertyDescriptor(s,n);i&&Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:()=>s[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function js(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function vu(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),r}var Gg={exports:{}},Sd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function JM(){if(z_)return Sd;z_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,n,i){var l=null;if(i!==void 0&&(l=""+i),n.key!==void 0&&(l=""+n.key),"key"in n){i={};for(var d in n)d!=="key"&&(i[d]=n[d])}else i=n;return n=i.ref,{$$typeof:e,type:s,key:l,ref:n!==void 0?n:null,props:i}}return Sd.Fragment=t,Sd.jsx=r,Sd.jsxs=r,Sd}var $_;function ZM(){return $_||($_=1,Gg.exports=JM()),Gg.exports}var a=ZM(),Kg={exports:{}},Ze={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_;function QM(){if(L_)return Ze;L_=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function w(H,V,B){this.props=H,this.context=V,this.refs=v,this.updater=B||b}w.prototype.isReactComponent={},w.prototype.setState=function(H,V){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,V,"setState")},w.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function N(){}N.prototype=w.prototype;function S(H,V,B){this.props=H,this.context=V,this.refs=v,this.updater=B||b}var j=S.prototype=new N;j.constructor=S,y(j,w.prototype),j.isPureReactComponent=!0;var k=Array.isArray,A={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function T(H,V,B,ne,ie,ee){return B=ee.ref,{$$typeof:e,type:H,key:V,ref:B!==void 0?B:null,props:ee}}function D(H,V){return T(H.type,V,void 0,void 0,void 0,H.props)}function R(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function I(H){var V={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(B){return V[B]})}var L=/\/+/g;function $(H,V){return typeof H=="object"&&H!==null&&H.key!=null?I(""+H.key):V.toString(36)}function W(){}function P(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(W,W):(H.status="pending",H.then(function(V){H.status==="pending"&&(H.status="fulfilled",H.value=V)},function(V){H.status==="pending"&&(H.status="rejected",H.reason=V)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function U(H,V,B,ne,ie){var ee=typeof H;(ee==="undefined"||ee==="boolean")&&(H=null);var Z=!1;if(H===null)Z=!0;else switch(ee){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(H.$$typeof){case e:case t:Z=!0;break;case m:return Z=H._init,U(Z(H._payload),V,B,ne,ie)}}if(Z)return ie=ie(H),Z=ne===""?"."+$(H,0):ne,k(ie)?(B="",Z!=null&&(B=Z.replace(L,"$&/")+"/"),U(ie,V,B,"",function(F){return F})):ie!=null&&(R(ie)&&(ie=D(ie,B+(ie.key==null||H&&H.key===ie.key?"":(""+ie.key).replace(L,"$&/")+"/")+Z)),V.push(ie)),1;Z=0;var re=ne===""?".":ne+":";if(k(H))for(var J=0;J<H.length;J++)ne=H[J],ee=re+$(ne,J),Z+=U(ne,V,B,ee,ie);else if(J=x(H),typeof J=="function")for(H=J.call(H),J=0;!(ne=H.next()).done;)ne=ne.value,ee=re+$(ne,J++),Z+=U(ne,V,B,ee,ie);else if(ee==="object"){if(typeof H.then=="function")return U(P(H),V,B,ne,ie);throw V=String(H),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return Z}function K(H,V,B){if(H==null)return H;var ne=[],ie=0;return U(H,ne,"","",function(ee){return V.call(B,ee,ie++)}),ne}function G(H){if(H._status===-1){var V=H._result;V=V(),V.then(function(B){(H._status===0||H._status===-1)&&(H._status=1,H._result=B)},function(B){(H._status===0||H._status===-1)&&(H._status=2,H._result=B)}),H._status===-1&&(H._status=0,H._result=V)}if(H._status===1)return H._result.default;throw H._result}var Q=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function le(){}return Ze.Children={map:K,forEach:function(H,V,B){K(H,function(){V.apply(this,arguments)},B)},count:function(H){var V=0;return K(H,function(){V++}),V},toArray:function(H){return K(H,function(V){return V})||[]},only:function(H){if(!R(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},Ze.Component=w,Ze.Fragment=r,Ze.Profiler=n,Ze.PureComponent=S,Ze.StrictMode=s,Ze.Suspense=u,Ze.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Ze.act=function(){throw Error("act(...) is not supported in production builds of React.")},Ze.cache=function(H){return function(){return H.apply(null,arguments)}},Ze.cloneElement=function(H,V,B){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ne=y({},H.props),ie=H.key,ee=void 0;if(V!=null)for(Z in V.ref!==void 0&&(ee=void 0),V.key!==void 0&&(ie=""+V.key),V)!O.call(V,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&V.ref===void 0||(ne[Z]=V[Z]);var Z=arguments.length-2;if(Z===1)ne.children=B;else if(1<Z){for(var re=Array(Z),J=0;J<Z;J++)re[J]=arguments[J+2];ne.children=re}return T(H.type,ie,void 0,void 0,ee,ne)},Ze.createContext=function(H){return H={$$typeof:l,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:i,_context:H},H},Ze.createElement=function(H,V,B){var ne,ie={},ee=null;if(V!=null)for(ne in V.key!==void 0&&(ee=""+V.key),V)O.call(V,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ie[ne]=V[ne]);var Z=arguments.length-2;if(Z===1)ie.children=B;else if(1<Z){for(var re=Array(Z),J=0;J<Z;J++)re[J]=arguments[J+2];ie.children=re}if(H&&H.defaultProps)for(ne in Z=H.defaultProps,Z)ie[ne]===void 0&&(ie[ne]=Z[ne]);return T(H,ee,void 0,void 0,null,ie)},Ze.createRef=function(){return{current:null}},Ze.forwardRef=function(H){return{$$typeof:d,render:H}},Ze.isValidElement=R,Ze.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:G}},Ze.memo=function(H,V){return{$$typeof:h,type:H,compare:V===void 0?null:V}},Ze.startTransition=function(H){var V=A.T,B={};A.T=B;try{var ne=H(),ie=A.S;ie!==null&&ie(B,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(le,Q)}catch(ee){Q(ee)}finally{A.T=V}},Ze.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Ze.use=function(H){return A.H.use(H)},Ze.useActionState=function(H,V,B){return A.H.useActionState(H,V,B)},Ze.useCallback=function(H,V){return A.H.useCallback(H,V)},Ze.useContext=function(H){return A.H.useContext(H)},Ze.useDebugValue=function(){},Ze.useDeferredValue=function(H,V){return A.H.useDeferredValue(H,V)},Ze.useEffect=function(H,V){return A.H.useEffect(H,V)},Ze.useId=function(){return A.H.useId()},Ze.useImperativeHandle=function(H,V,B){return A.H.useImperativeHandle(H,V,B)},Ze.useInsertionEffect=function(H,V){return A.H.useInsertionEffect(H,V)},Ze.useLayoutEffect=function(H,V){return A.H.useLayoutEffect(H,V)},Ze.useMemo=function(H,V){return A.H.useMemo(H,V)},Ze.useOptimistic=function(H,V){return A.H.useOptimistic(H,V)},Ze.useReducer=function(H,V,B){return A.H.useReducer(H,V,B)},Ze.useRef=function(H){return A.H.useRef(H)},Ze.useState=function(H){return A.H.useState(H)},Ze.useSyncExternalStore=function(H,V,B){return A.H.useSyncExternalStore(H,V,B)},Ze.useTransition=function(){return A.H.useTransition()},Ze.version="19.0.0",Ze}var B_;function uc(){return B_||(B_=1,Kg.exports=QM()),Kg.exports}var _=uc();const ut=js(_),eI=g5({__proto__:null,default:ut},[_]);var Wg={exports:{}},Ed={},Yg={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function tI(){return U_||(U_=1,(function(e){function t(K,G){var Q=K.length;K.push(G);e:for(;0<Q;){var le=Q-1>>>1,H=K[le];if(0<n(H,G))K[le]=G,K[Q]=H,Q=le;else break e}}function r(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var G=K[0],Q=K.pop();if(Q!==G){K[0]=Q;e:for(var le=0,H=K.length,V=H>>>1;le<V;){var B=2*(le+1)-1,ne=K[B],ie=B+1,ee=K[ie];if(0>n(ne,Q))ie<H&&0>n(ee,ne)?(K[le]=ee,K[ie]=Q,le=ie):(K[le]=ne,K[B]=Q,le=B);else if(ie<H&&0>n(ee,Q))K[le]=ee,K[ie]=Q,le=ie;else break e}}return G}function n(K,G){var Q=K.sortIndex-G.sortIndex;return Q!==0?Q:K.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var u=[],h=[],m=1,p=null,x=3,b=!1,y=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function j(K){for(var G=r(h);G!==null;){if(G.callback===null)s(h);else if(G.startTime<=K)s(h),G.sortIndex=G.expirationTime,t(u,G);else break;G=r(h)}}function k(K){if(v=!1,j(K),!y)if(r(u)!==null)y=!0,P();else{var G=r(h);G!==null&&U(k,G.startTime-K)}}var A=!1,O=-1,T=5,D=-1;function R(){return!(e.unstable_now()-D<T)}function I(){if(A){var K=e.unstable_now();D=K;var G=!0;try{e:{y=!1,v&&(v=!1,N(O),O=-1),b=!0;var Q=x;try{t:{for(j(K),p=r(u);p!==null&&!(p.expirationTime>K&&R());){var le=p.callback;if(typeof le=="function"){p.callback=null,x=p.priorityLevel;var H=le(p.expirationTime<=K);if(K=e.unstable_now(),typeof H=="function"){p.callback=H,j(K),G=!0;break t}p===r(u)&&s(u),j(K)}else s(u);p=r(u)}if(p!==null)G=!0;else{var V=r(h);V!==null&&U(k,V.startTime-K),G=!1}}break e}finally{p=null,x=Q,b=!1}G=void 0}}finally{G?L():A=!1}}}var L;if(typeof S=="function")L=function(){S(I)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,W=$.port2;$.port1.onmessage=I,L=function(){W.postMessage(null)}}else L=function(){w(I,0)};function P(){A||(A=!0,L())}function U(K,G){O=w(function(){K(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){y||b||(y=!0,P())},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(K){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var Q=x;x=G;try{return K()}finally{x=Q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,G){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var Q=x;x=K;try{return G()}finally{x=Q}},e.unstable_scheduleCallback=function(K,G,Q){var le=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?le+Q:le):Q=le,K){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Q+H,K={id:m++,callback:G,priorityLevel:K,startTime:Q,expirationTime:H,sortIndex:-1},Q>le?(K.sortIndex=Q,t(h,K),r(u)===null&&K===r(h)&&(v?(N(O),O=-1):v=!0,U(k,Q-le))):(K.sortIndex=H,t(u,K),y||b||(y=!0,P())),K},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(K){var G=x;return function(){var Q=x;x=G;try{return K.apply(this,arguments)}finally{x=Q}}}})(Xg)),Xg}var q_;function rI(){return q_||(q_=1,Yg.exports=tI()),Yg.exports}var Jg={exports:{}},Zr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function aI(){if(F_)return Zr;F_=1;var e=uc();function t(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},n=Symbol.for("react.portal");function i(u,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:n,key:p==null?null:""+p,children:u,containerInfo:h,implementation:m}}var l=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Zr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zr.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return i(u,h,null,m)},Zr.flushSync=function(u){var h=l.T,m=s.p;try{if(l.T=null,s.p=2,u)return u()}finally{l.T=h,s.p=m,s.d.f()}},Zr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(u,h))},Zr.prefetchDNS=function(u){typeof u=="string"&&s.d.D(u)},Zr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,p=d(m,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?s.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:b}):m==="script"&&s.d.X(u,{crossOrigin:p,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Zr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=d(h.as,h.crossOrigin);s.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(u)},Zr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=d(m,h.crossOrigin);s.d.L(u,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Zr.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=d(h.as,h.crossOrigin);s.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(u)},Zr.requestFormReset=function(u){s.d.r(u)},Zr.unstable_batchedUpdates=function(u,h){return u(h)},Zr.useFormState=function(u,h,m){return l.H.useFormState(u,h,m)},Zr.useFormStatus=function(){return l.H.useHostTransitionStatus()},Zr.version="19.0.0",Zr}var H_;function x5(){if(H_)return Jg.exports;H_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jg.exports=aI(),Jg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function sI(){if(V_)return Ed;V_=1;var e=rI(),t=uc(),r=x5();function s(o){var c="https://react.dev/errors/"+o;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+o+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}var i=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),d=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),b=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),j=Symbol.for("react.offscreen"),k=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function O(o){return o===null||typeof o!="object"?null:(o=A&&o[A]||o["@@iterator"],typeof o=="function"?o:null)}var T=Symbol.for("react.client.reference");function D(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===T?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case u:return"Fragment";case d:return"Portal";case m:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case w:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case b:return(o.displayName||"Context")+".Provider";case x:return(o._context.displayName||"Context")+".Consumer";case y:var c=o.render;return o=o.displayName,o||(o=c.displayName||c.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case N:return c=o.displayName||null,c!==null?c:D(o.type)||"Memo";case S:c=o._payload,o=o._init;try{return D(o(c))}catch{}}return null}var R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.assign,L,$;function W(o){if(L===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);L=c&&c[1]||"",$=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+L+o+$}var P=!1;function U(o,c){if(!o||P)return"";P=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(Ne){var ve=Ne}Reflect.construct(o,[],Ae)}else{try{Ae.call()}catch(Ne){ve=Ne}o.call(Ae.prototype)}}else{try{throw Error()}catch(Ne){ve=Ne}(Ae=o())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(Ne){if(Ne&&ve&&typeof Ne.stack=="string")return[Ne.stack,ve.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),z=C[0],q=C[1];if(z&&q){var ae=z.split(`
`),fe=q.split(`
`);for(E=g=0;g<ae.length&&!ae[g].includes("DetermineComponentFrameRoot");)g++;for(;E<fe.length&&!fe[E].includes("DetermineComponentFrameRoot");)E++;if(g===ae.length||E===fe.length)for(g=ae.length-1,E=fe.length-1;1<=g&&0<=E&&ae[g]!==fe[E];)E--;for(;1<=g&&0<=E;g--,E--)if(ae[g]!==fe[E]){if(g!==1||E!==1)do if(g--,E--,0>E||ae[g]!==fe[E]){var Se=`
`+ae[g].replace(" at new "," at ");return o.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",o.displayName)),Se}while(1<=g&&0<=E);break}}}finally{P=!1,Error.prepareStackTrace=f}return(f=o?o.displayName||o.name:"")?W(f):""}function K(o){switch(o.tag){case 26:case 27:case 5:return W(o.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return o=U(o.type,!1),o;case 11:return o=U(o.type.render,!1),o;case 1:return o=U(o.type,!0),o;default:return""}}function G(o){try{var c="";do c+=K(o),o=o.return;while(o);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Q(o){var c=o,f=o;if(o.alternate)for(;c.return;)c=c.return;else{o=c;do c=o,(c.flags&4098)!==0&&(f=c.return),o=c.return;while(o)}return c.tag===3?f:null}function le(o){if(o.tag===13){var c=o.memoizedState;if(c===null&&(o=o.alternate,o!==null&&(c=o.memoizedState)),c!==null)return c.dehydrated}return null}function H(o){if(Q(o)!==o)throw Error(s(188))}function V(o){var c=o.alternate;if(!c){if(c=Q(o),c===null)throw Error(s(188));return c!==o?null:o}for(var f=o,g=c;;){var E=f.return;if(E===null)break;var C=E.alternate;if(C===null){if(g=E.return,g!==null){f=g;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===f)return H(E),o;if(C===g)return H(E),c;C=C.sibling}throw Error(s(188))}if(f.return!==g.return)f=E,g=C;else{for(var z=!1,q=E.child;q;){if(q===f){z=!0,f=E,g=C;break}if(q===g){z=!0,g=E,f=C;break}q=q.sibling}if(!z){for(q=C.child;q;){if(q===f){z=!0,f=C,g=E;break}if(q===g){z=!0,g=C,f=E;break}q=q.sibling}if(!z)throw Error(s(189))}}if(f.alternate!==g)throw Error(s(190))}if(f.tag!==3)throw Error(s(188));return f.stateNode.current===f?o:c}function B(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o;for(o=o.child;o!==null;){if(c=B(o),c!==null)return c;o=o.sibling}return null}var ne=Array.isArray,ie=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},Z=[],re=-1;function J(o){return{current:o}}function F(o){0>re||(o.current=Z[re],Z[re]=null,re--)}function de(o,c){re++,Z[re]=o.current,o.current=c}var _e=J(null),se=J(null),Te=J(null),M=J(null);function xe(o,c){switch(de(Te,c),de(se,o),de(_e,null),o=c.nodeType,o){case 9:case 11:c=(c=c.documentElement)&&(c=c.namespaceURI)?h_(c):0;break;default:if(o=o===8?c.parentNode:c,c=o.tagName,o=o.namespaceURI)o=h_(o),c=f_(o,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}F(_e),de(_e,c)}function pe(){F(_e),F(se),F(Te)}function X(o){o.memoizedState!==null&&de(M,o);var c=_e.current,f=f_(c,o.type);c!==f&&(de(se,o),de(_e,f))}function Y(o){se.current===o&&(F(_e),F(se)),M.current===o&&(F(M),yd._currentValue=ee)}var ue=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,te=e.unstable_cancelCallback,oe=e.unstable_shouldYield,be=e.unstable_requestPaint,ke=e.unstable_now,we=e.unstable_getCurrentPriorityLevel,Pe=e.unstable_ImmediatePriority,Ge=e.unstable_UserBlockingPriority,Re=e.unstable_NormalPriority,Qe=e.unstable_LowPriority,gt=e.unstable_IdlePriority,he=e.log,Oe=e.unstable_setDisableYieldValue,Me=null,Ye=null;function Cr(o){if(Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Me,o,void 0,(o.current.flags&128)===128)}catch{}}function dt(o){if(typeof he=="function"&&Oe(o),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Me,o)}catch{}}var Wt=Math.clz32?Math.clz32:Hi,nr=Math.log,ha=Math.LN2;function Hi(o){return o>>>=0,o===0?32:31-(nr(o)/ha|0)|0}var rn=128,_t=4194304;function At(o){var c=o&42;if(c!==0)return c;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Ar(o,c){var f=o.pendingLanes;if(f===0)return 0;var g=0,E=o.suspendedLanes,C=o.pingedLanes,z=o.warmLanes;o=o.finishedLanes!==0;var q=f&134217727;return q!==0?(f=q&~E,f!==0?g=At(f):(C&=q,C!==0?g=At(C):o||(z=q&~z,z!==0&&(g=At(z))))):(q=f&~E,q!==0?g=At(q):C!==0?g=At(C):o||(z=f&~z,z!==0&&(g=At(z)))),g===0?0:c!==0&&c!==g&&(c&E)===0&&(E=g&-g,z=c&-c,E>=z||E===32&&(z&4194176)!==0)?c:g}function fa(o,c){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&c)===0}function ma(o,c){switch(o){case 1:case 2:case 4:case 8:return c+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xr(){var o=rn;return rn<<=1,(rn&4194176)===0&&(rn=128),o}function ka(){var o=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),o}function Ls(o){for(var c=[],f=0;31>f;f++)c.push(o);return c}function qt(o,c){o.pendingLanes|=c,c!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Bs(o,c,f,g,E,C){var z=o.pendingLanes;o.pendingLanes=f,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=f,o.entangledLanes&=f,o.errorRecoveryDisabledLanes&=f,o.shellSuspendCounter=0;var q=o.entanglements,ae=o.expirationTimes,fe=o.hiddenUpdates;for(f=z&~f;0<f;){var Se=31-Wt(f),Ae=1<<Se;q[Se]=0,ae[Se]=-1;var ve=fe[Se];if(ve!==null)for(fe[Se]=null,Se=0;Se<ve.length;Se++){var Ne=ve[Se];Ne!==null&&(Ne.lane&=-536870913)}f&=~Ae}g!==0&&Ca(o,g,0),C!==0&&E===0&&o.tag!==0&&(o.suspendedLanes|=C&~(z&~c))}function Ca(o,c,f){o.pendingLanes|=c,o.suspendedLanes&=~c;var g=31-Wt(c);o.entangledLanes|=c,o.entanglements[g]=o.entanglements[g]|1073741824|f&4194218}function Xa(o,c){var f=o.entangledLanes|=c;for(o=o.entanglements;f;){var g=31-Wt(f),E=1<<g;E&c|o[g]&c&&(o[g]|=c),f&=~E}}function Kn(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Wn(){var o=ie.p;return o!==0?o:(o=window.event,o===void 0?32:T_(o.type))}function Us(o,c){var f=ie.p;try{return ie.p=o,c()}finally{ie.p=f}}var pa=Math.random().toString(36).slice(2),ir="__reactFiber$"+pa,ga="__reactProps$"+pa,Wo="__reactContainer$"+pa,Up="__reactEvents$"+pa,BR="__reactListeners$"+pa,UR="__reactHandles$"+pa,d1="__reactResources$"+pa,Pc="__reactMarker$"+pa;function qp(o){delete o[ir],delete o[ga],delete o[Up],delete o[BR],delete o[UR]}function Vi(o){var c=o[ir];if(c)return c;for(var f=o.parentNode;f;){if(c=f[Wo]||f[ir]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(o=g_(o);o!==null;){if(f=o[ir])return f;o=g_(o)}return c}o=f,f=o.parentNode}return null}function Yo(o){if(o=o[ir]||o[Wo]){var c=o.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return o}return null}function Rc(o){var c=o.tag;if(c===5||c===26||c===27||c===6)return o.stateNode;throw Error(s(33))}function Xo(o){var c=o[d1];return c||(c=o[d1]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Or(o){o[Pc]=!0}var u1=new Set,h1={};function Gi(o,c){Jo(o,c),Jo(o+"Capture",c)}function Jo(o,c){for(h1[o]=c,o=0;o<c.length;o++)u1.add(c[o])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),f1={},m1={};function FR(o){return ue.call(m1,o)?!0:ue.call(f1,o)?!1:qR.test(o)?m1[o]=!0:(f1[o]=!0,!1)}function Wu(o,c,f){if(FR(c))if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":o.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){o.removeAttribute(c);return}}o.setAttribute(c,""+f)}}function Yu(o,c,f){if(f===null)o.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(c);return}o.setAttribute(c,""+f)}}function sn(o,c,f,g){if(g===null)o.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(f);return}o.setAttributeNS(c,f,""+g)}}function Ja(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function p1(o){var c=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function HR(o){var c=p1(o)?"checked":"value",f=Object.getOwnPropertyDescriptor(o.constructor.prototype,c),g=""+o[c];if(!o.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var E=f.get,C=f.set;return Object.defineProperty(o,c,{configurable:!0,get:function(){return E.call(this)},set:function(z){g=""+z,C.call(this,z)}}),Object.defineProperty(o,c,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(z){g=""+z},stopTracking:function(){o._valueTracker=null,delete o[c]}}}}function Xu(o){o._valueTracker||(o._valueTracker=HR(o))}function g1(o){if(!o)return!1;var c=o._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return o&&(g=p1(o)?o.checked?"true":"false":o.value),o=g,o!==f?(c.setValue(o),!0):!1}function Ju(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var VR=/[\n"\\]/g;function Za(o){return o.replace(VR,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Fp(o,c,f,g,E,C,z,q){o.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?o.type=z:o.removeAttribute("type"),c!=null?z==="number"?(c===0&&o.value===""||o.value!=c)&&(o.value=""+Ja(c)):o.value!==""+Ja(c)&&(o.value=""+Ja(c)):z!=="submit"&&z!=="reset"||o.removeAttribute("value"),c!=null?Hp(o,z,Ja(c)):f!=null?Hp(o,z,Ja(f)):g!=null&&o.removeAttribute("value"),E==null&&C!=null&&(o.defaultChecked=!!C),E!=null&&(o.checked=E&&typeof E!="function"&&typeof E!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.name=""+Ja(q):o.removeAttribute("name")}function x1(o,c,f,g,E,C,z,q){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.type=C),c!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;f=f!=null?""+Ja(f):"",c=c!=null?""+Ja(c):f,q||c===o.value||(o.value=c),o.defaultValue=c}g=g??E,g=typeof g!="function"&&typeof g!="symbol"&&!!g,o.checked=q?o.checked:!!g,o.defaultChecked=!!g,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(o.name=z)}function Hp(o,c,f){c==="number"&&Ju(o.ownerDocument)===o||o.defaultValue===""+f||(o.defaultValue=""+f)}function Zo(o,c,f,g){if(o=o.options,c){c={};for(var E=0;E<f.length;E++)c["$"+f[E]]=!0;for(f=0;f<o.length;f++)E=c.hasOwnProperty("$"+o[f].value),o[f].selected!==E&&(o[f].selected=E),E&&g&&(o[f].defaultSelected=!0)}else{for(f=""+Ja(f),c=null,E=0;E<o.length;E++){if(o[E].value===f){o[E].selected=!0,g&&(o[E].defaultSelected=!0);return}c!==null||o[E].disabled||(c=o[E])}c!==null&&(c.selected=!0)}}function b1(o,c,f){if(c!=null&&(c=""+Ja(c),c!==o.value&&(o.value=c),f==null)){o.defaultValue!==c&&(o.defaultValue=c);return}o.defaultValue=f!=null?""+Ja(f):""}function v1(o,c,f,g){if(c==null){if(g!=null){if(f!=null)throw Error(s(92));if(ne(g)){if(1<g.length)throw Error(s(93));g=g[0]}f=g}f==null&&(f=""),c=f}f=Ja(c),o.defaultValue=f,g=o.textContent,g===f&&g!==""&&g!==null&&(o.value=g)}function Qo(o,c){if(c){var f=o.firstChild;if(f&&f===o.lastChild&&f.nodeType===3){f.nodeValue=c;return}}o.textContent=c}var GR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function y1(o,c,f){var g=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="":g?o.setProperty(c,f):typeof f!="number"||f===0||GR.has(c)?c==="float"?o.cssFloat=f:o[c]=(""+f).trim():o[c]=f+"px"}function w1(o,c,f){if(c!=null&&typeof c!="object")throw Error(s(62));if(o=o.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?o.setProperty(g,""):g==="float"?o.cssFloat="":o[g]="");for(var E in c)g=c[E],c.hasOwnProperty(E)&&f[E]!==g&&y1(o,E,g)}else for(var C in c)c.hasOwnProperty(C)&&y1(o,C,c[C])}function Vp(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var KR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zu(o){return WR.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var Gp=null;function Kp(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var el=null,tl=null;function j1(o){var c=Yo(o);if(c&&(o=c.stateNode)){var f=o[ga]||null;e:switch(o=c.stateNode,c.type){case"input":if(Fp(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=o;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Za(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==o&&g.form===o.form){var E=g[ga]||null;if(!E)throw Error(s(90));Fp(g,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(c=0;c<f.length;c++)g=f[c],g.form===o.form&&g1(g)}break e;case"textarea":b1(o,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Zo(o,!!f.multiple,c,!1)}}}var Wp=!1;function N1(o,c,f){if(Wp)return o(c,f);Wp=!0;try{var g=o(c);return g}finally{if(Wp=!1,(el!==null||tl!==null)&&(Mh(),el&&(c=el,o=tl,tl=el=null,j1(c),o)))for(c=0;c<o.length;c++)j1(o[c])}}function Dc(o,c){var f=o.stateNode;if(f===null)return null;var g=f[ga]||null;if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(o=o.type,g=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!g;break e;default:o=!1}if(o)return null;if(f&&typeof f!="function")throw Error(s(231,c,typeof f));return f}var Yp=!1;if(an)try{var Mc={};Object.defineProperty(Mc,"passive",{get:function(){Yp=!0}}),window.addEventListener("test",Mc,Mc),window.removeEventListener("test",Mc,Mc)}catch{Yp=!1}var Yn=null,Xp=null,Qu=null;function _1(){if(Qu)return Qu;var o,c=Xp,f=c.length,g,E="value"in Yn?Yn.value:Yn.textContent,C=E.length;for(o=0;o<f&&c[o]===E[o];o++);var z=f-o;for(g=1;g<=z&&c[f-g]===E[C-g];g++);return Qu=E.slice(o,1<g?1-g:void 0)}function eh(o){var c=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&c===13&&(o=13)):o=c,o===10&&(o=13),32<=o||o===13?o:0}function th(){return!0}function S1(){return!1}function xa(o){function c(f,g,E,C,z){this._reactName=f,this._targetInst=E,this.type=g,this.nativeEvent=C,this.target=z,this.currentTarget=null;for(var q in o)o.hasOwnProperty(q)&&(f=o[q],this[q]=f?f(C):C[q]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?th:S1,this.isPropagationStopped=S1,this}return I(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=th)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=th)},persist:function(){},isPersistent:th}),c}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rh=xa(Ki),Ic=I({},Ki,{view:0,detail:0}),YR=xa(Ic),Jp,Zp,zc,ah=I({},Ic,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e0,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==zc&&(zc&&o.type==="mousemove"?(Jp=o.screenX-zc.screenX,Zp=o.screenY-zc.screenY):Zp=Jp=0,zc=o),Jp)},movementY:function(o){return"movementY"in o?o.movementY:Zp}}),E1=xa(ah),XR=I({},ah,{dataTransfer:0}),JR=xa(XR),ZR=I({},Ic,{relatedTarget:0}),Qp=xa(ZR),QR=I({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),eD=xa(QR),tD=I({},Ki,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),rD=xa(tD),aD=I({},Ki,{data:0}),k1=xa(aD),sD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oD(o){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(o):(o=iD[o])?!!c[o]:!1}function e0(){return oD}var lD=I({},Ic,{key:function(o){if(o.key){var c=sD[o.key]||o.key;if(c!=="Unidentified")return c}return o.type==="keypress"?(o=eh(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?nD[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e0,charCode:function(o){return o.type==="keypress"?eh(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?eh(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),cD=xa(lD),dD=I({},ah,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),C1=xa(dD),uD=I({},Ic,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e0}),hD=xa(uD),fD=I({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),mD=xa(fD),pD=I({},ah,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),gD=xa(pD),xD=I({},Ki,{newState:0,oldState:0}),bD=xa(xD),vD=[9,13,27,32],t0=an&&"CompositionEvent"in window,$c=null;an&&"documentMode"in document&&($c=document.documentMode);var yD=an&&"TextEvent"in window&&!$c,A1=an&&(!t0||$c&&8<$c&&11>=$c),O1=" ",T1=!1;function P1(o,c){switch(o){case"keyup":return vD.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function R1(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var rl=!1;function wD(o,c){switch(o){case"compositionend":return R1(c);case"keypress":return c.which!==32?null:(T1=!0,O1);case"textInput":return o=c.data,o===O1&&T1?null:o;default:return null}}function jD(o,c){if(rl)return o==="compositionend"||!t0&&P1(o,c)?(o=_1(),Qu=Xp=Yn=null,rl=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return A1&&c.locale!=="ko"?null:c.data;default:return null}}var ND={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D1(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c==="input"?!!ND[o.type]:c==="textarea"}function M1(o,c,f,g){el?tl?tl.push(g):tl=[g]:el=g,c=Bh(c,"onChange"),0<c.length&&(f=new rh("onChange","change",null,f,g),o.push({event:f,listeners:c}))}var Lc=null,Bc=null;function _D(o){o_(o,0)}function sh(o){var c=Rc(o);if(g1(c))return o}function I1(o,c){if(o==="change")return c}var z1=!1;if(an){var r0;if(an){var a0="oninput"in document;if(!a0){var $1=document.createElement("div");$1.setAttribute("oninput","return;"),a0=typeof $1.oninput=="function"}r0=a0}else r0=!1;z1=r0&&(!document.documentMode||9<document.documentMode)}function L1(){Lc&&(Lc.detachEvent("onpropertychange",B1),Bc=Lc=null)}function B1(o){if(o.propertyName==="value"&&sh(Bc)){var c=[];M1(c,Bc,o,Kp(o)),N1(_D,c)}}function SD(o,c,f){o==="focusin"?(L1(),Lc=c,Bc=f,Lc.attachEvent("onpropertychange",B1)):o==="focusout"&&L1()}function ED(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return sh(Bc)}function kD(o,c){if(o==="click")return sh(c)}function CD(o,c){if(o==="input"||o==="change")return sh(c)}function AD(o,c){return o===c&&(o!==0||1/o===1/c)||o!==o&&c!==c}var Aa=typeof Object.is=="function"?Object.is:AD;function Uc(o,c){if(Aa(o,c))return!0;if(typeof o!="object"||o===null||typeof c!="object"||c===null)return!1;var f=Object.keys(o),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var E=f[g];if(!ue.call(c,E)||!Aa(o[E],c[E]))return!1}return!0}function U1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function q1(o,c){var f=U1(o);o=0;for(var g;f;){if(f.nodeType===3){if(g=o+f.textContent.length,o<=c&&g>=c)return{node:f,offset:c-o};o=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=U1(f)}}function F1(o,c){return o&&c?o===c?!0:o&&o.nodeType===3?!1:c&&c.nodeType===3?F1(o,c.parentNode):"contains"in o?o.contains(c):o.compareDocumentPosition?!!(o.compareDocumentPosition(c)&16):!1:!1}function H1(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var c=Ju(o.document);c instanceof o.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)o=c.contentWindow;else break;c=Ju(o.document)}return c}function s0(o){var c=o&&o.nodeName&&o.nodeName.toLowerCase();return c&&(c==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||c==="textarea"||o.contentEditable==="true")}function OD(o,c){var f=H1(c);c=o.focusedElem;var g=o.selectionRange;if(f!==c&&c&&c.ownerDocument&&F1(c.ownerDocument.documentElement,c)){if(g!==null&&s0(c)){if(o=g.start,f=g.end,f===void 0&&(f=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(f,c.value.length);else if(f=(o=c.ownerDocument||document)&&o.defaultView||window,f.getSelection){f=f.getSelection();var E=c.textContent.length,C=Math.min(g.start,E);g=g.end===void 0?C:Math.min(g.end,E),!f.extend&&C>g&&(E=g,g=C,C=E),E=q1(c,C);var z=q1(c,g);E&&z&&(f.rangeCount!==1||f.anchorNode!==E.node||f.anchorOffset!==E.offset||f.focusNode!==z.node||f.focusOffset!==z.offset)&&(o=o.createRange(),o.setStart(E.node,E.offset),f.removeAllRanges(),C>g?(f.addRange(o),f.extend(z.node,z.offset)):(o.setEnd(z.node,z.offset),f.addRange(o)))}}for(o=[],f=c;f=f.parentNode;)f.nodeType===1&&o.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)f=o[c],f.element.scrollLeft=f.left,f.element.scrollTop=f.top}}var TD=an&&"documentMode"in document&&11>=document.documentMode,al=null,n0=null,qc=null,i0=!1;function V1(o,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;i0||al==null||al!==Ju(g)||(g=al,"selectionStart"in g&&s0(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),qc&&Uc(qc,g)||(qc=g,g=Bh(n0,"onSelect"),0<g.length&&(c=new rh("onSelect","select",null,c,f),o.push({event:c,listeners:g}),c.target=al)))}function Wi(o,c){var f={};return f[o.toLowerCase()]=c.toLowerCase(),f["Webkit"+o]="webkit"+c,f["Moz"+o]="moz"+c,f}var sl={animationend:Wi("Animation","AnimationEnd"),animationiteration:Wi("Animation","AnimationIteration"),animationstart:Wi("Animation","AnimationStart"),transitionrun:Wi("Transition","TransitionRun"),transitionstart:Wi("Transition","TransitionStart"),transitioncancel:Wi("Transition","TransitionCancel"),transitionend:Wi("Transition","TransitionEnd")},o0={},G1={};an&&(G1=document.createElement("div").style,"AnimationEvent"in window||(delete sl.animationend.animation,delete sl.animationiteration.animation,delete sl.animationstart.animation),"TransitionEvent"in window||delete sl.transitionend.transition);function Yi(o){if(o0[o])return o0[o];if(!sl[o])return o;var c=sl[o],f;for(f in c)if(c.hasOwnProperty(f)&&f in G1)return o0[o]=c[f];return o}var K1=Yi("animationend"),W1=Yi("animationiteration"),Y1=Yi("animationstart"),PD=Yi("transitionrun"),RD=Yi("transitionstart"),DD=Yi("transitioncancel"),X1=Yi("transitionend"),J1=new Map,Z1="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function Ss(o,c){J1.set(o,c),Gi(c,[o])}var Qa=[],nl=0,l0=0;function nh(){for(var o=nl,c=l0=nl=0;c<o;){var f=Qa[c];Qa[c++]=null;var g=Qa[c];Qa[c++]=null;var E=Qa[c];Qa[c++]=null;var C=Qa[c];if(Qa[c++]=null,g!==null&&E!==null){var z=g.pending;z===null?E.next=E:(E.next=z.next,z.next=E),g.pending=E}C!==0&&Q1(f,E,C)}}function ih(o,c,f,g){Qa[nl++]=o,Qa[nl++]=c,Qa[nl++]=f,Qa[nl++]=g,l0|=g,o.lanes|=g,o=o.alternate,o!==null&&(o.lanes|=g)}function c0(o,c,f,g){return ih(o,c,f,g),oh(o)}function Xn(o,c){return ih(o,null,null,c),oh(o)}function Q1(o,c,f){o.lanes|=f;var g=o.alternate;g!==null&&(g.lanes|=f);for(var E=!1,C=o.return;C!==null;)C.childLanes|=f,g=C.alternate,g!==null&&(g.childLanes|=f),C.tag===22&&(o=C.stateNode,o===null||o._visibility&1||(E=!0)),o=C,C=C.return;E&&c!==null&&o.tag===3&&(C=o.stateNode,E=31-Wt(f),C=C.hiddenUpdates,o=C[E],o===null?C[E]=[c]:o.push(c),c.lane=f|536870912)}function oh(o){if(50<fd)throw fd=0,pg=null,Error(s(185));for(var c=o.return;c!==null;)o=c,c=o.return;return o.tag===3?o.stateNode:null}var il={},eN=new WeakMap;function es(o,c){if(typeof o=="object"&&o!==null){var f=eN.get(o);return f!==void 0?f:(c={value:o,source:c,stack:G(c)},eN.set(o,c),c)}return{value:o,source:c,stack:G(c)}}var ol=[],ll=0,lh=null,ch=0,ts=[],rs=0,Xi=null,nn=1,on="";function Ji(o,c){ol[ll++]=ch,ol[ll++]=lh,lh=o,ch=c}function tN(o,c,f){ts[rs++]=nn,ts[rs++]=on,ts[rs++]=Xi,Xi=o;var g=nn;o=on;var E=32-Wt(g)-1;g&=~(1<<E),f+=1;var C=32-Wt(c)+E;if(30<C){var z=E-E%5;C=(g&(1<<z)-1).toString(32),g>>=z,E-=z,nn=1<<32-Wt(c)+E|f<<E|g,on=C+o}else nn=1<<C|f<<E|g,on=o}function d0(o){o.return!==null&&(Ji(o,1),tN(o,1,0))}function u0(o){for(;o===lh;)lh=ol[--ll],ol[ll]=null,ch=ol[--ll],ol[ll]=null;for(;o===Xi;)Xi=ts[--rs],ts[rs]=null,on=ts[--rs],ts[rs]=null,nn=ts[--rs],ts[rs]=null}var ia=null,$r=null,ft=!1,Es=null,qs=!1,h0=Error(s(519));function Zi(o){var c=Error(s(418,""));throw Vc(es(c,o)),h0}function rN(o){var c=o.stateNode,f=o.type,g=o.memoizedProps;switch(c[ir]=o,c[ga]=g,f){case"dialog":st("cancel",c),st("close",c);break;case"iframe":case"object":case"embed":st("load",c);break;case"video":case"audio":for(f=0;f<pd.length;f++)st(pd[f],c);break;case"source":st("error",c);break;case"img":case"image":case"link":st("error",c),st("load",c);break;case"details":st("toggle",c);break;case"input":st("invalid",c),x1(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Xu(c);break;case"select":st("invalid",c);break;case"textarea":st("invalid",c),v1(c,g.value,g.defaultValue,g.children),Xu(c)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||g.suppressHydrationWarning===!0||u_(c.textContent,f)?(g.popover!=null&&(st("beforetoggle",c),st("toggle",c)),g.onScroll!=null&&st("scroll",c),g.onScrollEnd!=null&&st("scrollend",c),g.onClick!=null&&(c.onclick=Uh),c=!0):c=!1,c||Zi(o)}function aN(o){for(ia=o.return;ia;)switch(ia.tag){case 3:case 27:qs=!0;return;case 5:case 13:qs=!1;return;default:ia=ia.return}}function Fc(o){if(o!==ia)return!1;if(!ft)return aN(o),ft=!0,!1;var c=!1,f;if((f=o.tag!==3&&o.tag!==27)&&((f=o.tag===5)&&(f=o.type,f=!(f!=="form"&&f!=="button")||Pg(o.type,o.memoizedProps)),f=!f),f&&(c=!0),c&&$r&&Zi(o),aN(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(s(317));e:{for(o=o.nextSibling,c=0;o;){if(o.nodeType===8)if(f=o.data,f==="/$"){if(c===0){$r=Cs(o.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;o=o.nextSibling}$r=null}}else $r=ia?Cs(o.stateNode.nextSibling):null;return!0}function Hc(){$r=ia=null,ft=!1}function Vc(o){Es===null?Es=[o]:Es.push(o)}var Gc=Error(s(460)),sN=Error(s(474)),f0={then:function(){}};function nN(o){return o=o.status,o==="fulfilled"||o==="rejected"}function dh(){}function iN(o,c,f){switch(f=o[f],f===void 0?o.push(c):f!==c&&(c.then(dh,dh),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===Gc?Error(s(483)):o;default:if(typeof c.status=="string")c.then(dh,dh);else{if(o=Ot,o!==null&&100<o.shellSuspendCounter)throw Error(s(482));o=c,o.status="pending",o.then(function(g){if(c.status==="pending"){var E=c;E.status="fulfilled",E.value=g}},function(g){if(c.status==="pending"){var E=c;E.status="rejected",E.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw o=c.reason,o===Gc?Error(s(483)):o}throw Kc=c,Gc}}var Kc=null;function oN(){if(Kc===null)throw Error(s(459));var o=Kc;return Kc=null,o}var cl=null,Wc=0;function uh(o){var c=Wc;return Wc+=1,cl===null&&(cl=[]),iN(cl,o,c)}function Yc(o,c){c=c.props.ref,o.ref=c!==void 0?c:null}function hh(o,c){throw c.$$typeof===i?Error(s(525)):(o=Object.prototype.toString.call(c),Error(s(31,o==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":o)))}function lN(o){var c=o._init;return c(o._payload)}function cN(o){function c(me,ce){if(o){var ge=me.deletions;ge===null?(me.deletions=[ce],me.flags|=16):ge.push(ce)}}function f(me,ce){if(!o)return null;for(;ce!==null;)c(me,ce),ce=ce.sibling;return null}function g(me){for(var ce=new Map;me!==null;)me.key!==null?ce.set(me.key,me):ce.set(me.index,me),me=me.sibling;return ce}function E(me,ce){return me=li(me,ce),me.index=0,me.sibling=null,me}function C(me,ce,ge){return me.index=ge,o?(ge=me.alternate,ge!==null?(ge=ge.index,ge<ce?(me.flags|=33554434,ce):ge):(me.flags|=33554434,ce)):(me.flags|=1048576,ce)}function z(me){return o&&me.alternate===null&&(me.flags|=33554434),me}function q(me,ce,ge,Ce){return ce===null||ce.tag!==6?(ce=og(ge,me.mode,Ce),ce.return=me,ce):(ce=E(ce,ge),ce.return=me,ce)}function ae(me,ce,ge,Ce){var $e=ge.type;return $e===u?Se(me,ce,ge.props.children,Ce,ge.key):ce!==null&&(ce.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===S&&lN($e)===ce.type)?(ce=E(ce,ge.props),Yc(ce,ge),ce.return=me,ce):(ce=Oh(ge.type,ge.key,ge.props,null,me.mode,Ce),Yc(ce,ge),ce.return=me,ce)}function fe(me,ce,ge,Ce){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ge.containerInfo||ce.stateNode.implementation!==ge.implementation?(ce=lg(ge,me.mode,Ce),ce.return=me,ce):(ce=E(ce,ge.children||[]),ce.return=me,ce)}function Se(me,ce,ge,Ce,$e){return ce===null||ce.tag!==7?(ce=lo(ge,me.mode,Ce,$e),ce.return=me,ce):(ce=E(ce,ge),ce.return=me,ce)}function Ae(me,ce,ge){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=og(""+ce,me.mode,ge),ce.return=me,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ge=Oh(ce.type,ce.key,ce.props,null,me.mode,ge),Yc(ge,ce),ge.return=me,ge;case d:return ce=lg(ce,me.mode,ge),ce.return=me,ce;case S:var Ce=ce._init;return ce=Ce(ce._payload),Ae(me,ce,ge)}if(ne(ce)||O(ce))return ce=lo(ce,me.mode,ge,null),ce.return=me,ce;if(typeof ce.then=="function")return Ae(me,uh(ce),ge);if(ce.$$typeof===b)return Ae(me,kh(me,ce),ge);hh(me,ce)}return null}function ve(me,ce,ge,Ce){var $e=ce!==null?ce.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return $e!==null?null:q(me,ce,""+ge,Ce);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:return ge.key===$e?ae(me,ce,ge,Ce):null;case d:return ge.key===$e?fe(me,ce,ge,Ce):null;case S:return $e=ge._init,ge=$e(ge._payload),ve(me,ce,ge,Ce)}if(ne(ge)||O(ge))return $e!==null?null:Se(me,ce,ge,Ce,null);if(typeof ge.then=="function")return ve(me,ce,uh(ge),Ce);if(ge.$$typeof===b)return ve(me,ce,kh(me,ge),Ce);hh(me,ge)}return null}function Ne(me,ce,ge,Ce,$e){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return me=me.get(ge)||null,q(ce,me,""+Ce,$e);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case l:return me=me.get(Ce.key===null?ge:Ce.key)||null,ae(ce,me,Ce,$e);case d:return me=me.get(Ce.key===null?ge:Ce.key)||null,fe(ce,me,Ce,$e);case S:var rt=Ce._init;return Ce=rt(Ce._payload),Ne(me,ce,ge,Ce,$e)}if(ne(Ce)||O(Ce))return me=me.get(ge)||null,Se(ce,me,Ce,$e,null);if(typeof Ce.then=="function")return Ne(me,ce,ge,uh(Ce),$e);if(Ce.$$typeof===b)return Ne(me,ce,ge,kh(ce,Ce),$e);hh(ce,Ce)}return null}function He(me,ce,ge,Ce){for(var $e=null,rt=null,Ve=ce,Ke=ce=0,Rr=null;Ve!==null&&Ke<ge.length;Ke++){Ve.index>Ke?(Rr=Ve,Ve=null):Rr=Ve.sibling;var mt=ve(me,Ve,ge[Ke],Ce);if(mt===null){Ve===null&&(Ve=Rr);break}o&&Ve&&mt.alternate===null&&c(me,Ve),ce=C(mt,ce,Ke),rt===null?$e=mt:rt.sibling=mt,rt=mt,Ve=Rr}if(Ke===ge.length)return f(me,Ve),ft&&Ji(me,Ke),$e;if(Ve===null){for(;Ke<ge.length;Ke++)Ve=Ae(me,ge[Ke],Ce),Ve!==null&&(ce=C(Ve,ce,Ke),rt===null?$e=Ve:rt.sibling=Ve,rt=Ve);return ft&&Ji(me,Ke),$e}for(Ve=g(Ve);Ke<ge.length;Ke++)Rr=Ne(Ve,me,Ke,ge[Ke],Ce),Rr!==null&&(o&&Rr.alternate!==null&&Ve.delete(Rr.key===null?Ke:Rr.key),ce=C(Rr,ce,Ke),rt===null?$e=Rr:rt.sibling=Rr,rt=Rr);return o&&Ve.forEach(function(pi){return c(me,pi)}),ft&&Ji(me,Ke),$e}function Xe(me,ce,ge,Ce){if(ge==null)throw Error(s(151));for(var $e=null,rt=null,Ve=ce,Ke=ce=0,Rr=null,mt=ge.next();Ve!==null&&!mt.done;Ke++,mt=ge.next()){Ve.index>Ke?(Rr=Ve,Ve=null):Rr=Ve.sibling;var pi=ve(me,Ve,mt.value,Ce);if(pi===null){Ve===null&&(Ve=Rr);break}o&&Ve&&pi.alternate===null&&c(me,Ve),ce=C(pi,ce,Ke),rt===null?$e=pi:rt.sibling=pi,rt=pi,Ve=Rr}if(mt.done)return f(me,Ve),ft&&Ji(me,Ke),$e;if(Ve===null){for(;!mt.done;Ke++,mt=ge.next())mt=Ae(me,mt.value,Ce),mt!==null&&(ce=C(mt,ce,Ke),rt===null?$e=mt:rt.sibling=mt,rt=mt);return ft&&Ji(me,Ke),$e}for(Ve=g(Ve);!mt.done;Ke++,mt=ge.next())mt=Ne(Ve,me,Ke,mt.value,Ce),mt!==null&&(o&&mt.alternate!==null&&Ve.delete(mt.key===null?Ke:mt.key),ce=C(mt,ce,Ke),rt===null?$e=mt:rt.sibling=mt,rt=mt);return o&&Ve.forEach(function(WM){return c(me,WM)}),ft&&Ji(me,Ke),$e}function Jt(me,ce,ge,Ce){if(typeof ge=="object"&&ge!==null&&ge.type===u&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case l:e:{for(var $e=ge.key;ce!==null;){if(ce.key===$e){if($e=ge.type,$e===u){if(ce.tag===7){f(me,ce.sibling),Ce=E(ce,ge.props.children),Ce.return=me,me=Ce;break e}}else if(ce.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===S&&lN($e)===ce.type){f(me,ce.sibling),Ce=E(ce,ge.props),Yc(Ce,ge),Ce.return=me,me=Ce;break e}f(me,ce);break}else c(me,ce);ce=ce.sibling}ge.type===u?(Ce=lo(ge.props.children,me.mode,Ce,ge.key),Ce.return=me,me=Ce):(Ce=Oh(ge.type,ge.key,ge.props,null,me.mode,Ce),Yc(Ce,ge),Ce.return=me,me=Ce)}return z(me);case d:e:{for($e=ge.key;ce!==null;){if(ce.key===$e)if(ce.tag===4&&ce.stateNode.containerInfo===ge.containerInfo&&ce.stateNode.implementation===ge.implementation){f(me,ce.sibling),Ce=E(ce,ge.children||[]),Ce.return=me,me=Ce;break e}else{f(me,ce);break}else c(me,ce);ce=ce.sibling}Ce=lg(ge,me.mode,Ce),Ce.return=me,me=Ce}return z(me);case S:return $e=ge._init,ge=$e(ge._payload),Jt(me,ce,ge,Ce)}if(ne(ge))return He(me,ce,ge,Ce);if(O(ge)){if($e=O(ge),typeof $e!="function")throw Error(s(150));return ge=$e.call(ge),Xe(me,ce,ge,Ce)}if(typeof ge.then=="function")return Jt(me,ce,uh(ge),Ce);if(ge.$$typeof===b)return Jt(me,ce,kh(me,ge),Ce);hh(me,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ce!==null&&ce.tag===6?(f(me,ce.sibling),Ce=E(ce,ge),Ce.return=me,me=Ce):(f(me,ce),Ce=og(ge,me.mode,Ce),Ce.return=me,me=Ce),z(me)):f(me,ce)}return function(me,ce,ge,Ce){try{Wc=0;var $e=Jt(me,ce,ge,Ce);return cl=null,$e}catch(Ve){if(Ve===Gc)throw Ve;var rt=is(29,Ve,null,me.mode);return rt.lanes=Ce,rt.return=me,rt}finally{}}}var Qi=cN(!0),dN=cN(!1),dl=J(null),fh=J(0);function uN(o,c){o=bn,de(fh,o),de(dl,c),bn=o|c.baseLanes}function m0(){de(fh,bn),de(dl,dl.current)}function p0(){bn=fh.current,F(dl),F(fh)}var as=J(null),Fs=null;function Jn(o){var c=o.alternate;de(pr,pr.current&1),de(as,o),Fs===null&&(c===null||dl.current!==null||c.memoizedState!==null)&&(Fs=o)}function hN(o){if(o.tag===22){if(de(pr,pr.current),de(as,o),Fs===null){var c=o.alternate;c!==null&&c.memoizedState!==null&&(Fs=o)}}else Zn()}function Zn(){de(pr,pr.current),de(as,as.current)}function ln(o){F(as),Fs===o&&(Fs=null),F(pr)}var pr=J(0);function mh(o){for(var c=o;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var MD=typeof AbortController<"u"?AbortController:function(){var o=[],c=this.signal={aborted:!1,addEventListener:function(f,g){o.push(g)}};this.abort=function(){c.aborted=!0,o.forEach(function(f){return f()})}},ID=e.unstable_scheduleCallback,zD=e.unstable_NormalPriority,gr={$$typeof:b,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function g0(){return{controller:new MD,data:new Map,refCount:0}}function Xc(o){o.refCount--,o.refCount===0&&ID(zD,function(){o.controller.abort()})}var Jc=null,x0=0,ul=0,hl=null;function $D(o,c){if(Jc===null){var f=Jc=[];x0=0,ul=Ng(),hl={status:"pending",value:void 0,then:function(g){f.push(g)}}}return x0++,c.then(fN,fN),c}function fN(){if(--x0===0&&Jc!==null){hl!==null&&(hl.status="fulfilled");var o=Jc;Jc=null,ul=0,hl=null;for(var c=0;c<o.length;c++)(0,o[c])()}}function LD(o,c){var f=[],g={status:"pending",value:null,reason:null,then:function(E){f.push(E)}};return o.then(function(){g.status="fulfilled",g.value=c;for(var E=0;E<f.length;E++)(0,f[E])(c)},function(E){for(g.status="rejected",g.reason=E,E=0;E<f.length;E++)(0,f[E])(void 0)}),g}var mN=R.S;R.S=function(o,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&$D(o,c),mN!==null&&mN(o,c)};var eo=J(null);function b0(){var o=eo.current;return o!==null?o:Ot.pooledCache}function ph(o,c){c===null?de(eo,eo.current):de(eo,c.pool)}function pN(){var o=b0();return o===null?null:{parent:gr._currentValue,pool:o}}var Qn=0,et=null,yt=null,or=null,gh=!1,fl=!1,to=!1,xh=0,Zc=0,ml=null,BD=0;function ar(){throw Error(s(321))}function v0(o,c){if(c===null)return!1;for(var f=0;f<c.length&&f<o.length;f++)if(!Aa(o[f],c[f]))return!1;return!0}function y0(o,c,f,g,E,C){return Qn=C,et=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=o===null||o.memoizedState===null?ro:ei,to=!1,C=f(g,E),to=!1,fl&&(C=xN(c,f,g,E)),gN(o),C}function gN(o){R.H=Hs;var c=yt!==null&&yt.next!==null;if(Qn=0,or=yt=et=null,gh=!1,Zc=0,ml=null,c)throw Error(s(300));o===null||Tr||(o=o.dependencies,o!==null&&Eh(o)&&(Tr=!0))}function xN(o,c,f,g){et=o;var E=0;do{if(fl&&(ml=null),Zc=0,fl=!1,25<=E)throw Error(s(301));if(E+=1,or=yt=null,o.updateQueue!=null){var C=o.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}R.H=ao,C=c(f,g)}while(fl);return C}function UD(){var o=R.H,c=o.useState()[0];return c=typeof c.then=="function"?Qc(c):c,o=o.useState()[0],(yt!==null?yt.memoizedState:null)!==o&&(et.flags|=1024),c}function w0(){var o=xh!==0;return xh=0,o}function j0(o,c,f){c.updateQueue=o.updateQueue,c.flags&=-2053,o.lanes&=~f}function N0(o){if(gh){for(o=o.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}gh=!1}Qn=0,or=yt=et=null,fl=!1,Zc=xh=0,ml=null}function ba(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?et.memoizedState=or=o:or=or.next=o,or}function lr(){if(yt===null){var o=et.alternate;o=o!==null?o.memoizedState:null}else o=yt.next;var c=or===null?et.memoizedState:or.next;if(c!==null)or=c,yt=o;else{if(o===null)throw et.alternate===null?Error(s(467)):Error(s(310));yt=o,o={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},or===null?et.memoizedState=or=o:or=or.next=o}return or}var bh;bh=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function Qc(o){var c=Zc;return Zc+=1,ml===null&&(ml=[]),o=iN(ml,o,c),c=et,(or===null?c.memoizedState:or.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?ro:ei),o}function vh(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Qc(o);if(o.$$typeof===b)return Jr(o)}throw Error(s(438,String(o)))}function _0(o){var c=null,f=et.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var g=et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(E){return E.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=bh(),et.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(o),g=0;g<o;g++)f[g]=k;return c.index++,f}function cn(o,c){return typeof c=="function"?c(o):c}function yh(o){var c=lr();return S0(c,yt,o)}function S0(o,c,f){var g=o.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=f;var E=o.baseQueue,C=g.pending;if(C!==null){if(E!==null){var z=E.next;E.next=C.next,C.next=z}c.baseQueue=E=C,g.pending=null}if(C=o.baseState,E===null)o.memoizedState=C;else{c=E.next;var q=z=null,ae=null,fe=c,Se=!1;do{var Ae=fe.lane&-536870913;if(Ae!==fe.lane?(ot&Ae)===Ae:(Qn&Ae)===Ae){var ve=fe.revertLane;if(ve===0)ae!==null&&(ae=ae.next={lane:0,revertLane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ae===ul&&(Se=!0);else if((Qn&ve)===ve){fe=fe.next,ve===ul&&(Se=!0);continue}else Ae={lane:0,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},ae===null?(q=ae=Ae,z=C):ae=ae.next=Ae,et.lanes|=ve,ci|=ve;Ae=fe.action,to&&f(C,Ae),C=fe.hasEagerState?fe.eagerState:f(C,Ae)}else ve={lane:Ae,revertLane:fe.revertLane,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},ae===null?(q=ae=ve,z=C):ae=ae.next=ve,et.lanes|=Ae,ci|=Ae;fe=fe.next}while(fe!==null&&fe!==c);if(ae===null?z=C:ae.next=q,!Aa(C,o.memoizedState)&&(Tr=!0,Se&&(f=hl,f!==null)))throw f;o.memoizedState=C,o.baseState=z,o.baseQueue=ae,g.lastRenderedState=C}return E===null&&(g.lanes=0),[o.memoizedState,g.dispatch]}function E0(o){var c=lr(),f=c.queue;if(f===null)throw Error(s(311));f.lastRenderedReducer=o;var g=f.dispatch,E=f.pending,C=c.memoizedState;if(E!==null){f.pending=null;var z=E=E.next;do C=o(C,z.action),z=z.next;while(z!==E);Aa(C,c.memoizedState)||(Tr=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,g]}function bN(o,c,f){var g=et,E=lr(),C=ft;if(C){if(f===void 0)throw Error(s(407));f=f()}else f=c();var z=!Aa((yt||E).memoizedState,f);if(z&&(E.memoizedState=f,Tr=!0),E=E.queue,A0(wN.bind(null,g,E,o),[o]),E.getSnapshot!==c||z||or!==null&&or.memoizedState.tag&1){if(g.flags|=2048,pl(9,yN.bind(null,g,E,f,c),{destroy:void 0},null),Ot===null)throw Error(s(349));C||(Qn&60)!==0||vN(g,c,f)}return f}function vN(o,c,f){o.flags|=16384,o={getSnapshot:c,value:f},c=et.updateQueue,c===null?(c=bh(),et.updateQueue=c,c.stores=[o]):(f=c.stores,f===null?c.stores=[o]:f.push(o))}function yN(o,c,f,g){c.value=f,c.getSnapshot=g,jN(c)&&NN(o)}function wN(o,c,f){return f(function(){jN(c)&&NN(o)})}function jN(o){var c=o.getSnapshot;o=o.value;try{var f=c();return!Aa(o,f)}catch{return!0}}function NN(o){var c=Xn(o,2);c!==null&&oa(c,o,2)}function k0(o){var c=ba();if(typeof o=="function"){var f=o;if(o=f(),to){dt(!0);try{f()}finally{dt(!1)}}}return c.memoizedState=c.baseState=o,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:o},c}function _N(o,c,f,g){return o.baseState=f,S0(o,yt,typeof g=="function"?g:cn)}function qD(o,c,f,g,E){if(Nh(o))throw Error(s(485));if(o=c.action,o!==null){var C={payload:E,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){C.listeners.push(z)}};R.T!==null?f(!0):C.isTransition=!1,g(C),f=c.pending,f===null?(C.next=c.pending=C,SN(c,C)):(C.next=f.next,c.pending=f.next=C)}}function SN(o,c){var f=c.action,g=c.payload,E=o.state;if(c.isTransition){var C=R.T,z={};R.T=z;try{var q=f(E,g),ae=R.S;ae!==null&&ae(z,q),EN(o,c,q)}catch(fe){C0(o,c,fe)}finally{R.T=C}}else try{C=f(E,g),EN(o,c,C)}catch(fe){C0(o,c,fe)}}function EN(o,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){kN(o,c,g)},function(g){return C0(o,c,g)}):kN(o,c,f)}function kN(o,c,f){c.status="fulfilled",c.value=f,CN(c),o.state=f,c=o.pending,c!==null&&(f=c.next,f===c?o.pending=null:(f=f.next,c.next=f,SN(o,f)))}function C0(o,c,f){var g=o.pending;if(o.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=f,CN(c),c=c.next;while(c!==g)}o.action=null}function CN(o){o=o.listeners;for(var c=0;c<o.length;c++)(0,o[c])()}function AN(o,c){return c}function ON(o,c){if(ft){var f=Ot.formState;if(f!==null){e:{var g=et;if(ft){if($r){t:{for(var E=$r,C=qs;E.nodeType!==8;){if(!C){E=null;break t}if(E=Cs(E.nextSibling),E===null){E=null;break t}}C=E.data,E=C==="F!"||C==="F"?E:null}if(E){$r=Cs(E.nextSibling),g=E.data==="F!";break e}}Zi(g)}g=!1}g&&(c=f[0])}}return f=ba(),f.memoizedState=f.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:AN,lastRenderedState:c},f.queue=g,f=WN.bind(null,et,g),g.dispatch=f,g=k0(!1),C=D0.bind(null,et,!1,g.queue),g=ba(),E={state:c,dispatch:null,action:o,pending:null},g.queue=E,f=qD.bind(null,et,E,C,f),E.dispatch=f,g.memoizedState=o,[c,f,!1]}function TN(o){var c=lr();return PN(c,yt,o)}function PN(o,c,f){c=S0(o,c,AN)[0],o=yh(cn)[0],c=typeof c=="object"&&c!==null&&typeof c.then=="function"?Qc(c):c;var g=lr(),E=g.queue,C=E.dispatch;return f!==g.memoizedState&&(et.flags|=2048,pl(9,FD.bind(null,E,f),{destroy:void 0},null)),[c,C,o]}function FD(o,c){o.action=c}function RN(o){var c=lr(),f=yt;if(f!==null)return PN(c,f,o);lr(),c=c.memoizedState,f=lr();var g=f.queue.dispatch;return f.memoizedState=o,[c,g,!1]}function pl(o,c,f,g){return o={tag:o,create:c,inst:f,deps:g,next:null},c=et.updateQueue,c===null&&(c=bh(),et.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=o.next=o:(g=f.next,f.next=o,o.next=g,c.lastEffect=o),o}function DN(){return lr().memoizedState}function wh(o,c,f,g){var E=ba();et.flags|=o,E.memoizedState=pl(1|c,f,{destroy:void 0},g===void 0?null:g)}function jh(o,c,f,g){var E=lr();g=g===void 0?null:g;var C=E.memoizedState.inst;yt!==null&&g!==null&&v0(g,yt.memoizedState.deps)?E.memoizedState=pl(c,f,C,g):(et.flags|=o,E.memoizedState=pl(1|c,f,C,g))}function MN(o,c){wh(8390656,8,o,c)}function A0(o,c){jh(2048,8,o,c)}function IN(o,c){return jh(4,2,o,c)}function zN(o,c){return jh(4,4,o,c)}function $N(o,c){if(typeof c=="function"){o=o();var f=c(o);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return o=o(),c.current=o,function(){c.current=null}}function LN(o,c,f){f=f!=null?f.concat([o]):null,jh(4,4,$N.bind(null,c,o),f)}function O0(){}function BN(o,c){var f=lr();c=c===void 0?null:c;var g=f.memoizedState;return c!==null&&v0(c,g[1])?g[0]:(f.memoizedState=[o,c],o)}function UN(o,c){var f=lr();c=c===void 0?null:c;var g=f.memoizedState;if(c!==null&&v0(c,g[1]))return g[0];if(g=o(),to){dt(!0);try{o()}finally{dt(!1)}}return f.memoizedState=[g,c],g}function T0(o,c,f){return f===void 0||(Qn&1073741824)!==0?o.memoizedState=c:(o.memoizedState=f,o=F2(),et.lanes|=o,ci|=o,f)}function qN(o,c,f,g){return Aa(f,c)?f:dl.current!==null?(o=T0(o,f,g),Aa(o,c)||(Tr=!0),o):(Qn&42)===0?(Tr=!0,o.memoizedState=f):(o=F2(),et.lanes|=o,ci|=o,c)}function FN(o,c,f,g,E){var C=ie.p;ie.p=C!==0&&8>C?C:8;var z=R.T,q={};R.T=q,D0(o,!1,c,f);try{var ae=E(),fe=R.S;if(fe!==null&&fe(q,ae),ae!==null&&typeof ae=="object"&&typeof ae.then=="function"){var Se=LD(ae,g);ed(o,c,Se,Ra(o))}else ed(o,c,g,Ra(o))}catch(Ae){ed(o,c,{then:function(){},status:"rejected",reason:Ae},Ra())}finally{ie.p=C,R.T=z}}function HD(){}function P0(o,c,f,g){if(o.tag!==5)throw Error(s(476));var E=HN(o).queue;FN(o,E,c,ee,f===null?HD:function(){return VN(o),f(g)})}function HN(o){var c=o.memoizedState;if(c!==null)return c;c={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:ee},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cn,lastRenderedState:f},next:null},o.memoizedState=c,o=o.alternate,o!==null&&(o.memoizedState=c),c}function VN(o){var c=HN(o).next.queue;ed(o,c,{},Ra())}function R0(){return Jr(yd)}function GN(){return lr().memoizedState}function KN(){return lr().memoizedState}function VD(o){for(var c=o.return;c!==null;){switch(c.tag){case 24:case 3:var f=Ra();o=ai(f);var g=si(c,o,f);g!==null&&(oa(g,c,f),ad(g,c,f)),c={cache:g0()},o.payload=c;return}c=c.return}}function GD(o,c,f){var g=Ra();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Nh(o)?YN(c,f):(f=c0(o,c,f,g),f!==null&&(oa(f,o,g),XN(f,c,g)))}function WN(o,c,f){var g=Ra();ed(o,c,f,g)}function ed(o,c,f,g){var E={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Nh(o))YN(c,E);else{var C=o.alternate;if(o.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var z=c.lastRenderedState,q=C(z,f);if(E.hasEagerState=!0,E.eagerState=q,Aa(q,z))return ih(o,c,E,0),Ot===null&&nh(),!1}catch{}finally{}if(f=c0(o,c,E,g),f!==null)return oa(f,o,g),XN(f,c,g),!0}return!1}function D0(o,c,f,g){if(g={lane:2,revertLane:Ng(),action:g,hasEagerState:!1,eagerState:null,next:null},Nh(o)){if(c)throw Error(s(479))}else c=c0(o,f,g,2),c!==null&&oa(c,o,2)}function Nh(o){var c=o.alternate;return o===et||c!==null&&c===et}function YN(o,c){fl=gh=!0;var f=o.pending;f===null?c.next=c:(c.next=f.next,f.next=c),o.pending=c}function XN(o,c,f){if((f&4194176)!==0){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,Xa(o,f)}}var Hs={readContext:Jr,use:vh,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useLayoutEffect:ar,useInsertionEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useSyncExternalStore:ar,useId:ar};Hs.useCacheRefresh=ar,Hs.useMemoCache=ar,Hs.useHostTransitionStatus=ar,Hs.useFormState=ar,Hs.useActionState=ar,Hs.useOptimistic=ar;var ro={readContext:Jr,use:vh,useCallback:function(o,c){return ba().memoizedState=[o,c===void 0?null:c],o},useContext:Jr,useEffect:MN,useImperativeHandle:function(o,c,f){f=f!=null?f.concat([o]):null,wh(4194308,4,$N.bind(null,c,o),f)},useLayoutEffect:function(o,c){return wh(4194308,4,o,c)},useInsertionEffect:function(o,c){wh(4,2,o,c)},useMemo:function(o,c){var f=ba();c=c===void 0?null:c;var g=o();if(to){dt(!0);try{o()}finally{dt(!1)}}return f.memoizedState=[g,c],g},useReducer:function(o,c,f){var g=ba();if(f!==void 0){var E=f(c);if(to){dt(!0);try{f(c)}finally{dt(!1)}}}else E=c;return g.memoizedState=g.baseState=E,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:E},g.queue=o,o=o.dispatch=GD.bind(null,et,o),[g.memoizedState,o]},useRef:function(o){var c=ba();return o={current:o},c.memoizedState=o},useState:function(o){o=k0(o);var c=o.queue,f=WN.bind(null,et,c);return c.dispatch=f,[o.memoizedState,f]},useDebugValue:O0,useDeferredValue:function(o,c){var f=ba();return T0(f,o,c)},useTransition:function(){var o=k0(!1);return o=FN.bind(null,et,o.queue,!0,!1),ba().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,c,f){var g=et,E=ba();if(ft){if(f===void 0)throw Error(s(407));f=f()}else{if(f=c(),Ot===null)throw Error(s(349));(ot&60)!==0||vN(g,c,f)}E.memoizedState=f;var C={value:f,getSnapshot:c};return E.queue=C,MN(wN.bind(null,g,C,o),[o]),g.flags|=2048,pl(9,yN.bind(null,g,C,f,c),{destroy:void 0},null),f},useId:function(){var o=ba(),c=Ot.identifierPrefix;if(ft){var f=on,g=nn;f=(g&~(1<<32-Wt(g)-1)).toString(32)+f,c=":"+c+"R"+f,f=xh++,0<f&&(c+="H"+f.toString(32)),c+=":"}else f=BD++,c=":"+c+"r"+f.toString(32)+":";return o.memoizedState=c},useCacheRefresh:function(){return ba().memoizedState=VD.bind(null,et)}};ro.useMemoCache=_0,ro.useHostTransitionStatus=R0,ro.useFormState=ON,ro.useActionState=ON,ro.useOptimistic=function(o){var c=ba();c.memoizedState=c.baseState=o;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=D0.bind(null,et,!0,f),f.dispatch=c,[o,c]};var ei={readContext:Jr,use:vh,useCallback:BN,useContext:Jr,useEffect:A0,useImperativeHandle:LN,useInsertionEffect:IN,useLayoutEffect:zN,useMemo:UN,useReducer:yh,useRef:DN,useState:function(){return yh(cn)},useDebugValue:O0,useDeferredValue:function(o,c){var f=lr();return qN(f,yt.memoizedState,o,c)},useTransition:function(){var o=yh(cn)[0],c=lr().memoizedState;return[typeof o=="boolean"?o:Qc(o),c]},useSyncExternalStore:bN,useId:GN};ei.useCacheRefresh=KN,ei.useMemoCache=_0,ei.useHostTransitionStatus=R0,ei.useFormState=TN,ei.useActionState=TN,ei.useOptimistic=function(o,c){var f=lr();return _N(f,yt,o,c)};var ao={readContext:Jr,use:vh,useCallback:BN,useContext:Jr,useEffect:A0,useImperativeHandle:LN,useInsertionEffect:IN,useLayoutEffect:zN,useMemo:UN,useReducer:E0,useRef:DN,useState:function(){return E0(cn)},useDebugValue:O0,useDeferredValue:function(o,c){var f=lr();return yt===null?T0(f,o,c):qN(f,yt.memoizedState,o,c)},useTransition:function(){var o=E0(cn)[0],c=lr().memoizedState;return[typeof o=="boolean"?o:Qc(o),c]},useSyncExternalStore:bN,useId:GN};ao.useCacheRefresh=KN,ao.useMemoCache=_0,ao.useHostTransitionStatus=R0,ao.useFormState=RN,ao.useActionState=RN,ao.useOptimistic=function(o,c){var f=lr();return yt!==null?_N(f,yt,o,c):(f.baseState=o,[o,f.queue.dispatch])};function M0(o,c,f,g){c=o.memoizedState,f=f(g,c),f=f==null?c:I({},c,f),o.memoizedState=f,o.lanes===0&&(o.updateQueue.baseState=f)}var I0={isMounted:function(o){return(o=o._reactInternals)?Q(o)===o:!1},enqueueSetState:function(o,c,f){o=o._reactInternals;var g=Ra(),E=ai(g);E.payload=c,f!=null&&(E.callback=f),c=si(o,E,g),c!==null&&(oa(c,o,g),ad(c,o,g))},enqueueReplaceState:function(o,c,f){o=o._reactInternals;var g=Ra(),E=ai(g);E.tag=1,E.payload=c,f!=null&&(E.callback=f),c=si(o,E,g),c!==null&&(oa(c,o,g),ad(c,o,g))},enqueueForceUpdate:function(o,c){o=o._reactInternals;var f=Ra(),g=ai(f);g.tag=2,c!=null&&(g.callback=c),c=si(o,g,f),c!==null&&(oa(c,o,f),ad(c,o,f))}};function JN(o,c,f,g,E,C,z){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(g,C,z):c.prototype&&c.prototype.isPureReactComponent?!Uc(f,g)||!Uc(E,C):!0}function ZN(o,c,f,g){o=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==o&&I0.enqueueReplaceState(c,c.state,null)}function so(o,c){var f=c;if("ref"in c){f={};for(var g in c)g!=="ref"&&(f[g]=c[g])}if(o=o.defaultProps){f===c&&(f=I({},f));for(var E in o)f[E]===void 0&&(f[E]=o[E])}return f}var _h=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function QN(o){_h(o)}function e2(o){console.error(o)}function t2(o){_h(o)}function Sh(o,c){try{var f=o.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function r2(o,c,f){try{var g=o.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function z0(o,c,f){return f=ai(f),f.tag=3,f.payload={element:null},f.callback=function(){Sh(o,c)},f}function a2(o){return o=ai(o),o.tag=3,o}function s2(o,c,f,g){var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var C=g.value;o.payload=function(){return E(C)},o.callback=function(){r2(c,f,g)}}var z=f.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(o.callback=function(){r2(c,f,g),typeof E!="function"&&(di===null?di=new Set([this]):di.add(this));var q=g.stack;this.componentDidCatch(g.value,{componentStack:q!==null?q:""})})}function KD(o,c,f,g,E){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=f.alternate,c!==null&&rd(c,f,E,!0),f=as.current,f!==null){switch(f.tag){case 13:return Fs===null?bg():f.alternate===null&&Xt===0&&(Xt=3),f.flags&=-257,f.flags|=65536,f.lanes=E,g===f0?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([g]):c.add(g),yg(o,g,E)),!1;case 22:return f.flags|=65536,g===f0?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([g]):f.add(g)),yg(o,g,E)),!1}throw Error(s(435,f.tag))}return yg(o,g,E),bg(),!1}if(ft)return c=as.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=E,g!==h0&&(o=Error(s(422),{cause:g}),Vc(es(o,f)))):(g!==h0&&(c=Error(s(423),{cause:g}),Vc(es(c,f))),o=o.current.alternate,o.flags|=65536,E&=-E,o.lanes|=E,g=es(g,f),E=z0(o.stateNode,g,E),Z0(o,E),Xt!==4&&(Xt=2)),!1;var C=Error(s(520),{cause:g});if(C=es(C,f),ud===null?ud=[C]:ud.push(C),Xt!==4&&(Xt=2),c===null)return!0;g=es(g,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,o=E&-E,f.lanes|=o,o=z0(f.stateNode,g,o),Z0(f,o),!1;case 1:if(c=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(di===null||!di.has(C))))return f.flags|=65536,E&=-E,f.lanes|=E,E=a2(E),s2(E,o,f,g),Z0(f,E),!1}f=f.return}while(f!==null);return!1}var n2=Error(s(461)),Tr=!1;function Lr(o,c,f,g){c.child=o===null?dN(c,null,f,g):Qi(c,o.child,f,g)}function i2(o,c,f,g,E){f=f.render;var C=c.ref;if("ref"in g){var z={};for(var q in g)q!=="ref"&&(z[q]=g[q])}else z=g;return io(c),g=y0(o,c,f,z,C,E),q=w0(),o!==null&&!Tr?(j0(o,c,E),dn(o,c,E)):(ft&&q&&d0(c),c.flags|=1,Lr(o,c,g,E),c.child)}function o2(o,c,f,g,E){if(o===null){var C=f.type;return typeof C=="function"&&!ig(C)&&C.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=C,l2(o,c,C,g,E)):(o=Oh(f.type,null,g,c,c.mode,E),o.ref=c.ref,o.return=c,c.child=o)}if(C=o.child,!G0(o,E)){var z=C.memoizedProps;if(f=f.compare,f=f!==null?f:Uc,f(z,g)&&o.ref===c.ref)return dn(o,c,E)}return c.flags|=1,o=li(C,g),o.ref=c.ref,o.return=c,c.child=o}function l2(o,c,f,g,E){if(o!==null){var C=o.memoizedProps;if(Uc(C,g)&&o.ref===c.ref)if(Tr=!1,c.pendingProps=g=C,G0(o,E))(o.flags&131072)!==0&&(Tr=!0);else return c.lanes=o.lanes,dn(o,c,E)}return $0(o,c,f,g,E)}function c2(o,c,f){var g=c.pendingProps,E=g.children,C=(c.stateNode._pendingVisibility&2)!==0,z=o!==null?o.memoizedState:null;if(td(o,c),g.mode==="hidden"||C){if((c.flags&128)!==0){if(g=z!==null?z.baseLanes|f:f,o!==null){for(E=c.child=o.child,C=0;E!==null;)C=C|E.lanes|E.childLanes,E=E.sibling;c.childLanes=C&~g}else c.childLanes=0,c.child=null;return d2(o,c,g,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},o!==null&&ph(c,z!==null?z.cachePool:null),z!==null?uN(c,z):m0(),hN(c);else return c.lanes=c.childLanes=536870912,d2(o,c,z!==null?z.baseLanes|f:f,f)}else z!==null?(ph(c,z.cachePool),uN(c,z),Zn(),c.memoizedState=null):(o!==null&&ph(c,null),m0(),Zn());return Lr(o,c,E,f),c.child}function d2(o,c,f,g){var E=b0();return E=E===null?null:{parent:gr._currentValue,pool:E},c.memoizedState={baseLanes:f,cachePool:E},o!==null&&ph(c,null),m0(),hN(c),o!==null&&rd(o,c,g,!0),null}function td(o,c){var f=c.ref;if(f===null)o!==null&&o.ref!==null&&(c.flags|=2097664);else{if(typeof f!="function"&&typeof f!="object")throw Error(s(284));(o===null||o.ref!==f)&&(c.flags|=2097664)}}function $0(o,c,f,g,E){return io(c),f=y0(o,c,f,g,void 0,E),g=w0(),o!==null&&!Tr?(j0(o,c,E),dn(o,c,E)):(ft&&g&&d0(c),c.flags|=1,Lr(o,c,f,E),c.child)}function u2(o,c,f,g,E,C){return io(c),c.updateQueue=null,f=xN(c,g,f,E),gN(o),g=w0(),o!==null&&!Tr?(j0(o,c,C),dn(o,c,C)):(ft&&g&&d0(c),c.flags|=1,Lr(o,c,f,C),c.child)}function h2(o,c,f,g,E){if(io(c),c.stateNode===null){var C=il,z=f.contextType;typeof z=="object"&&z!==null&&(C=Jr(z)),C=new f(g,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=I0,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=g,C.state=c.memoizedState,C.refs={},X0(c),z=f.contextType,C.context=typeof z=="object"&&z!==null?Jr(z):il,C.state=c.memoizedState,z=f.getDerivedStateFromProps,typeof z=="function"&&(M0(c,f,z,g),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(z=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),z!==C.state&&I0.enqueueReplaceState(C,C.state,null),nd(c,g,C,E),sd(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(o===null){C=c.stateNode;var q=c.memoizedProps,ae=so(f,q);C.props=ae;var fe=C.context,Se=f.contextType;z=il,typeof Se=="object"&&Se!==null&&(z=Jr(Se));var Ae=f.getDerivedStateFromProps;Se=typeof Ae=="function"||typeof C.getSnapshotBeforeUpdate=="function",q=c.pendingProps!==q,Se||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(q||fe!==z)&&ZN(c,C,g,z),ri=!1;var ve=c.memoizedState;C.state=ve,nd(c,g,C,E),sd(),fe=c.memoizedState,q||ve!==fe||ri?(typeof Ae=="function"&&(M0(c,f,Ae,g),fe=c.memoizedState),(ae=ri||JN(c,f,ae,g,ve,fe,z))?(Se||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=fe),C.props=g,C.state=fe,C.context=z,g=ae):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{C=c.stateNode,J0(o,c),z=c.memoizedProps,Se=so(f,z),C.props=Se,Ae=c.pendingProps,ve=C.context,fe=f.contextType,ae=il,typeof fe=="object"&&fe!==null&&(ae=Jr(fe)),q=f.getDerivedStateFromProps,(fe=typeof q=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(z!==Ae||ve!==ae)&&ZN(c,C,g,ae),ri=!1,ve=c.memoizedState,C.state=ve,nd(c,g,C,E),sd();var Ne=c.memoizedState;z!==Ae||ve!==Ne||ri||o!==null&&o.dependencies!==null&&Eh(o.dependencies)?(typeof q=="function"&&(M0(c,f,q,g),Ne=c.memoizedState),(Se=ri||JN(c,f,Se,g,ve,Ne,ae)||o!==null&&o.dependencies!==null&&Eh(o.dependencies))?(fe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,Ne,ae),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,Ne,ae)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||z===o.memoizedProps&&ve===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&ve===o.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=Ne),C.props=g,C.state=Ne,C.context=ae,g=Se):(typeof C.componentDidUpdate!="function"||z===o.memoizedProps&&ve===o.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||z===o.memoizedProps&&ve===o.memoizedState||(c.flags|=1024),g=!1)}return C=g,td(o,c),g=(c.flags&128)!==0,C||g?(C=c.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,o!==null&&g?(c.child=Qi(c,o.child,null,E),c.child=Qi(c,null,f,E)):Lr(o,c,f,E),c.memoizedState=C.state,o=c.child):o=dn(o,c,E),o}function f2(o,c,f,g){return Hc(),c.flags|=256,Lr(o,c,f,g),c.child}var L0={dehydrated:null,treeContext:null,retryLane:0};function B0(o){return{baseLanes:o,cachePool:pN()}}function U0(o,c,f){return o=o!==null?o.childLanes&~f:0,c&&(o|=os),o}function m2(o,c,f){var g=c.pendingProps,E=!1,C=(c.flags&128)!==0,z;if((z=C)||(z=o!==null&&o.memoizedState===null?!1:(pr.current&2)!==0),z&&(E=!0,c.flags&=-129),z=(c.flags&32)!==0,c.flags&=-33,o===null){if(ft){if(E?Jn(c):Zn(),ft){var q=$r,ae;if(ae=q){e:{for(ae=q,q=qs;ae.nodeType!==8;){if(!q){q=null;break e}if(ae=Cs(ae.nextSibling),ae===null){q=null;break e}}q=ae}q!==null?(c.memoizedState={dehydrated:q,treeContext:Xi!==null?{id:nn,overflow:on}:null,retryLane:536870912},ae=is(18,null,null,0),ae.stateNode=q,ae.return=c,c.child=ae,ia=c,$r=null,ae=!0):ae=!1}ae||Zi(c)}if(q=c.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return q.data==="$!"?c.lanes=16:c.lanes=536870912,null;ln(c)}return q=g.children,g=g.fallback,E?(Zn(),E=c.mode,q=F0({mode:"hidden",children:q},E),g=lo(g,E,f,null),q.return=c,g.return=c,q.sibling=g,c.child=q,E=c.child,E.memoizedState=B0(f),E.childLanes=U0(o,z,f),c.memoizedState=L0,g):(Jn(c),q0(c,q))}if(ae=o.memoizedState,ae!==null&&(q=ae.dehydrated,q!==null)){if(C)c.flags&256?(Jn(c),c.flags&=-257,c=H0(o,c,f)):c.memoizedState!==null?(Zn(),c.child=o.child,c.flags|=128,c=null):(Zn(),E=g.fallback,q=c.mode,g=F0({mode:"visible",children:g.children},q),E=lo(E,q,f,null),E.flags|=2,g.return=c,E.return=c,g.sibling=E,c.child=g,Qi(c,o.child,null,f),g=c.child,g.memoizedState=B0(f),g.childLanes=U0(o,z,f),c.memoizedState=L0,c=E);else if(Jn(c),q.data==="$!"){if(z=q.nextSibling&&q.nextSibling.dataset,z)var fe=z.dgst;z=fe,g=Error(s(419)),g.stack="",g.digest=z,Vc({value:g,source:null,stack:null}),c=H0(o,c,f)}else if(Tr||rd(o,c,f,!1),z=(f&o.childLanes)!==0,Tr||z){if(z=Ot,z!==null){if(g=f&-f,(g&42)!==0)g=1;else switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=64;break;case 268435456:g=134217728;break;default:g=0}if(g=(g&(z.suspendedLanes|f))!==0?0:g,g!==0&&g!==ae.retryLane)throw ae.retryLane=g,Xn(o,g),oa(z,o,g),n2}q.data==="$?"||bg(),c=H0(o,c,f)}else q.data==="$?"?(c.flags|=128,c.child=o.child,c=lM.bind(null,o),q._reactRetry=c,c=null):(o=ae.treeContext,$r=Cs(q.nextSibling),ia=c,ft=!0,Es=null,qs=!1,o!==null&&(ts[rs++]=nn,ts[rs++]=on,ts[rs++]=Xi,nn=o.id,on=o.overflow,Xi=c),c=q0(c,g.children),c.flags|=4096);return c}return E?(Zn(),E=g.fallback,q=c.mode,ae=o.child,fe=ae.sibling,g=li(ae,{mode:"hidden",children:g.children}),g.subtreeFlags=ae.subtreeFlags&31457280,fe!==null?E=li(fe,E):(E=lo(E,q,f,null),E.flags|=2),E.return=c,g.return=c,g.sibling=E,c.child=g,g=E,E=c.child,q=o.child.memoizedState,q===null?q=B0(f):(ae=q.cachePool,ae!==null?(fe=gr._currentValue,ae=ae.parent!==fe?{parent:fe,pool:fe}:ae):ae=pN(),q={baseLanes:q.baseLanes|f,cachePool:ae}),E.memoizedState=q,E.childLanes=U0(o,z,f),c.memoizedState=L0,g):(Jn(c),f=o.child,o=f.sibling,f=li(f,{mode:"visible",children:g.children}),f.return=c,f.sibling=null,o!==null&&(z=c.deletions,z===null?(c.deletions=[o],c.flags|=16):z.push(o)),c.child=f,c.memoizedState=null,f)}function q0(o,c){return c=F0({mode:"visible",children:c},o.mode),c.return=o,o.child=c}function F0(o,c){return B2(o,c,0,null)}function H0(o,c,f){return Qi(c,o.child,null,f),o=q0(c,c.pendingProps.children),o.flags|=2,c.memoizedState=null,o}function p2(o,c,f){o.lanes|=c;var g=o.alternate;g!==null&&(g.lanes|=c),W0(o.return,c,f)}function V0(o,c,f,g,E){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:E}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=f,C.tailMode=E)}function g2(o,c,f){var g=c.pendingProps,E=g.revealOrder,C=g.tail;if(Lr(o,c,g.children,f),g=pr.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=c.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&p2(o,f,c);else if(o.tag===19)p2(o,f,c);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===c)break e;for(;o.sibling===null;){if(o.return===null||o.return===c)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}g&=1}switch(de(pr,g),E){case"forwards":for(f=c.child,E=null;f!==null;)o=f.alternate,o!==null&&mh(o)===null&&(E=f),f=f.sibling;f=E,f===null?(E=c.child,c.child=null):(E=f.sibling,f.sibling=null),V0(c,!1,E,f,C);break;case"backwards":for(f=null,E=c.child,c.child=null;E!==null;){if(o=E.alternate,o!==null&&mh(o)===null){c.child=E;break}o=E.sibling,E.sibling=f,f=E,E=o}V0(c,!0,f,null,C);break;case"together":V0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function dn(o,c,f){if(o!==null&&(c.dependencies=o.dependencies),ci|=c.lanes,(f&c.childLanes)===0)if(o!==null){if(rd(o,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(o!==null&&c.child!==o.child)throw Error(s(153));if(c.child!==null){for(o=c.child,f=li(o,o.pendingProps),c.child=f,f.return=c;o.sibling!==null;)o=o.sibling,f=f.sibling=li(o,o.pendingProps),f.return=c;f.sibling=null}return c.child}function G0(o,c){return(o.lanes&c)!==0?!0:(o=o.dependencies,!!(o!==null&&Eh(o)))}function WD(o,c,f){switch(c.tag){case 3:xe(c,c.stateNode.containerInfo),ti(c,gr,o.memoizedState.cache),Hc();break;case 27:case 5:X(c);break;case 4:xe(c,c.stateNode.containerInfo);break;case 10:ti(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(Jn(c),c.flags|=128,null):(f&c.child.childLanes)!==0?m2(o,c,f):(Jn(c),o=dn(o,c,f),o!==null?o.sibling:null);Jn(c);break;case 19:var E=(o.flags&128)!==0;if(g=(f&c.childLanes)!==0,g||(rd(o,c,f,!1),g=(f&c.childLanes)!==0),E){if(g)return g2(o,c,f);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),de(pr,pr.current),g)break;return null;case 22:case 23:return c.lanes=0,c2(o,c,f);case 24:ti(c,gr,o.memoizedState.cache)}return dn(o,c,f)}function x2(o,c,f){if(o!==null)if(o.memoizedProps!==c.pendingProps)Tr=!0;else{if(!G0(o,f)&&(c.flags&128)===0)return Tr=!1,WD(o,c,f);Tr=(o.flags&131072)!==0}else Tr=!1,ft&&(c.flags&1048576)!==0&&tN(c,ch,c.index);switch(c.lanes=0,c.tag){case 16:e:{o=c.pendingProps;var g=c.elementType,E=g._init;if(g=E(g._payload),c.type=g,typeof g=="function")ig(g)?(o=so(g,o),c.tag=1,c=h2(null,c,g,o,f)):(c.tag=0,c=$0(null,c,g,o,f));else{if(g!=null){if(E=g.$$typeof,E===y){c.tag=11,c=i2(null,c,g,o,f);break e}else if(E===N){c.tag=14,c=o2(null,c,g,o,f);break e}}throw c=D(g)||g,Error(s(306,c,""))}}return c;case 0:return $0(o,c,c.type,c.pendingProps,f);case 1:return g=c.type,E=so(g,c.pendingProps),h2(o,c,g,E,f);case 3:e:{if(xe(c,c.stateNode.containerInfo),o===null)throw Error(s(387));var C=c.pendingProps;E=c.memoizedState,g=E.element,J0(o,c),nd(c,C,null,f);var z=c.memoizedState;if(C=z.cache,ti(c,gr,C),C!==E.cache&&Y0(c,[gr],f,!0),sd(),C=z.element,E.isDehydrated)if(E={element:C,isDehydrated:!1,cache:z.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=f2(o,c,C,f);break e}else if(C!==g){g=es(Error(s(424)),c),Vc(g),c=f2(o,c,C,f);break e}else for($r=Cs(c.stateNode.containerInfo.firstChild),ia=c,ft=!0,Es=null,qs=!0,f=dN(c,null,C,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Hc(),C===g){c=dn(o,c,f);break e}Lr(o,c,C,f)}c=c.child}return c;case 26:return td(o,c),o===null?(f=y_(c.type,null,c.pendingProps,null))?c.memoizedState=f:ft||(f=c.type,o=c.pendingProps,g=qh(Te.current).createElement(f),g[ir]=c,g[ga]=o,Br(g,f,o),Or(g),c.stateNode=g):c.memoizedState=y_(c.type,o.memoizedProps,c.pendingProps,o.memoizedState),null;case 27:return X(c),o===null&&ft&&(g=c.stateNode=x_(c.type,c.pendingProps,Te.current),ia=c,qs=!0,$r=Cs(g.firstChild)),g=c.pendingProps.children,o!==null||ft?Lr(o,c,g,f):c.child=Qi(c,null,g,f),td(o,c),c.child;case 5:return o===null&&ft&&((E=g=$r)&&(g=_M(g,c.type,c.pendingProps,qs),g!==null?(c.stateNode=g,ia=c,$r=Cs(g.firstChild),qs=!1,E=!0):E=!1),E||Zi(c)),X(c),E=c.type,C=c.pendingProps,z=o!==null?o.memoizedProps:null,g=C.children,Pg(E,C)?g=null:z!==null&&Pg(E,z)&&(c.flags|=32),c.memoizedState!==null&&(E=y0(o,c,UD,null,null,f),yd._currentValue=E),td(o,c),Lr(o,c,g,f),c.child;case 6:return o===null&&ft&&((o=f=$r)&&(f=SM(f,c.pendingProps,qs),f!==null?(c.stateNode=f,ia=c,$r=null,o=!0):o=!1),o||Zi(c)),null;case 13:return m2(o,c,f);case 4:return xe(c,c.stateNode.containerInfo),g=c.pendingProps,o===null?c.child=Qi(c,null,g,f):Lr(o,c,g,f),c.child;case 11:return i2(o,c,c.type,c.pendingProps,f);case 7:return Lr(o,c,c.pendingProps,f),c.child;case 8:return Lr(o,c,c.pendingProps.children,f),c.child;case 12:return Lr(o,c,c.pendingProps.children,f),c.child;case 10:return g=c.pendingProps,ti(c,c.type,g.value),Lr(o,c,g.children,f),c.child;case 9:return E=c.type._context,g=c.pendingProps.children,io(c),E=Jr(E),g=g(E),c.flags|=1,Lr(o,c,g,f),c.child;case 14:return o2(o,c,c.type,c.pendingProps,f);case 15:return l2(o,c,c.type,c.pendingProps,f);case 19:return g2(o,c,f);case 22:return c2(o,c,f);case 24:return io(c),g=Jr(gr),o===null?(E=b0(),E===null&&(E=Ot,C=g0(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=f),E=C),c.memoizedState={parent:g,cache:E},X0(c),ti(c,gr,E)):((o.lanes&f)!==0&&(J0(o,c),nd(c,null,null,f),sd()),E=o.memoizedState,C=c.memoizedState,E.parent!==g?(E={parent:g,cache:g},c.memoizedState=E,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=E),ti(c,gr,g)):(g=C.cache,ti(c,gr,g),g!==E.cache&&Y0(c,[gr],f,!0))),Lr(o,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(s(156,c.tag))}var K0=J(null),no=null,un=null;function ti(o,c,f){de(K0,c._currentValue),c._currentValue=f}function hn(o){o._currentValue=K0.current,F(K0)}function W0(o,c,f){for(;o!==null;){var g=o.alternate;if((o.childLanes&c)!==c?(o.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),o===f)break;o=o.return}}function Y0(o,c,f,g){var E=o.child;for(E!==null&&(E.return=o);E!==null;){var C=E.dependencies;if(C!==null){var z=E.child;C=C.firstContext;e:for(;C!==null;){var q=C;C=E;for(var ae=0;ae<c.length;ae++)if(q.context===c[ae]){C.lanes|=f,q=C.alternate,q!==null&&(q.lanes|=f),W0(C.return,f,o),g||(z=null);break e}C=q.next}}else if(E.tag===18){if(z=E.return,z===null)throw Error(s(341));z.lanes|=f,C=z.alternate,C!==null&&(C.lanes|=f),W0(z,f,o),z=null}else z=E.child;if(z!==null)z.return=E;else for(z=E;z!==null;){if(z===o){z=null;break}if(E=z.sibling,E!==null){E.return=z.return,z=E;break}z=z.return}E=z}}function rd(o,c,f,g){o=null;for(var E=c,C=!1;E!==null;){if(!C){if((E.flags&524288)!==0)C=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var z=E.alternate;if(z===null)throw Error(s(387));if(z=z.memoizedProps,z!==null){var q=E.type;Aa(E.pendingProps.value,z.value)||(o!==null?o.push(q):o=[q])}}else if(E===M.current){if(z=E.alternate,z===null)throw Error(s(387));z.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(o!==null?o.push(yd):o=[yd])}E=E.return}o!==null&&Y0(c,o,f,g),c.flags|=262144}function Eh(o){for(o=o.firstContext;o!==null;){if(!Aa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function io(o){no=o,un=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Jr(o){return b2(no,o)}function kh(o,c){return no===null&&io(o),b2(o,c)}function b2(o,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},un===null){if(o===null)throw Error(s(308));un=c,o.dependencies={lanes:0,firstContext:c},o.flags|=524288}else un=un.next=c;return f}var ri=!1;function X0(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function J0(o,c){o=o.updateQueue,c.updateQueue===o&&(c.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ai(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function si(o,c,f){var g=o.updateQueue;if(g===null)return null;if(g=g.shared,(Ht&2)!==0){var E=g.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),g.pending=c,c=oh(o),Q1(o,null,f),c}return ih(o,g,c,f),oh(o)}function ad(o,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194176)!==0)){var g=c.lanes;g&=o.pendingLanes,f|=g,c.lanes=f,Xa(o,f)}}function Z0(o,c){var f=o.updateQueue,g=o.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var E=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var z={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?E=C=z:C=C.next=z,f=f.next}while(f!==null);C===null?E=C=c:C=C.next=c}else E=C=c;f={baseState:g.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},o.updateQueue=f;return}o=f.lastBaseUpdate,o===null?f.firstBaseUpdate=c:o.next=c,f.lastBaseUpdate=c}var Q0=!1;function sd(){if(Q0){var o=hl;if(o!==null)throw o}}function nd(o,c,f,g){Q0=!1;var E=o.updateQueue;ri=!1;var C=E.firstBaseUpdate,z=E.lastBaseUpdate,q=E.shared.pending;if(q!==null){E.shared.pending=null;var ae=q,fe=ae.next;ae.next=null,z===null?C=fe:z.next=fe,z=ae;var Se=o.alternate;Se!==null&&(Se=Se.updateQueue,q=Se.lastBaseUpdate,q!==z&&(q===null?Se.firstBaseUpdate=fe:q.next=fe,Se.lastBaseUpdate=ae))}if(C!==null){var Ae=E.baseState;z=0,Se=fe=ae=null,q=C;do{var ve=q.lane&-536870913,Ne=ve!==q.lane;if(Ne?(ot&ve)===ve:(g&ve)===ve){ve!==0&&ve===ul&&(Q0=!0),Se!==null&&(Se=Se.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var He=o,Xe=q;ve=c;var Jt=f;switch(Xe.tag){case 1:if(He=Xe.payload,typeof He=="function"){Ae=He.call(Jt,Ae,ve);break e}Ae=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Xe.payload,ve=typeof He=="function"?He.call(Jt,Ae,ve):He,ve==null)break e;Ae=I({},Ae,ve);break e;case 2:ri=!0}}ve=q.callback,ve!==null&&(o.flags|=64,Ne&&(o.flags|=8192),Ne=E.callbacks,Ne===null?E.callbacks=[ve]:Ne.push(ve))}else Ne={lane:ve,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Se===null?(fe=Se=Ne,ae=Ae):Se=Se.next=Ne,z|=ve;if(q=q.next,q===null){if(q=E.shared.pending,q===null)break;Ne=q,q=Ne.next,Ne.next=null,E.lastBaseUpdate=Ne,E.shared.pending=null}}while(!0);Se===null&&(ae=Ae),E.baseState=ae,E.firstBaseUpdate=fe,E.lastBaseUpdate=Se,C===null&&(E.shared.lanes=0),ci|=z,o.lanes=z,o.memoizedState=Ae}}function v2(o,c){if(typeof o!="function")throw Error(s(191,o));o.call(c)}function y2(o,c){var f=o.callbacks;if(f!==null)for(o.callbacks=null,o=0;o<f.length;o++)v2(f[o],c)}function id(o,c){try{var f=c.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var E=g.next;f=E;do{if((f.tag&o)===o){g=void 0;var C=f.create,z=f.inst;g=C(),z.destroy=g}f=f.next}while(f!==E)}}catch(q){St(c,c.return,q)}}function ni(o,c,f){try{var g=c.updateQueue,E=g!==null?g.lastEffect:null;if(E!==null){var C=E.next;g=C;do{if((g.tag&o)===o){var z=g.inst,q=z.destroy;if(q!==void 0){z.destroy=void 0,E=c;var ae=f;try{q()}catch(fe){St(E,ae,fe)}}}g=g.next}while(g!==C)}}catch(fe){St(c,c.return,fe)}}function w2(o){var c=o.updateQueue;if(c!==null){var f=o.stateNode;try{y2(c,f)}catch(g){St(o,o.return,g)}}}function j2(o,c,f){f.props=so(o.type,o.memoizedProps),f.state=o.memoizedState;try{f.componentWillUnmount()}catch(g){St(o,c,g)}}function oo(o,c){try{var f=o.ref;if(f!==null){var g=o.stateNode;switch(o.tag){case 26:case 27:case 5:var E=g;break;default:E=g}typeof f=="function"?o.refCleanup=f(E):f.current=E}}catch(C){St(o,c,C)}}function Oa(o,c){var f=o.ref,g=o.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(E){St(o,c,E)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(E){St(o,c,E)}else f.current=null}function N2(o){var c=o.type,f=o.memoizedProps,g=o.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(E){St(o,o.return,E)}}function _2(o,c,f){try{var g=o.stateNode;vM(g,o.type,f,c),g[ga]=c}catch(E){St(o,o.return,E)}}function S2(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27||o.tag===4}function eg(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||S2(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==27&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function tg(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?f.nodeType===8?f.parentNode.insertBefore(o,c):f.insertBefore(o,c):(f.nodeType===8?(c=f.parentNode,c.insertBefore(o,f)):(c=f,c.appendChild(o)),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Uh));else if(g!==4&&g!==27&&(o=o.child,o!==null))for(tg(o,c,f),o=o.sibling;o!==null;)tg(o,c,f),o=o.sibling}function Ch(o,c,f){var g=o.tag;if(g===5||g===6)o=o.stateNode,c?f.insertBefore(o,c):f.appendChild(o);else if(g!==4&&g!==27&&(o=o.child,o!==null))for(Ch(o,c,f),o=o.sibling;o!==null;)Ch(o,c,f),o=o.sibling}var fn=!1,Yt=!1,rg=!1,E2=typeof WeakSet=="function"?WeakSet:Set,Pr=null,k2=!1;function YD(o,c){if(o=o.containerInfo,Og=Wh,o=H1(o),s0(o)){if("selectionStart"in o)var f={start:o.selectionStart,end:o.selectionEnd};else e:{f=(f=o.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var E=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var z=0,q=-1,ae=-1,fe=0,Se=0,Ae=o,ve=null;t:for(;;){for(var Ne;Ae!==f||E!==0&&Ae.nodeType!==3||(q=z+E),Ae!==C||g!==0&&Ae.nodeType!==3||(ae=z+g),Ae.nodeType===3&&(z+=Ae.nodeValue.length),(Ne=Ae.firstChild)!==null;)ve=Ae,Ae=Ne;for(;;){if(Ae===o)break t;if(ve===f&&++fe===E&&(q=z),ve===C&&++Se===g&&(ae=z),(Ne=Ae.nextSibling)!==null)break;Ae=ve,ve=Ae.parentNode}Ae=Ne}f=q===-1||ae===-1?null:{start:q,end:ae}}else f=null}f=f||{start:0,end:0}}else f=null;for(Tg={focusedElem:o,selectionRange:f},Wh=!1,Pr=c;Pr!==null;)if(c=Pr,o=c.child,(c.subtreeFlags&1028)!==0&&o!==null)o.return=c,Pr=o;else for(;Pr!==null;){switch(c=Pr,C=c.alternate,o=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&C!==null){o=void 0,f=c,E=C.memoizedProps,C=C.memoizedState,g=f.stateNode;try{var He=so(f.type,E,f.elementType===f.type);o=g.getSnapshotBeforeUpdate(He,C),g.__reactInternalSnapshotBeforeUpdate=o}catch(Xe){St(f,f.return,Xe)}}break;case 3:if((o&1024)!==0){if(o=c.stateNode.containerInfo,f=o.nodeType,f===9)Mg(o);else if(f===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Mg(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(s(163))}if(o=c.sibling,o!==null){o.return=c.return,Pr=o;break}Pr=c.return}return He=k2,k2=!1,He}function C2(o,c,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:pn(o,f),g&4&&id(5,f);break;case 1:if(pn(o,f),g&4)if(o=f.stateNode,c===null)try{o.componentDidMount()}catch(q){St(f,f.return,q)}else{var E=so(f.type,c.memoizedProps);c=c.memoizedState;try{o.componentDidUpdate(E,c,o.__reactInternalSnapshotBeforeUpdate)}catch(q){St(f,f.return,q)}}g&64&&w2(f),g&512&&oo(f,f.return);break;case 3:if(pn(o,f),g&64&&(g=f.updateQueue,g!==null)){if(o=null,f.child!==null)switch(f.child.tag){case 27:case 5:o=f.child.stateNode;break;case 1:o=f.child.stateNode}try{y2(g,o)}catch(q){St(f,f.return,q)}}break;case 26:pn(o,f),g&512&&oo(f,f.return);break;case 27:case 5:pn(o,f),c===null&&g&4&&N2(f),g&512&&oo(f,f.return);break;case 12:pn(o,f);break;case 13:pn(o,f),g&4&&T2(o,f);break;case 22:if(E=f.memoizedState!==null||fn,!E){c=c!==null&&c.memoizedState!==null||Yt;var C=fn,z=Yt;fn=E,(Yt=c)&&!z?ii(o,f,(f.subtreeFlags&8772)!==0):pn(o,f),fn=C,Yt=z}g&512&&(f.memoizedProps.mode==="manual"?oo(f,f.return):Oa(f,f.return));break;default:pn(o,f)}}function A2(o){var c=o.alternate;c!==null&&(o.alternate=null,A2(c)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(c=o.stateNode,c!==null&&qp(c)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var cr=null,Ta=!1;function mn(o,c,f){for(f=f.child;f!==null;)O2(o,c,f),f=f.sibling}function O2(o,c,f){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Me,f)}catch{}switch(f.tag){case 26:Yt||Oa(f,c),mn(o,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Yt||Oa(f,c);var g=cr,E=Ta;for(cr=f.stateNode,mn(o,c,f),f=f.stateNode,c=f.attributes;c.length;)f.removeAttributeNode(c[0]);qp(f),cr=g,Ta=E;break;case 5:Yt||Oa(f,c);case 6:E=cr;var C=Ta;if(cr=null,mn(o,c,f),cr=E,Ta=C,cr!==null)if(Ta)try{o=cr,g=f.stateNode,o.nodeType===8?o.parentNode.removeChild(g):o.removeChild(g)}catch(z){St(f,c,z)}else try{cr.removeChild(f.stateNode)}catch(z){St(f,c,z)}break;case 18:cr!==null&&(Ta?(c=cr,f=f.stateNode,c.nodeType===8?Dg(c.parentNode,f):c.nodeType===1&&Dg(c,f),_d(c)):Dg(cr,f.stateNode));break;case 4:g=cr,E=Ta,cr=f.stateNode.containerInfo,Ta=!0,mn(o,c,f),cr=g,Ta=E;break;case 0:case 11:case 14:case 15:Yt||ni(2,f,c),Yt||ni(4,f,c),mn(o,c,f);break;case 1:Yt||(Oa(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"&&j2(f,c,g)),mn(o,c,f);break;case 21:mn(o,c,f);break;case 22:Yt||Oa(f,c),Yt=(g=Yt)||f.memoizedState!==null,mn(o,c,f),Yt=g;break;default:mn(o,c,f)}}function T2(o,c){if(c.memoizedState===null&&(o=c.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{_d(o)}catch(f){St(c,c.return,f)}}function XD(o){switch(o.tag){case 13:case 19:var c=o.stateNode;return c===null&&(c=o.stateNode=new E2),c;case 22:return o=o.stateNode,c=o._retryCache,c===null&&(c=o._retryCache=new E2),c;default:throw Error(s(435,o.tag))}}function ag(o,c){var f=XD(o);c.forEach(function(g){var E=cM.bind(null,o,g);f.has(g)||(f.add(g),g.then(E,E))})}function ss(o,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var E=f[g],C=o,z=c,q=z;e:for(;q!==null;){switch(q.tag){case 27:case 5:cr=q.stateNode,Ta=!1;break e;case 3:cr=q.stateNode.containerInfo,Ta=!0;break e;case 4:cr=q.stateNode.containerInfo,Ta=!0;break e}q=q.return}if(cr===null)throw Error(s(160));O2(C,z,E),cr=null,Ta=!1,C=E.alternate,C!==null&&(C.return=null),E.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)P2(c,o),c=c.sibling}var ks=null;function P2(o,c){var f=o.alternate,g=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ss(c,o),ns(o),g&4&&(ni(3,o,o.return),id(3,o),ni(5,o,o.return));break;case 1:ss(c,o),ns(o),g&512&&(Yt||f===null||Oa(f,f.return)),g&64&&fn&&(o=o.updateQueue,o!==null&&(g=o.callbacks,g!==null&&(f=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var E=ks;if(ss(c,o),ns(o),g&512&&(Yt||f===null||Oa(f,f.return)),g&4){var C=f!==null?f.memoizedState:null;if(g=o.memoizedState,f===null)if(g===null)if(o.stateNode===null){e:{g=o.type,f=o.memoizedProps,E=E.ownerDocument||E;t:switch(g){case"title":C=E.getElementsByTagName("title")[0],(!C||C[Pc]||C[ir]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=E.createElement(g),E.head.insertBefore(C,E.querySelector("head > title"))),Br(C,g,f),C[ir]=o,Or(C),g=C;break e;case"link":var z=N_("link","href",E).get(g+(f.href||""));if(z){for(var q=0;q<z.length;q++)if(C=z[q],C.getAttribute("href")===(f.href==null?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){z.splice(q,1);break t}}C=E.createElement(g),Br(C,g,f),E.head.appendChild(C);break;case"meta":if(z=N_("meta","content",E).get(g+(f.content||""))){for(q=0;q<z.length;q++)if(C=z[q],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){z.splice(q,1);break t}}C=E.createElement(g),Br(C,g,f),E.head.appendChild(C);break;default:throw Error(s(468,g))}C[ir]=o,Or(C),g=C}o.stateNode=g}else __(E,o.type,o.stateNode);else o.stateNode=j_(E,g,o.memoizedProps);else C!==g?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,g===null?__(E,o.type,o.stateNode):j_(E,g,o.memoizedProps)):g===null&&o.stateNode!==null&&_2(o,o.memoizedProps,f.memoizedProps)}break;case 27:if(g&4&&o.alternate===null){E=o.stateNode,C=o.memoizedProps;try{for(var ae=E.firstChild;ae;){var fe=ae.nextSibling,Se=ae.nodeName;ae[Pc]||Se==="HEAD"||Se==="BODY"||Se==="SCRIPT"||Se==="STYLE"||Se==="LINK"&&ae.rel.toLowerCase()==="stylesheet"||E.removeChild(ae),ae=fe}for(var Ae=o.type,ve=E.attributes;ve.length;)E.removeAttributeNode(ve[0]);Br(E,Ae,C),E[ir]=o,E[ga]=C}catch(He){St(o,o.return,He)}}case 5:if(ss(c,o),ns(o),g&512&&(Yt||f===null||Oa(f,f.return)),o.flags&32){E=o.stateNode;try{Qo(E,"")}catch(He){St(o,o.return,He)}}g&4&&o.stateNode!=null&&(E=o.memoizedProps,_2(o,E,f!==null?f.memoizedProps:E)),g&1024&&(rg=!0);break;case 6:if(ss(c,o),ns(o),g&4){if(o.stateNode===null)throw Error(s(162));g=o.memoizedProps,f=o.stateNode;try{f.nodeValue=g}catch(He){St(o,o.return,He)}}break;case 3:if(Vh=null,E=ks,ks=Fh(c.containerInfo),ss(c,o),ks=E,ns(o),g&4&&f!==null&&f.memoizedState.isDehydrated)try{_d(c.containerInfo)}catch(He){St(o,o.return,He)}rg&&(rg=!1,R2(o));break;case 4:g=ks,ks=Fh(o.stateNode.containerInfo),ss(c,o),ns(o),ks=g;break;case 12:ss(c,o),ns(o);break;case 13:ss(c,o),ns(o),o.child.flags&8192&&o.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(hg=ke()),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,ag(o,g)));break;case 22:if(g&512&&(Yt||f===null||Oa(f,f.return)),ae=o.memoizedState!==null,fe=f!==null&&f.memoizedState!==null,Se=fn,Ae=Yt,fn=Se||ae,Yt=Ae||fe,ss(c,o),Yt=Ae,fn=Se,ns(o),c=o.stateNode,c._current=o,c._visibility&=-3,c._visibility|=c._pendingVisibility&2,g&8192&&(c._visibility=ae?c._visibility&-2:c._visibility|1,ae&&(c=fn||Yt,f===null||fe||c||gl(o)),o.memoizedProps===null||o.memoizedProps.mode!=="manual"))e:for(f=null,c=o;;){if(c.tag===5||c.tag===26||c.tag===27){if(f===null){fe=f=c;try{if(E=fe.stateNode,ae)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{z=fe.stateNode,q=fe.memoizedProps.style;var Ne=q!=null&&q.hasOwnProperty("display")?q.display:null;z.style.display=Ne==null||typeof Ne=="boolean"?"":(""+Ne).trim()}}catch(He){St(fe,fe.return,He)}}}else if(c.tag===6){if(f===null){fe=c;try{fe.stateNode.nodeValue=ae?"":fe.memoizedProps}catch(He){St(fe,fe.return,He)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===o)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break e;for(;c.sibling===null;){if(c.return===null||c.return===o)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=o.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,ag(o,f))));break;case 19:ss(c,o),ns(o),g&4&&(g=o.updateQueue,g!==null&&(o.updateQueue=null,ag(o,g)));break;case 21:break;default:ss(c,o),ns(o)}}function ns(o){var c=o.flags;if(c&2){try{if(o.tag!==27){e:{for(var f=o.return;f!==null;){if(S2(f)){var g=f;break e}f=f.return}throw Error(s(160))}switch(g.tag){case 27:var E=g.stateNode,C=eg(o);Ch(o,C,E);break;case 5:var z=g.stateNode;g.flags&32&&(Qo(z,""),g.flags&=-33);var q=eg(o);Ch(o,q,z);break;case 3:case 4:var ae=g.stateNode.containerInfo,fe=eg(o);tg(o,fe,ae);break;default:throw Error(s(161))}}}catch(Se){St(o,o.return,Se)}o.flags&=-3}c&4096&&(o.flags&=-4097)}function R2(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var c=o;R2(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),o=o.sibling}}function pn(o,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)C2(o,c.alternate,c),c=c.sibling}function gl(o){for(o=o.child;o!==null;){var c=o;switch(c.tag){case 0:case 11:case 14:case 15:ni(4,c,c.return),gl(c);break;case 1:Oa(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&j2(c,c.return,f),gl(c);break;case 26:case 27:case 5:Oa(c,c.return),gl(c);break;case 22:Oa(c,c.return),c.memoizedState===null&&gl(c);break;default:gl(c)}o=o.sibling}}function ii(o,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,E=o,C=c,z=C.flags;switch(C.tag){case 0:case 11:case 15:ii(E,C,f),id(4,C);break;case 1:if(ii(E,C,f),g=C,E=g.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(fe){St(g,g.return,fe)}if(g=C,E=g.updateQueue,E!==null){var q=g.stateNode;try{var ae=E.shared.hiddenCallbacks;if(ae!==null)for(E.shared.hiddenCallbacks=null,E=0;E<ae.length;E++)v2(ae[E],q)}catch(fe){St(g,g.return,fe)}}f&&z&64&&w2(C),oo(C,C.return);break;case 26:case 27:case 5:ii(E,C,f),f&&g===null&&z&4&&N2(C),oo(C,C.return);break;case 12:ii(E,C,f);break;case 13:ii(E,C,f),f&&z&4&&T2(E,C);break;case 22:C.memoizedState===null&&ii(E,C,f),oo(C,C.return);break;default:ii(E,C,f)}c=c.sibling}}function sg(o,c){var f=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),o=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(o=c.memoizedState.cachePool.pool),o!==f&&(o!=null&&o.refCount++,f!=null&&Xc(f))}function ng(o,c){o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Xc(o))}function oi(o,c,f,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)D2(o,c,f,g),c=c.sibling}function D2(o,c,f,g){var E=c.flags;switch(c.tag){case 0:case 11:case 15:oi(o,c,f,g),E&2048&&id(9,c);break;case 3:oi(o,c,f,g),E&2048&&(o=null,c.alternate!==null&&(o=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==o&&(c.refCount++,o!=null&&Xc(o)));break;case 12:if(E&2048){oi(o,c,f,g),o=c.stateNode;try{var C=c.memoizedProps,z=C.id,q=C.onPostCommit;typeof q=="function"&&q(z,c.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(ae){St(c,c.return,ae)}}else oi(o,c,f,g);break;case 23:break;case 22:C=c.stateNode,c.memoizedState!==null?C._visibility&4?oi(o,c,f,g):od(o,c):C._visibility&4?oi(o,c,f,g):(C._visibility|=4,xl(o,c,f,g,(c.subtreeFlags&10256)!==0)),E&2048&&sg(c.alternate,c);break;case 24:oi(o,c,f,g),E&2048&&ng(c.alternate,c);break;default:oi(o,c,f,g)}}function xl(o,c,f,g,E){for(E=E&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=o,z=c,q=f,ae=g,fe=z.flags;switch(z.tag){case 0:case 11:case 15:xl(C,z,q,ae,E),id(8,z);break;case 23:break;case 22:var Se=z.stateNode;z.memoizedState!==null?Se._visibility&4?xl(C,z,q,ae,E):od(C,z):(Se._visibility|=4,xl(C,z,q,ae,E)),E&&fe&2048&&sg(z.alternate,z);break;case 24:xl(C,z,q,ae,E),E&&fe&2048&&ng(z.alternate,z);break;default:xl(C,z,q,ae,E)}c=c.sibling}}function od(o,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=o,g=c,E=g.flags;switch(g.tag){case 22:od(f,g),E&2048&&sg(g.alternate,g);break;case 24:od(f,g),E&2048&&ng(g.alternate,g);break;default:od(f,g)}c=c.sibling}}var ld=8192;function bl(o){if(o.subtreeFlags&ld)for(o=o.child;o!==null;)M2(o),o=o.sibling}function M2(o){switch(o.tag){case 26:bl(o),o.flags&ld&&o.memoizedState!==null&&$M(ks,o.memoizedState,o.memoizedProps);break;case 5:bl(o);break;case 3:case 4:var c=ks;ks=Fh(o.stateNode.containerInfo),bl(o),ks=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=ld,ld=16777216,bl(o),ld=c):bl(o));break;default:bl(o)}}function I2(o){var c=o.alternate;if(c!==null&&(o=c.child,o!==null)){c.child=null;do c=o.sibling,o.sibling=null,o=c;while(o!==null)}}function cd(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];Pr=g,$2(g,o)}I2(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)z2(o),o=o.sibling}function z2(o){switch(o.tag){case 0:case 11:case 15:cd(o),o.flags&2048&&ni(9,o,o.return);break;case 3:cd(o);break;case 12:cd(o);break;case 22:var c=o.stateNode;o.memoizedState!==null&&c._visibility&4&&(o.return===null||o.return.tag!==13)?(c._visibility&=-5,Ah(o)):cd(o);break;default:cd(o)}}function Ah(o){var c=o.deletions;if((o.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];Pr=g,$2(g,o)}I2(o)}for(o=o.child;o!==null;){switch(c=o,c.tag){case 0:case 11:case 15:ni(8,c,c.return),Ah(c);break;case 22:f=c.stateNode,f._visibility&4&&(f._visibility&=-5,Ah(c));break;default:Ah(c)}o=o.sibling}}function $2(o,c){for(;Pr!==null;){var f=Pr;switch(f.tag){case 0:case 11:case 15:ni(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Xc(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Pr=g;else e:for(f=o;Pr!==null;){g=Pr;var E=g.sibling,C=g.return;if(A2(g),g===f){Pr=null;break e}if(E!==null){E.return=C,Pr=E;break e}Pr=C}}}function JD(o,c,f,g){this.tag=o,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(o,c,f,g){return new JD(o,c,f,g)}function ig(o){return o=o.prototype,!(!o||!o.isReactComponent)}function li(o,c){var f=o.alternate;return f===null?(f=is(o.tag,c,o.key,o.mode),f.elementType=o.elementType,f.type=o.type,f.stateNode=o.stateNode,f.alternate=o,o.alternate=f):(f.pendingProps=c,f.type=o.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=o.flags&31457280,f.childLanes=o.childLanes,f.lanes=o.lanes,f.child=o.child,f.memoizedProps=o.memoizedProps,f.memoizedState=o.memoizedState,f.updateQueue=o.updateQueue,c=o.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=o.sibling,f.index=o.index,f.ref=o.ref,f.refCleanup=o.refCleanup,f}function L2(o,c){o.flags&=31457282;var f=o.alternate;return f===null?(o.childLanes=0,o.lanes=c,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=f.childLanes,o.lanes=f.lanes,o.child=f.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=f.memoizedProps,o.memoizedState=f.memoizedState,o.updateQueue=f.updateQueue,o.type=f.type,c=f.dependencies,o.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),o}function Oh(o,c,f,g,E,C){var z=0;if(g=o,typeof o=="function")ig(o)&&(z=1);else if(typeof o=="string")z=IM(o,f,_e.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case u:return lo(f.children,E,C,c);case h:z=8,E|=24;break;case m:return o=is(12,f,c,E|2),o.elementType=m,o.lanes=C,o;case v:return o=is(13,f,c,E),o.elementType=v,o.lanes=C,o;case w:return o=is(19,f,c,E),o.elementType=w,o.lanes=C,o;case j:return B2(f,E,C,c);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case p:case b:z=10;break e;case x:z=9;break e;case y:z=11;break e;case N:z=14;break e;case S:z=16,g=null;break e}z=29,f=Error(s(130,o===null?"null":typeof o,"")),g=null}return c=is(z,f,c,E),c.elementType=o,c.type=g,c.lanes=C,c}function lo(o,c,f,g){return o=is(7,o,g,c),o.lanes=f,o}function B2(o,c,f,g){o=is(22,o,g,c),o.elementType=j,o.lanes=f;var E={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var C=E._current;if(C===null)throw Error(s(456));if((E._pendingVisibility&2)===0){var z=Xn(C,2);z!==null&&(E._pendingVisibility|=2,oa(z,C,2))}},attach:function(){var C=E._current;if(C===null)throw Error(s(456));if((E._pendingVisibility&2)!==0){var z=Xn(C,2);z!==null&&(E._pendingVisibility&=-3,oa(z,C,2))}}};return o.stateNode=E,o}function og(o,c,f){return o=is(6,o,null,c),o.lanes=f,o}function lg(o,c,f){return c=is(4,o.children!==null?o.children:[],o.key,c),c.lanes=f,c.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},c}function gn(o){o.flags|=4}function U2(o,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!S_(c)){if(c=as.current,c!==null&&((ot&4194176)===ot?Fs!==null:(ot&62914560)!==ot&&(ot&536870912)===0||c!==Fs))throw Kc=f0,sN;o.flags|=8192}}function Th(o,c){c!==null&&(o.flags|=4),o.flags&16384&&(c=o.tag!==22?ka():536870912,o.lanes|=c,yl|=c)}function dd(o,c){if(!ft)switch(o.tailMode){case"hidden":c=o.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o.tail=null:f.sibling=null;break;case"collapsed":f=o.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||o.tail===null?o.tail=null:o.tail.sibling=null:g.sibling=null}}function Ft(o){var c=o.alternate!==null&&o.alternate.child===o.child,f=0,g=0;if(c)for(var E=o.child;E!==null;)f|=E.lanes|E.childLanes,g|=E.subtreeFlags&31457280,g|=E.flags&31457280,E.return=o,E=E.sibling;else for(E=o.child;E!==null;)f|=E.lanes|E.childLanes,g|=E.subtreeFlags,g|=E.flags,E.return=o,E=E.sibling;return o.subtreeFlags|=g,o.childLanes=f,c}function ZD(o,c,f){var g=c.pendingProps;switch(u0(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(c),null;case 1:return Ft(c),null;case 3:return f=c.stateNode,g=null,o!==null&&(g=o.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),hn(gr),pe(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Fc(c)?gn(c):o===null||o.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Es!==null&&(gg(Es),Es=null))),Ft(c),null;case 26:return f=c.memoizedState,o===null?(gn(c),f!==null?(Ft(c),U2(c,f)):(Ft(c),c.flags&=-16777217)):f?f!==o.memoizedState?(gn(c),Ft(c),U2(c,f)):(Ft(c),c.flags&=-16777217):(o.memoizedProps!==g&&gn(c),Ft(c),c.flags&=-16777217),null;case 27:Y(c),f=Te.current;var E=c.type;if(o!==null&&c.stateNode!=null)o.memoizedProps!==g&&gn(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return Ft(c),null}o=_e.current,Fc(c)?rN(c):(o=x_(E,g,f),c.stateNode=o,gn(c))}return Ft(c),null;case 5:if(Y(c),f=c.type,o!==null&&c.stateNode!=null)o.memoizedProps!==g&&gn(c);else{if(!g){if(c.stateNode===null)throw Error(s(166));return Ft(c),null}if(o=_e.current,Fc(c))rN(c);else{switch(E=qh(Te.current),o){case 1:o=E.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:o=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":o=E.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":o=E.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":o=E.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof g.is=="string"?E.createElement("select",{is:g.is}):E.createElement("select"),g.multiple?o.multiple=!0:g.size&&(o.size=g.size);break;default:o=typeof g.is=="string"?E.createElement(f,{is:g.is}):E.createElement(f)}}o[ir]=c,o[ga]=g;e:for(E=c.child;E!==null;){if(E.tag===5||E.tag===6)o.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===c)break e;for(;E.sibling===null;){if(E.return===null||E.return===c)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}c.stateNode=o;e:switch(Br(o,f,g),f){case"button":case"input":case"select":case"textarea":o=!!g.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&gn(c)}}return Ft(c),c.flags&=-16777217,null;case 6:if(o&&c.stateNode!=null)o.memoizedProps!==g&&gn(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(s(166));if(o=Te.current,Fc(c)){if(o=c.stateNode,f=c.memoizedProps,g=null,E=ia,E!==null)switch(E.tag){case 27:case 5:g=E.memoizedProps}o[ir]=c,o=!!(o.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||u_(o.nodeValue,f)),o||Zi(c)}else o=qh(o).createTextNode(g),o[ir]=c,c.stateNode=o}return Ft(c),null;case 13:if(g=c.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(E=Fc(c),g!==null&&g.dehydrated!==null){if(o===null){if(!E)throw Error(s(318));if(E=c.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(s(317));E[ir]=c}else Hc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ft(c),E=!1}else Es!==null&&(gg(Es),Es=null),E=!0;if(!E)return c.flags&256?(ln(c),c):(ln(c),null)}if(ln(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=g!==null,o=o!==null&&o.memoizedState!==null,f){g=c.child,E=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(E=g.alternate.memoizedState.cachePool.pool);var C=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==E&&(g.flags|=2048)}return f!==o&&f&&(c.child.flags|=8192),Th(c,c.updateQueue),Ft(c),null;case 4:return pe(),o===null&&kg(c.stateNode.containerInfo),Ft(c),null;case 10:return hn(c.type),Ft(c),null;case 19:if(F(pr),E=c.memoizedState,E===null)return Ft(c),null;if(g=(c.flags&128)!==0,C=E.rendering,C===null)if(g)dd(E,!1);else{if(Xt!==0||o!==null&&(o.flags&128)!==0)for(o=c.child;o!==null;){if(C=mh(o),C!==null){for(c.flags|=128,dd(E,!1),o=C.updateQueue,c.updateQueue=o,Th(c,o),c.subtreeFlags=0,o=f,f=c.child;f!==null;)L2(f,o),f=f.sibling;return de(pr,pr.current&1|2),c.child}o=o.sibling}E.tail!==null&&ke()>Ph&&(c.flags|=128,g=!0,dd(E,!1),c.lanes=4194304)}else{if(!g)if(o=mh(C),o!==null){if(c.flags|=128,g=!0,o=o.updateQueue,c.updateQueue=o,Th(c,o),dd(E,!0),E.tail===null&&E.tailMode==="hidden"&&!C.alternate&&!ft)return Ft(c),null}else 2*ke()-E.renderingStartTime>Ph&&f!==536870912&&(c.flags|=128,g=!0,dd(E,!1),c.lanes=4194304);E.isBackwards?(C.sibling=c.child,c.child=C):(o=E.last,o!==null?o.sibling=C:c.child=C,E.last=C)}return E.tail!==null?(c=E.tail,E.rendering=c,E.tail=c.sibling,E.renderingStartTime=ke(),c.sibling=null,o=pr.current,de(pr,g?o&1|2:o&1),c):(Ft(c),null);case 22:case 23:return ln(c),p0(),g=c.memoizedState!==null,o!==null?o.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(f&536870912)!==0&&(c.flags&128)===0&&(Ft(c),c.subtreeFlags&6&&(c.flags|=8192)):Ft(c),f=c.updateQueue,f!==null&&Th(c,f.retryQueue),f=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048),o!==null&&F(eo),null;case 24:return f=null,o!==null&&(f=o.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),hn(gr),Ft(c),null;case 25:return null}throw Error(s(156,c.tag))}function QD(o,c){switch(u0(c),c.tag){case 1:return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 3:return hn(gr),pe(),o=c.flags,(o&65536)!==0&&(o&128)===0?(c.flags=o&-65537|128,c):null;case 26:case 27:case 5:return Y(c),null;case 13:if(ln(c),o=c.memoizedState,o!==null&&o.dehydrated!==null){if(c.alternate===null)throw Error(s(340));Hc()}return o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 19:return F(pr),null;case 4:return pe(),null;case 10:return hn(c.type),null;case 22:case 23:return ln(c),p0(),o!==null&&F(eo),o=c.flags,o&65536?(c.flags=o&-65537|128,c):null;case 24:return hn(gr),null;case 25:return null;default:return null}}function q2(o,c){switch(u0(c),c.tag){case 3:hn(gr),pe();break;case 26:case 27:case 5:Y(c);break;case 4:pe();break;case 13:ln(c);break;case 19:F(pr);break;case 10:hn(c.type);break;case 22:case 23:ln(c),p0(),o!==null&&F(eo);break;case 24:hn(gr)}}var eM={getCacheForType:function(o){var c=Jr(gr),f=c.data.get(o);return f===void 0&&(f=o(),c.data.set(o,f)),f}},tM=typeof WeakMap=="function"?WeakMap:Map,Ht=0,Ot=null,at=null,ot=0,Tt=0,Pa=null,xn=!1,vl=!1,cg=!1,bn=0,Xt=0,ci=0,co=0,dg=0,os=0,yl=0,ud=null,Vs=null,ug=!1,hg=0,Ph=1/0,Rh=null,di=null,Dh=!1,uo=null,hd=0,fg=0,mg=null,fd=0,pg=null;function Ra(){if((Ht&2)!==0&&ot!==0)return ot&-ot;if(R.T!==null){var o=ul;return o!==0?o:Ng()}return Wn()}function F2(){os===0&&(os=(ot&536870912)===0||ft?Xr():536870912);var o=as.current;return o!==null&&(o.flags|=32),os}function oa(o,c,f){(o===Ot&&Tt===2||o.cancelPendingCommit!==null)&&(wl(o,0),vn(o,ot,os,!1)),qt(o,f),((Ht&2)===0||o!==Ot)&&(o===Ot&&((Ht&2)===0&&(co|=f),Xt===4&&vn(o,ot,os,!1)),Gs(o))}function H2(o,c,f){if((Ht&6)!==0)throw Error(s(327));var g=!f&&(c&60)===0&&(c&o.expiredLanes)===0||fa(o,c),E=g?sM(o,c):vg(o,c,!0),C=g;do{if(E===0){vl&&!g&&vn(o,c,0,!1);break}else if(E===6)vn(o,c,0,!xn);else{if(f=o.current.alternate,C&&!rM(f)){E=vg(o,c,!1),C=!1;continue}if(E===2){if(C=c,o.errorRecoveryDisabledLanes&C)var z=0;else z=o.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){c=z;e:{var q=o;E=ud;var ae=q.current.memoizedState.isDehydrated;if(ae&&(wl(q,z).flags|=256),z=vg(q,z,!1),z!==2){if(cg&&!ae){q.errorRecoveryDisabledLanes|=C,co|=C,E=4;break e}C=Vs,Vs=E,C!==null&&gg(C)}E=z}if(C=!1,E!==2)continue}}if(E===1){wl(o,0),vn(o,c,0,!0);break}e:{switch(g=o,E){case 0:case 1:throw Error(s(345));case 4:if((c&4194176)===c){vn(g,c,os,!xn);break e}break;case 2:Vs=null;break;case 3:case 5:break;default:throw Error(s(329))}if(g.finishedWork=f,g.finishedLanes=c,(c&62914560)===c&&(C=hg+300-ke(),10<C)){if(vn(g,c,os,!xn),Ar(g,0)!==0)break e;g.timeoutHandle=m_(V2.bind(null,g,f,Vs,Rh,ug,c,os,co,yl,xn,2,-0,0),C);break e}V2(g,f,Vs,Rh,ug,c,os,co,yl,xn,0,-0,0)}}break}while(!0);Gs(o)}function gg(o){Vs===null?Vs=o:Vs.push.apply(Vs,o)}function V2(o,c,f,g,E,C,z,q,ae,fe,Se,Ae,ve){var Ne=c.subtreeFlags;if((Ne&8192||(Ne&16785408)===16785408)&&(vd={stylesheets:null,count:0,unsuspend:zM},M2(c),c=LM(),c!==null)){o.cancelPendingCommit=c(Z2.bind(null,o,f,g,E,z,q,ae,1,Ae,ve)),vn(o,C,z,!fe);return}Z2(o,f,g,E,z,q,ae,Se,Ae,ve)}function rM(o){for(var c=o;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var E=f[g],C=E.getSnapshot;E=E.value;try{if(!Aa(C(),E))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function vn(o,c,f,g){c&=~dg,c&=~co,o.suspendedLanes|=c,o.pingedLanes&=~c,g&&(o.warmLanes|=c),g=o.expirationTimes;for(var E=c;0<E;){var C=31-Wt(E),z=1<<C;g[C]=-1,E&=~z}f!==0&&Ca(o,f,c)}function Mh(){return(Ht&6)===0?(md(0),!1):!0}function xg(){if(at!==null){if(Tt===0)var o=at.return;else o=at,un=no=null,N0(o),cl=null,Wc=0,o=at;for(;o!==null;)q2(o.alternate,o),o=o.return;at=null}}function wl(o,c){o.finishedWork=null,o.finishedLanes=0;var f=o.timeoutHandle;f!==-1&&(o.timeoutHandle=-1,wM(f)),f=o.cancelPendingCommit,f!==null&&(o.cancelPendingCommit=null,f()),xg(),Ot=o,at=f=li(o.current,null),ot=c,Tt=0,Pa=null,xn=!1,vl=fa(o,c),cg=!1,yl=os=dg=co=ci=Xt=0,Vs=ud=null,ug=!1,(c&8)!==0&&(c|=c&32);var g=o.entangledLanes;if(g!==0)for(o=o.entanglements,g&=c;0<g;){var E=31-Wt(g),C=1<<E;c|=o[E],g&=~C}return bn=c,nh(),f}function G2(o,c){et=null,R.H=Hs,c===Gc?(c=oN(),Tt=3):c===sN?(c=oN(),Tt=4):Tt=c===n2?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Pa=c,at===null&&(Xt=1,Sh(o,es(c,o.current)))}function K2(){var o=R.H;return R.H=Hs,o===null?Hs:o}function W2(){var o=R.A;return R.A=eM,o}function bg(){Xt=4,xn||(ot&4194176)!==ot&&as.current!==null||(vl=!0),(ci&134217727)===0&&(co&134217727)===0||Ot===null||vn(Ot,ot,os,!1)}function vg(o,c,f){var g=Ht;Ht|=2;var E=K2(),C=W2();(Ot!==o||ot!==c)&&(Rh=null,wl(o,c)),c=!1;var z=Xt;e:do try{if(Tt!==0&&at!==null){var q=at,ae=Pa;switch(Tt){case 8:xg(),z=6;break e;case 3:case 2:case 6:as.current===null&&(c=!0);var fe=Tt;if(Tt=0,Pa=null,jl(o,q,ae,fe),f&&vl){z=0;break e}break;default:fe=Tt,Tt=0,Pa=null,jl(o,q,ae,fe)}}aM(),z=Xt;break}catch(Se){G2(o,Se)}while(!0);return c&&o.shellSuspendCounter++,un=no=null,Ht=g,R.H=E,R.A=C,at===null&&(Ot=null,ot=0,nh()),z}function aM(){for(;at!==null;)Y2(at)}function sM(o,c){var f=Ht;Ht|=2;var g=K2(),E=W2();Ot!==o||ot!==c?(Rh=null,Ph=ke()+500,wl(o,c)):vl=fa(o,c);e:do try{if(Tt!==0&&at!==null){c=at;var C=Pa;t:switch(Tt){case 1:Tt=0,Pa=null,jl(o,c,C,1);break;case 2:if(nN(C)){Tt=0,Pa=null,X2(c);break}c=function(){Tt===2&&Ot===o&&(Tt=7),Gs(o)},C.then(c,c);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:nN(C)?(Tt=0,Pa=null,X2(c)):(Tt=0,Pa=null,jl(o,c,C,7));break;case 5:var z=null;switch(at.tag){case 26:z=at.memoizedState;case 5:case 27:var q=at;if(!z||S_(z)){Tt=0,Pa=null;var ae=q.sibling;if(ae!==null)at=ae;else{var fe=q.return;fe!==null?(at=fe,Ih(fe)):at=null}break t}}Tt=0,Pa=null,jl(o,c,C,5);break;case 6:Tt=0,Pa=null,jl(o,c,C,6);break;case 8:xg(),Xt=6;break e;default:throw Error(s(462))}}nM();break}catch(Se){G2(o,Se)}while(!0);return un=no=null,R.H=g,R.A=E,Ht=f,at!==null?0:(Ot=null,ot=0,nh(),Xt)}function nM(){for(;at!==null&&!oe();)Y2(at)}function Y2(o){var c=x2(o.alternate,o,bn);o.memoizedProps=o.pendingProps,c===null?Ih(o):at=c}function X2(o){var c=o,f=c.alternate;switch(c.tag){case 15:case 0:c=u2(f,c,c.pendingProps,c.type,void 0,ot);break;case 11:c=u2(f,c,c.pendingProps,c.type.render,c.ref,ot);break;case 5:N0(c);default:q2(f,c),c=at=L2(c,bn),c=x2(f,c,bn)}o.memoizedProps=o.pendingProps,c===null?Ih(o):at=c}function jl(o,c,f,g){un=no=null,N0(c),cl=null,Wc=0;var E=c.return;try{if(KD(o,E,c,f,ot)){Xt=1,Sh(o,es(f,o.current)),at=null;return}}catch(C){if(E!==null)throw at=E,C;Xt=1,Sh(o,es(f,o.current)),at=null;return}c.flags&32768?(ft||g===1?o=!0:vl||(ot&536870912)!==0?o=!1:(xn=o=!0,(g===2||g===3||g===6)&&(g=as.current,g!==null&&g.tag===13&&(g.flags|=16384))),J2(c,o)):Ih(c)}function Ih(o){var c=o;do{if((c.flags&32768)!==0){J2(c,xn);return}o=c.return;var f=ZD(c.alternate,c,bn);if(f!==null){at=f;return}if(c=c.sibling,c!==null){at=c;return}at=c=o}while(c!==null);Xt===0&&(Xt=5)}function J2(o,c){do{var f=QD(o.alternate,o);if(f!==null){f.flags&=32767,at=f;return}if(f=o.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(o=o.sibling,o!==null)){at=o;return}at=o=f}while(o!==null);Xt=6,at=null}function Z2(o,c,f,g,E,C,z,q,ae,fe){var Se=R.T,Ae=ie.p;try{ie.p=2,R.T=null,iM(o,c,f,g,Ae,E,C,z,q,ae,fe)}finally{R.T=Se,ie.p=Ae}}function iM(o,c,f,g,E,C,z,q){do Nl();while(uo!==null);if((Ht&6)!==0)throw Error(s(327));var ae=o.finishedWork;if(g=o.finishedLanes,ae===null)return null;if(o.finishedWork=null,o.finishedLanes=0,ae===o.current)throw Error(s(177));o.callbackNode=null,o.callbackPriority=0,o.cancelPendingCommit=null;var fe=ae.lanes|ae.childLanes;if(fe|=l0,Bs(o,g,fe,C,z,q),o===Ot&&(at=Ot=null,ot=0),(ae.subtreeFlags&10256)===0&&(ae.flags&10256)===0||Dh||(Dh=!0,fg=fe,mg=f,dM(Re,function(){return Nl(),null})),f=(ae.flags&15990)!==0,(ae.subtreeFlags&15990)!==0||f?(f=R.T,R.T=null,C=ie.p,ie.p=2,z=Ht,Ht|=4,YD(o,ae),P2(ae,o),OD(Tg,o.containerInfo),Wh=!!Og,Tg=Og=null,o.current=ae,C2(o,ae.alternate,ae),be(),Ht=z,ie.p=C,R.T=f):o.current=ae,Dh?(Dh=!1,uo=o,hd=g):Q2(o,fe),fe=o.pendingLanes,fe===0&&(di=null),Cr(ae.stateNode),Gs(o),c!==null)for(E=o.onRecoverableError,ae=0;ae<c.length;ae++)fe=c[ae],E(fe.value,{componentStack:fe.stack});return(hd&3)!==0&&Nl(),fe=o.pendingLanes,(g&4194218)!==0&&(fe&42)!==0?o===pg?fd++:(fd=0,pg=o):fd=0,md(0),null}function Q2(o,c){(o.pooledCacheLanes&=c)===0&&(c=o.pooledCache,c!=null&&(o.pooledCache=null,Xc(c)))}function Nl(){if(uo!==null){var o=uo,c=fg;fg=0;var f=Kn(hd),g=R.T,E=ie.p;try{if(ie.p=32>f?32:f,R.T=null,uo===null)var C=!1;else{f=mg,mg=null;var z=uo,q=hd;if(uo=null,hd=0,(Ht&6)!==0)throw Error(s(331));var ae=Ht;if(Ht|=4,z2(z.current),D2(z,z.current,q,f),Ht=ae,md(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Me,z)}catch{}C=!0}return C}finally{ie.p=E,R.T=g,Q2(o,c)}}return!1}function e_(o,c,f){c=es(f,c),c=z0(o.stateNode,c,2),o=si(o,c,2),o!==null&&(qt(o,2),Gs(o))}function St(o,c,f){if(o.tag===3)e_(o,o,f);else for(;c!==null;){if(c.tag===3){e_(c,o,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(di===null||!di.has(g))){o=es(f,o),f=a2(2),g=si(c,f,2),g!==null&&(s2(f,g,c,o),qt(g,2),Gs(g));break}}c=c.return}}function yg(o,c,f){var g=o.pingCache;if(g===null){g=o.pingCache=new tM;var E=new Set;g.set(c,E)}else E=g.get(c),E===void 0&&(E=new Set,g.set(c,E));E.has(f)||(cg=!0,E.add(f),o=oM.bind(null,o,c,f),c.then(o,o))}function oM(o,c,f){var g=o.pingCache;g!==null&&g.delete(c),o.pingedLanes|=o.suspendedLanes&f,o.warmLanes&=~f,Ot===o&&(ot&f)===f&&(Xt===4||Xt===3&&(ot&62914560)===ot&&300>ke()-hg?(Ht&2)===0&&wl(o,0):dg|=f,yl===ot&&(yl=0)),Gs(o)}function t_(o,c){c===0&&(c=ka()),o=Xn(o,c),o!==null&&(qt(o,c),Gs(o))}function lM(o){var c=o.memoizedState,f=0;c!==null&&(f=c.retryLane),t_(o,f)}function cM(o,c){var f=0;switch(o.tag){case 13:var g=o.stateNode,E=o.memoizedState;E!==null&&(f=E.retryLane);break;case 19:g=o.stateNode;break;case 22:g=o.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(c),t_(o,f)}function dM(o,c){return Ee(o,c)}var zh=null,_l=null,wg=!1,$h=!1,jg=!1,ho=0;function Gs(o){o!==_l&&o.next===null&&(_l===null?zh=_l=o:_l=_l.next=o),$h=!0,wg||(wg=!0,hM(uM))}function md(o,c){if(!jg&&$h){jg=!0;do for(var f=!1,g=zh;g!==null;){if(o!==0){var E=g.pendingLanes;if(E===0)var C=0;else{var z=g.suspendedLanes,q=g.pingedLanes;C=(1<<31-Wt(42|o)+1)-1,C&=E&~(z&~q),C=C&201326677?C&201326677|1:C?C|2:0}C!==0&&(f=!0,s_(g,C))}else C=ot,C=Ar(g,g===Ot?C:0),(C&3)===0||fa(g,C)||(f=!0,s_(g,C));g=g.next}while(f);jg=!1}}function uM(){$h=wg=!1;var o=0;ho!==0&&(yM()&&(o=ho),ho=0);for(var c=ke(),f=null,g=zh;g!==null;){var E=g.next,C=r_(g,c);C===0?(g.next=null,f===null?zh=E:f.next=E,E===null&&(_l=f)):(f=g,(o!==0||(C&3)!==0)&&($h=!0)),g=E}md(o)}function r_(o,c){for(var f=o.suspendedLanes,g=o.pingedLanes,E=o.expirationTimes,C=o.pendingLanes&-62914561;0<C;){var z=31-Wt(C),q=1<<z,ae=E[z];ae===-1?((q&f)===0||(q&g)!==0)&&(E[z]=ma(q,c)):ae<=c&&(o.expiredLanes|=q),C&=~q}if(c=Ot,f=ot,f=Ar(o,o===c?f:0),g=o.callbackNode,f===0||o===c&&Tt===2||o.cancelPendingCommit!==null)return g!==null&&g!==null&&te(g),o.callbackNode=null,o.callbackPriority=0;if((f&3)===0||fa(o,f)){if(c=f&-f,c===o.callbackPriority)return c;switch(g!==null&&te(g),Kn(f)){case 2:case 8:f=Ge;break;case 32:f=Re;break;case 268435456:f=gt;break;default:f=Re}return g=a_.bind(null,o),f=Ee(f,g),o.callbackPriority=c,o.callbackNode=f,c}return g!==null&&g!==null&&te(g),o.callbackPriority=2,o.callbackNode=null,2}function a_(o,c){var f=o.callbackNode;if(Nl()&&o.callbackNode!==f)return null;var g=ot;return g=Ar(o,o===Ot?g:0),g===0?null:(H2(o,g,c),r_(o,ke()),o.callbackNode!=null&&o.callbackNode===f?a_.bind(null,o):null)}function s_(o,c){if(Nl())return null;H2(o,c,!0)}function hM(o){jM(function(){(Ht&6)!==0?Ee(Pe,o):o()})}function Ng(){return ho===0&&(ho=Xr()),ho}function n_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:Zu(""+o)}function i_(o,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,o.id&&f.setAttribute("form",o.id),c.parentNode.insertBefore(f,c),o=new FormData(o),f.parentNode.removeChild(f),o}function fM(o,c,f,g,E){if(c==="submit"&&f&&f.stateNode===E){var C=n_((E[ga]||null).action),z=g.submitter;z&&(c=(c=z[ga]||null)?n_(c.formAction):z.getAttribute("formAction"),c!==null&&(C=c,z=null));var q=new rh("action","action",null,g,E);o.push({event:q,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ho!==0){var ae=z?i_(E,z):new FormData(E);P0(f,{pending:!0,data:ae,method:E.method,action:C},null,ae)}}else typeof C=="function"&&(q.preventDefault(),ae=z?i_(E,z):new FormData(E),P0(f,{pending:!0,data:ae,method:E.method,action:C},C,ae))},currentTarget:E}]})}}for(var _g=0;_g<Z1.length;_g++){var Sg=Z1[_g],mM=Sg.toLowerCase(),pM=Sg[0].toUpperCase()+Sg.slice(1);Ss(mM,"on"+pM)}Ss(K1,"onAnimationEnd"),Ss(W1,"onAnimationIteration"),Ss(Y1,"onAnimationStart"),Ss("dblclick","onDoubleClick"),Ss("focusin","onFocus"),Ss("focusout","onBlur"),Ss(PD,"onTransitionRun"),Ss(RD,"onTransitionStart"),Ss(DD,"onTransitionCancel"),Ss(X1,"onTransitionEnd"),Jo("onMouseEnter",["mouseout","mouseover"]),Jo("onMouseLeave",["mouseout","mouseover"]),Jo("onPointerEnter",["pointerout","pointerover"]),Jo("onPointerLeave",["pointerout","pointerover"]),Gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pd));function o_(o,c){c=(c&4)!==0;for(var f=0;f<o.length;f++){var g=o[f],E=g.event;g=g.listeners;e:{var C=void 0;if(c)for(var z=g.length-1;0<=z;z--){var q=g[z],ae=q.instance,fe=q.currentTarget;if(q=q.listener,ae!==C&&E.isPropagationStopped())break e;C=q,E.currentTarget=fe;try{C(E)}catch(Se){_h(Se)}E.currentTarget=null,C=ae}else for(z=0;z<g.length;z++){if(q=g[z],ae=q.instance,fe=q.currentTarget,q=q.listener,ae!==C&&E.isPropagationStopped())break e;C=q,E.currentTarget=fe;try{C(E)}catch(Se){_h(Se)}E.currentTarget=null,C=ae}}}}function st(o,c){var f=c[Up];f===void 0&&(f=c[Up]=new Set);var g=o+"__bubble";f.has(g)||(l_(c,o,2,!1),f.add(g))}function Eg(o,c,f){var g=0;c&&(g|=4),l_(f,o,g,c)}var Lh="_reactListening"+Math.random().toString(36).slice(2);function kg(o){if(!o[Lh]){o[Lh]=!0,u1.forEach(function(f){f!=="selectionchange"&&(gM.has(f)||Eg(f,!1,o),Eg(f,!0,o))});var c=o.nodeType===9?o:o.ownerDocument;c===null||c[Lh]||(c[Lh]=!0,Eg("selectionchange",!1,c))}}function l_(o,c,f,g){switch(T_(c)){case 2:var E=qM;break;case 8:E=FM;break;default:E=Bg}f=E.bind(null,c,f,o),E=void 0,!Yp||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),g?E!==void 0?o.addEventListener(c,f,{capture:!0,passive:E}):o.addEventListener(c,f,!0):E!==void 0?o.addEventListener(c,f,{passive:E}):o.addEventListener(c,f,!1)}function Cg(o,c,f,g,E){var C=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var z=g.tag;if(z===3||z===4){var q=g.stateNode.containerInfo;if(q===E||q.nodeType===8&&q.parentNode===E)break;if(z===4)for(z=g.return;z!==null;){var ae=z.tag;if((ae===3||ae===4)&&(ae=z.stateNode.containerInfo,ae===E||ae.nodeType===8&&ae.parentNode===E))return;z=z.return}for(;q!==null;){if(z=Vi(q),z===null)return;if(ae=z.tag,ae===5||ae===6||ae===26||ae===27){g=C=z;continue e}q=q.parentNode}}g=g.return}N1(function(){var fe=C,Se=Kp(f),Ae=[];e:{var ve=J1.get(o);if(ve!==void 0){var Ne=rh,He=o;switch(o){case"keypress":if(eh(f)===0)break e;case"keydown":case"keyup":Ne=cD;break;case"focusin":He="focus",Ne=Qp;break;case"focusout":He="blur",Ne=Qp;break;case"beforeblur":case"afterblur":Ne=Qp;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=E1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=JR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=hD;break;case K1:case W1:case Y1:Ne=eD;break;case X1:Ne=mD;break;case"scroll":case"scrollend":Ne=YR;break;case"wheel":Ne=gD;break;case"copy":case"cut":case"paste":Ne=rD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=C1;break;case"toggle":case"beforetoggle":Ne=bD}var Xe=(c&4)!==0,Jt=!Xe&&(o==="scroll"||o==="scrollend"),me=Xe?ve!==null?ve+"Capture":null:ve;Xe=[];for(var ce=fe,ge;ce!==null;){var Ce=ce;if(ge=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||ge===null||me===null||(Ce=Dc(ce,me),Ce!=null&&Xe.push(gd(ce,Ce,ge))),Jt)break;ce=ce.return}0<Xe.length&&(ve=new Ne(ve,He,null,f,Se),Ae.push({event:ve,listeners:Xe}))}}if((c&7)===0){e:{if(ve=o==="mouseover"||o==="pointerover",Ne=o==="mouseout"||o==="pointerout",ve&&f!==Gp&&(He=f.relatedTarget||f.fromElement)&&(Vi(He)||He[Wo]))break e;if((Ne||ve)&&(ve=Se.window===Se?Se:(ve=Se.ownerDocument)?ve.defaultView||ve.parentWindow:window,Ne?(He=f.relatedTarget||f.toElement,Ne=fe,He=He?Vi(He):null,He!==null&&(Jt=Q(He),Xe=He.tag,He!==Jt||Xe!==5&&Xe!==27&&Xe!==6)&&(He=null)):(Ne=null,He=fe),Ne!==He)){if(Xe=E1,Ce="onMouseLeave",me="onMouseEnter",ce="mouse",(o==="pointerout"||o==="pointerover")&&(Xe=C1,Ce="onPointerLeave",me="onPointerEnter",ce="pointer"),Jt=Ne==null?ve:Rc(Ne),ge=He==null?ve:Rc(He),ve=new Xe(Ce,ce+"leave",Ne,f,Se),ve.target=Jt,ve.relatedTarget=ge,Ce=null,Vi(Se)===fe&&(Xe=new Xe(me,ce+"enter",He,f,Se),Xe.target=ge,Xe.relatedTarget=Jt,Ce=Xe),Jt=Ce,Ne&&He)t:{for(Xe=Ne,me=He,ce=0,ge=Xe;ge;ge=Sl(ge))ce++;for(ge=0,Ce=me;Ce;Ce=Sl(Ce))ge++;for(;0<ce-ge;)Xe=Sl(Xe),ce--;for(;0<ge-ce;)me=Sl(me),ge--;for(;ce--;){if(Xe===me||me!==null&&Xe===me.alternate)break t;Xe=Sl(Xe),me=Sl(me)}Xe=null}else Xe=null;Ne!==null&&c_(Ae,ve,Ne,Xe,!1),He!==null&&Jt!==null&&c_(Ae,Jt,He,Xe,!0)}}e:{if(ve=fe?Rc(fe):window,Ne=ve.nodeName&&ve.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&ve.type==="file")var $e=I1;else if(D1(ve))if(z1)$e=CD;else{$e=ED;var rt=SD}else Ne=ve.nodeName,!Ne||Ne.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?fe&&Vp(fe.elementType)&&($e=I1):$e=kD;if($e&&($e=$e(o,fe))){M1(Ae,$e,f,Se);break e}rt&&rt(o,ve,fe),o==="focusout"&&fe&&ve.type==="number"&&fe.memoizedProps.value!=null&&Hp(ve,"number",ve.value)}switch(rt=fe?Rc(fe):window,o){case"focusin":(D1(rt)||rt.contentEditable==="true")&&(al=rt,n0=fe,qc=null);break;case"focusout":qc=n0=al=null;break;case"mousedown":i0=!0;break;case"contextmenu":case"mouseup":case"dragend":i0=!1,V1(Ae,f,Se);break;case"selectionchange":if(TD)break;case"keydown":case"keyup":V1(Ae,f,Se)}var Ve;if(t0)e:{switch(o){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else rl?P1(o,f)&&(Ke="onCompositionEnd"):o==="keydown"&&f.keyCode===229&&(Ke="onCompositionStart");Ke&&(A1&&f.locale!=="ko"&&(rl||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&rl&&(Ve=_1()):(Yn=Se,Xp="value"in Yn?Yn.value:Yn.textContent,rl=!0)),rt=Bh(fe,Ke),0<rt.length&&(Ke=new k1(Ke,o,null,f,Se),Ae.push({event:Ke,listeners:rt}),Ve?Ke.data=Ve:(Ve=R1(f),Ve!==null&&(Ke.data=Ve)))),(Ve=yD?wD(o,f):jD(o,f))&&(Ke=Bh(fe,"onBeforeInput"),0<Ke.length&&(rt=new k1("onBeforeInput","beforeinput",null,f,Se),Ae.push({event:rt,listeners:Ke}),rt.data=Ve)),fM(Ae,o,fe,f,Se)}o_(Ae,c)})}function gd(o,c,f){return{instance:o,listener:c,currentTarget:f}}function Bh(o,c){for(var f=c+"Capture",g=[];o!==null;){var E=o,C=E.stateNode;E=E.tag,E!==5&&E!==26&&E!==27||C===null||(E=Dc(o,f),E!=null&&g.unshift(gd(o,E,C)),E=Dc(o,c),E!=null&&g.push(gd(o,E,C))),o=o.return}return g}function Sl(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function c_(o,c,f,g,E){for(var C=c._reactName,z=[];f!==null&&f!==g;){var q=f,ae=q.alternate,fe=q.stateNode;if(q=q.tag,ae!==null&&ae===g)break;q!==5&&q!==26&&q!==27||fe===null||(ae=fe,E?(fe=Dc(f,C),fe!=null&&z.unshift(gd(f,fe,ae))):E||(fe=Dc(f,C),fe!=null&&z.push(gd(f,fe,ae)))),f=f.return}z.length!==0&&o.push({event:c,listeners:z})}var xM=/\r\n?/g,bM=/\u0000|\uFFFD/g;function d_(o){return(typeof o=="string"?o:""+o).replace(xM,`
`).replace(bM,"")}function u_(o,c){return c=d_(c),d_(o)===c}function Uh(){}function wt(o,c,f,g,E,C){switch(f){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||Qo(o,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&Qo(o,""+g);break;case"className":Yu(o,"class",g);break;case"tabIndex":Yu(o,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Yu(o,f,g);break;case"style":w1(o,g,C);break;case"data":if(c!=="object"){Yu(o,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||f!=="href")){o.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Zu(""+g),o.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){o.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(c!=="input"&&wt(o,c,"name",E.name,E,null),wt(o,c,"formEncType",E.formEncType,E,null),wt(o,c,"formMethod",E.formMethod,E,null),wt(o,c,"formTarget",E.formTarget,E,null)):(wt(o,c,"encType",E.encType,E,null),wt(o,c,"method",E.method,E,null),wt(o,c,"target",E.target,E,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){o.removeAttribute(f);break}g=Zu(""+g),o.setAttribute(f,g);break;case"onClick":g!=null&&(o.onclick=Uh);break;case"onScroll":g!=null&&st("scroll",o);break;case"onScrollEnd":g!=null&&st("scrollend",o);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(f=g.__html,f!=null){if(E.children!=null)throw Error(s(60));o.innerHTML=f}}break;case"multiple":o.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":o.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){o.removeAttribute("xlink:href");break}f=Zu(""+g),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""+g):o.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,""):o.removeAttribute(f);break;case"capture":case"download":g===!0?o.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?o.setAttribute(f,g):o.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?o.setAttribute(f,g):o.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?o.removeAttribute(f):o.setAttribute(f,g);break;case"popover":st("beforetoggle",o),st("toggle",o),Wu(o,"popover",g);break;case"xlinkActuate":sn(o,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":sn(o,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":sn(o,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":sn(o,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":sn(o,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":sn(o,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":sn(o,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":sn(o,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":sn(o,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Wu(o,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=KR.get(f)||f,Wu(o,f,g))}}function Ag(o,c,f,g,E,C){switch(f){case"style":w1(o,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(f=g.__html,f!=null){if(E.children!=null)throw Error(s(60));o.innerHTML=f}}break;case"children":typeof g=="string"?Qo(o,g):(typeof g=="number"||typeof g=="bigint")&&Qo(o,""+g);break;case"onScroll":g!=null&&st("scroll",o);break;case"onScrollEnd":g!=null&&st("scrollend",o);break;case"onClick":g!=null&&(o.onclick=Uh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!h1.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(E=f.endsWith("Capture"),c=f.slice(2,E?f.length-7:void 0),C=o[ga]||null,C=C!=null?C[f]:null,typeof C=="function"&&o.removeEventListener(c,C,E),typeof g=="function")){typeof C!="function"&&C!==null&&(f in o?o[f]=null:o.hasAttribute(f)&&o.removeAttribute(f)),o.addEventListener(c,g,E);break e}f in o?o[f]=g:g===!0?o.setAttribute(f,""):Wu(o,f,g)}}}function Br(o,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":st("error",o),st("load",o);var g=!1,E=!1,C;for(C in f)if(f.hasOwnProperty(C)){var z=f[C];if(z!=null)switch(C){case"src":g=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:wt(o,c,C,z,f,null)}}E&&wt(o,c,"srcSet",f.srcSet,f,null),g&&wt(o,c,"src",f.src,f,null);return;case"input":st("invalid",o);var q=C=z=E=null,ae=null,fe=null;for(g in f)if(f.hasOwnProperty(g)){var Se=f[g];if(Se!=null)switch(g){case"name":E=Se;break;case"type":z=Se;break;case"checked":ae=Se;break;case"defaultChecked":fe=Se;break;case"value":C=Se;break;case"defaultValue":q=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(s(137,c));break;default:wt(o,c,g,Se,f,null)}}x1(o,C,q,ae,fe,z,E,!1),Xu(o);return;case"select":st("invalid",o),g=z=C=null;for(E in f)if(f.hasOwnProperty(E)&&(q=f[E],q!=null))switch(E){case"value":C=q;break;case"defaultValue":z=q;break;case"multiple":g=q;default:wt(o,c,E,q,f,null)}c=C,f=z,o.multiple=!!g,c!=null?Zo(o,!!g,c,!1):f!=null&&Zo(o,!!g,f,!0);return;case"textarea":st("invalid",o),C=E=g=null;for(z in f)if(f.hasOwnProperty(z)&&(q=f[z],q!=null))switch(z){case"value":g=q;break;case"defaultValue":E=q;break;case"children":C=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(91));break;default:wt(o,c,z,q,f,null)}v1(o,g,E,C),Xu(o);return;case"option":for(ae in f)if(f.hasOwnProperty(ae)&&(g=f[ae],g!=null))switch(ae){case"selected":o.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:wt(o,c,ae,g,f,null)}return;case"dialog":st("cancel",o),st("close",o);break;case"iframe":case"object":st("load",o);break;case"video":case"audio":for(g=0;g<pd.length;g++)st(pd[g],o);break;case"image":st("error",o),st("load",o);break;case"details":st("toggle",o);break;case"embed":case"source":case"link":st("error",o),st("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in f)if(f.hasOwnProperty(fe)&&(g=f[fe],g!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,c));default:wt(o,c,fe,g,f,null)}return;default:if(Vp(c)){for(Se in f)f.hasOwnProperty(Se)&&(g=f[Se],g!==void 0&&Ag(o,c,Se,g,f,void 0));return}}for(q in f)f.hasOwnProperty(q)&&(g=f[q],g!=null&&wt(o,c,q,g,f,null))}function vM(o,c,f,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,C=null,z=null,q=null,ae=null,fe=null,Se=null;for(Ne in f){var Ae=f[Ne];if(f.hasOwnProperty(Ne)&&Ae!=null)switch(Ne){case"checked":break;case"value":break;case"defaultValue":ae=Ae;default:g.hasOwnProperty(Ne)||wt(o,c,Ne,null,g,Ae)}}for(var ve in g){var Ne=g[ve];if(Ae=f[ve],g.hasOwnProperty(ve)&&(Ne!=null||Ae!=null))switch(ve){case"type":C=Ne;break;case"name":E=Ne;break;case"checked":fe=Ne;break;case"defaultChecked":Se=Ne;break;case"value":z=Ne;break;case"defaultValue":q=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(s(137,c));break;default:Ne!==Ae&&wt(o,c,ve,Ne,g,Ae)}}Fp(o,z,q,ae,fe,Se,C,E);return;case"select":Ne=z=q=ve=null;for(C in f)if(ae=f[C],f.hasOwnProperty(C)&&ae!=null)switch(C){case"value":break;case"multiple":Ne=ae;default:g.hasOwnProperty(C)||wt(o,c,C,null,g,ae)}for(E in g)if(C=g[E],ae=f[E],g.hasOwnProperty(E)&&(C!=null||ae!=null))switch(E){case"value":ve=C;break;case"defaultValue":q=C;break;case"multiple":z=C;default:C!==ae&&wt(o,c,E,C,g,ae)}c=q,f=z,g=Ne,ve!=null?Zo(o,!!f,ve,!1):!!g!=!!f&&(c!=null?Zo(o,!!f,c,!0):Zo(o,!!f,f?[]:"",!1));return;case"textarea":Ne=ve=null;for(q in f)if(E=f[q],f.hasOwnProperty(q)&&E!=null&&!g.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:wt(o,c,q,null,g,E)}for(z in g)if(E=g[z],C=f[z],g.hasOwnProperty(z)&&(E!=null||C!=null))switch(z){case"value":ve=E;break;case"defaultValue":Ne=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:E!==C&&wt(o,c,z,E,g,C)}b1(o,ve,Ne);return;case"option":for(var He in f)if(ve=f[He],f.hasOwnProperty(He)&&ve!=null&&!g.hasOwnProperty(He))switch(He){case"selected":o.selected=!1;break;default:wt(o,c,He,null,g,ve)}for(ae in g)if(ve=g[ae],Ne=f[ae],g.hasOwnProperty(ae)&&ve!==Ne&&(ve!=null||Ne!=null))switch(ae){case"selected":o.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:wt(o,c,ae,ve,g,Ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Xe in f)ve=f[Xe],f.hasOwnProperty(Xe)&&ve!=null&&!g.hasOwnProperty(Xe)&&wt(o,c,Xe,null,g,ve);for(fe in g)if(ve=g[fe],Ne=f[fe],g.hasOwnProperty(fe)&&ve!==Ne&&(ve!=null||Ne!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(s(137,c));break;default:wt(o,c,fe,ve,g,Ne)}return;default:if(Vp(c)){for(var Jt in f)ve=f[Jt],f.hasOwnProperty(Jt)&&ve!==void 0&&!g.hasOwnProperty(Jt)&&Ag(o,c,Jt,void 0,g,ve);for(Se in g)ve=g[Se],Ne=f[Se],!g.hasOwnProperty(Se)||ve===Ne||ve===void 0&&Ne===void 0||Ag(o,c,Se,ve,g,Ne);return}}for(var me in f)ve=f[me],f.hasOwnProperty(me)&&ve!=null&&!g.hasOwnProperty(me)&&wt(o,c,me,null,g,ve);for(Ae in g)ve=g[Ae],Ne=f[Ae],!g.hasOwnProperty(Ae)||ve===Ne||ve==null&&Ne==null||wt(o,c,Ae,ve,g,Ne)}var Og=null,Tg=null;function qh(o){return o.nodeType===9?o:o.ownerDocument}function h_(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function f_(o,c){if(o===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&c==="foreignObject"?0:o}function Pg(o,c){return o==="textarea"||o==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Rg=null;function yM(){var o=window.event;return o&&o.type==="popstate"?o===Rg?!1:(Rg=o,!0):(Rg=null,!1)}var m_=typeof setTimeout=="function"?setTimeout:void 0,wM=typeof clearTimeout=="function"?clearTimeout:void 0,p_=typeof Promise=="function"?Promise:void 0,jM=typeof queueMicrotask=="function"?queueMicrotask:typeof p_<"u"?function(o){return p_.resolve(null).then(o).catch(NM)}:m_;function NM(o){setTimeout(function(){throw o})}function Dg(o,c){var f=c,g=0;do{var E=f.nextSibling;if(o.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(g===0){o.removeChild(E),_d(c);return}g--}else f!=="$"&&f!=="$?"&&f!=="$!"||g++;f=E}while(f);_d(c)}function Mg(o){var c=o.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Mg(f),qp(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}o.removeChild(f)}}function _M(o,c,f,g){for(;o.nodeType===1;){var E=f;if(o.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(g){if(!o[Pc])switch(c){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(C=o.getAttribute("rel"),C==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(C!==E.rel||o.getAttribute("href")!==(E.href==null?null:E.href)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||o.getAttribute("title")!==(E.title==null?null:E.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(C=o.getAttribute("src"),(C!==(E.src==null?null:E.src)||o.getAttribute("type")!==(E.type==null?null:E.type)||o.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&C&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(c==="input"&&o.type==="hidden"){var C=E.name==null?null:""+E.name;if(E.type==="hidden"&&o.getAttribute("name")===C)return o}else return o;if(o=Cs(o.nextSibling),o===null)break}return null}function SM(o,c,f){if(c==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!f||(o=Cs(o.nextSibling),o===null))return null;return o}function Cs(o){for(;o!=null;o=o.nextSibling){var c=o.nodeType;if(c===1||c===3)break;if(c===8){if(c=o.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return o}function g_(o){o=o.previousSibling;for(var c=0;o;){if(o.nodeType===8){var f=o.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return o;c--}else f==="/$"&&c++}o=o.previousSibling}return null}function x_(o,c,f){switch(c=qh(f),o){case"html":if(o=c.documentElement,!o)throw Error(s(452));return o;case"head":if(o=c.head,!o)throw Error(s(453));return o;case"body":if(o=c.body,!o)throw Error(s(454));return o;default:throw Error(s(451))}}var ls=new Map,b_=new Set;function Fh(o){return typeof o.getRootNode=="function"?o.getRootNode():o.ownerDocument}var yn=ie.d;ie.d={f:EM,r:kM,D:CM,C:AM,L:OM,m:TM,X:RM,S:PM,M:DM};function EM(){var o=yn.f(),c=Mh();return o||c}function kM(o){var c=Yo(o);c!==null&&c.tag===5&&c.type==="form"?VN(c):yn.r(o)}var El=typeof document>"u"?null:document;function v_(o,c,f){var g=El;if(g&&typeof c=="string"&&c){var E=Za(c);E='link[rel="'+o+'"][href="'+E+'"]',typeof f=="string"&&(E+='[crossorigin="'+f+'"]'),b_.has(E)||(b_.add(E),o={rel:o,crossOrigin:f,href:c},g.querySelector(E)===null&&(c=g.createElement("link"),Br(c,"link",o),Or(c),g.head.appendChild(c)))}}function CM(o){yn.D(o),v_("dns-prefetch",o,null)}function AM(o,c){yn.C(o,c),v_("preconnect",o,c)}function OM(o,c,f){yn.L(o,c,f);var g=El;if(g&&o&&c){var E='link[rel="preload"][as="'+Za(c)+'"]';c==="image"&&f&&f.imageSrcSet?(E+='[imagesrcset="'+Za(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(E+='[imagesizes="'+Za(f.imageSizes)+'"]')):E+='[href="'+Za(o)+'"]';var C=E;switch(c){case"style":C=kl(o);break;case"script":C=Cl(o)}ls.has(C)||(o=I({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:o,as:c},f),ls.set(C,o),g.querySelector(E)!==null||c==="style"&&g.querySelector(xd(C))||c==="script"&&g.querySelector(bd(C))||(c=g.createElement("link"),Br(c,"link",o),Or(c),g.head.appendChild(c)))}}function TM(o,c){yn.m(o,c);var f=El;if(f&&o){var g=c&&typeof c.as=="string"?c.as:"script",E='link[rel="modulepreload"][as="'+Za(g)+'"][href="'+Za(o)+'"]',C=E;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Cl(o)}if(!ls.has(C)&&(o=I({rel:"modulepreload",href:o},c),ls.set(C,o),f.querySelector(E)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(bd(C)))return}g=f.createElement("link"),Br(g,"link",o),Or(g),f.head.appendChild(g)}}}function PM(o,c,f){yn.S(o,c,f);var g=El;if(g&&o){var E=Xo(g).hoistableStyles,C=kl(o);c=c||"default";var z=E.get(C);if(!z){var q={loading:0,preload:null};if(z=g.querySelector(xd(C)))q.loading=5;else{o=I({rel:"stylesheet",href:o,"data-precedence":c},f),(f=ls.get(C))&&Ig(o,f);var ae=z=g.createElement("link");Or(ae),Br(ae,"link",o),ae._p=new Promise(function(fe,Se){ae.onload=fe,ae.onerror=Se}),ae.addEventListener("load",function(){q.loading|=1}),ae.addEventListener("error",function(){q.loading|=2}),q.loading|=4,Hh(z,c,g)}z={type:"stylesheet",instance:z,count:1,state:q},E.set(C,z)}}}function RM(o,c){yn.X(o,c);var f=El;if(f&&o){var g=Xo(f).hoistableScripts,E=Cl(o),C=g.get(E);C||(C=f.querySelector(bd(E)),C||(o=I({src:o,async:!0},c),(c=ls.get(E))&&zg(o,c),C=f.createElement("script"),Or(C),Br(C,"link",o),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(E,C))}}function DM(o,c){yn.M(o,c);var f=El;if(f&&o){var g=Xo(f).hoistableScripts,E=Cl(o),C=g.get(E);C||(C=f.querySelector(bd(E)),C||(o=I({src:o,async:!0,type:"module"},c),(c=ls.get(E))&&zg(o,c),C=f.createElement("script"),Or(C),Br(C,"link",o),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(E,C))}}function y_(o,c,f,g){var E=(E=Te.current)?Fh(E):null;if(!E)throw Error(s(446));switch(o){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=kl(f.href),f=Xo(E).hoistableStyles,g=f.get(c),g||(g={type:"style",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){o=kl(f.href);var C=Xo(E).hoistableStyles,z=C.get(o);if(z||(E=E.ownerDocument||E,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(o,z),(C=E.querySelector(xd(o)))&&!C._p&&(z.instance=C,z.state.loading=5),ls.has(o)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ls.set(o,f),C||MM(E,o,f,z.state))),c&&g===null)throw Error(s(528,""));return z}if(c&&g!==null)throw Error(s(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Cl(f),f=Xo(E).hoistableScripts,g=f.get(c),g||(g={type:"script",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,o))}}function kl(o){return'href="'+Za(o)+'"'}function xd(o){return'link[rel="stylesheet"]['+o+"]"}function w_(o){return I({},o,{"data-precedence":o.precedence,precedence:null})}function MM(o,c,f,g){o.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=o.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Br(c,"link",f),Or(c),o.head.appendChild(c))}function Cl(o){return'[src="'+Za(o)+'"]'}function bd(o){return"script[async]"+o}function j_(o,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var g=o.querySelector('style[data-href~="'+Za(f.href)+'"]');if(g)return c.instance=g,Or(g),g;var E=I({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(o.ownerDocument||o).createElement("style"),Or(g),Br(g,"style",E),Hh(g,f.precedence,o),c.instance=g;case"stylesheet":E=kl(f.href);var C=o.querySelector(xd(E));if(C)return c.state.loading|=4,c.instance=C,Or(C),C;g=w_(f),(E=ls.get(E))&&Ig(g,E),C=(o.ownerDocument||o).createElement("link"),Or(C);var z=C;return z._p=new Promise(function(q,ae){z.onload=q,z.onerror=ae}),Br(C,"link",g),c.state.loading|=4,Hh(C,f.precedence,o),c.instance=C;case"script":return C=Cl(f.src),(E=o.querySelector(bd(C)))?(c.instance=E,Or(E),E):(g=f,(E=ls.get(C))&&(g=I({},f),zg(g,E)),o=o.ownerDocument||o,E=o.createElement("script"),Or(E),Br(E,"link",g),o.head.appendChild(E),c.instance=E);case"void":return null;default:throw Error(s(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,Hh(g,f.precedence,o));return c.instance}function Hh(o,c,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=g.length?g[g.length-1]:null,C=E,z=0;z<g.length;z++){var q=g[z];if(q.dataset.precedence===c)C=q;else if(C!==E)break}C?C.parentNode.insertBefore(o,C.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(o,c.firstChild))}function Ig(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.title==null&&(o.title=c.title)}function zg(o,c){o.crossOrigin==null&&(o.crossOrigin=c.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=c.referrerPolicy),o.integrity==null&&(o.integrity=c.integrity)}var Vh=null;function N_(o,c,f){if(Vh===null){var g=new Map,E=Vh=new Map;E.set(f,g)}else E=Vh,g=E.get(f),g||(g=new Map,E.set(f,g));if(g.has(o))return g;for(g.set(o,null),f=f.getElementsByTagName(o),E=0;E<f.length;E++){var C=f[E];if(!(C[Pc]||C[ir]||o==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var z=C.getAttribute(c)||"";z=o+z;var q=g.get(z);q?q.push(C):g.set(z,[C])}}return g}function __(o,c,f){o=o.ownerDocument||o,o.head.insertBefore(f,c==="title"?o.querySelector("head > title"):null)}function IM(o,c,f){if(f===1||c.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return o=c.disabled,typeof c.precedence=="string"&&o==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function S_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var vd=null;function zM(){}function $M(o,c,f){if(vd===null)throw Error(s(475));var g=vd;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var E=kl(f.href),C=o.querySelector(xd(E));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(g.count++,g=Gh.bind(g),o.then(g,g)),c.state.loading|=4,c.instance=C,Or(C);return}C=o.ownerDocument||o,f=w_(f),(E=ls.get(E))&&Ig(f,E),C=C.createElement("link"),Or(C);var z=C;z._p=new Promise(function(q,ae){z.onload=q,z.onerror=ae}),Br(C,"link",f),c.instance=C}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=Gh.bind(g),o.addEventListener("load",c),o.addEventListener("error",c))}}function LM(){if(vd===null)throw Error(s(475));var o=vd;return o.stylesheets&&o.count===0&&$g(o,o.stylesheets),0<o.count?function(c){var f=setTimeout(function(){if(o.stylesheets&&$g(o,o.stylesheets),o.unsuspend){var g=o.unsuspend;o.unsuspend=null,g()}},6e4);return o.unsuspend=c,function(){o.unsuspend=null,clearTimeout(f)}}:null}function Gh(){if(this.count--,this.count===0){if(this.stylesheets)$g(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Kh=null;function $g(o,c){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Kh=new Map,c.forEach(BM,o),Kh=null,Gh.call(o))}function BM(o,c){if(!(c.state.loading&4)){var f=Kh.get(o);if(f)var g=f.get(null);else{f=new Map,Kh.set(o,f);for(var E=o.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<E.length;C++){var z=E[C];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(f.set(z.dataset.precedence,z),g=z)}g&&f.set(null,g)}E=c.instance,z=E.getAttribute("data-precedence"),C=f.get(z)||g,C===g&&f.set(null,E),f.set(z,E),this.count++,g=Gh.bind(this),E.addEventListener("load",g),E.addEventListener("error",g),C?C.parentNode.insertBefore(E,C.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(E,o.firstChild)),c.state.loading|=4}}var yd={$$typeof:b,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function UM(o,c,f,g,E,C,z,q){this.tag=1,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ls(0),this.hiddenUpdates=Ls(null),this.identifierPrefix=g,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function E_(o,c,f,g,E,C,z,q,ae,fe,Se,Ae){return o=new UM(o,c,f,z,q,ae,fe,Ae),c=1,C===!0&&(c|=24),C=is(3,null,null,c),o.current=C,C.stateNode=o,c=g0(),c.refCount++,o.pooledCache=c,c.refCount++,C.memoizedState={element:g,isDehydrated:f,cache:c},X0(C),o}function k_(o){return o?(o=il,o):il}function C_(o,c,f,g,E,C){E=k_(E),g.context===null?g.context=E:g.pendingContext=E,g=ai(c),g.payload={element:f},C=C===void 0?null:C,C!==null&&(g.callback=C),f=si(o,g,c),f!==null&&(oa(f,o,c),ad(f,o,c))}function A_(o,c){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var f=o.retryLane;o.retryLane=f!==0&&f<c?f:c}}function Lg(o,c){A_(o,c),(o=o.alternate)&&A_(o,c)}function O_(o){if(o.tag===13){var c=Xn(o,67108864);c!==null&&oa(c,o,67108864),Lg(o,67108864)}}var Wh=!0;function qM(o,c,f,g){var E=R.T;R.T=null;var C=ie.p;try{ie.p=2,Bg(o,c,f,g)}finally{ie.p=C,R.T=E}}function FM(o,c,f,g){var E=R.T;R.T=null;var C=ie.p;try{ie.p=8,Bg(o,c,f,g)}finally{ie.p=C,R.T=E}}function Bg(o,c,f,g){if(Wh){var E=Ug(g);if(E===null)Cg(o,c,g,Yh,f),P_(o,g);else if(VM(E,o,c,f,g))g.stopPropagation();else if(P_(o,g),c&4&&-1<HM.indexOf(o)){for(;E!==null;){var C=Yo(E);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var z=At(C.pendingLanes);if(z!==0){var q=C;for(q.pendingLanes|=2,q.entangledLanes|=2;z;){var ae=1<<31-Wt(z);q.entanglements[1]|=ae,z&=~ae}Gs(C),(Ht&6)===0&&(Ph=ke()+500,md(0))}}break;case 13:q=Xn(C,2),q!==null&&oa(q,C,2),Mh(),Lg(C,2)}if(C=Ug(g),C===null&&Cg(o,c,g,Yh,f),C===E)break;E=C}E!==null&&g.stopPropagation()}else Cg(o,c,g,null,f)}}function Ug(o){return o=Kp(o),qg(o)}var Yh=null;function qg(o){if(Yh=null,o=Vi(o),o!==null){var c=Q(o);if(c===null)o=null;else{var f=c.tag;if(f===13){if(o=le(c),o!==null)return o;o=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;o=null}else c!==o&&(o=null)}}return Yh=o,null}function T_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(we()){case Pe:return 2;case Ge:return 8;case Re:case Qe:return 32;case gt:return 268435456;default:return 32}default:return 32}}var Fg=!1,ui=null,hi=null,fi=null,wd=new Map,jd=new Map,mi=[],HM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function P_(o,c){switch(o){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":hi=null;break;case"mouseover":case"mouseout":fi=null;break;case"pointerover":case"pointerout":wd.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":jd.delete(c.pointerId)}}function Nd(o,c,f,g,E,C){return o===null||o.nativeEvent!==C?(o={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:C,targetContainers:[E]},c!==null&&(c=Yo(c),c!==null&&O_(c)),o):(o.eventSystemFlags|=g,c=o.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),o)}function VM(o,c,f,g,E){switch(c){case"focusin":return ui=Nd(ui,o,c,f,g,E),!0;case"dragenter":return hi=Nd(hi,o,c,f,g,E),!0;case"mouseover":return fi=Nd(fi,o,c,f,g,E),!0;case"pointerover":var C=E.pointerId;return wd.set(C,Nd(wd.get(C)||null,o,c,f,g,E)),!0;case"gotpointercapture":return C=E.pointerId,jd.set(C,Nd(jd.get(C)||null,o,c,f,g,E)),!0}return!1}function R_(o){var c=Vi(o.target);if(c!==null){var f=Q(c);if(f!==null){if(c=f.tag,c===13){if(c=le(f),c!==null){o.blockedOn=c,Us(o.priority,function(){if(f.tag===13){var g=Ra(),E=Xn(f,g);E!==null&&oa(E,f,g),Lg(f,g)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){o.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xh(o){if(o.blockedOn!==null)return!1;for(var c=o.targetContainers;0<c.length;){var f=Ug(o.nativeEvent);if(f===null){f=o.nativeEvent;var g=new f.constructor(f.type,f);Gp=g,f.target.dispatchEvent(g),Gp=null}else return c=Yo(f),c!==null&&O_(c),o.blockedOn=f,!1;c.shift()}return!0}function D_(o,c,f){Xh(o)&&f.delete(c)}function GM(){Fg=!1,ui!==null&&Xh(ui)&&(ui=null),hi!==null&&Xh(hi)&&(hi=null),fi!==null&&Xh(fi)&&(fi=null),wd.forEach(D_),jd.forEach(D_)}function Jh(o,c){o.blockedOn===c&&(o.blockedOn=null,Fg||(Fg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,GM)))}var Zh=null;function M_(o){Zh!==o&&(Zh=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zh===o&&(Zh=null);for(var c=0;c<o.length;c+=3){var f=o[c],g=o[c+1],E=o[c+2];if(typeof g!="function"){if(qg(g||f)===null)continue;break}var C=Yo(f);C!==null&&(o.splice(c,3),c-=3,P0(C,{pending:!0,data:E,method:f.method,action:g},g,E))}}))}function _d(o){function c(ae){return Jh(ae,o)}ui!==null&&Jh(ui,o),hi!==null&&Jh(hi,o),fi!==null&&Jh(fi,o),wd.forEach(c),jd.forEach(c);for(var f=0;f<mi.length;f++){var g=mi[f];g.blockedOn===o&&(g.blockedOn=null)}for(;0<mi.length&&(f=mi[0],f.blockedOn===null);)R_(f),f.blockedOn===null&&mi.shift();if(f=(o.ownerDocument||o).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var E=f[g],C=f[g+1],z=E[ga]||null;if(typeof C=="function")z||M_(f);else if(z){var q=null;if(C&&C.hasAttribute("formAction")){if(E=C,z=C[ga]||null)q=z.formAction;else if(qg(E)!==null)continue}else q=z.action;typeof q=="function"?f[g+1]=q:(f.splice(g,3),g-=3),M_(f)}}}function Hg(o){this._internalRoot=o}Qh.prototype.render=Hg.prototype.render=function(o){var c=this._internalRoot;if(c===null)throw Error(s(409));var f=c.current,g=Ra();C_(f,g,o,c,null,null)},Qh.prototype.unmount=Hg.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var c=o.containerInfo;o.tag===0&&Nl(),C_(o.current,2,null,o,null,null),Mh(),c[Wo]=null}};function Qh(o){this._internalRoot=o}Qh.prototype.unstable_scheduleHydration=function(o){if(o){var c=Wn();o={blockedOn:null,target:o,priority:c};for(var f=0;f<mi.length&&c!==0&&c<mi[f].priority;f++);mi.splice(f,0,o),f===0&&R_(o)}};var I_=t.version;if(I_!=="19.0.0")throw Error(s(527,I_,"19.0.0"));ie.findDOMNode=function(o){var c=o._reactInternals;if(c===void 0)throw typeof o.render=="function"?Error(s(188)):(o=Object.keys(o).join(","),Error(s(268,o)));return o=V(c),o=o!==null?B(o):null,o=o===null?null:o.stateNode,o};var KM={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:Vi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{Me=ef.inject(KM),Ye=ef}catch{}}return Ed.createRoot=function(o,c){if(!n(o))throw Error(s(299));var f=!1,g="",E=QN,C=e2,z=t2,q=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(E=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(z=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(q=c.unstable_transitionCallbacks)),c=E_(o,1,!1,null,null,f,g,E,C,z,q,null),o[Wo]=c.current,kg(o.nodeType===8?o.parentNode:o),new Hg(c)},Ed.hydrateRoot=function(o,c,f){if(!n(o))throw Error(s(299));var g=!1,E="",C=QN,z=e2,q=t2,ae=null,fe=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(E=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(z=f.onCaughtError),f.onRecoverableError!==void 0&&(q=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(ae=f.unstable_transitionCallbacks),f.formState!==void 0&&(fe=f.formState)),c=E_(o,1,!0,c,f??null,g,E,C,z,q,ae,fe),c.context=k_(null),f=c.current,g=Ra(),E=ai(g),E.callback=null,si(f,E,g),c.current.lanes=g,qt(c,g),Gs(c),o[Wo]=c.current,kg(o),new Qh(c)},Ed.version="19.0.0",Ed}var G_;function nI(){if(G_)return Wg.exports;G_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wg.exports=sI(),Wg.exports}var iI=nI();const oI=window.fetch;window.fetch=function(...e){const[t,r={}]=e,n=(t instanceof Request?t.url:t.toString()).includes("supabase.co"),i={...r,credentials:n?void 0:"include",headers:{...r.headers||{}}},l=i.headers;if(!l.Authorization){let d=null;for(let u=0;u<localStorage.length;u++){const h=localStorage.key(u);if(h&&h.startsWith("sb-")&&h.endsWith("-auth-token"))try{const m=localStorage.getItem(h);if(m){const p=JSON.parse(m);if(p.access_token){d=p.access_token;break}}}catch(m){console.error("Error parsing Supabase token:",m)}}d&&(l.Authorization=`Bearer ${d}`)}return oI(t,i)};/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var K_="popstate";function lI(e={}){function t(s,n){let{pathname:i,search:l,hash:d}=s.location;return rv("",{pathname:i,search:l,hash:d},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(s,n){return typeof n=="string"?n:Zd(n)}return dI(t,r,null,e)}function Lt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qa(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cI(){return Math.random().toString(36).substring(2,10)}function W_(e,t){return{usr:e.state,key:e.key,idx:t}}function rv(e,t,r=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?hc(t):t,state:r,key:t&&t.key||s||cI()}}function Zd({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function hc(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function dI(e,t,r,s={}){let{window:n=document.defaultView,v5Compat:i=!1}=s,l=n.history,d="POP",u=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function p(){d="POP";let w=m(),N=w==null?null:w-h;h=w,u&&u({action:d,location:v.location,delta:N})}function x(w,N){d="PUSH";let S=rv(v.location,w,N);h=m()+1;let j=W_(S,h),k=v.createHref(S);try{l.pushState(j,"",k)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;n.location.assign(k)}i&&u&&u({action:d,location:v.location,delta:1})}function b(w,N){d="REPLACE";let S=rv(v.location,w,N);h=m();let j=W_(S,h),k=v.createHref(S);l.replaceState(j,"",k),i&&u&&u({action:d,location:v.location,delta:0})}function y(w){return uI(w)}let v={get action(){return d},get location(){return e(n,l)},listen(w){if(u)throw new Error("A history only accepts one active listener");return n.addEventListener(K_,p),u=w,()=>{n.removeEventListener(K_,p),u=null}},createHref(w){return t(n,w)},createURL:y,encodeLocation(w){let N=y(w);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:x,replace:b,go(w){return l.go(w)}};return v}function uI(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Lt(r,"No window.location.(origin|href) available to create URL");let s=typeof e=="string"?e:Zd(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}function b5(e,t,r="/"){return hI(e,t,r,!1)}function hI(e,t,r,s){let n=typeof t=="string"?hc(t):t,i=Rn(n.pathname||"/",r);if(i==null)return null;let l=v5(e);fI(l);let d=null;for(let u=0;d==null&&u<l.length;++u){let h=_I(i);d=jI(l[u],h,s)}return d}function v5(e,t=[],r=[],s="",n=!1){let i=(l,d,u=n,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(s)&&u)return;Lt(m.relativePath.startsWith(s),`Absolute route path "${m.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(s.length)}let p=An([s,m.relativePath]),x=r.concat(m);l.children&&l.children.length>0&&(Lt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),v5(l.children,t,x,p,u)),!(l.path==null&&!l.index)&&t.push({path:p,score:yI(p,l.index),routesMeta:x})};return e.forEach((l,d)=>{var u;if(l.path===""||!((u=l.path)!=null&&u.includes("?")))i(l,d);else for(let h of y5(l.path))i(l,d,!0,h)}),t}function y5(e){let t=e.split("/");if(t.length===0)return[];let[r,...s]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(s.length===0)return n?[i,""]:[i];let l=y5(s.join("/")),d=[];return d.push(...l.map(u=>u===""?i:[i,u].join("/"))),n&&d.push(...l),d.map(u=>e.startsWith("/")&&u===""?"/":u)}function fI(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:wI(t.routesMeta.map(s=>s.childrenIndex),r.routesMeta.map(s=>s.childrenIndex)))}var mI=/^:[\w-]+$/,pI=3,gI=2,xI=1,bI=10,vI=-2,Y_=e=>e==="*";function yI(e,t){let r=e.split("/"),s=r.length;return r.some(Y_)&&(s+=vI),t&&(s+=gI),r.filter(n=>!Y_(n)).reduce((n,i)=>n+(mI.test(i)?pI:i===""?xI:bI),s)}function wI(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function jI(e,t,r=!1){let{routesMeta:s}=e,n={},i="/",l=[];for(let d=0;d<s.length;++d){let u=s[d],h=d===s.length-1,m=i==="/"?t:t.slice(i.length)||"/",p=Hf({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),x=u.route;if(!p&&h&&r&&!s[s.length-1].route.index&&(p=Hf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!p)return null;Object.assign(n,p.params),l.push({params:n,pathname:An([i,p.pathname]),pathnameBase:AI(An([i,p.pathnameBase])),route:x}),p.pathnameBase!=="/"&&(i=An([i,p.pathnameBase]))}return l}function Hf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=NI(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let i=n[0],l=i.replace(/(.)\/+$/,"$1"),d=n.slice(1);return{params:s.reduce((h,{paramName:m,isOptional:p},x)=>{if(m==="*"){let y=d[x]||"";l=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const b=d[x];return p&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:i,pathnameBase:l,pattern:e}}function NI(e,t=!1,r=!0){qa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,u)=>(s.push({paramName:d,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function _I(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qa(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Rn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&s!=="/"?null:e.slice(r)||"/"}var SI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,EI=e=>SI.test(e);function kI(e,t="/"){let{pathname:r,search:s="",hash:n=""}=typeof e=="string"?hc(e):e,i;if(r)if(EI(r))i=r;else{if(r.includes("//")){let l=r;r=r.replace(/\/\/+/g,"/"),qa(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${r}`)}r.startsWith("/")?i=X_(r.substring(1),"/"):i=X_(r,t)}else i=t;return{pathname:i,search:OI(s),hash:TI(n)}}function X_(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function Zg(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CI(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ey(e){let t=CI(e);return t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase)}function ky(e,t,r,s=!1){let n;typeof e=="string"?n=hc(e):(n={...e},Lt(!n.pathname||!n.pathname.includes("?"),Zg("?","pathname","search",n)),Lt(!n.pathname||!n.pathname.includes("#"),Zg("#","pathname","hash",n)),Lt(!n.search||!n.search.includes("#"),Zg("#","search","hash",n)));let i=e===""||n.pathname==="",l=i?"/":n.pathname,d;if(l==null)d=r;else{let p=t.length-1;if(!s&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),p-=1;n.pathname=x.join("/")}d=p>=0?t[p]:"/"}let u=kI(n,d),h=l&&l!=="/"&&l.endsWith("/"),m=(i||l===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var An=e=>e.join("/").replace(/\/\/+/g,"/"),AI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),OI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,TI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function PI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function RI(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var w5=["POST","PUT","PATCH","DELETE"];new Set(w5);var DI=["GET",...w5];new Set(DI);var fc=_.createContext(null);fc.displayName="DataRouter";var Ym=_.createContext(null);Ym.displayName="DataRouterState";_.createContext(!1);var j5=_.createContext({isTransitioning:!1});j5.displayName="ViewTransition";var MI=_.createContext(new Map);MI.displayName="Fetchers";var II=_.createContext(null);II.displayName="Await";var Ns=_.createContext(null);Ns.displayName="Navigation";var yu=_.createContext(null);yu.displayName="Location";var zs=_.createContext({outlet:null,matches:[],isDataRoute:!1});zs.displayName="Route";var Cy=_.createContext(null);Cy.displayName="RouteError";function zI(e,{relative:t}={}){Lt(mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=_.useContext(Ns),{hash:n,pathname:i,search:l}=wu(e,{relative:t}),d=i;return r!=="/"&&(d=i==="/"?r:An([r,i])),s.createHref({pathname:d,search:l,hash:n})}function mc(){return _.useContext(yu)!=null}function Ga(){return Lt(mc(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(yu).location}var N5="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _5(e){_.useContext(Ns).static||_.useLayoutEffect(e)}function na(){let{isDataRoute:e}=_.useContext(zs);return e?XI():$I()}function $I(){Lt(mc(),"useNavigate() may be used only in the context of a <Router> component.");let e=_.useContext(fc),{basename:t,navigator:r}=_.useContext(Ns),{matches:s}=_.useContext(zs),{pathname:n}=Ga(),i=JSON.stringify(Ey(s)),l=_.useRef(!1);return _5(()=>{l.current=!0}),_.useCallback((u,h={})=>{if(qa(l.current,N5),!l.current)return;if(typeof u=="number"){r.go(u);return}let m=ky(u,JSON.parse(i),n,h.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:An([t,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[t,r,i,n,e])}_.createContext(null);function $i(){let{matches:e}=_.useContext(zs),t=e[e.length-1];return t?t.params:{}}function wu(e,{relative:t}={}){let{matches:r}=_.useContext(zs),{pathname:s}=Ga(),n=JSON.stringify(Ey(r));return _.useMemo(()=>ky(e,JSON.parse(n),s,t==="path"),[e,n,s,t])}function LI(e,t){return S5(e,t)}function S5(e,t,r,s,n){var S;Lt(mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=_.useContext(Ns),{matches:l}=_.useContext(zs),d=l[l.length-1],u=d?d.params:{},h=d?d.pathname:"/",m=d?d.pathnameBase:"/",p=d&&d.route;{let j=p&&p.path||"";E5(h,!p||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let x=Ga(),b;if(t){let j=typeof t=="string"?hc(t):t;Lt(m==="/"||((S=j.pathname)==null?void 0:S.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${j.pathname}" was given in the \`location\` prop.`),b=j}else b=x;let y=b.pathname||"/",v=y;if(m!=="/"){let j=m.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(j.length).join("/")}let w=b5(e,{pathname:v});qa(p||w!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),qa(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=HI(w&&w.map(j=>Object.assign({},j,{params:Object.assign({},u,j.params),pathname:An([m,i.encodeLocation?i.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?m:An([m,i.encodeLocation?i.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),l,r,s,n);return t&&N?_.createElement(yu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},N):N}function BI(){let e=YI(),t=PI(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:i},"ErrorBoundary")," or"," ",_.createElement("code",{style:i},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},t),r?_.createElement("pre",{style:n},r):null,l)}var UI=_.createElement(BI,null),qI=class extends _.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?_.createElement(zs.Provider,{value:this.props.routeContext},_.createElement(Cy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function FI({routeContext:e,match:t,children:r}){let s=_.useContext(fc);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),_.createElement(zs.Provider,{value:e},r)}function HI(e,t=[],r=null,s=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=r==null?void 0:r.errors;if(l!=null){let m=i.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);Lt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),i=i.slice(0,Math.min(i.length,m+1))}let d=!1,u=-1;if(r)for(let m=0;m<i.length;m++){let p=i[m];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=m),p.route.id){let{loaderData:x,errors:b}=r,y=p.route.loader&&!x.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||y){d=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let h=r&&s?(m,p)=>{var x,b;s(m,{location:r.location,params:((b=(x=r.matches)==null?void 0:x[0])==null?void 0:b.params)??{},unstable_pattern:RI(r.matches),errorInfo:p})}:void 0;return i.reduceRight((m,p,x)=>{let b,y=!1,v=null,w=null;r&&(b=l&&p.route.id?l[p.route.id]:void 0,v=p.route.errorElement||UI,d&&(u<0&&x===0?(E5("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):u===x&&(y=!0,w=p.route.hydrateFallbackElement||null)));let N=t.concat(i.slice(0,x+1)),S=()=>{let j;return b?j=v:y?j=w:p.route.Component?j=_.createElement(p.route.Component,null):p.route.element?j=p.route.element:j=m,_.createElement(FI,{match:p,routeContext:{outlet:m,matches:N,isDataRoute:r!=null},children:j})};return r&&(p.route.ErrorBoundary||p.route.errorElement||x===0)?_.createElement(qI,{location:r.location,revalidation:r.revalidation,component:v,error:b,children:S(),routeContext:{outlet:null,matches:N,isDataRoute:!0},onError:h}):S()},null)}function Ay(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VI(e){let t=_.useContext(fc);return Lt(t,Ay(e)),t}function GI(e){let t=_.useContext(Ym);return Lt(t,Ay(e)),t}function KI(e){let t=_.useContext(zs);return Lt(t,Ay(e)),t}function Oy(e){let t=KI(e),r=t.matches[t.matches.length-1];return Lt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function WI(){return Oy("useRouteId")}function YI(){var s;let e=_.useContext(Cy),t=GI("useRouteError"),r=Oy("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[r]}function XI(){let{router:e}=VI("useNavigate"),t=Oy("useNavigate"),r=_.useRef(!1);return _5(()=>{r.current=!0}),_.useCallback(async(n,i={})=>{qa(r.current,N5),r.current&&(typeof n=="number"?await e.navigate(n):await e.navigate(n,{fromRouteId:t,...i}))},[e,t])}var J_={};function E5(e,t,r){!t&&!J_[e]&&(J_[e]=!0,qa(!1,r))}_.memo(JI);function JI({routes:e,future:t,state:r,unstable_onError:s}){return S5(e,void 0,r,s,t)}function Vf({to:e,replace:t,state:r,relative:s}){Lt(mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=_.useContext(Ns);qa(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=_.useContext(zs),{pathname:l}=Ga(),d=na(),u=ky(e,Ey(i),l,s==="path"),h=JSON.stringify(u);return _.useEffect(()=>{d(JSON.parse(h),{replace:t,state:r,relative:s})},[d,h,s,t,r]),null}function xt(e){Lt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZI({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:n,static:i=!1,unstable_useTransitions:l}){Lt(!mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=e.replace(/^\/*/,"/"),u=_.useMemo(()=>({basename:d,navigator:n,static:i,unstable_useTransitions:l,future:{}}),[d,n,i,l]);typeof r=="string"&&(r=hc(r));let{pathname:h="/",search:m="",hash:p="",state:x=null,key:b="default"}=r,y=_.useMemo(()=>{let v=Rn(h,d);return v==null?null:{location:{pathname:v,search:m,hash:p,state:x,key:b},navigationType:s}},[d,h,m,p,x,b,s]);return qa(y!=null,`<Router basename="${d}"> is not able to match the URL "${h}${m}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:_.createElement(Ns.Provider,{value:u},_.createElement(yu.Provider,{children:t,value:y}))}function QI({children:e,location:t}){return LI(av(e),t)}function av(e,t=[]){let r=[];return _.Children.forEach(e,(s,n)=>{if(!_.isValidElement(s))return;let i=[...t,n];if(s.type===_.Fragment){r.push.apply(r,av(s.props.children,i));return}Lt(s.type===xt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Lt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let l={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(l.children=av(s.props.children,i)),r.push(l)}),r}var Mf="get",If="application/x-www-form-urlencoded";function Xm(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function e8(e){return Xm(e)&&e.tagName.toLowerCase()==="button"}function t8(e){return Xm(e)&&e.tagName.toLowerCase()==="form"}function r8(e){return Xm(e)&&e.tagName.toLowerCase()==="input"}function a8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function s8(e,t){return e.button===0&&(!t||t==="_self")&&!a8(e)}function sv(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let s=e[r];return t.concat(Array.isArray(s)?s.map(n=>[r,n]):[[r,s]])},[]))}function n8(e,t){let r=sv(e);return t&&t.forEach((s,n)=>{r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)})}),r}var rf=null;function i8(){if(rf===null)try{new FormData(document.createElement("form"),0),rf=!1}catch{rf=!0}return rf}var o8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qg(e){return e!=null&&!o8.has(e)?(qa(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${If}"`),null):e}function l8(e,t){let r,s,n,i,l;if(t8(e)){let d=e.getAttribute("action");s=d?Rn(d,t):null,r=e.getAttribute("method")||Mf,n=Qg(e.getAttribute("enctype"))||If,i=new FormData(e)}else if(e8(e)||r8(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||d.getAttribute("action");if(s=u?Rn(u,t):null,r=e.getAttribute("formmethod")||d.getAttribute("method")||Mf,n=Qg(e.getAttribute("formenctype"))||Qg(d.getAttribute("enctype"))||If,i=new FormData(d,e),!i8()){let{name:h,type:m,value:p}=e;if(m==="image"){let x=h?`${h}.`:"";i.append(`${x}x`,"0"),i.append(`${x}y`,"0")}else h&&i.append(h,p)}}else{if(Xm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Mf,s=null,n=If,l=e}return i&&n==="text/plain"&&(l=i,i=void 0),{action:s,method:r.toLowerCase(),encType:n,formData:i,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ty(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function c8(e,t,r){let s=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s.pathname==="/"?s.pathname=`_root.${r}`:t&&Rn(s.pathname,t)==="/"?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function d8(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function u8(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function h8(e,t,r){let s=await Promise.all(e.map(async n=>{let i=t.routes[n.route.id];if(i){let l=await d8(i,r);return l.links?l.links():[]}return[]}));return g8(s.flat(1).filter(u8).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Z_(e,t,r,s,n,i){let l=(u,h)=>r[h]?u.route.id!==r[h].route.id:!0,d=(u,h)=>{var m;return r[h].pathname!==u.pathname||((m=r[h].route.path)==null?void 0:m.endsWith("*"))&&r[h].params["*"]!==u.params["*"]};return i==="assets"?t.filter((u,h)=>l(u,h)||d(u,h)):i==="data"?t.filter((u,h)=>{var p;let m=s.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(l(u,h)||d(u,h))return!0;if(u.route.shouldRevalidate){let x=u.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((p=r[0])==null?void 0:p.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function f8(e,t,{includeHydrateFallback:r}={}){return m8(e.map(s=>{let n=t.routes[s.route.id];if(!n)return[];let i=[n.module];return n.clientActionModule&&(i=i.concat(n.clientActionModule)),n.clientLoaderModule&&(i=i.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(i=i.concat(n.hydrateFallbackModule)),n.imports&&(i=i.concat(n.imports)),i}).flat(1))}function m8(e){return[...new Set(e)]}function p8(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}function g8(e,t){let r=new Set;return new Set(t),e.reduce((s,n)=>{let i=JSON.stringify(p8(n));return r.has(i)||(r.add(i),s.push({key:i,link:n})),s},[])}function k5(){let e=_.useContext(fc);return Ty(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function x8(){let e=_.useContext(Ym);return Ty(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Py=_.createContext(void 0);Py.displayName="FrameworkContext";function C5(){let e=_.useContext(Py);return Ty(e,"You must render this element inside a <HydratedRouter> element"),e}function b8(e,t){let r=_.useContext(Py),[s,n]=_.useState(!1),[i,l]=_.useState(!1),{onFocus:d,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:p}=t,x=_.useRef(null);_.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let v=N=>{N.forEach(S=>{l(S.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return x.current&&w.observe(x.current),()=>{w.disconnect()}}},[e]),_.useEffect(()=>{if(s){let v=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(v)}}},[s]);let b=()=>{n(!0)},y=()=>{n(!1),l(!1)};return r?e!=="intent"?[i,x,{}]:[i,x,{onFocus:kd(d,b),onBlur:kd(u,y),onMouseEnter:kd(h,b),onMouseLeave:kd(m,y),onTouchStart:kd(p,b)}]:[!1,x,{}]}function kd(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function v8({page:e,...t}){let{router:r}=k5(),s=_.useMemo(()=>b5(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?_.createElement(w8,{page:e,matches:s,...t}):null}function y8(e){let{manifest:t,routeModules:r}=C5(),[s,n]=_.useState([]);return _.useEffect(()=>{let i=!1;return h8(e,t,r).then(l=>{i||n(l)}),()=>{i=!0}},[e,t,r]),s}function w8({page:e,matches:t,...r}){let s=Ga(),{manifest:n,routeModules:i}=C5(),{basename:l}=k5(),{loaderData:d,matches:u}=x8(),h=_.useMemo(()=>Z_(e,t,u,n,s,"data"),[e,t,u,n,s]),m=_.useMemo(()=>Z_(e,t,u,n,s,"assets"),[e,t,u,n,s]),p=_.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let y=new Set,v=!1;if(t.forEach(N=>{var j;let S=n.routes[N.route.id];!S||!S.hasLoader||(!h.some(k=>k.route.id===N.route.id)&&N.route.id in d&&((j=i[N.route.id])!=null&&j.shouldRevalidate)||S.hasClientLoader?v=!0:y.add(N.route.id))}),y.size===0)return[];let w=c8(e,l,"data");return v&&y.size>0&&w.searchParams.set("_routes",t.filter(N=>y.has(N.route.id)).map(N=>N.route.id).join(",")),[w.pathname+w.search]},[l,d,s,n,h,t,e,i]),x=_.useMemo(()=>f8(m,n),[m,n]),b=y8(m);return _.createElement(_.Fragment,null,p.map(y=>_.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...r})),x.map(y=>_.createElement("link",{key:y,rel:"modulepreload",href:y,...r})),b.map(({key:y,link:v})=>_.createElement("link",{key:y,nonce:r.nonce,...v})))}function j8(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var A5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A5&&(window.__reactRouterVersion="7.10.1")}catch{}function N8({basename:e,children:t,unstable_useTransitions:r,window:s}){let n=_.useRef();n.current==null&&(n.current=lI({window:s,v5Compat:!0}));let i=n.current,[l,d]=_.useState({action:i.action,location:i.location}),u=_.useCallback(h=>{r===!1?d(h):_.startTransition(()=>d(h))},[r]);return _.useLayoutEffect(()=>i.listen(u),[i,u]),_.createElement(ZI,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:i,unstable_useTransitions:r===!0})}var O5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=_.forwardRef(function({onClick:t,discover:r="render",prefetch:s="none",relative:n,reloadDocument:i,replace:l,state:d,target:u,to:h,preventScrollReset:m,viewTransition:p,...x},b){let{basename:y,unstable_useTransitions:v}=_.useContext(Ns),w=typeof h=="string"&&O5.test(h),N,S=!1;if(typeof h=="string"&&w&&(N=h,A5))try{let I=new URL(window.location.href),L=h.startsWith("//")?new URL(I.protocol+h):new URL(h),$=Rn(L.pathname,y);L.origin===I.origin&&$!=null?h=$+L.search+L.hash:S=!0}catch{qa(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=zI(h,{relative:n}),[k,A,O]=b8(s,x),T=k8(h,{replace:l,state:d,target:u,preventScrollReset:m,relative:n,viewTransition:p,unstable_useTransitions:v});function D(I){t&&t(I),I.defaultPrevented||T(I)}let R=_.createElement("a",{...x,...O,href:N||j,onClick:S||i?t:D,ref:j8(b,A),target:u,"data-discover":!w&&r==="render"?"true":void 0});return k&&!w?_.createElement(_.Fragment,null,R,_.createElement(v8,{page:j})):R});vt.displayName="Link";var _8=_.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:s="",end:n=!1,style:i,to:l,viewTransition:d,children:u,...h},m){let p=wu(l,{relative:h.relative}),x=Ga(),b=_.useContext(Ym),{navigator:y,basename:v}=_.useContext(Ns),w=b!=null&&P8(p)&&d===!0,N=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,S=x.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(S=S.toLowerCase(),j=j?j.toLowerCase():null,N=N.toLowerCase()),j&&v&&(j=Rn(j,v)||j);const k=N!=="/"&&N.endsWith("/")?N.length-1:N.length;let A=S===N||!n&&S.startsWith(N)&&S.charAt(k)==="/",O=j!=null&&(j===N||!n&&j.startsWith(N)&&j.charAt(N.length)==="/"),T={isActive:A,isPending:O,isTransitioning:w},D=A?t:void 0,R;typeof s=="function"?R=s(T):R=[s,A?"active":null,O?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I=typeof i=="function"?i(T):i;return _.createElement(vt,{...h,"aria-current":D,className:R,ref:m,style:I,to:l,viewTransition:d},typeof u=="function"?u(T):u)});_8.displayName="NavLink";var S8=_.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:n,state:i,method:l=Mf,action:d,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:p,...x},b)=>{let{unstable_useTransitions:y}=_.useContext(Ns),v=O8(),w=T8(d,{relative:h}),N=l.toLowerCase()==="get"?"get":"post",S=typeof d=="string"&&O5.test(d),j=k=>{if(u&&u(k),k.defaultPrevented)return;k.preventDefault();let A=k.nativeEvent.submitter,O=(A==null?void 0:A.getAttribute("formmethod"))||l,T=()=>v(A||k.currentTarget,{fetcherKey:t,method:O,navigate:r,replace:n,state:i,relative:h,preventScrollReset:m,viewTransition:p});y&&r!==!1?_.startTransition(()=>T()):T()};return _.createElement("form",{ref:b,method:N,action:w,onSubmit:s?u:j,...x,"data-discover":!S&&e==="render"?"true":void 0})});S8.displayName="Form";function E8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function T5(e){let t=_.useContext(fc);return Lt(t,E8(e)),t}function k8(e,{target:t,replace:r,state:s,preventScrollReset:n,relative:i,viewTransition:l,unstable_useTransitions:d}={}){let u=na(),h=Ga(),m=wu(e,{relative:i});return _.useCallback(p=>{if(s8(p,t)){p.preventDefault();let x=r!==void 0?r:Zd(h)===Zd(m),b=()=>u(e,{replace:x,state:s,preventScrollReset:n,relative:i,viewTransition:l});d?_.startTransition(()=>b()):b()}},[h,u,m,r,s,t,e,n,i,l,d])}function ju(e){qa(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=_.useRef(sv(e)),r=_.useRef(!1),s=Ga(),n=_.useMemo(()=>n8(s.search,r.current?null:t.current),[s.search]),i=na(),l=_.useCallback((d,u)=>{const h=sv(typeof d=="function"?d(new URLSearchParams(n)):d);r.current=!0,i("?"+h,u)},[i,n]);return[n,l]}var C8=0,A8=()=>`__${String(++C8)}__`;function O8(){let{router:e}=T5("useSubmit"),{basename:t}=_.useContext(Ns),r=WI(),s=e.fetch,n=e.navigate;return _.useCallback(async(i,l={})=>{let{action:d,method:u,encType:h,formData:m,body:p}=l8(i,t);if(l.navigate===!1){let x=l.fetcherKey||A8();await s(x,r,l.action||d,{preventScrollReset:l.preventScrollReset,formData:m,body:p,formMethod:l.method||u,formEncType:l.encType||h,flushSync:l.flushSync})}else await n(l.action||d,{preventScrollReset:l.preventScrollReset,formData:m,body:p,formMethod:l.method||u,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,n,t,r])}function T8(e,{relative:t}={}){let{basename:r}=_.useContext(Ns),s=_.useContext(zs);Lt(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),i={...wu(e||".",{relative:t})},l=Ga();if(e==null){i.search=l.search;let d=new URLSearchParams(i.search),u=d.getAll("index");if(u.some(m=>m==="")){d.delete("index"),u.filter(p=>p).forEach(p=>d.append("index",p));let m=d.toString();i.search=m?`?${m}`:""}}return(!e||e===".")&&n.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:An([r,i.pathname])),Zd(i)}function P8(e,{relative:t}={}){let r=_.useContext(j5);Lt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=T5("useViewTransitionState"),n=wu(e,{relative:t});if(!r.isTransitioning)return!1;let i=Rn(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=Rn(r.nextLocation.pathname,s)||r.nextLocation.pathname;return Hf(n.pathname,l)!=null||Hf(n.pathname,i)!=null}function R8(e){var r;if(!e)return!1;const t=((r=e.profile)==null?void 0:r.role)||e.role;return t==="system_admin"||t==="sys_admin"||t==="admin"||e.email&&e.email.includes("admin")}async function Fe(e,t={}){const r={"Content-Type":"application/json",...t.headers},s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqbHZ2bXJpcWVyZm16dHd0ZXdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwODI2MzAsImV4cCI6MjA4MDY1ODYzMH0.TEllzE2UQFgcFnMTnKp5dQaRu7Gre6IGeEkwGI_hGGg";return r.apikey=s,fetch(e,{...t,headers:r,credentials:"include"})}var wn={},af={},nv=function(e,t){return nv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(r[n]=s[n])},nv(e,t)};function P5(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");nv(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Gf=function(){return Gf=Object.assign||function(t){for(var r,s=1,n=arguments.length;s<n;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Gf.apply(this,arguments)};function pc(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r}function R5(e,t,r,s){var n=arguments.length,i=n<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,r):s,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,s);else for(var d=e.length-1;d>=0;d--)(l=e[d])&&(i=(n<3?l(i):n>3?l(t,r,i):l(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i}function D5(e,t){return function(r,s){t(r,s,e)}}function M5(e,t,r,s,n,i){function l(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var d=s.kind,u=d==="getter"?"get":d==="setter"?"set":"value",h=!t&&e?s.static?e:e.prototype:null,m=t||(h?Object.getOwnPropertyDescriptor(h,s.name):{}),p,x=!1,b=r.length-1;b>=0;b--){var y={};for(var v in s)y[v]=v==="access"?{}:s[v];for(var v in s.access)y.access[v]=s.access[v];y.addInitializer=function(N){if(x)throw new TypeError("Cannot add initializers after decoration has completed");i.push(l(N||null))};var w=(0,r[b])(d==="accessor"?{get:m.get,set:m.set}:m[u],y);if(d==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(p=l(w.get))&&(m.get=p),(p=l(w.set))&&(m.set=p),(p=l(w.init))&&n.unshift(p)}else(p=l(w))&&(d==="field"?n.unshift(p):m[u]=p)}h&&Object.defineProperty(h,s.name,m),x=!0}function I5(e,t,r){for(var s=arguments.length>2,n=0;n<t.length;n++)r=s?t[n].call(e,r):t[n].call(e);return s?r:void 0}function z5(e){return typeof e=="symbol"?e:"".concat(e)}function $5(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function L5(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ie(e,t,r,s){function n(i){return i instanceof r?i:new r(function(l){l(i)})}return new(r||(r=Promise))(function(i,l){function d(m){try{h(s.next(m))}catch(p){l(p)}}function u(m){try{h(s.throw(m))}catch(p){l(p)}}function h(m){m.done?i(m.value):n(m.value).then(d,u)}h((s=s.apply(e,t||[])).next())})}function B5(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},s,n,i,l=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return l.next=d(0),l.throw=d(1),l.return=d(2),typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(h){return function(m){return u([h,m])}}function u(h){if(s)throw new TypeError("Generator is already executing.");for(;l&&(l=0,h[0]&&(r=0)),r;)try{if(s=1,n&&(i=h[0]&2?n.return:h[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,h[1])).done)return i;switch(n=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){r.label=h[1];break}if(h[0]===6&&r.label<i[1]){r.label=i[1],i=h;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(h);break}i[2]&&r.ops.pop(),r.trys.pop();continue}h=t.call(e,r)}catch(m){h=[6,m],n=0}finally{s=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}var Jm=Object.create?(function(e,t,r,s){s===void 0&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}):(function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]});function U5(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Jm(t,e,r)}function Kf(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ry(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var s=r.call(e),n,i=[],l;try{for(;(t===void 0||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(d){l={error:d}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(l)throw l.error}}return i}function q5(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ry(arguments[t]));return e}function F5(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var s=Array(e),n=0,t=0;t<r;t++)for(var i=arguments[t],l=0,d=i.length;l<d;l++,n++)s[n]=i[l];return s}function H5(e,t,r){if(r||arguments.length===2)for(var s=0,n=t.length,i;s<n;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function Kl(e){return this instanceof Kl?(this.v=e,this):new Kl(e)}function V5(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r.apply(e,t||[]),n,i=[];return n=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),n[Symbol.asyncIterator]=function(){return this},n;function l(b){return function(y){return Promise.resolve(y).then(b,p)}}function d(b,y){s[b]&&(n[b]=function(v){return new Promise(function(w,N){i.push([b,v,w,N])>1||u(b,v)})},y&&(n[b]=y(n[b])))}function u(b,y){try{h(s[b](y))}catch(v){x(i[0][3],v)}}function h(b){b.value instanceof Kl?Promise.resolve(b.value.v).then(m,p):x(i[0][2],b)}function m(b){u("next",b)}function p(b){u("throw",b)}function x(b,y){b(y),i.shift(),i.length&&u(i[0][0],i[0][1])}}function G5(e){var t,r;return t={},s("next"),s("throw",function(n){throw n}),s("return"),t[Symbol.iterator]=function(){return this},t;function s(n,i){t[n]=e[n]?function(l){return(r=!r)?{value:Kl(e[n](l)),done:!1}:i?i(l):l}:i}}function K5(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Kf=="function"?Kf(e):e[Symbol.iterator](),r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r);function s(i){r[i]=e[i]&&function(l){return new Promise(function(d,u){l=e[i](l),n(d,u,l.done,l.value)})}}function n(i,l,d,u){Promise.resolve(u).then(function(h){i({value:h,done:d})},l)}}function W5(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var D8=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},iv=function(e){return iv=Object.getOwnPropertyNames||function(t){var r=[];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[r.length]=s);return r},iv(e)};function Y5(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=iv(e),s=0;s<r.length;s++)r[s]!=="default"&&Jm(t,e,r[s]);return D8(t,e),t}function X5(e){return e&&e.__esModule?e:{default:e}}function J5(e,t,r,s){if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?s:r==="a"?s.call(e):s?s.value:t.get(e)}function Z5(e,t,r,s,n){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?n.call(e,r):n?n.value=r:t.set(e,r),r}function Q5(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function e4(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var s,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=t[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=t[Symbol.dispose],r&&(n=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:s,async:r})}else r&&e.stack.push({async:!0});return t}var M8=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var s=new Error(r);return s.name="SuppressedError",s.error=e,s.suppressed=t,s};function t4(e){function t(i){e.error=e.hasError?new M8(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,s=0;function n(){for(;r=e.stack.pop();)try{if(!r.async&&s===1)return s=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return s|=2,Promise.resolve(i).then(n,function(l){return t(l),n()})}else s|=1}catch(l){t(l)}if(s===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return n()}function r4(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,s,n,i,l){return s?t?".jsx":".js":n&&(!i||!l)?r:n+i+"."+l.toLowerCase()+"js"}):e}const I8={__extends:P5,__assign:Gf,__rest:pc,__decorate:R5,__param:D5,__esDecorate:M5,__runInitializers:I5,__propKey:z5,__setFunctionName:$5,__metadata:L5,__awaiter:Ie,__generator:B5,__createBinding:Jm,__exportStar:U5,__values:Kf,__read:Ry,__spread:q5,__spreadArrays:F5,__spreadArray:H5,__await:Kl,__asyncGenerator:V5,__asyncDelegator:G5,__asyncValues:K5,__makeTemplateObject:W5,__importStar:Y5,__importDefault:X5,__classPrivateFieldGet:J5,__classPrivateFieldSet:Z5,__classPrivateFieldIn:Q5,__addDisposableResource:e4,__disposeResources:t4,__rewriteRelativeImportExtension:r4},z8=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:e4,get __assign(){return Gf},__asyncDelegator:G5,__asyncGenerator:V5,__asyncValues:K5,__await:Kl,__awaiter:Ie,__classPrivateFieldGet:J5,__classPrivateFieldIn:Q5,__classPrivateFieldSet:Z5,__createBinding:Jm,__decorate:R5,__disposeResources:t4,__esDecorate:M5,__exportStar:U5,__extends:P5,__generator:B5,__importDefault:X5,__importStar:Y5,__makeTemplateObject:W5,__metadata:L5,__param:D5,__propKey:z5,__read:Ry,__rest:pc,__rewriteRelativeImportExtension:r4,__runInitializers:I5,__setFunctionName:$5,__spread:q5,__spreadArray:H5,__spreadArrays:F5,__values:Kf,default:I8},Symbol.toStringTag,{value:"Module"})),$8=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);let Zm=class extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}},a4=class extends Zm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},ov=class extends Zm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},lv=class extends Zm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}};var Wf;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Wf||(Wf={}));class L8{constructor(t,{headers:r={},customFetch:s,region:n=Wf.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=$8(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ie(this,arguments,void 0,function*(r,s={}){var n;let i,l;try{const{headers:d,method:u,body:h,signal:m,timeout:p}=s;let x={},{region:b}=s;b||(b=this.region);const y=new URL(`${this.url}/${r}`);b&&b!=="any"&&(x["x-region"]=b,y.searchParams.set("forceFunctionRegion",b));let v;h&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",v=h):typeof h=="string"?(x["Content-Type"]="text/plain",v=h):typeof FormData<"u"&&h instanceof FormData?v=h:(x["Content-Type"]="application/json",v=JSON.stringify(h)):v=h;let w=m;p&&(l=new AbortController,i=setTimeout(()=>l.abort(),p),m?(w=l.signal,m.addEventListener("abort",()=>l.abort())):w=l.signal);const N=yield this.fetch(y.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),d),body:v,signal:w}).catch(A=>{throw new a4(A)}),S=N.headers.get("x-relay-error");if(S&&S==="true")throw new ov(N);if(!N.ok)throw new lv(N);let j=((n=N.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),k;return j==="application/json"?k=yield N.json():j==="application/octet-stream"||j==="application/pdf"?k=yield N.blob():j==="text/event-stream"?k=N:j==="multipart/form-data"?k=yield N.formData():k=yield N.text(),{data:k,error:null,response:N}}catch(d){return{data:null,error:d,response:d instanceof lv||d instanceof ov?d.context:void 0}}finally{i&&clearTimeout(i)}})}}const B8=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Wf},FunctionsClient:L8,FunctionsError:Zm,FunctionsFetchError:a4,FunctionsHttpError:lv,FunctionsRelayError:ov},Symbol.toStringTag,{value:"Module"})),s4=vu(B8);var Qr={};const gc=vu(z8);var sf={},nf={},of={},lf={},cf={},df={},Q_;function n4(){if(Q_)return df;Q_=1,Object.defineProperty(df,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return df.default=e,df}var eS;function i4(){if(eS)return cf;eS=1,Object.defineProperty(cf,"__esModule",{value:!0});const t=gc.__importDefault(n4());let r=class{constructor(n){var i,l;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(i=n.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=n.signal,this.isMaybeSingle=(l=n.isMaybeSingle)!==null&&l!==void 0?l:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,i){return this.headers=new Headers(this.headers),this.headers.set(n,i),this}then(n,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var h,m,p,x;let b=null,y=null,v=null,w=u.status,N=u.statusText;if(u.ok){if(this.method!=="HEAD"){const A=await u.text();A===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?y=A:y=JSON.parse(A))}const j=(m=this.headers.get("Prefer"))===null||m===void 0?void 0:m.match(/count=(exact|planned|estimated)/),k=(p=u.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");j&&k&&k.length>1&&(v=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(b={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,w=406,N="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const j=await u.text();try{b=JSON.parse(j),Array.isArray(b)&&u.status===404&&(y=[],b=null,w=200,N="OK")}catch{u.status===404&&j===""?(w=204,N="No Content"):b={message:j}}if(b&&this.isMaybeSingle&&(!((x=b==null?void 0:b.details)===null||x===void 0)&&x.includes("0 rows"))&&(b=null,w=200,N="OK"),b&&this.shouldThrowOnError)throw new t.default(b)}return{error:b,data:y,count:v,status:w,statusText:N}});return this.shouldThrowOnError||(d=d.catch(u=>{var h,m,p,x,b,y;let v="";const w=u==null?void 0:u.cause;if(w){const N=(h=w==null?void 0:w.message)!==null&&h!==void 0?h:"",S=(m=w==null?void 0:w.code)!==null&&m!==void 0?m:"";v=`${(p=u==null?void 0:u.name)!==null&&p!==void 0?p:"FetchError"}: ${u==null?void 0:u.message}`,v+=`

Caused by: ${(x=w==null?void 0:w.name)!==null&&x!==void 0?x:"Error"}: ${N}`,S&&(v+=` (${S})`),w!=null&&w.stack&&(v+=`
${w.stack}`)}else v=(b=u==null?void 0:u.stack)!==null&&b!==void 0?b:"";return{error:{message:`${(y=u==null?void 0:u.name)!==null&&y!==void 0?y:"FetchError"}: ${u==null?void 0:u.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(n,i)}returns(){return this}overrideTypes(){return this}};return cf.default=r,cf}var tS;function o4(){if(tS)return lf;tS=1,Object.defineProperty(lf,"__esModule",{value:!0});const t=gc.__importDefault(i4());let r=class extends t.default{select(n){let i=!1;const l=(n??"*").split("").map(d=>/\s/.test(d)&&!i?"":(d==='"'&&(i=!i),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:l,foreignTable:d,referencedTable:u=d}={}){const h=u?`${u}.order`:"order",m=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${m?`${m},`:""}${n}.${i?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:l=i}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${n}`),this}range(n,i,{foreignTable:l,referencedTable:d=l}={}){const u=typeof d>"u"?"offset":`${d}.offset`,h=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(h,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:l=!1,buffers:d=!1,wal:u=!1,format:h="text"}={}){var m;const p=[n?"analyze":null,i?"verbose":null,l?"settings":null,d?"buffers":null,u?"wal":null].filter(Boolean).join("|"),x=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${x}"; options=${p};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};return lf.default=r,lf}var rS;function Dy(){if(rS)return of;rS=1,Object.defineProperty(of,"__esModule",{value:!0});const t=gc.__importDefault(o4()),r=new RegExp("[,()]");let s=class extends t.default{eq(i,l){return this.url.searchParams.append(i,`eq.${l}`),this}neq(i,l){return this.url.searchParams.append(i,`neq.${l}`),this}gt(i,l){return this.url.searchParams.append(i,`gt.${l}`),this}gte(i,l){return this.url.searchParams.append(i,`gte.${l}`),this}lt(i,l){return this.url.searchParams.append(i,`lt.${l}`),this}lte(i,l){return this.url.searchParams.append(i,`lte.${l}`),this}like(i,l){return this.url.searchParams.append(i,`like.${l}`),this}likeAllOf(i,l){return this.url.searchParams.append(i,`like(all).{${l.join(",")}}`),this}likeAnyOf(i,l){return this.url.searchParams.append(i,`like(any).{${l.join(",")}}`),this}ilike(i,l){return this.url.searchParams.append(i,`ilike.${l}`),this}ilikeAllOf(i,l){return this.url.searchParams.append(i,`ilike(all).{${l.join(",")}}`),this}ilikeAnyOf(i,l){return this.url.searchParams.append(i,`ilike(any).{${l.join(",")}}`),this}regexMatch(i,l){return this.url.searchParams.append(i,`match.${l}`),this}regexIMatch(i,l){return this.url.searchParams.append(i,`imatch.${l}`),this}is(i,l){return this.url.searchParams.append(i,`is.${l}`),this}isDistinct(i,l){return this.url.searchParams.append(i,`isdistinct.${l}`),this}in(i,l){const d=Array.from(new Set(l)).map(u=>typeof u=="string"&&r.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(i,`in.(${d})`),this}contains(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cs.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cs.{${l.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(l)}`),this}containedBy(i,l){return typeof l=="string"?this.url.searchParams.append(i,`cd.${l}`):Array.isArray(l)?this.url.searchParams.append(i,`cd.{${l.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(l)}`),this}rangeGt(i,l){return this.url.searchParams.append(i,`sr.${l}`),this}rangeGte(i,l){return this.url.searchParams.append(i,`nxl.${l}`),this}rangeLt(i,l){return this.url.searchParams.append(i,`sl.${l}`),this}rangeLte(i,l){return this.url.searchParams.append(i,`nxr.${l}`),this}rangeAdjacent(i,l){return this.url.searchParams.append(i,`adj.${l}`),this}overlaps(i,l){return typeof l=="string"?this.url.searchParams.append(i,`ov.${l}`):this.url.searchParams.append(i,`ov.{${l.join(",")}}`),this}textSearch(i,l,{config:d,type:u}={}){let h="";u==="plain"?h="pl":u==="phrase"?h="ph":u==="websearch"&&(h="w");const m=d===void 0?"":`(${d})`;return this.url.searchParams.append(i,`${h}fts${m}.${l}`),this}match(i){return Object.entries(i).forEach(([l,d])=>{this.url.searchParams.append(l,`eq.${d}`)}),this}not(i,l,d){return this.url.searchParams.append(i,`not.${l}.${d}`),this}or(i,{foreignTable:l,referencedTable:d=l}={}){const u=d?`${d}.or`:"or";return this.url.searchParams.append(u,`(${i})`),this}filter(i,l,d){return this.url.searchParams.append(i,`${l}.${d}`),this}};return of.default=s,of}var aS;function l4(){if(aS)return nf;aS=1,Object.defineProperty(nf,"__esModule",{value:!0});const t=gc.__importDefault(Dy());let r=class{constructor(n,{headers:i={},schema:l,fetch:d}){this.url=n,this.headers=new Headers(i),this.schema=l,this.fetch=d}select(n,i){const{head:l=!1,count:d}=i??{},u=l?"HEAD":"GET";let h=!1;const m=(n??"*").split("").map(p=>/\s/.test(p)&&!h?"":(p==='"'&&(h=!h),p)).join("");return this.url.searchParams.set("select",m),d&&this.headers.append("Prefer",`count=${d}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:l=!0}={}){var d;const u="POST";if(i&&this.headers.append("Prefer",`count=${i}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const h=n.reduce((m,p)=>m.concat(Object.keys(p)),[]);if(h.length>0){const m=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:l=!1,count:d,defaultToNull:u=!0}={}){var h;const m="POST";if(this.headers.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),d&&this.headers.append("Prefer",`count=${d}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((x,b)=>x.concat(Object.keys(b)),[]);if(p.length>0){const x=[...new Set(p)].map(b=>`"${b}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(n,{count:i}={}){var l;const d="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}delete({count:n}={}){var i;const l="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}};return nf.default=r,nf}var sS;function U8(){if(sS)return sf;sS=1,Object.defineProperty(sf,"__esModule",{value:!0});const e=gc,t=e.__importDefault(l4()),r=e.__importDefault(Dy());let s=class c4{constructor(i,{headers:l={},schema:d,fetch:u}={}){this.url=i,this.headers=new Headers(l),this.schemaName=d,this.fetch=u}from(i){if(!i||typeof i!="string"||i.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const l=new URL(`${this.url}/${i}`);return new t.default(l,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new c4(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,l={},{head:d=!1,get:u=!1,count:h}={}){var m;let p;const x=new URL(`${this.url}/rpc/${i}`);let b;d||u?(p=d?"HEAD":"GET",Object.entries(l).filter(([v,w])=>w!==void 0).map(([v,w])=>[v,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([v,w])=>{x.searchParams.append(v,w)})):(p="POST",b=l);const y=new Headers(this.headers);return h&&y.set("Prefer",`count=${h}`),new r.default({method:p,url:x,headers:y,schema:this.schemaName,body:b,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}};return sf.default=s,sf}var nS;function d4(){if(nS)return Qr;nS=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.PostgrestError=Qr.PostgrestBuilder=Qr.PostgrestTransformBuilder=Qr.PostgrestFilterBuilder=Qr.PostgrestQueryBuilder=Qr.PostgrestClient=void 0;const e=gc,t=e.__importDefault(U8());Qr.PostgrestClient=t.default;const r=e.__importDefault(l4());Qr.PostgrestQueryBuilder=r.default;const s=e.__importDefault(Dy());Qr.PostgrestFilterBuilder=s.default;const n=e.__importDefault(o4());Qr.PostgrestTransformBuilder=n.default;const i=e.__importDefault(i4());Qr.PostgrestBuilder=i.default;const l=e.__importDefault(n4());return Qr.PostgrestError=l.default,Qr.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:l.default},Qr}class u4{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const s=r.node,n=parseInt(s.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const s=this.getWebSocketConstructor();return new s(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const q8="2.87.1",F8=`realtime-js/${q8}`,h4="1.0.0",H8="2.0.0",iS=h4,cv=1e4,V8=1e3,G8=100;var jo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(jo||(jo={}));var dr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(dr||(dr={}));var Ts;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ts||(Ts={}));var dv;(function(e){e.websocket="websocket"})(dv||(dv={}));var No;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(No||(No={}));class K8{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,r){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let s=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,n)}_encodeJsonUserBroadcastPush(t){var r,s;const n=(s=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&s!==void 0?s:{},l=new TextEncoder().encode(JSON.stringify(n)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,l)}_encodeUserBroadcastPush(t,r,s){var n,i;const l=t.topic,d=(n=t.ref)!==null&&n!==void 0?n:"",u=(i=t.join_ref)!==null&&i!==void 0?i:"",h=t.payload.event,m=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},p=Object.keys(m).length===0?"":JSON.stringify(m);if(u.length>255)throw new Error(`joinRef length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`topic length ${l.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`userEvent length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`metadata length ${p.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+u.length+d.length+l.length+h.length+p.length,b=new ArrayBuffer(this.HEADER_LENGTH+x);let y=new DataView(b),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,u.length),y.setUint8(v++,d.length),y.setUint8(v++,l.length),y.setUint8(v++,h.length),y.setUint8(v++,p.length),y.setUint8(v++,r),Array.from(u,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(d,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(l,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(h,N=>y.setUint8(v++,N.charCodeAt(0))),Array.from(p,N=>y.setUint8(v++,N.charCodeAt(0)));var w=new Uint8Array(b.byteLength+s.byteLength);return w.set(new Uint8Array(b),0),w.set(new Uint8Array(s),b.byteLength),w.buffer}decode(t,r){if(this._isArrayBuffer(t)){let s=this._binaryDecode(t);return r(s)}if(typeof t=="string"){const s=JSON.parse(t),[n,i,l,d,u]=s;return r({join_ref:n,ref:i,topic:l,event:d,payload:u})}return r({})}_binaryDecode(t){const r=new DataView(t),s=r.getUint8(0),n=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,n)}}_decodeUserBroadcast(t,r,s){const n=r.getUint8(1),i=r.getUint8(2),l=r.getUint8(3),d=r.getUint8(4);let u=this.HEADER_LENGTH+4;const h=s.decode(t.slice(u,u+n));u=u+n;const m=s.decode(t.slice(u,u+i));u=u+i;const p=s.decode(t.slice(u,u+l));u=u+l;const x=t.slice(u,t.byteLength),b=d===this.JSON_ENCODING?JSON.parse(s.decode(x)):x,y={type:this.BROADCAST_EVENT,event:m,payload:b};return l>0&&(y.meta=JSON.parse(p)),{join_ref:null,ref:null,topic:h,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(t,r){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([s])=>r.includes(s)))}}class f4{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Pt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Pt||(Pt={}));const oS=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return t?Object.keys(t).reduce((i,l)=>(i[l]=W8(l,e,t,n),i),{}):{}},W8=(e,t,r,s)=>{const n=t.find(d=>d.name===e),i=n==null?void 0:n.type,l=r[e];return i&&!s.includes(i)?m4(i,l):uv(l)},m4=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Z8(t,r)}switch(e){case Pt.bool:return Y8(t);case Pt.float4:case Pt.float8:case Pt.int2:case Pt.int4:case Pt.int8:case Pt.numeric:case Pt.oid:return X8(t);case Pt.json:case Pt.jsonb:return J8(t);case Pt.timestamp:return Q8(t);case Pt.abstime:case Pt.date:case Pt.daterange:case Pt.int4range:case Pt.int8range:case Pt.money:case Pt.reltime:case Pt.text:case Pt.time:case Pt.timestamptz:case Pt.timetz:case Pt.tsrange:case Pt.tstzrange:return uv(t);default:return uv(t)}},uv=e=>e,Y8=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},X8=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},J8=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Z8=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const l=e.slice(1,r);try{i=JSON.parse("["+l+"]")}catch{i=l?l.split(","):[]}return i.map(d=>m4(t,d))}return e},Q8=e=>typeof e=="string"?e.replace(" ","T"):e,p4=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ex{constructor(t,r,s={},n=cv){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var hv;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(hv||(hv={}));let g4=class zf{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:l,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zf.syncState(this.state,n,i,l),this.pendingDiffs.forEach(u=>{this.state=zf.syncDiff(this.state,u,i,l)}),this.pendingDiffs=[],d()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:l,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=zf.syncDiff(this.state,n,i,l),d())}),this.onJoin((n,i,l)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:l})}),this.onLeave((n,i,l)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:l})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const i=this.cloneDeep(t),l=this.transformState(r),d={},u={};return this.map(i,(h,m)=>{l[h]||(u[h]=m)}),this.map(l,(h,m)=>{const p=i[h];if(p){const x=m.map(w=>w.presence_ref),b=p.map(w=>w.presence_ref),y=m.filter(w=>b.indexOf(w.presence_ref)<0),v=p.filter(w=>x.indexOf(w.presence_ref)<0);y.length>0&&(d[h]=y),v.length>0&&(u[h]=v)}else d[h]=m}),this.syncDiff(i,{joins:d,leaves:u},s,n)}static syncDiff(t,r,s,n){const{joins:i,leaves:l}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(d,u)=>{var h;const m=(h=t[d])!==null&&h!==void 0?h:[];if(t[d]=this.cloneDeep(u),m.length>0){const p=t[d].map(b=>b.presence_ref),x=m.filter(b=>p.indexOf(b.presence_ref)<0);t[d].unshift(...x)}s(d,m,u)}),this.map(l,(d,u)=>{let h=t[d];if(!h)return;const m=u.map(p=>p.presence_ref);h=h.filter(p=>m.indexOf(p.presence_ref)<0),t[d]=h,n(d,h,u),h.length===0&&delete t[d]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var fv;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(fv||(fv={}));var Ul;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Ul||(Ul={}));var Ks;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ks||(Ks={}));const ez=dr;let x4=class Bd{constructor(t,r={config:{}},s){var n,i;if(this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=dr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ex(this,Ts.join,this.params,this.timeout),this.rejoinTimer=new f4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dr.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=dr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ts.reply,{},(l,d)=>{this._trigger(this._replyEventName(d),l)}),this.presence=new g4(this),this.broadcastEndpointURL=p4(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(n=this.params.config)===null||n===void 0?void 0:n.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var s,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==dr.closed){const{config:{broadcast:l,presence:d,private:u}}=this.params,h=(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(b=>b.filter))!==null&&n!==void 0?n:[],m=!!this.bindings[Ul.PRESENCE]&&this.bindings[Ul.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},x={broadcast:l,presence:Object.assign(Object.assign({},d),{enabled:m}),postgres_changes:h,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(Ks.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(Ks.CLOSED)),this.updateJoinPayload(Object.assign({config:x},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){t==null||t(Ks.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,N=[];for(let S=0;S<w;S++){const j=v[S],{filter:{event:k,schema:A,table:O,filter:T}}=j,D=b&&b[S];if(D&&D.event===k&&Bd.isFilterValueEqual(D.schema,A)&&Bd.isFilterValueEqual(D.table,O)&&Bd.isFilterValueEqual(D.filter,T))N.push(Object.assign(Object.assign({},j),{id:D.id}));else{this.unsubscribe(),this.state=dr.errored,t==null||t(Ks.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,t&&t(Ks.SUBSCRIBED);return}}).receive("error",b=>{this.state=dr.errored,t==null||t(Ks.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ks.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this.state===dr.joined&&t===Ul.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,r,s)}async httpSend(t,r,s={}){var n;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const l={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);if(d.status===202)return{success:!0};let u=d.statusText;try{const h=await d.json();u=h.error||h.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:l}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:l,private:this.private}]})};try{const h=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=h.body)===null||n===void 0?void 0:n.cancel()),h.ok?"ok":"error"}catch(h){return h.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var l,d,u;const h=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(d=(l=this.params)===null||l===void 0?void 0:l.config)===null||d===void 0?void 0:d.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),h.receive("ok",()=>i("ok")),h.receive("error",()=>i("error")),h.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=dr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ts.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(n=>{s=new ex(this,Ts.leave,{},t),s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dr.closed,this.bindings={}}async _fetchWithTimeout(t,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),l=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),l}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new ex(this,t,r,s);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>G8){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,i;const l=t.toLocaleLowerCase(),{close:d,error:u,leave:h,join:m}=Ts;if(s&&[d,u,h,m].indexOf(l)>=0&&s!==this._joinRef())return;let x=this._onMessage(l,r,s);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(l)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(b=>{var y,v,w;return((y=b.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(v=b.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===l}).map(b=>b.callback(x,s)):(i=this.bindings[l])===null||i===void 0||i.filter(b=>{var y,v,w,N,S,j;if(["broadcast","presence","postgres_changes"].includes(l))if("id"in b){const k=b.id,A=(y=b.filter)===null||y===void 0?void 0:y.event;return k&&((v=r.ids)===null||v===void 0?void 0:v.includes(k))&&(A==="*"||(A==null?void 0:A.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const k=(S=(N=b==null?void 0:b.filter)===null||N===void 0?void 0:N.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return k==="*"||k===((j=r==null?void 0:r.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===l}).map(b=>{if(typeof x=="object"&&"ids"in x){const y=x.data,{schema:v,table:w,commit_timestamp:N,type:S,errors:j}=y;x=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:N,eventType:S,new:{},old:{},errors:j}),this._getPayloadRecords(y))}b.callback(x,s)})}_isClosed(){return this.state===dr.closed}_isJoined(){return this.state===dr.joined}_isJoining(){return this.state===dr.joining}_isLeaving(){return this.state===dr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Bd.isEqual(n.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}static isFilterValueEqual(t,r){return(t??void 0)===(r??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ts.close,{},t)}_onError(t){this._on(Ts.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=oS(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=oS(t.columns,t.old_record)),r}};const tx=()=>{},uf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},tz=[1e3,2e3,5e3,1e4],rz=1e4,az=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let sz=class{constructor(t,r){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cv,this.transport=null,this.heartbeatIntervalMs=uf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=tx,this.ref=0,this.reconnectTimer=null,this.vsn=iS,this.logger=tx,this.conn=null,this.sendBuffer=[],this.serializer=new K8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>n?(...i)=>n(...i):(...i)=>fetch(...i),!(!((s=r==null?void 0:r.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${dv.websocket}`,this.httpEndpoint=p4(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=u4.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case jo.connecting:return No.Connecting;case jo.open:return No.Open;case jo.closing:return No.Closing;default:return No.Closed}}isConnected(){return this.connectionState()===No.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new x4(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:n,ref:i}=t,l=()=>{this.encode(t,d=>{var u;(u=this.conn)===null||u===void 0||u.send(d)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?l():this.sendBuffer.push(l)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(V8,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},uf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(h){this.log("error","error in heartbeat callback",h)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:n,payload:i,ref:l}=r,d=l?`(${l})`:"",u=i.status||"";this.log("receive",`${u} ${s} ${n} ${d}`.trim(),i),this.channels.filter(h=>h._isMember(s)).forEach(h=>h._trigger(n,i,l)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===jo.open||this.conn.readyState===jo.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ts.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([az],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r,s=!1;if(t)r=t,s=!0;else if(this.accessToken)try{r=await this.accessToken()}catch(n){this.log("error","Error fetching access token from callback",n),r=this.accessTokenValue}else r=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:F8};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(Ts.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(r=>{this.log("error",`Error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(s=>{try{s(r)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(s){this.log("error",`error triggering ${t} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new f4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},uf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,s,n,i,l,d,u,h,m,p,x,b;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(s=t==null?void 0:t.timeout)!==null&&s!==void 0?s:cv,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:uf.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(l=t==null?void 0:t.accessToken)!==null&&l!==void 0?l:null,this.heartbeatCallback=(d=t==null?void 0:t.heartbeatCallback)!==null&&d!==void 0?d:tx,this.vsn=(u=t==null?void 0:t.vsn)!==null&&u!==void 0?u:iS,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=t==null?void 0:t.reconnectAfterMs)!==null&&h!==void 0?h:(y=>tz[y-1]||rz),this.vsn){case h4:this.encode=(m=t==null?void 0:t.encode)!==null&&m!==void 0?m:((y,v)=>v(JSON.stringify(y))),this.decode=(p=t==null?void 0:t.decode)!==null&&p!==void 0?p:((y,v)=>v(JSON.parse(y)));break;case H8:this.encode=(x=t==null?void 0:t.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(b=t==null?void 0:t.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}};const nz=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:ez,get REALTIME_LISTEN_TYPES(){return Ul},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return fv},get REALTIME_PRESENCE_LISTEN_EVENTS(){return hv},get REALTIME_SUBSCRIBE_STATES(){return Ks},RealtimeChannel:x4,RealtimeClient:sz,RealtimePresence:g4,WebSocketFactory:u4},Symbol.toStringTag,{value:"Module"})),b4=vu(nz);class Nu extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function zt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class v4 extends Nu{constructor(t,r,s){super(t),this.name="StorageApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yf extends Nu{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const My=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),iz=()=>Response,mv=e=>{if(Array.isArray(e))return e.map(r=>mv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=mv(s)}),t},oz=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},lz=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e),rx=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},cz=(e,t,r)=>Ie(void 0,void 0,void 0,function*(){const s=yield iz();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{const i=e.status||500,l=(n==null?void 0:n.statusCode)||i+"";t(new v4(rx(n),i,l))}).catch(n=>{t(new Yf(rx(n),n))}):t(new Yf(rx(e),e))}),dz=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!s?n:(oz(s)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,t!=null&&t.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),r))};function _u(e,t,r,s,n,i){return Ie(this,void 0,void 0,function*(){return new Promise((l,d)=>{e(r,dz(t,s,n,i)).then(u=>{if(!u.ok)throw u;return s!=null&&s.noResolveJson?u:u.json()}).then(u=>l(u)).catch(u=>cz(u,d,s))})})}function Qd(e,t,r,s){return Ie(this,void 0,void 0,function*(){return _u(e,"GET",t,r,s)})}function Os(e,t,r,s,n){return Ie(this,void 0,void 0,function*(){return _u(e,"POST",t,s,n,r)})}function pv(e,t,r,s,n){return Ie(this,void 0,void 0,function*(){return _u(e,"PUT",t,s,n,r)})}function uz(e,t,r,s){return Ie(this,void 0,void 0,function*(){return _u(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Iy(e,t,r,s,n){return Ie(this,void 0,void 0,function*(){return _u(e,"DELETE",t,s,n,r)})}class hz{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Ie(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}})}}var y4;class fz{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[y4]="BlobDownloadBuilder",this.promise=null}asStream(){return new hz(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ie(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zt(t))return{data:null,error:t};throw t}})}}y4=Symbol.toStringTag;const mz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pz{constructor(t,r={},s,n){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=s,this.fetch=My(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,s,n){return Ie(this,void 0,void 0,function*(){try{let i;const l=Object.assign(Object.assign({},lS),n);let d=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(l.upsert)});const u=l.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",l.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.has("cacheControl")||i.append("cacheControl",l.cacheControl),u&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(u))):(i=s,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType,u&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!l.duplex&&(l.duplex="half")),n!=null&&n.headers&&(d=Object.assign(Object.assign({},d),n.headers));const h=this._removeEmptyFolders(r),m=this._getFinalPath(h),p=yield(t=="PUT"?pv:Os)(this.fetch,`${this.url}/object/${m}`,i,Object.assign({headers:d},l!=null&&l.duplex?{duplex:l.duplex}:{}));return{data:{path:h,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(zt(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,n){return Ie(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),l=this._getFinalPath(i),d=new URL(this.url+`/object/upload/sign/${l}`);d.searchParams.set("token",r);try{let u;const h=Object.assign({upsert:lS.upsert},n),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(h.upsert)});typeof Blob<"u"&&s instanceof Blob?(u=new FormData,u.append("cacheControl",h.cacheControl),u.append("",s)):typeof FormData<"u"&&s instanceof FormData?(u=s,u.append("cacheControl",h.cacheControl)):(u=s,m["cache-control"]=`max-age=${h.cacheControl}`,m["content-type"]=h.contentType);const p=yield pv(this.fetch,d.toString(),u,{headers:m});return{data:{path:i,fullPath:p.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(zt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,r){return Ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield Os(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),l=new URL(this.url+i.url),d=l.searchParams.get("token");if(!d)throw new Nu("No token returned by API");return{data:{signedUrl:l.toString(),path:t,token:d},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}})}update(t,r,s){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Ie(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}})}copy(t,r,s){return Ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Os(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,s){return Ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield Os(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${l}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,s){return Ie(this,void 0,void 0,function*(){try{const n=yield Os(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(l=>Object.assign(Object.assign({},l),{signedUrl:l.signedURL?encodeURI(`${this.url}${l.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}})}download(t,r){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),l=i?`?${i}`:"",d=this._getFinalPath(t),u=()=>Qd(this.fetch,`${this.url}/${n}/${d}${l}`,{headers:this.headers,noResolveJson:!0});return new fz(u,this.shouldThrowOnError)}info(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield Qd(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:mv(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}})}exists(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield uz(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zt(s)&&s instanceof Yf){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const d=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&n.push(u);let h=n.join("&");return h!==""&&(h=`?${h}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${s}${h}`)}}}remove(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield Iy(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}list(t,r,s){return Ie(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},mz),r),{prefix:t||""});return{data:yield Os(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}})}listV2(t,r){return Ie(this,void 0,void 0,function*(){try{const s=Object.assign({},t);return{data:yield Os(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const w4="2.87.1",j4={"X-Client-Info":`storage-js/${w4}`};class gz{constructor(t,r={},s,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j4),r),this.fetch=My(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return Ie(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Qd(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}getBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield Qd(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}createBucket(t){return Ie(this,arguments,void 0,function*(r,s={public:!1}){try{return{data:yield Os(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ie(this,void 0,void 0,function*(){try{return{data:yield pv(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(zt(s))return{data:null,error:s};throw s}})}emptyBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield Iy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var eu=class extends Error{constructor(e,t){var r;super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((r=t.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function xz(e,t,r){const s=new URL(t,e);if(r)for(const[n,i]of Object.entries(r))i!==void 0&&s.searchParams.set(n,i);return s.toString()}async function bz(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function vz(e){const t=e.fetchImpl??globalThis.fetch;return{async request({method:r,path:s,query:n,body:i,headers:l}){const d=xz(e.baseUrl,s,n),u=await bz(e.auth),h=await t(d,{method:r,headers:{...i?{"Content-Type":"application/json"}:{},...u,...l},body:i?JSON.stringify(i):void 0}),m=await h.text(),p=(h.headers.get("content-type")||"").includes("application/json"),x=p&&m?JSON.parse(m):m;if(!h.ok){const b=p?x:void 0,y=b==null?void 0:b.error;throw new eu((y==null?void 0:y.message)??`Request failed with status ${h.status}`,{status:h.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:b})}return{status:h.status,headers:h.headers,data:x}}}}function hf(e){return e.join("")}var yz=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){const t=e?{parent:hf(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(e,t){const r={namespace:e.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hf(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hf(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hf(e.namespace)}`}),!0}catch(t){if(t instanceof eu&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(r){if(r instanceof eu&&r.status===409)return;throw r}}};function Al(e){return e.join("")}var wz=class{constructor(e,t="",r){this.client=e,this.prefix=t,this.accessDelegation=r}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Al(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Al(e.namespace)}/tables`,body:t,headers:r})).data.metadata}async updateTable(e,t){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Al(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Al(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Al(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Al(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(r){if(r instanceof eu&&r.status===404)return!1;throw r}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(r){if(r instanceof eu&&r.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw r}}},jz=class{constructor(e){var s;let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);const r=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=vz({baseUrl:r,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=(s=e.accessDelegation)==null?void 0:s.join(","),this.namespaceOps=new yz(this.client,t),this.tableOps=new wz(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};class N4{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},j4),r),this.fetch=My(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield Os(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}listBuckets(t){return Ie(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const s=r.toString(),n=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield Qd(this.fetch,n,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield Iy(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zt(r))return{data:null,error:r};throw r}})}from(t){if(!lz(t))throw new Nu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const r=new jz({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:()=>Ie(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(r,{get(i,l){const d=i[l];return typeof d!="function"?d:(...u)=>Ie(this,void 0,void 0,function*(){try{return{data:yield d.apply(i,u),error:null}}catch(h){if(s)throw h;return{data:null,error:h}}})}})}}const zy={"X-Client-Info":`storage-js/${w4}`,"Content-Type":"application/json"};class $y extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function wa(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class $f extends $y{constructor(t,r,s){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _4 extends $y{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var gv;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(gv||(gv={}));const Qm=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Nz=()=>Response,S4=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},_z=e=>Array.from(new Float32Array(e)),Sz=(e,t)=>{if(t!==void 0&&e.float32.length!==t)throw new Error(`Vector dimension mismatch: expected ${t}, got ${e.float32.length}`)},cS=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Ez=(e,t,r)=>Ie(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const n=e.status||500,i=e;if(typeof i.json=="function")i.json().then(l=>{const d=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||n+"";t(new $f(cS(l),n,d))}).catch(()=>{const l=n+"",d=i.statusText||`HTTP ${n} error`;t(new $f(d,n,l))});else{const l=n+"",d=i.statusText||`HTTP ${n} error`;t(new $f(d,n,l))}}else t(new _4(cS(e),e))}),kz=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return s?(S4(s)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(s)):n.body=s,Object.assign(Object.assign({},n),r)):n};function Cz(e,t,r,s,n,i){return Ie(this,void 0,void 0,function*(){return new Promise((l,d)=>{e(r,kz(t,s,n,i)).then(u=>{if(!u.ok)throw u;if(s!=null&&s.noResolveJson)return u;const h=u.headers.get("content-type");return!h||!h.includes("application/json")?{}:u.json()}).then(u=>l(u)).catch(u=>Ez(u,d,s))})})}function $a(e,t,r,s,n){return Ie(this,void 0,void 0,function*(){return Cz(e,"POST",t,s,n,r)})}class E4{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zy),r),this.fetch=Qm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ie(this,void 0,void 0,function*(){try{return{data:(yield $a(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Ie(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wa(s))return{data:null,error:s};throw s}})}listIndexes(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Ie(this,void 0,void 0,function*(){try{return{data:(yield $a(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(wa(s))return{data:null,error:s};throw s}})}}class k4{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zy),r),this.fetch=Qm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ie(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield $a(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}getVectors(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}listVectors(t){return Ie(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield $a(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}queryVectors(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Ie(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield $a(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}}class C4{constructor(t,r={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zy),r),this.fetch=Qm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:(yield $a(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}getBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield $a(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}listBuckets(){return Ie(this,arguments,void 0,function*(t={}){try{return{data:yield $a(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ie(this,void 0,void 0,function*(){try{return{data:(yield $a(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}}class A4 extends C4{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new O4(this.url,this.headers,t,this.fetch)}createBucket(t){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ie(this,void 0,void 0,function*(){return r.createBucket.call(this,t)})}getBucket(t){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ie(this,void 0,void 0,function*(){return r.getBucket.call(this,t)})}listBuckets(){const t=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ie(this,arguments,void 0,function*(r={}){return t.listBuckets.call(this,r)})}deleteBucket(t){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ie(this,void 0,void 0,function*(){return r.deleteBucket.call(this,t)})}}class O4 extends E4{constructor(t,r,s,n){super(t,r,n),this.vectorBucketName=s}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ie(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ie(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ie(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ie(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new T4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class T4 extends k4{constructor(t,r,s,n,i){super(t,r,i),this.vectorBucketName=s,this.indexName=n}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ie(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ie(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ie(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ie(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ie(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Az extends gz{constructor(t,r={},s,n){super(t,r,s,n)}from(t){return new pz(this.url,this.headers,t,this.fetch)}get vectors(){return new A4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new N4(this.url+"/iceberg",this.headers,this.fetch)}}const Oz=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:N4,StorageApiError:v4,StorageClient:Az,StorageError:Nu,StorageUnknownError:Yf,StorageVectorsApiError:$f,StorageVectorsClient:A4,StorageVectorsError:$y,get StorageVectorsErrorCode(){return gv},StorageVectorsUnknownError:_4,VectorBucketApi:C4,VectorBucketScope:O4,VectorDataApi:k4,VectorIndexApi:E4,VectorIndexScope:T4,isPlainObject:S4,isStorageError:zt,isStorageVectorsError:wa,normalizeToFloat32:_z,resolveFetch:Qm,resolveResponse:Nz,validateVectorDimension:Sz},Symbol.toStringTag,{value:"Module"})),Tz=vu(Oz);var ax={},Cd={},dS;function Pz(){return dS||(dS=1,Object.defineProperty(Cd,"__esModule",{value:!0}),Cd.version=void 0,Cd.version="2.87.1"),Cd}var uS;function Rz(){return uS||(uS=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_REALTIME_OPTIONS=e.DEFAULT_AUTH_OPTIONS=e.DEFAULT_DB_OPTIONS=e.DEFAULT_GLOBAL_OPTIONS=e.DEFAULT_HEADERS=void 0;const t=Pz();let r="";typeof Deno<"u"?r="deno":typeof document<"u"?r="web":typeof navigator<"u"&&navigator.product==="ReactNative"?r="react-native":r="node",e.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${r}/${t.version}`},e.DEFAULT_GLOBAL_OPTIONS={headers:e.DEFAULT_HEADERS},e.DEFAULT_DB_OPTIONS={schema:"public"},e.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},e.DEFAULT_REALTIME_OPTIONS={}})(ax)),ax}var sx={},hS;function Dz(){return hS||(hS=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchWithAuth=e.resolveHeadersConstructor=e.resolveFetch=void 0;const t=n=>n?(...i)=>n(...i):(...i)=>fetch(...i);e.resolveFetch=t;const r=()=>Headers;e.resolveHeadersConstructor=r;const s=(n,i,l)=>{const d=(0,e.resolveFetch)(l),u=(0,e.resolveHeadersConstructor)();return async(h,m)=>{var p;const x=(p=await i())!==null&&p!==void 0?p:n;let b=new u(m==null?void 0:m.headers);return b.has("apikey")||b.set("apikey",n),b.has("Authorization")||b.set("Authorization",`Bearer ${x}`),d(h,Object.assign(Object.assign({},m),{headers:b}))}};e.fetchWithAuth=s})(sx)),sx}var jn={},fS;function Mz(){if(fS)return jn;fS=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.isBrowser=void 0,jn.uuid=e,jn.ensureTrailingSlash=t,jn.applySettingDefaults=s,jn.validateSupabaseUrl=n;function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){var l=Math.random()*16|0,d=i=="x"?l:l&3|8;return d.toString(16)})}function t(i){return i.endsWith("/")?i:i+"/"}const r=()=>typeof window<"u";jn.isBrowser=r;function s(i,l){var d,u;const{db:h,auth:m,realtime:p,global:x}=i,{db:b,auth:y,realtime:v,global:w}=l,N={db:Object.assign(Object.assign({},b),h),auth:Object.assign(Object.assign({},y),m),realtime:Object.assign(Object.assign({},v),p),storage:{},global:Object.assign(Object.assign(Object.assign({},w),x),{headers:Object.assign(Object.assign({},(d=w==null?void 0:w.headers)!==null&&d!==void 0?d:{}),(u=x==null?void 0:x.headers)!==null&&u!==void 0?u:{})}),accessToken:async()=>""};return i.accessToken?N.accessToken=i.accessToken:delete N.accessToken,N}function n(i){const l=i==null?void 0:i.trim();if(!l)throw new Error("supabaseUrl is required.");if(!l.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t(l))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return jn}var Ad={};const P4="2.87.1",Ml=30*1e3,xv=3,nx=xv*Ml,Iz="http://localhost:9999",zz="supabase.auth.token",$z={"X-Client-Info":`gotrue-js/${P4}`},bv="X-Supabase-Api-Version",R4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Lz=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Bz=600*1e3;let Wl=class extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}};function qe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}let D4=class extends Wl{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}};function M4(e){return qe(e)&&e.name==="AuthApiError"}let ji=class extends Wl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}},Bn=class extends Wl{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}},va=class extends Bn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function I4(e){return qe(e)&&e.name==="AuthSessionMissingError"}let go=class extends Bn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Ud=class extends Bn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},qd=class extends Bn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function z4(e){return qe(e)&&e.name==="AuthImplicitGrantRedirectError"}let vv=class extends Bn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Xf=class extends Bn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}};function Lf(e){return qe(e)&&e.name==="AuthRetryableFetchError"}let yv=class extends Bn{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}};function Uz(e){return qe(e)&&e.name==="AuthWeakPasswordError"}let Jf=class extends Bn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};const Zf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),mS=` 	
\r=`.split(""),qz=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<mS.length;t+=1)e[mS[t].charCodeAt(0)]=-2;for(let t=0;t<Zf.length;t+=1)e[Zf[t].charCodeAt(0)]=t;return e})();function pS(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Zf[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(Zf[s]),t.queuedBits-=6}}function $4(e,t,r){const s=qz[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function gS(e){const t=[],r=l=>{t.push(String.fromCodePoint(l))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=l=>{Vz(l,s,r)};for(let l=0;l<e.length;l+=1)$4(e.charCodeAt(l),n,i);return t.join("")}function Fz(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Hz(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Fz(s,t)}}function Vz(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if((e>>7-s&1)===0){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ql(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)$4(e.charCodeAt(n),r,s);return new Uint8Array(t)}function Gz(e){const t=[];return Hz(e,r=>t.push(r)),new Uint8Array(t)}function _o(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>pS(n,r,s)),pS(null,r,s),t.join("")}function Kz(e){return Math.round(Date.now()/1e3)+e}function Wz(){return Symbol("auth-callback")}const qr=()=>typeof window<"u"&&typeof document<"u",fo={tested:!1,writable:!1},L4=()=>{if(!qr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(fo.tested)return fo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),fo.tested=!0,fo.writable=!0}catch{fo.tested=!0,fo.writable=!1}return fo.writable};function Yz(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const B4=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Xz=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Il=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},mo=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ur=async(e,t)=>{await e.removeItem(t)};class ep{constructor(){this.promise=new ep.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ep.promiseConstructor=Promise;function ix(e){const t=e.split(".");if(t.length!==3)throw new Jf("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Lz.test(t[s]))throw new Jf("JWT not in base64url format");return{header:JSON.parse(gS(t[0])),payload:JSON.parse(gS(t[1])),signature:ql(t[2]),raw:{header:t[0],payload:t[1]}}}async function Jz(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Zz(e,t){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const l=await e(i);if(!t(i,null,l)){s(l);return}}catch(l){if(!t(i,l)){n(l);return}}})()})}function Qz(e){return("0"+e.toString(16)).substr(-2)}function e$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,Qz).join("")}async function t$(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function r$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await t$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ol(e,t,r=!1){const s=e$();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Il(e,`${t}-code-verifier`,n);const i=await r$(s);return[i,s===i?"plain":"s256"]}const a$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function s$(e){const t=e.headers.get(bv);if(!t||!t.match(a$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function n$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function i$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const o$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tl(e){if(!o$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ox(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function l$(e,t){return new Proxy(e,{get:(r,s,n)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const i=s.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,s,n)}return!t.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,s,n)}})}function xS(e){return JSON.parse(JSON.stringify(e))}const xo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),c$=[502,503,504];async function bS(e){var t;if(!Xz(e))throw new Xf(xo(e),0);if(c$.includes(e.status))throw new Xf(xo(e),e.status);let r;try{r=await e.json()}catch(i){throw new ji(xo(i),i)}let s;const n=s$(e);if(n&&n.getTime()>=R4["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new yv(xo(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new va}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,l)=>i&&typeof l=="string",!0))throw new yv(xo(r),e.status,r.weak_password.reasons);throw new D4(xo(r),e.status||500,s)}const d$=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function We(e,t,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[bv]||(i[bv]=R4["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const l=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(l.redirect_to=s.redirectTo);const d=Object.keys(l).length?"?"+new URLSearchParams(l).toString():"",u=await u$(e,t,r+d,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(u):{data:Object.assign({},u),error:null}}async function u$(e,t,r,s,n,i){const l=d$(t,s,n,i);let d;try{d=await e(r,Object.assign({},l))}catch(u){throw console.error(u),new Xf(xo(u),0)}if(d.ok||await bS(d),s!=null&&s.noResolveJson)return d;try{return await d.json()}catch(u){await bS(u)}}function As(e){var t;let r=null;m$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Kz(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function vS(e){const t=As(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ni(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function h$(e){return{data:e,error:null}}function f$(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=e,l=pc(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},u=Object.assign({},l);return{data:{properties:d,user:u},error:null}}function yS(e){return e}function m$(e){return e.access_token&&e.refresh_token&&e.expires_in}const Bf=["global","local","others"];let Ly=class{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=B4(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Bf[0]){if(Bf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Bf.join(", ")}`);try{return await We(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(qe(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await We(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ni})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=pc(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await We(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:f$,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(qe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await We(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ni})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,i,l,d,u;try{const h={nextPage:null,lastPage:0,total:0},m=await We(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:yS});if(m.error)throw m.error;const p=await m.json(),x=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(u=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return b.length>0&&(b.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);h[`${w}Page`]=v}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(qe(h))return{data:{users:[]},error:h};throw h}}async getUserById(t){Tl(t);try{return await We(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ni})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Tl(t);try{return await We(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ni})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Tl(t);try{return await We(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ni})}catch(s){if(qe(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Tl(t.userId);try{const{data:r,error:s}=await We(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Tl(t.userId),Tl(t.id);try{return{data:await We(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,s,n,i,l,d,u;try{const h={nextPage:null,lastPage:0,total:0},m=await We(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:yS});if(m.error)throw m.error;const p=await m.json(),x=(l=m.headers.get("x-total-count"))!==null&&l!==void 0?l:0,b=(u=(d=m.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return b.length>0&&(b.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);h[`${w}Page`]=v}),h.total=parseInt(x)),{data:Object.assign(Object.assign({},p),h),error:null}}catch(h){if(qe(h))return{data:{clients:[]},error:h};throw h}}async _createOAuthClient(t){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await We(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await We(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(qe(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(t){try{return await We(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await We(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(qe(r))return{data:null,error:r};throw r}}};function wS(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const bo={debug:!!(globalThis&&L4()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class By extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}let U4=class extends By{};class p$ extends By{}async function q4(e,t,r){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new U4(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(bo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}const jS={};async function g$(e,t,r){var s;const n=(s=jS[e])!==null&&s!==void 0?s:Promise.resolve(),i=Promise.race([n.catch(()=>null),t>=0?new Promise((l,d)=>{setTimeout(()=>{d(new p$(`Acquring process lock with name "${e}" timed out`))},t)}):null].filter(l=>l)).catch(l=>{if(l&&l.isAcquireTimeout)throw l;return null}).then(async()=>await r());return jS[e]=i.catch(async l=>{if(l&&l.isAcquireTimeout)return await n,null;throw l}),await i}function x$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function F4(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function b$(e){return parseInt(e,16)}function v$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,s=>s.toString(16).padStart(2,"0")).join("")}function y$(e){var t;const{chainId:r,domain:s,expirationTime:n,issuedAt:i=new Date,nonce:l,notBefore:d,requestId:u,resources:h,scheme:m,uri:p,version:x}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(l&&l.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${l}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const b=F4(e.address),y=m?`${m}://${s}`:s,v=e.statement?`${e.statement}
`:"",w=`${y} wants you to sign in with your Ethereum account:
${b}

${v}`;let N=`URI: ${p}
Version: ${x}
Chain ID: ${r}${l?`
Nonce: ${l}`:""}
Issued At: ${i.toISOString()}`;if(n&&(N+=`
Expiration Time: ${n.toISOString()}`),d&&(N+=`
Not Before: ${d.toISOString()}`),u&&(N+=`
Request ID: ${u}`),h){let S=`
Resources:`;for(const j of h){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);S+=`
- ${j}`}N+=S}return`${w}
${N}`}class ur extends Error{constructor({message:t,code:r,cause:s,name:n}){var i;super(t,{cause:s}),this.__isWebAuthnError=!0,this.name=(i=n??(s instanceof Error?s.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Qf extends ur{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function w$({error:e,options:t}){var r,s,n;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ur({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new ur({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ur({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ur({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ur({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ur({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new ur({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ur({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const l=window.location.hostname;if(H4(l)){if(i.rp.id!==l)return new ur({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ur({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function j$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ur({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ur({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const s=window.location.hostname;if(H4(s)){if(r.rpId!==s)return new ur({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class N${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const _$=new N$;function S$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:s}=e,n=pc(e,["challenge","user","excludeCredentials"]),i=ql(t).buffer,l=Object.assign(Object.assign({},r),{id:ql(r.id).buffer}),d=Object.assign(Object.assign({},n),{challenge:i,user:l});if(s&&s.length>0){d.excludeCredentials=new Array(s.length);for(let u=0;u<s.length;u++){const h=s[u];d.excludeCredentials[u]=Object.assign(Object.assign({},h),{id:ql(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return d}function E$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,s=pc(e,["challenge","allowCredentials"]),n=ql(t).buffer,i=Object.assign(Object.assign({},s),{challenge:n});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const d=r[l];i.allowCredentials[l]=Object.assign(Object.assign({},d),{id:ql(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return i}function k$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:_o(new Uint8Array(e.response.attestationObject)),clientDataJSON:_o(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function C$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,s=e.getClientExtensionResults(),n=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:_o(new Uint8Array(n.authenticatorData)),clientDataJSON:_o(new Uint8Array(n.clientDataJSON)),signature:_o(new Uint8Array(n.signature)),userHandle:n.userHandle?_o(new Uint8Array(n.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function H4(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function NS(){var e,t;return!!(qr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function A$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qf("Browser returned unexpected credential type",t)}:{data:null,error:new Qf("Empty credential response",t)}}catch(t){return{data:null,error:w$({error:t,options:e})}}}async function O$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Qf("Browser returned unexpected credential type",t)}:{data:null,error:new Qf("Empty credential response",t)}}catch(t){return{data:null,error:j$({error:t,options:e})}}}const T$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},P$={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function em(...e){const t=n=>n!==null&&typeof n=="object"&&!Array.isArray(n),r=n=>n instanceof ArrayBuffer||ArrayBuffer.isView(n),s={};for(const n of e)if(n)for(const i in n){const l=n[i];if(l!==void 0)if(Array.isArray(l))s[i]=l;else if(r(l))s[i]=l;else if(t(l)){const d=s[i];t(d)?s[i]=em(d,l):s[i]=em(l)}else s[i]=l}return s}function R$(e,t){return em(T$,e,t||{})}function D$(e,t){return em(P$,e,t||{})}class M${constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:s,signal:n},i){try{const{data:l,error:d}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!l)return{data:null,error:d};const u=n??_$.createNewAbortSignal();if(l.webauthn.type==="create"){const{user:h}=l.webauthn.credential_options.publicKey;h.name||(h.name=`${h.id}:${s}`),h.displayName||(h.displayName=h.name)}switch(l.webauthn.type){case"create":{const h=R$(l.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:m,error:p}=await A$({publicKey:h,signal:u});return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}case"request":{const h=D$(l.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:m,error:p}=await O$(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:h,signal:u}));return m?{data:{factorId:t,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:m}},error:null}:{data:null,error:p}}}}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new ji("Unexpected error in challenge",l)}}}async _verify({challengeId:t,factorId:r,webauthn:s}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:s})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new Wl("rpId is required for WebAuthn authentication")};try{if(!NS())return{data:null,error:new ji("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:s},signal:n},{request:i});if(!l)return{data:null,error:d};const{webauthn:u}=l;return this._verify({factorId:t,challengeId:l.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:s,credential_response:u.credential_response}})}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new ji("Unexpected error in authenticate",l)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:n}={}},i){if(!r)return{data:null,error:new Wl("rpId is required for WebAuthn registration")};try{if(!NS())return{data:null,error:new ji("Browser does not support WebAuthn",null)};const{data:l,error:d}=await this._enroll({friendlyName:t});if(!l)return await this.client.mfa.listFactors().then(m=>{var p;return(p=m.data)===null||p===void 0?void 0:p.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===t&&x.status!=="unverified")}).then(m=>m?this.client.mfa.unenroll({factorId:m==null?void 0:m.id}):void 0),{data:null,error:d};const{data:u,error:h}=await this._challenge({factorId:l.id,friendlyName:l.friendly_name,webauthn:{rpId:r,rpOrigins:s},signal:n},{create:i});return u?this._verify({factorId:l.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:s,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:h}}catch(l){return qe(l)?{data:null,error:l}:{data:null,error:new ji("Unexpected error in register",l)}}}}x$();const I$={url:Iz,storageKey:zz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:$z,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function _S(e,t,r){return await r()}const Pl={};let Uy=class wv{get jwks(){var t,r;return(r=(t=Pl[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Pl[this.storageKey]=Object.assign(Object.assign({},Pl[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Pl[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Pl[this.storageKey]=Object.assign(Object.assign({},Pl[this.storageKey]),{cachedAt:t})}constructor(t){var r,s,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},I$),t);if(this.storageKey=i.storageKey,this.instanceID=(r=wv.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,wv.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&qr()){const l=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(l),this.logDebugMessages&&console.trace(l)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Ly({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=B4(i.fetch),this.lock=i.lock||_S,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:this.persistSession&&qr()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=q4:this.lock=_S,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new M$(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:L4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=wS(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=wS(this.memoryStorage)),qr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${P4}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},s="none";if(qr()&&(r=Yz(window.location.href),this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce")),qr()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),z4(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:l,redirectType:d}=n;return this._debug("#_initialize()","detected session in URL",l,"redirect type",d),await this._saveSession(l),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",l):await this._notifyAllSubscribers("SIGNED_IN",l)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return qe(r)?this._returnResult({error:r}):this._returnResult({error:new ji("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const i=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:As}),{data:l,error:d}=i;if(d||!l)return this._returnResult({data:{user:null,session:null},error:d});const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,s,n;try{let i;if("email"in t){const{email:m,password:p,options:x}=t;let b=null,y=null;this.flowType==="pkce"&&([b,y]=await Ol(this.storage,this.storageKey)),i=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:m,password:p,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:b,code_challenge_method:y},xform:As})}else if("phone"in t){const{phone:m,password:p,options:x}=t;i=await We(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:p,data:(s=x==null?void 0:x.data)!==null&&s!==void 0?s:{},channel:(n=x==null?void 0:x.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:As})}else throw new Ud("You must provide either an email or phone number and a password");const{data:l,error:d}=i;if(d||!l)return await Ur(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const u=l.session,h=l.user;return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(i){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:l,options:d}=t;r=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:vS})}else if("phone"in t){const{phone:i,password:l,options:d}=t;r=await We(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:l,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:vS})}else throw new Ud("You must provide either an email or phone number and a password");const{data:s,error:n}=r;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!s||!s.session||!s.user){const i=new go;return this._returnResult({data:{user:null,session:null},error:i})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,s,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,s,n,i,l,d,u,h,m,p,x;let b,y;if("message"in t)b=t.message,y=t.signature;else{const{chain:v,wallet:w,statement:N,options:S}=t;let j;if(qr())if(typeof w=="object")j=w;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")j=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof w!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=w}const k=new URL((r=S==null?void 0:S.url)!==null&&r!==void 0?r:window.location.href),A=await j.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!A||A.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=F4(A[0]);let T=(s=S==null?void 0:S.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!T){const R=await j.request({method:"eth_chainId"});T=b$(R)}const D={domain:k.host,address:O,statement:N,uri:k.href,version:"1",chainId:T,nonce:(n=S==null?void 0:S.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(l=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&l!==void 0?l:new Date,expirationTime:(d=S==null?void 0:S.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(h=S==null?void 0:S.signInWithEthereum)===null||h===void 0?void 0:h.requestId,resources:(m=S==null?void 0:S.signInWithEthereum)===null||m===void 0?void 0:m.resources};b=y$(D),y=await j.request({method:"personal_sign",params:[v$(b),O]})}try{const{data:v,error:w}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:y},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:As});if(w)throw w;if(!v||!v.session||!v.user){const N=new go;return this._returnResult({data:{user:null,session:null},error:N})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:w})}catch(v){if(qe(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(t){var r,s,n,i,l,d,u,h,m,p,x,b;let y,v;if("message"in t)y=t.message,v=t.signature;else{const{chain:w,wallet:N,statement:S,options:j}=t;let k;if(qr())if(typeof N=="object")k=N;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))k=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=N}const A=new URL((r=j==null?void 0:j.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in k&&k.signIn){const O=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:A.host,uri:A.href}),S?{statement:S}:null));let T;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")T=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)T=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),v=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${A.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${A.href}`,`Issued At: ${(n=(s=j==null?void 0:j.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=j==null?void 0:j.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((l=j==null?void 0:j.signInWithSolana)===null||l===void 0)&&l.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((h=j==null?void 0:j.signInWithSolana)===null||h===void 0)&&h.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((p=(m=j==null?void 0:j.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||p===void 0)&&p.length?["Resources",...j.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const O=await k.signMessage(new TextEncoder().encode(y),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=O}}try{const{data:w,error:N}=await We(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:_o(v)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:As});if(N)throw N;if(!w||!w.session||!w.user){const S=new go;return this._returnResult({data:{user:null,session:null},error:S})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:N})}catch(w){if(qe(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async _exchangeCodeForSession(t){const r=await mo(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:i,error:l}=await We(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:As});if(await Ur(this.storage,`${this.storageKey}-code-verifier`),l)throw l;if(!i||!i.session||!i.user){const d=new go;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:l})}catch(i){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:i,nonce:l}=t,d=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:l,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:As}),{data:u,error:h}=d;if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!u||!u.session||!u.user){const m=new go;return this._returnResult({data:{user:null,session:null},error:m})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:h})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,s,n,i,l;try{if("email"in t){const{email:d,options:u}=t;let h=null,m=null;this.flowType==="pkce"&&([h,m]=await Ol(this.storage,this.storageKey));const{error:p}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(s=u==null?void 0:u.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:h,code_challenge_method:m},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:p})}if("phone"in t){const{phone:d,options:u}=t,{data:h,error:m}=await We(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(l=u==null?void 0:u.channel)!==null&&l!==void 0?l:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:m})}throw new Ud("You must provide either an email or phone number.")}catch(d){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),qe(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(t){var r,s;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:l,error:d}=await We(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:As});if(d)throw d;if(!l)throw new Error("An error occurred on token verification.");const u=l.session,h=l.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:h,session:u},error:null})}catch(n){if(qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(t){var r,s,n,i,l;try{let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Ol(this.storage,this.storageKey));const h=await We(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:u}),headers:this.headers,xform:h$});return!((i=h.data)===null||i===void 0)&&i.url&&qr()&&!(!((l=t.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(h.data.url),this._returnResult(h)}catch(d){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),qe(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new va;const{error:n}=await We(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(t){if(qe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:i}=t,{error:l}=await We(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:l})}else if("phone"in t){const{phone:s,type:n,options:i}=t,{data:l,error:d}=await We(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:d})}throw new Ud("You must provide either an email or phone number and a type")}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await mo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<nx:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.userStorage){const l=await mo(this.userStorage,this.storageKey+"-user");l!=null&&l.user?t.user=l.user:t.user=ox()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const l={value:this.suppressGetSessionWarning};t.user=l$(t.user,l),l.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const r=await this._acquireLock(-1,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(t){try{return t?await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ni}):await this._useSession(async r=>{var s,n,i;const{data:l,error:d}=r;if(d)throw d;return!(!((s=l.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new va}:await We(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ni})})}catch(r){if(qe(r))return I4(r)&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new va;const l=n.session;let d=null,u=null;this.flowType==="pkce"&&t.email!=null&&([d,u]=await Ol(this.storage,this.storageKey));const{data:h,error:m}=await We(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:d,code_challenge_method:u}),jwt:l.access_token,xform:Ni});if(m)throw m;return l.user=h.user,await this._saveSession(l),await this._notifyAllSubscribers("USER_UPDATED",l),this._returnResult({data:{user:l.user},error:null})})}catch(s){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),qe(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new va;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:l}=ix(t.access_token);if(l.exp&&(s=l.exp,n=s<=r),n){const{data:d,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d)return{data:{user:null,session:null},error:null};i=d}else{const{data:d,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:d.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(qe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:l,error:d}=r;if(d)throw d;t=(s=l.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new va;const{data:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(qe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!qr())throw new qd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new qd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new vv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new vv("No code detected.");const{data:S,error:j}=await this._exchangeCodeForSession(t.code);if(j)throw j;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:l,expires_in:d,expires_at:u,token_type:h}=t;if(!i||!d||!l||!h)throw new qd("No session defined in URL");const m=Math.round(Date.now()/1e3),p=parseInt(d);let x=m+p;u&&(x=parseInt(u));const b=x-m;b*1e3<=Ml&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${p}s`);const y=x-p;m-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,x,m):m-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,x,m);const{data:v,error:w}=await this._getUser(i);if(w)throw w;const N={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:p,expires_at:x,refresh_token:l,token_type:h,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:N,redirectType:t.type},error:null})}catch(s){if(qe(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await mo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({error:i});const l=(s=n.session)===null||s===void 0?void 0:s.access_token;if(l){const{error:d}=await this.admin.signOut(l,t);if(d&&!(M4(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return t!=="others"&&(await this._removeSession(),await Ur(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=Wz(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:l}=r;if(l)throw l;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Ol(this.storage,this.storageKey,!0));try{return await We(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),qe(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var l,d,u,h,m;const{data:p,error:x}=i;if(x)throw x;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(l=t.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=t.options)===null||d===void 0?void 0:d.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await We(this.fetch,"GET",b,{headers:this.headers,jwt:(m=(h=p.session)===null||h===void 0?void 0:h.access_token)!==null&&m!==void 0?m:void 0})});if(n)throw n;return qr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),this._returnResult({data:{provider:t.provider,url:s==null?void 0:s.url},error:null})}catch(s){if(qe(s))return this._returnResult({data:{provider:t.provider,url:null},error:s});throw s}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var s;try{const{error:n,data:{session:i}}=r;if(n)throw n;const{options:l,provider:d,token:u,access_token:h,nonce:m}=t,p=await We(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=i==null?void 0:i.access_token)!==null&&s!==void 0?s:void 0,body:{provider:d,id_token:u,access_token:h,nonce:m,link_identity:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:As}),{data:x,error:b}=p;return b?this._returnResult({data:{user:null,session:null},error:b}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new go}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:b}))}catch(n){if(await Ur(this.storage,`${this.storageKey}-code-verifier`),qe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:i,error:l}=r;if(l)throw l;return await We(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await Zz(async n=>(n>0&&await Jz(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await We(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:As})),(n,i)=>{const l=200*Math.pow(2,n);return i&&Lf(i)&&Date.now()+l-s<Ml})}catch(s){if(this._debug(r,"error",s),qe(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),qr()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t,r;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await mo(this.storage,this.storageKey);if(n&&this.userStorage){let l=await mo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!l&&(l={user:n.user},await Il(this.userStorage,this.storageKey+"-user",l)),n.user=(t=l==null?void 0:l.user)!==null&&t!==void 0?t:ox()}else if(n&&!n.user&&!n.user){const l=await mo(this.storage,this.storageKey+"-user");l&&(l!=null&&l.user)?(n.user=l.user,await Ur(this.storage,this.storageKey+"-user"),await Il(this.storage,this.storageKey,n)):n.user=ox()}if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<nx;if(this._debug(s,`session has${i?"":" not"} expired with margin of ${nx}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:l}=await this._callRefreshToken(n.refresh_token);l&&(console.error(l),Lf(l)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",l),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:l,error:d}=await this._getUser(n.access_token);!d&&(l!=null&&l.user)?(n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(l){console.error("Error getting user data:",l),this._debug(s,"error getting user data, skipping SIGNED_IN notification",l)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new va;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ep;const{data:i,error:l}=await this._refreshAccessToken(t);if(l)throw l;if(!i.session)throw new va;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const d={data:i.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(i){if(this._debug(n,"error",i),qe(i)){const l={data:null,error:i};return Lf(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(l),l}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],l=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(l),i.length>0){for(let d=0;d<i.length;d+=1)console.error(i[d]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Ur(this.storage,`${this.storageKey}-code-verifier`);const r=Object.assign({},t),s=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&r.user&&await Il(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=xS(n);await Il(this.storage,this.storageKey,i)}else{const n=xS(r);await Il(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ur(this.storage,this.storageKey),await Ur(this.storage,this.storageKey+"-code-verifier"),await Ur(this.storage,this.storageKey+"-user"),this.userStorage&&await Ur(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ml);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Ml);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ml}ms, refresh threshold is ${xv} ticks`),n<=xv&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof By)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,l]=await Ol(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(l)}`});n.push(d.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?this._returnResult({data:null,error:i}):await We(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:i,error:l}=r;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:h}=await We(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return h?this._returnResult({data:null,error:h}):(t.factorType==="totp"&&u.type==="totp"&&(!((n=u==null?void 0:u.totp)===null||n===void 0)&&n.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?k$(t.webauthn.credential_response):C$(t.webauthn.credential_response)})}:{code:t.code}),{data:d,error:u}=await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:l,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:u}))})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return this._returnResult({data:null,error:i});const l=await We(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});if(l.error)return l;const{data:d}=l;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:S$(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:E$(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:s}=await this.getUser();if(s)return{data:null,error:s};const n={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])n.all.push(i),i.status==="verified"&&n[i.factor_type].push(i);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:s},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=ix(s.access_token);let l=null;i.aal&&(l=i.aal);let d=l;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(m=>m.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(d="aal2");const h=i.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:h},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?await We(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new va})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new va});const l=await We(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&qr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(qe(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(t,r){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;if(i)return this._returnResult({data:null,error:i});if(!n)return this._returnResult({data:null,error:new va});const l=await We(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return l.data&&l.data.redirect_url&&qr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(l.data.redirect_url),l})}catch(s){if(qe(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;return s?this._returnResult({data:null,error:s}):r?await We(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:n=>({data:n,error:null})}):this._returnResult({data:null,error:new va})})}catch(t){if(qe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:s},error:n}=r;return n?this._returnResult({data:null,error:n}):s?(await We(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new va})})}catch(r){if(qe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(d=>d.kid===t);if(s)return s;const n=Date.now();if(s=this.jwks.keys.find(d=>d.kid===t),s&&this.jwks_cached_at+Bz>n)return s;const{data:i,error:l}=await We(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(l)throw l;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,s=i.keys.find(d=>d.kid===t),!s)?null:s}async getClaims(t,r={}){try{let s=t;if(!s){const{data:b,error:y}=await this.getSession();if(y||!b.session)return this._returnResult({data:null,error:y});s=b.session.access_token}const{header:n,payload:i,signature:l,raw:{header:d,payload:u}}=ix(s);r!=null&&r.allowExpired||n$(i.exp);const h=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!h){const{error:b}=await this.getUser(s);if(b)throw b;return{data:{claims:i,header:n,signature:l},error:null}}const m=i$(n.alg),p=await crypto.subtle.importKey("jwk",h,m,!0,["verify"]);if(!await crypto.subtle.verify(m,p,l,Gz(`${d}.${u}`)))throw new Jf("Invalid JWT signature");return{data:{claims:i,header:n,signature:l},error:null}}catch(s){if(qe(s))return this._returnResult({data:null,error:s});throw s}}};Uy.nextInstanceID={};const z$=Ly,$$=Uy,L$=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:z$,AuthApiError:D4,AuthClient:$$,AuthError:Wl,AuthImplicitGrantRedirectError:qd,AuthInvalidCredentialsError:Ud,AuthInvalidJwtError:Jf,AuthInvalidTokenResponseError:go,AuthPKCEGrantCodeExchangeError:vv,AuthRetryableFetchError:Xf,AuthSessionMissingError:va,AuthUnknownError:ji,AuthWeakPasswordError:yv,CustomAuthError:Bn,GoTrueAdminApi:Ly,GoTrueClient:Uy,NavigatorLockAcquireTimeoutError:U4,SIGN_OUT_SCOPES:Bf,isAuthApiError:M4,isAuthError:qe,isAuthImplicitGrantRedirectError:z4,isAuthRetryableFetchError:Lf,isAuthSessionMissingError:I4,isAuthWeakPasswordError:Uz,lockInternals:bo,navigatorLock:q4,processLock:g$},Symbol.toStringTag,{value:"Module"})),V4=vu(L$);var SS;function B$(){if(SS)return Ad;SS=1,Object.defineProperty(Ad,"__esModule",{value:!0}),Ad.SupabaseAuthClient=void 0;const e=V4;let t=class extends e.AuthClient{constructor(s){super(s)}};return Ad.SupabaseAuthClient=t,Ad}var ES;function kS(){if(ES)return af;ES=1,Object.defineProperty(af,"__esModule",{value:!0});const e=s4,t=d4(),r=b4,s=Tz,n=Rz(),i=Dz(),l=Mz(),d=B$();class u{constructor(m,p,x){var b,y,v;this.supabaseUrl=m,this.supabaseKey=p;const w=(0,l.validateSupabaseUrl)(m);if(!p)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",w),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",w),this.storageUrl=new URL("storage/v1",w),this.functionsUrl=new URL("functions/v1",w);const N=`sb-${w.hostname.split(".")[0]}-auth-token`,S={db:n.DEFAULT_DB_OPTIONS,realtime:n.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},n.DEFAULT_AUTH_OPTIONS),{storageKey:N}),global:n.DEFAULT_GLOBAL_OPTIONS},j=(0,l.applySettingDefaults)(x??{},S);this.storageKey=(b=j.auth.storageKey)!==null&&b!==void 0?b:"",this.headers=(y=j.global.headers)!==null&&y!==void 0?y:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(k,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((v=j.auth)!==null&&v!==void 0?v:{},this.headers,j.global.fetch),this.fetch=(0,i.fetchWithAuth)(p,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.accessToken&&this.accessToken().then(k=>this.realtime.setAuth(k)).catch(k=>console.warn("Failed to set initial Realtime auth token:",k)),this.rest=new t.PostgrestClient(new URL("rest/v1",w).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,x==null?void 0:x.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(m){return this.rest.from(m)}schema(m){return this.rest.schema(m)}rpc(m,p={},x={head:!1,get:!1,count:void 0}){return this.rest.rpc(m,p,x)}channel(m,p={config:{}}){return this.realtime.channel(m,p)}getChannels(){return this.realtime.getChannels()}removeChannel(m){return this.realtime.removeChannel(m)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var m,p;if(this.accessToken)return await this.accessToken();const{data:x}=await this.auth.getSession();return(p=(m=x.session)===null||m===void 0?void 0:m.access_token)!==null&&p!==void 0?p:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:m,persistSession:p,detectSessionInUrl:x,storage:b,userStorage:y,storageKey:v,flowType:w,lock:N,debug:S,throwOnError:j},k,A){const O={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new d.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},O),k),storageKey:v,autoRefreshToken:m,persistSession:p,detectSessionInUrl:x,storage:b,userStorage:y,flowType:w,lock:N,debug:S,throwOnError:j,fetch:A,hasCustomAuthorizationHeader:Object.keys(this.headers).some(T=>T.toLowerCase()==="authorization")})}_initRealtimeClient(m){return new r.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},m),{params:Object.assign({apikey:this.supabaseKey},m==null?void 0:m.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((p,x)=>{this._handleTokenChanged(p,"CLIENT",x==null?void 0:x.access_token)})}_handleTokenChanged(m,p,x){(m==="TOKEN_REFRESHED"||m==="SIGNED_IN")&&this.changedAccessToken!==x?(this.changedAccessToken=x,this.realtime.setAuth(x)):m==="SIGNED_OUT"&&(this.realtime.setAuth(),p=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return af.default=u,af}var CS;function U$(){return CS||(CS=1,(function(e){var t=wn&&wn.__createBinding||(Object.create?(function(m,p,x,b){b===void 0&&(b=x);var y=Object.getOwnPropertyDescriptor(p,x);(!y||("get"in y?!p.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return p[x]}}),Object.defineProperty(m,b,y)}):(function(m,p,x,b){b===void 0&&(b=x),m[b]=p[x]})),r=wn&&wn.__exportStar||function(m,p){for(var x in m)x!=="default"&&!Object.prototype.hasOwnProperty.call(p,x)&&t(p,m,x)},s=wn&&wn.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.createClient=e.SupabaseClient=e.FunctionRegion=e.FunctionsError=e.FunctionsRelayError=e.FunctionsFetchError=e.FunctionsHttpError=e.PostgrestError=void 0;const n=s(kS());r(V4,e);var i=d4();Object.defineProperty(e,"PostgrestError",{enumerable:!0,get:function(){return i.PostgrestError}});var l=s4;Object.defineProperty(e,"FunctionsHttpError",{enumerable:!0,get:function(){return l.FunctionsHttpError}}),Object.defineProperty(e,"FunctionsFetchError",{enumerable:!0,get:function(){return l.FunctionsFetchError}}),Object.defineProperty(e,"FunctionsRelayError",{enumerable:!0,get:function(){return l.FunctionsRelayError}}),Object.defineProperty(e,"FunctionsError",{enumerable:!0,get:function(){return l.FunctionsError}}),Object.defineProperty(e,"FunctionRegion",{enumerable:!0,get:function(){return l.FunctionRegion}}),r(b4,e);var d=kS();Object.defineProperty(e,"SupabaseClient",{enumerable:!0,get:function(){return s(d).default}});const u=(m,p,x)=>new n.default(m,p,x);e.createClient=u;function h(){if(typeof window<"u"||typeof process>"u")return!1;const m=process.version;if(m==null)return!1;const p=m.match(/^v(\d+)\./);return p?parseInt(p[1],10)<=18:!1}h()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(wn)),wn}var G4=U$();const K4=js(G4),q$=g5({__proto__:null,default:K4},[G4]),{PostgrestError:Aoe,FunctionsHttpError:Ooe,FunctionsFetchError:Toe,FunctionsRelayError:Poe,FunctionsError:Roe,FunctionRegion:Doe,SupabaseClient:Moe,createClient:F$,GoTrueAdminApi:Ioe,GoTrueClient:zoe,AuthAdminApi:$oe,AuthClient:Loe,navigatorLock:Boe,NavigatorLockAcquireTimeoutError:Uoe,lockInternals:qoe,processLock:Foe,SIGN_OUT_SCOPES:Hoe,AuthError:Voe,AuthApiError:Goe,AuthUnknownError:Koe,CustomAuthError:Woe,AuthSessionMissingError:Yoe,AuthInvalidTokenResponseError:Xoe,AuthInvalidCredentialsError:Joe,AuthImplicitGrantRedirectError:Zoe,AuthPKCEGrantCodeExchangeError:Qoe,AuthRetryableFetchError:ele,AuthWeakPasswordError:tle,AuthInvalidJwtError:rle,isAuthError:ale,isAuthApiError:sle,isAuthSessionMissingError:nle,isAuthImplicitGrantRedirectError:ile,isAuthRetryableFetchError:ole,isAuthWeakPasswordError:lle,RealtimePresence:cle,RealtimeChannel:dle,RealtimeClient:ule,REALTIME_LISTEN_TYPES:hle,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:fle,REALTIME_PRESENCE_LISTEN_EVENTS:mle,REALTIME_SUBSCRIBE_STATES:ple,REALTIME_CHANNEL_STATES:gle}=K4||q$,H$="",V$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZqbHZ2bXJpcWVyZm16dHd0ZXdhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwODI2MzAsImV4cCI6MjA4MDY1ODYzMH0.TEllzE2UQFgcFnMTnKp5dQaRu7Gre6IGeEkwGI_hGGg",zl=F$(H$,V$,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),W4=_.createContext(void 0);function G$({children:e}){const[t,r]=_.useState(null),[s,n]=_.useState(!0),[i,l]=_.useState(!0),d=ut.useRef(!1),u=async()=>{var y,v,w;try{const{data:{session:N}}=await zl.auth.getSession();if(!N){r(null),n(!1),l(!1),d.current=!0;return}d.current||l(!0);const S=await Fe("/api/auth/me",{headers:{Accept:"application/json"}});if(S.ok){const j=await S.json();console.log("[AuthContext] User data from API:",{id:(y=j.user)==null?void 0:y.id,email:(v=j.user)==null?void 0:v.email,google_user_data:(w=j.user)==null?void 0:w.google_user_data}),r(j.user)}else console.error("Failed to fetch user profile:",S.status),S.status===401&&(await zl.auth.signOut(),r(null))}catch(N){console.error("Error fetching user:",N)}finally{n(!1),l(!1),d.current=!0}};_.useEffect(()=>{u();const{data:{subscription:y}}=zl.auth.onAuthStateChange((v,w)=>{var N;console.log("Auth state change:",v,(N=w==null?void 0:w.user)==null?void 0:N.email),v==="SIGNED_IN"||v==="TOKEN_REFRESHED"?u():v==="SIGNED_OUT"&&(r(null),n(!1),l(!1))});return()=>y.unsubscribe()},[]);const h=async y=>{console.warn("Manual login deprecated. Use Google Login.")},m=async y=>{console.warn("Manual register deprecated. Use Google Login.")},p=async()=>{try{await zl.auth.signOut(),r(null),window.location.href="/login"}catch(y){console.error("Logout failed:",y)}},x=async()=>{await u()},b=async()=>{try{const{error:y}=await zl.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin+"/auth/callback",scopes:"https://www.googleapis.com/auth/calendar.events"}});if(y)throw y}catch(y){console.error("Error redirecting to login:",y),alert("Erro ao iniciar login com Google. Tente novamente.")}};return a.jsx(W4.Provider,{value:{user:t,loading:s,isPending:i,login:h,register:m,logout:p,fetchUser:u,exchangeCodeForSessionToken:x,redirectToLogin:b},children:e})}function da(){const e=_.useContext(W4);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W$=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,s)=>s?s.toUpperCase():r.toLowerCase()),AS=e=>{const t=W$(e);return t.charAt(0).toUpperCase()+t.slice(1)},Y4=(...e)=>e.filter((t,r,s)=>!!t&&t.trim()!==""&&s.indexOf(t)===r).join(" ").trim(),Y$=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var X$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=_.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:l,...d},u)=>_.createElement("svg",{ref:u,...X$,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:Y4("lucide",n),...!i&&!Y$(d)&&{"aria-hidden":"true"},...d},[...l.map(([h,m])=>_.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=(e,t)=>{const r=_.forwardRef(({className:s,...n},i)=>_.createElement(J$,{ref:i,iconNode:t,className:Y4(`lucide-${K$(AS(e))}`,`lucide-${e}`,s),...n}));return r.displayName=AS(e),r};/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],qy=je("activity",Z$);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],e7=je("align-left",Q$);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],X4=je("archive",t7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],xs=je("arrow-left",r7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],ff=je("arrow-right-left",a7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_n=je("arrow-right",s7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Fy=je("award",n7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i7=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Vd=je("bell",i7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o7=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],l7=je("book-open",o7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],OS=je("bot",c7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],Oi=je("brain",d7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],h7=je("briefcase",u7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],lt=je("building-2",f7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Hy=je("building",m7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Gr=je("calendar",p7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Yl=je("camera",g7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],tu=je("chart-column",x7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ba=je("check",b7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],qo=je("chevron-down",v7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],w7=je("chevron-left",y7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],zo=je("chevron-right",j7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],_7=je("chrome",N7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tr=je("circle-alert",S7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],aa=je("circle-check-big",E7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ct=je("circle-check",k7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],A7=je("circle-help",C7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],T7=je("circle-minus",O7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],jv=je("circle-plus",P7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],J4=je("circle-x",R7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ki=je("clipboard-list",D7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],wr=je("clock",M7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],z7=je("cloud",I7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],L7=je("cog",$7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Ti=je("copy",B7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Nv=je("crown",U7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Si=je("database",q7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Fa=je("download",F7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Z4=je("ellipsis-vertical",H7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],G7=je("ellipsis",V7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],_v=je("external-link",K7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ds=je("eye",W7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["path",{d:"M17.5 22h.5a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"rslqgf"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 19a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 1 1-4 0v-1a2 2 0 1 1 4 0",key:"9f7x3i"}]],X7=je("file-audio",Y7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],To=je("file-check",J7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],Sv=je("file-down",Z7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]],eL=je("file-pen",Q7);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],jr=je("file-text",tL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],aL=je("flag",rL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Uf=je("folder-open",sL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],iL=je("folder-plus",nL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],bs=je("folder",oL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],tp=je("funnel",lL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Su=je("globe",cL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],uL=je("grid-3x3",dL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hL=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Xl=je("grip-vertical",hL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],Q4=je("hard-hat",fL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],pL=je("hash",mL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],xL=je("heart",gL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],vs=je("image",bL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Vy=je("info",vL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],wL=je("layout-dashboard",yL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],NL=je("layout-grid",jL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]],SL=je("layout-template",_L);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]],eO=je("leaf",EL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],TS=je("lightbulb",kL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],AL=je("link",CL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Gy=je("list",OL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],It=je("loader-circle",TL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Jl=je("lock",PL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],DL=je("log-out",RL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],sa=je("mail",ML);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Na=je("map-pin",IL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],tO=je("menu",zL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],LL=je("message-circle",$L);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],UL=je("message-square",BL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],ru=je("mic",qL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],HL=je("mountain",FL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Ky=je("navigation",VL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],PS=je("package",GL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],WL=je("paperclip",KL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],rO=je("pause",YL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],JL=je("pen",XL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],tm=je("pen-tool",ZL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],e9=je("percent",QL);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Fo=je("phone",t9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Fl=je("play",r9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Kr=je("plus",a9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],RS=je("printer",s9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],aO=je("qr-code",n9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],o9=je("quote",i9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$o=je("refresh-cw",l9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Wy=je("rotate-ccw",c9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d9=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],DS=je("rotate-cw",d9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ka=je("save",u9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],_a=je("search",h9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],m9=je("send",f9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Js=je("settings",p9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],Zl=je("share-2",g9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ev=je("shield-check",x9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gt=je("shield",b9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v9=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],y9=je("sliders-horizontal",v9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],j9=je("smartphone",w9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N9=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Po=je("sparkles",N9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],S9=je("square-check-big",_9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ha=je("square-pen",E9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],C9=je("square",k9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],rp=je("star",A9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O9=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],T9=je("tag",O9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],yr=je("target",P9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],rr=je("trash-2",R9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D9=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],M9=je("tree-pine",D9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],Zs=je("trending-up",I9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Nt=je("triangle-alert",z9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],L9=je("trophy",$9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],U9=je("type",B9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Pi=je("upload",q9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],sO=je("user-check",F9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ql=je("user-plus",H9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Wr=je("user",V9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Dt=je("users",G9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],nO=je("video",K9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Y9=je("volume-2",W9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X9=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],J9=je("wrench",X9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ct=je("x",Z9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ec=je("zap",Q9);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],tB=je("zoom-out",eB);/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],aB=je("zoom-in",rB);function sB({id:e,type:t,title:r,message:s,duration:n=5e3,onClose:i}){_.useEffect(()=>{if(n>0){const u=setTimeout(()=>{i(e)},n);return()=>clearTimeout(u)}},[e,n,i]);const l=()=>{switch(t){case"success":return a.jsx(Ct,{className:"w-5 h-5 text-green-500"});case"error":return a.jsx(tr,{className:"w-5 h-5 text-red-500"});case"warning":return a.jsx(Nt,{className:"w-5 h-5 text-yellow-500"});case"info":return a.jsx(Vy,{className:"w-5 h-5 text-blue-500"})}},d=()=>{switch(t){case"success":return"bg-green-50 border-green-200 text-green-900";case"error":return"bg-red-50 border-red-200 text-red-900";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-900";case"info":return"bg-blue-50 border-blue-200 text-blue-900"}};return a.jsx("div",{className:`max-w-sm w-full border rounded-lg shadow-lg p-4 ${d()} animate-in slide-in-from-right duration-300`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[l(),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-sm",children:r}),s&&a.jsx("p",{className:"text-sm opacity-80 mt-1",children:s})]}),a.jsx("button",{onClick:()=>i(e),className:"text-current opacity-60 hover:opacity-80 transition-opacity",children:a.jsx(ct,{className:"w-4 h-4"})})]})})}const iO=_.createContext(void 0);function nB({children:e}){const[t,r]=_.useState([]),s=(h,m,p,x)=>{const y={id:Math.random().toString(36).substr(2,9),type:h,title:m,message:p,duration:x};r(v=>[...v,y])},n=h=>{r(m=>m.filter(p=>p.id!==h))},i=(h,m)=>s("success",h,m),l=(h,m)=>s("error",h,m),d=(h,m)=>s("warning",h,m),u=(h,m)=>s("info",h,m);return a.jsxs(iO.Provider,{value:{addToast:s,removeToast:n,success:i,error:l,warning:d,info:u},children:[e,a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2 max-w-sm",children:t.map(h=>a.jsx(sB,{id:h.id,type:h.type,title:h.title,message:h.message,duration:h.duration,onClose:n},h.id))})]})}function Yy(){const e=_.useContext(iO);if(e===void 0)throw new Error("useToast must be used within a ToastProvider");return e}var Ei=x5();function oO({size:e=40,textSize:t=24,className:r=""}){const s={"--symbol-size":`${e}px`,"--text-size":`${t}px`};return a.jsxs("div",{className:`compia-logo-container ${r}`,style:s,children:[a.jsx("div",{className:"compia-symbol",style:{width:e,height:e},children:a.jsx("img",{src:"/compia-logo.png",alt:"Compia Logo",style:{width:"100%",height:"100%",objectFit:"contain"}})}),a.jsx("div",{className:"compia-logotype",style:{fontSize:t,marginLeft:-19},children:"Compia"})]})}function iB({onMenuClick:e,pageTitle:t,children:r,actionButton:s}){const n=Ga(),i=()=>{if(t)return t;const l=n.pathname;return l.includes("/inspections/")?"Detalhes da Inspeo":l==="/inspections"?"Minhas Inspees":l==="/inspections/new"?"Nova Inspeo":l==="/"?"Dashboard":l==="/action-plans"?"Planos de Ao":l==="/activities"||l==="/atividades"?"Central de Atividades":l==="/checklists"?"Checklists":l==="/checklists/ai-generate"?"IA Generator":l==="/reports"?"Relatrios":l==="/settings"?"Configuraes":l==="/users"?"Usurios":l==="/organizations"?"Organizaes":l==="/permissions"?"Permisses":"Portal Compia"};return a.jsxs("header",{className:"bg-white border-b border-slate-200 h-16 px-4 flex items-center justify-between sticky top-0 z-30",children:[a.jsxs("div",{className:"flex items-center gap-3 md:hidden",children:[a.jsx("button",{onClick:e,className:"p-2 -ml-2 text-slate-600 hover:bg-slate-100 rounded-lg",children:a.jsx(tO,{size:24})}),a.jsx("div",{className:"h-8 flex items-center",children:a.jsx(oO,{size:40,textSize:20})})]}),a.jsx("div",{className:"hidden md:flex items-center gap-4",children:a.jsx("h1",{className:"text-xl font-semibold text-slate-800",children:i()})}),a.jsxs("div",{className:"flex items-center gap-3",children:[s&&a.jsx("div",{className:"mr-1",children:s}),r]})]})}function oB(){const[e,t]=_.useState([]),[r,s]=_.useState(!1),[n,i]=_.useState(!0);_.useEffect(()=>{l()},[]);const l=async()=>{try{const x=await Fe("/api/dashboard/stats"),b=await Fe("/api/dashboard/action-plan-summary");let y=null,v=null;x.ok&&(y=await x.json()),b.ok&&(v=await b.json());const w=[];try{const N=await Fe("/api/notifications?limit=20");if(N.ok){const S=await N.json();if(S.notifications){const j=S.notifications.map(k=>({id:k.id,type:k.type||"info",title:k.title,message:k.message,action:k.link?{label:"Ver",href:k.link}:void 0,timestamp:new Date(k.created_at),read:k.read||!1}));w.push(...j)}}}catch(N){console.error("Failed to fetch DB notifications",N)}if((v==null?void 0:v.overdue_actions)>0&&w.push({id:"overdue-actions",type:"urgent",title:"Aes em Atraso",message:`${v.overdue_actions} aes esto atrasadas e precisam de ateno imediata`,action:{label:"Ver Aes",href:"/action-plans"},timestamp:new Date,read:!1}),(v==null?void 0:v.upcoming_deadline)>0&&w.push({id:"upcoming-deadlines",type:"warning",title:"Prazos Prximos",message:`${v.upcoming_deadline} aes vencem nos prximos 7 dias`,action:{label:"Revisar Prazos",href:"/action-plans"},timestamp:new Date,read:!1}),(y==null?void 0:y.pending)>0&&w.push({id:"pending-inspections",type:"info",title:"Inspees Pendentes",message:`Voc tem ${y.pending} inspees aguardando execuo`,action:{label:"Ver Inspees",href:"/inspections"},timestamp:new Date,read:!1}),(y==null?void 0:y.completed)>0){const N=(y.completed/y.total*100).toFixed(0);parseInt(N)>=80&&w.push({id:"high-completion",type:"success",title:"Excelente Performance!",message:`${N}% das suas inspees foram concludas`,timestamp:new Date,read:!1})}t(w)}catch(x){console.error("Error generating notifications:",x)}finally{i(!1)}},d=async x=>{if(t(b=>b.map(y=>y.id===x?{...y,read:!0}:y)),x.length>20)try{await Fe(`/api/notifications/${x}/read`,{method:"POST"})}catch(b){console.error("Failed to mark read",b)}},u=x=>{t(b=>b.filter(y=>y.id!==x))},h=x=>{switch(x){case"success":return a.jsx(Ct,{className:"w-5 h-5 text-green-600"});case"warning":return a.jsx(wr,{className:"w-5 h-5 text-yellow-600"});case"urgent":return a.jsx(Nt,{className:"w-5 h-5 text-red-600"});default:return a.jsx(Vd,{className:"w-5 h-5 text-blue-600"})}},m=x=>{switch(x){case"success":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"urgent":return"bg-red-50 border-red-200";default:return"bg-blue-50 border-blue-200"}},p=e.filter(x=>!x.read).length;return n||e.length===0?null:a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!r),className:"relative p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:[a.jsx(Vd,{className:"w-5 h-5"}),p>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:p})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-slate-200 z-50 max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:"Notificaes"}),a.jsx("button",{onClick:()=>s(!1),className:"text-slate-400 hover:text-slate-600",children:a.jsx(ct,{className:"w-4 h-4"})})]}),p>0&&a.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:[p," no lida",p!==1?"s":""]})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.map(x=>a.jsx("div",{className:`p-4 border-b border-slate-100 ${m(x.type)} ${x.read?"":"border-l-4"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:h(x.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-slate-900 text-sm",children:x.title}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:x.message}),x.action&&a.jsxs("a",{href:x.action.href,onClick:()=>{d(x.id),s(!1)},className:"inline-flex items-center text-sm text-blue-600 hover:text-blue-700 mt-2",children:[x.action.label,a.jsx(Zs,{className:"w-3 h-3 ml-1"})]})]}),a.jsx("button",{onClick:()=>u(x.id),className:"text-slate-400 hover:text-slate-600 ml-2",children:a.jsx(ct,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:x.timestamp.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})]})},x.id))}),e.length===0&&a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(Vd,{className:"w-8 h-8 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhuma notificao"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Voc est em dia com suas atividades!"})]})]})]})]})}const lB=[{label:" Converter dados para CSV",prompt:"Quero converter uma lista de itens para o formato CSV de checklist"},{label:" Como criar inspeo?",prompt:"Como fao para criar uma nova inspeo no sistema?"},{label:" O que  anlise de conformidade?",prompt:"Explique o que  a anlise de conformidade e como funciona"},{label:" Como importar checklist?",prompt:"Como importo um checklist via CSV?"}];function cB(){const[e,t]=_.useState(!1),[r,s]=_.useState([]),[n,i]=_.useState(""),[l,d]=_.useState(!1),[u,h]=_.useState(null),m=_.useRef(null),p=_.useRef(null);_.useEffect(()=>{var w;(w=m.current)==null||w.scrollIntoView({behavior:"smooth"})},[r]),_.useEffect(()=>{e&&p.current&&p.current.focus()},[e]);const x=async w=>{if(!w.trim()||l)return;const N={id:Date.now().toString(),role:"user",content:w.trim(),timestamp:new Date};s(S=>[...S,N]),i(""),d(!0);try{const S=await Fe("/api/ai-assistant/chat",{method:"POST",body:JSON.stringify({message:w,history:r.slice(-10).map(A=>({role:A.role,content:A.content}))})});if(!S.ok)throw new Error("Erro ao comunicar com o assistente");const j=await S.json(),k={id:(Date.now()+1).toString(),role:"assistant",content:j.reply||"Desculpe, no consegui processar sua solicitao.",timestamp:new Date,suggestions:j.suggestions};s(A=>[...A,k])}catch(S){console.error("AI Assistant error:",S);const j={id:(Date.now()+1).toString(),role:"assistant",content:" Desculpe, ocorreu um erro. Por favor, tente novamente.",timestamp:new Date};s(k=>[...k,j])}finally{d(!1)}},b=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),x(n))},y=async(w,N)=>{try{const S=w.match(/```[\s\S]*?\n([\s\S]*?)```/),j=S?S[1].trim():w;await navigator.clipboard.writeText(j),h(N),setTimeout(()=>h(null),2e3)}catch(S){console.error("Failed to copy:",S)}},v=w=>w.split(/(```[\s\S]*?```)/g).map((S,j)=>{if(S.startsWith("```")){const k=S.replace(/```\w*\n?/g,"").replace(/```$/,"");return a.jsx("pre",{className:"bg-slate-800 text-green-400 p-3 rounded-lg my-2 overflow-x-auto text-sm font-mono whitespace-pre-wrap",children:k},j)}return a.jsx("span",{dangerouslySetInnerHTML:{__html:S.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br/>")}},j)});return a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>t(!0),className:`fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full shadow-lg transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-emerald-300 ${e?"scale-0 opacity-0":"scale-100 opacity-100"}`,style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)"},"aria-label":"Abrir assistente IA",children:[a.jsx("img",{src:"/compia-logo.png",alt:"COMPIA AI",className:"w-10 h-10 mx-auto filter brightness-0 invert"}),r.length===0&&a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-ping"})]}),a.jsxs("div",{className:`fixed bottom-6 right-6 z-50 w-96 max-w-[calc(100vw-3rem)] bg-white rounded-2xl shadow-2xl transition-all duration-300 origin-bottom-right ${e?"scale-100 opacity-100":"scale-0 opacity-0 pointer-events-none"}`,style:{maxHeight:"calc(100vh - 6rem)"},children:[a.jsxs("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white px-4 py-3 rounded-t-2xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:"/compia-logo.png",alt:"COMPIA",className:"w-6 h-6 filter brightness-0 invert"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-sm",children:"COMPIA AI"}),a.jsx("p",{className:"text-xs text-emerald-100",children:"Seu assistente inteligente"})]})]}),a.jsx("button",{onClick:()=>t(!1),className:"p-1 hover:bg-white/20 rounded-full transition-colors","aria-label":"Fechar",children:a.jsx(ct,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"h-80 overflow-y-auto p-4 space-y-3 bg-slate-50",children:[r.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx(Po,{className:"w-10 h-10 text-emerald-500 mx-auto mb-3"}),a.jsxs("p",{className:"text-slate-600 text-sm mb-4",children:["Ol! Sou o assistente do COMPIA.",a.jsx("br",{}),"Como posso ajudar?"]}),a.jsx("div",{className:"space-y-2",children:lB.map((w,N)=>a.jsx("button",{onClick:()=>x(w.prompt),className:"w-full text-left px-3 py-2 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 hover:bg-emerald-50 hover:border-emerald-300 transition-colors",children:w.label},N))})]}):r.map(w=>a.jsx("div",{className:`flex ${w.role==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-[85%] px-3 py-2 rounded-2xl text-sm ${w.role==="user"?"bg-emerald-500 text-white rounded-br-md":"bg-white border border-slate-200 text-slate-700 rounded-bl-md shadow-sm"}`,children:[a.jsx("div",{className:"break-words",children:v(w.content)}),w.role==="assistant"&&w.content.includes("```")&&a.jsx("button",{onClick:()=>y(w.content,w.id),className:"mt-2 flex items-center gap-1 text-xs text-emerald-600 hover:text-emerald-800 transition-colors",children:u===w.id?a.jsxs(a.Fragment,{children:[a.jsx(Ba,{className:"w-3 h-3"}),"Copiado!"]}):a.jsxs(a.Fragment,{children:[a.jsx(Ti,{className:"w-3 h-3"}),"Copiar CSV"]})}),w.suggestions&&w.suggestions.length>0&&a.jsx("div",{className:"mt-2 pt-2 border-t border-slate-100 space-y-1",children:w.suggestions.map((N,S)=>a.jsxs("button",{onClick:()=>x(N),className:"block w-full text-left text-xs text-emerald-600 hover:text-emerald-800 hover:underline",children:[" ",N]},S))})]})},w.id)),l&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-white border border-slate-200 px-4 py-2 rounded-2xl rounded-bl-md shadow-sm",children:a.jsx(It,{className:"w-5 h-5 text-emerald-500 animate-spin"})})}),a.jsx("div",{ref:m})]}),a.jsxs("div",{className:"p-3 border-t border-slate-200 bg-white rounded-b-2xl",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("textarea",{ref:p,value:n,onChange:w=>i(w.target.value),onKeyDown:b,placeholder:"Digite sua mensagem...",className:"flex-1 px-3 py-2 border border-slate-200 rounded-xl text-sm resize-none focus:outline-none focus:ring-2 focus:ring-emerald-300 focus:border-emerald-500",rows:1,disabled:l}),a.jsx("button",{onClick:()=>x(n),disabled:!n.trim()||l,className:"px-3 py-2 bg-emerald-500 text-white rounded-xl hover:bg-emerald-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:a.jsx(m9,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"text-xs text-slate-400 text-center mt-2",children:"Pressione Enter para enviar"})]})]})]})}function Je({children:e,actionButton:t}){var w,N,S,j,k;const{user:r,logout:s}=da(),n=r,i=n==null?void 0:n.profile,l=Ga(),d=na(),[u,h]=_.useState(!1),[m,p]=_.useState(!1),x=[{title:"Principal",items:[{name:"Dashboard",href:"/",icon:wL},{name:"Inspees",href:"/inspections",icon:ki},{name:"Planos de Ao",href:"/action-plans",icon:jr}]},{title:"Ferramentas",items:[{name:"Nova Inspeo",href:"/inspections/new",icon:jv},{name:"Checklists",href:"/checklists",icon:To},{name:"IA Generator",href:"/checklists/ai-generate",icon:Oi}]},{title:"Anlise",items:[{name:"Relatrios",href:"/reports",icon:tu},{name:"Atividades",href:"/activities",icon:qy}]}],b=[{name:"Usurios",href:"/users",icon:Dt},{name:"Organizaes",href:"/organizations",icon:lt}],y=async()=>{try{await s(),d("/login")}catch(A){console.error("Error signing out:",A)}},v=({item:A})=>{const O=l.pathname===A.href||A.href!=="/"&&l.pathname.startsWith(A.href);return a.jsxs(vt,{to:A.href,className:`
          flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-lg transition-colors group
          ${O?"bg-primary text-white shadow-md shadow-primary/20":"text-slate-500 hover:bg-gray-50 hover:text-primary"}
        `,onClick:()=>h(!1),children:[a.jsx(A.icon,{size:20,className:`transition-colors ${O?"text-white":"text-slate-400 group-hover:text-primary"}`}),A.name]})};return a.jsxs("div",{className:"h-screen w-full max-w-full bg-white flex overflow-hidden font-sans text-slate-800 antialiased",children:[a.jsxs("aside",{className:`
          fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 shadow-lg md:shadow-none flex flex-col transition-transform duration-300 ease-in-out
          ${u?"translate-x-0":"-translate-x-full"}
          lg:relative lg:translate-x-0
        `,children:[a.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-100 shrink-0",children:[a.jsx("div",{className:"flex items-center gap-3",children:a.jsx(oO,{size:60,textSize:24})}),a.jsx("button",{className:"lg:hidden ml-auto text-gray-500 hover:text-primary",onClick:()=>h(!1),children:a.jsx(ct,{size:24})})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:[x.map(A=>a.jsx("div",{className:"mb-2",children:a.jsx("div",{className:"space-y-1",children:A.items.map(O=>a.jsx(v,{item:O},O.name))})},A.title)),((i==null?void 0:i.role)==="system_admin"||(i==null?void 0:i.role)==="sys_admin"||(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="org_admin")&&a.jsxs("div",{className:"pt-2 pb-2",children:[a.jsx("p",{className:"px-3 text-xs font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Administrao"}),a.jsxs("div",{className:"space-y-1",children:[((i==null?void 0:i.role)==="system_admin"||(i==null?void 0:i.role)==="sys_admin")&&a.jsxs(a.Fragment,{children:[a.jsx(v,{item:{name:"Permisses",href:"/settings/permissions",icon:Gt}}),a.jsx(v,{item:{name:"Sinc. Dados",href:"/admin/data-sync",icon:Si}})]}),((i==null?void 0:i.role)==="system_admin"||(i==null?void 0:i.role)==="sys_admin"||(i==null?void 0:i.role)==="admin")&&b.map(A=>a.jsx(v,{item:A},A.name)),(i==null?void 0:i.role)==="org_admin"&&a.jsx(v,{item:{name:"Minha Organizao",href:"/organizations",icon:lt}})]})]}),a.jsx("div",{className:"pt-2",children:a.jsx(v,{item:{name:"Configuraes",href:"/settings",icon:Js}})})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-white",children:[a.jsxs(iB,{onMenuClick:()=>h(!0),actionButton:t,children:[a.jsx(oB,{}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>p(!m),className:"flex items-center gap-3 hover:bg-gray-50 p-2 pl-3 rounded-full transition-colors border border-transparent hover:border-gray-100 group",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-sm font-bold text-slate-600 border border-gray-200 overflow-hidden shadow-sm group-hover:shadow-md transition-all",children:(w=n==null?void 0:n.google_user_data)!=null&&w.picture?a.jsx("img",{src:n.google_user_data.picture,alt:"Profile",className:"w-full h-full object-cover"}):a.jsx("span",{children:((N=i==null?void 0:i.name)==null?void 0:N.charAt(0))||((S=r==null?void 0:r.email)==null?void 0:S.charAt(0).toUpperCase())||"U"})}),a.jsxs("div",{className:"text-left hidden md:block",children:[a.jsx("span",{className:"text-sm font-bold text-slate-800 block leading-tight",children:i!=null&&i.name?i.name.split(" ")[0]:((j=r==null?void 0:r.email)==null?void 0:j.split("@")[0])||"Minha Conta"}),a.jsx("span",{className:"text-xs font-medium text-slate-500 block leading-tight mt-0.5 capitalize",children:((k=i==null?void 0:i.role)==null?void 0:k.replace(/_/g," ").replace("sys","System"))||"Visitante"})]}),a.jsx(qo,{size:14,className:"text-gray-400 group-hover:text-primary transition-colors"})]}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),a.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl py-1 z-20 border border-gray-100 transform origin-top-right transition-all animate-in fade-in slide-in-from-top-2",children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-50 md:hidden",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800",children:(i==null?void 0:i.name)||"Usurio"}),a.jsx("p",{className:"text-xs text-slate-500",children:r==null?void 0:r.email})]}),a.jsxs(vt,{to:"/profile",className:"block px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-primary transition-colors flex items-center gap-2",children:[a.jsx(Dt,{size:16})," Meu Perfil"]}),a.jsxs(vt,{to:"/settings",className:"block px-4 py-2.5 text-sm text-slate-600 hover:bg-slate-50 hover:text-primary transition-colors flex items-center gap-2",children:[a.jsx(Js,{size:16})," Preferncias"]}),a.jsx("div",{className:"my-1 border-t border-gray-100"}),a.jsxs("button",{onClick:y,className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 transition-colors flex items-center gap-2",children:[a.jsx(DL,{size:16})," Sair"]})]})]})]})]}),a.jsx("main",{className:"flex-1 overflow-auto overflow-x-hidden p-6 lg:p-8 bg-white relative max-w-full",children:a.jsx("div",{className:"max-w-7xl mx-auto space-y-6 w-full overflow-x-hidden",children:e})})]}),a.jsx(cB,{})]})}function Eu({selectedOrgId:e,onOrganizationChange:t,showAllOption:r=!0,className:s=""}){var v,w;const{user:n}=da(),i=n,[l,d]=_.useState([]),[u,h]=_.useState(!1),[m,p]=_.useState(!0);_.useEffect(()=>{x()},[]);const x=async()=>{var N,S;try{const j=await Fe("/api/organizations");if(j.ok){let A=(await j.json()).organizations||[];((N=i==null?void 0:i.profile)==null?void 0:N.role)!=="admin"&&((S=i==null?void 0:i.profile)!=null&&S.organization_id)&&(A=A.filter(O=>{var T;return O.id===((T=i.profile)==null?void 0:T.organization_id)})),d(A)}}catch(j){console.error("Error fetching organizations:",j)}finally{p(!1)}},b=()=>{if(e==null)return r?"Todas as Organizaes":"Selecionar Organizao";const N=l.find(S=>S.id===e);return N?N.name:"Organizao no encontrada"},y=N=>{switch(N){case"company":return"Empresa";case"consultancy":return"Consultoria";case"client":return"Cliente";default:return N}};return _.useEffect(()=>{var N;l.length===1&&((N=i==null?void 0:i.profile)==null?void 0:N.role)!=="admin"&&e!==l[0].id&&t(l[0].id)},[l,(v=i==null?void 0:i.profile)==null?void 0:v.role,e,t]),m?a.jsx("div",{className:`animate-pulse ${s}`,children:a.jsx("div",{className:"h-10 bg-slate-200 rounded-lg"})}):l.length===0?a.jsx("div",{className:`text-sm text-slate-500 ${s}`,children:"Nenhuma organizao disponvel"}):a.jsxs("div",{className:`relative ${s}`,children:[a.jsxs("button",{onClick:()=>h(!u),className:"w-full flex items-center justify-between px-4 py-2 bg-white border border-slate-300 rounded-lg text-left hover:bg-slate-50 focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(lt,{className:"w-4 h-4 text-slate-400 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-slate-900 truncate",children:b()})]}),a.jsx(qo,{className:"w-4 h-4 text-slate-400 ml-2 flex-shrink-0"})]}),u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>h(!1)}),a.jsxs("div",{className:"absolute top-full mt-1 w-full bg-white border border-slate-200 rounded-lg shadow-lg z-20 max-h-60 overflow-y-auto",children:[r&&((w=i==null?void 0:i.profile)==null?void 0:w.role)==="admin"&&a.jsxs("button",{onClick:()=>{t(null),h(!1)},className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-slate-50 transition-colors border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(lt,{className:"w-4 h-4 text-slate-400 mr-3"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-slate-900",children:"Todas as Organizaes"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Ver dados de todas as organizaes"})]})]}),e==null&&a.jsx(Ba,{className:"w-4 h-4 text-blue-600"})]}),l.map(N=>a.jsxs("button",{onClick:()=>{t(N.id),h(!1)},className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${N.is_active?"bg-green-400":"bg-red-400"}`}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-slate-900",children:N.name}),a.jsx("p",{className:"text-xs text-slate-500",children:y(N.type)})]})]}),e===N.id&&a.jsx(Ba,{className:"w-4 h-4 text-blue-600"})]},N.id))]})]})]})}function lO(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=lO(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function ht(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=lO(e))&&(s&&(s+=" "),s+=t);return s}var lx={},cx={},MS;function dB(){return MS||(MS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(cx)),cx}var dx={},IS;function cO(){return IS||(IS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(dx)),dx}var ux={},zS;function dO(){return zS||(zS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;return typeof r=="string"||typeof r=="symbol"?r:Object.is((s=r==null?void 0:r.valueOf)==null?void 0:s.call(r),-0)?"-0":String(r)}e.toKey=t})(ux)),ux}var hx={},$S;function Xy(){return $S||($S=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const s=[],n=r.length;if(n===0)return s;let i=0,l="",d="",u=!1;for(r.charCodeAt(0)===46&&(s.push(""),i++);i<n;){const h=r[i];d?h==="\\"&&i+1<n?(i++,l+=r[i]):h===d?d="":l+=h:u?h==='"'||h==="'"?d=h:h==="]"?(u=!1,s.push(l),l=""):l+=h:h==="["?(u=!0,l&&(s.push(l),l="")):h==="."?l&&(s.push(l),l=""):l+=h,i++}return l&&s.push(l),s}e.toPath=t})(hx)),hx}var LS;function Jy(){return LS||(LS=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dB(),r=cO(),s=dO(),n=Xy();function i(d,u,h){if(d==null)return h;switch(typeof u){case"string":{if(t.isUnsafeProperty(u))return h;const m=d[u];return m===void 0?r.isDeepKey(u)?i(d,n.toPath(u),h):h:m}case"number":case"symbol":{typeof u=="number"&&(u=s.toKey(u));const m=d[u];return m===void 0?h:m}default:{if(Array.isArray(u))return l(d,u,h);if(Object.is(u==null?void 0:u.valueOf(),-0)?u="-0":u=String(u),t.isUnsafeProperty(u))return h;const m=d[u];return m===void 0?h:m}}}function l(d,u,h){if(u.length===0)return h;let m=d;for(let p=0;p<u.length;p++){if(m==null||t.isUnsafeProperty(u[p]))return h;m=m[u[p]]}return m===void 0?h:m}e.get=i})(lx)),lx}var fx,BS;function uB(){return BS||(BS=1,fx=Jy().get),fx}var hB=uB();const Ri=js(hB);var mx={exports:{}},jt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var US;function fB(){if(US)return jt;US=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),x=Symbol.for("react.view_transition"),b=Symbol.for("react.client.reference");function y(v){if(typeof v=="object"&&v!==null){var w=v.$$typeof;switch(w){case e:switch(v=v.type,v){case r:case n:case s:case u:case h:case x:return v;default:switch(v=v&&v.$$typeof,v){case l:case d:case p:case m:return v;case i:return v;default:return w}}case t:return w}}}return jt.ContextConsumer=i,jt.ContextProvider=l,jt.Element=e,jt.ForwardRef=d,jt.Fragment=r,jt.Lazy=p,jt.Memo=m,jt.Portal=t,jt.Profiler=n,jt.StrictMode=s,jt.Suspense=u,jt.SuspenseList=h,jt.isContextConsumer=function(v){return y(v)===i},jt.isContextProvider=function(v){return y(v)===l},jt.isElement=function(v){return typeof v=="object"&&v!==null&&v.$$typeof===e},jt.isForwardRef=function(v){return y(v)===d},jt.isFragment=function(v){return y(v)===r},jt.isLazy=function(v){return y(v)===p},jt.isMemo=function(v){return y(v)===m},jt.isPortal=function(v){return y(v)===t},jt.isProfiler=function(v){return y(v)===n},jt.isStrictMode=function(v){return y(v)===s},jt.isSuspense=function(v){return y(v)===u},jt.isSuspenseList=function(v){return y(v)===h},jt.isValidElementType=function(v){return typeof v=="string"||typeof v=="function"||v===r||v===n||v===s||v===u||v===h||typeof v=="object"&&v!==null&&(v.$$typeof===p||v.$$typeof===m||v.$$typeof===l||v.$$typeof===i||v.$$typeof===d||v.$$typeof===b||v.getModuleId!==void 0)},jt.typeOf=y,jt}var qS;function mB(){return qS||(qS=1,mx.exports=fB()),mx.exports}var pB=mB(),Ir=e=>e===0?0:e>0?1:-1,Sa=e=>typeof e=="number"&&e!=+e,So=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,De=e=>(typeof e=="number"||e instanceof Number)&&!Sa(e),Qs=e=>De(e)||typeof e=="string",gB=0,au=e=>{var t=++gB;return"".concat(e||"").concat(t)},ca=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(t)&&typeof t!="string")return s;var i;if(So(t)){if(r==null)return s;var l=t.indexOf("%");i=r*parseFloat(t.slice(0,l))/100}else i=+t;return Sa(i)&&(i=s),n&&r!=null&&i>r&&(i=r),i},uO=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},s=0;s<t;s++)if(!r[e[s]])r[e[s]]=!0;else return!0;return!1},FS=(e,t)=>De(e)&&De(t)?r=>e+r*(t-e):()=>t;function ms(e,t,r){return De(e)&&De(t)?e+r*(t-e):t}function hO(e,t,r){if(!(!e||!e.length))return e.find(s=>s&&(typeof t=="function"?t(s):Ri(s,t))===r)}var Bt=e=>e===null||typeof e>"u",ku=e=>Bt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),xB=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Zy(e){if(typeof e!="string")return!1;var t=xB;return t.includes(e)}var bB=["viewBox","children"],HS=["points","pathLength"],px={svg:bB,polygon:HS,polyline:HS},Qy=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(_.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var s={};return Object.keys(r).forEach(n=>{Zy(n)&&(s[n]=(i=>r[n](r,i)))}),s},vB=(e,t,r)=>s=>(e(t,r,s),null),Cu=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var s=null;return Object.keys(e).forEach(n=>{var i=e[n];Zy(n)&&typeof i=="function"&&(s||(s={}),s[n]=vB(i,t,r))}),s},yB=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function fO(e){if(typeof e!="string")return!1;var t=yB;return t.includes(e)}function tn(e){var t=Object.entries(e).filter(r=>{var[s]=r;return fO(s)});return Object.fromEntries(t)}var VS=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",GS=null,gx=null,mO=e=>{if(e===GS&&Array.isArray(gx))return gx;var t=[];return _.Children.forEach(e,r=>{Bt(r)||(pB.isFragment(r)?t=t.concat(mO(r.props.children)):t.push(r))}),gx=t,GS=e,t};function Au(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(n=>VS(n)):s=[VS(t)],mO(e).forEach(n=>{var i=Ri(n,"type.displayName")||Ri(n,"type.name");s.indexOf(i)!==-1&&r.push(n)}),r}var pO=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,wB=(e,t,r,s)=>{var n;if(typeof t=="symbol"||typeof t=="number")return!0;var i=(n=s&&(px==null?void 0:px[s]))!==null&&n!==void 0?n:[],l=t.startsWith("data-"),d=typeof e!="function"&&(!!s&&i.includes(t)||fO(t)),u=!!r&&Zy(t);return l||d||u},Vt=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var s=e;if(_.isValidElement(e)&&(s=e.props),typeof s!="object"&&typeof s!="function")return null;var n={};return Object.keys(s).forEach(i=>{var l;wB((l=s)===null||l===void 0?void 0:l[i],i,t,r)&&(n[i]=s[i])}),n},jB=["children","width","height","viewBox","className","style","title","desc"];function kv(){return kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},kv.apply(null,arguments)}function NB(e,t){if(e==null)return{};var r,s,n=_B(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _B(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var ew=_.forwardRef((e,t)=>{var{children:r,width:s,height:n,viewBox:i,className:l,style:d,title:u,desc:h}=e,m=NB(e,jB),p=i||{width:s,height:n,x:0,y:0},x=ht("recharts-surface",l);return _.createElement("svg",kv({},Vt(m,!0,"svg"),{className:x,width:s,height:n,style:d,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),_.createElement("title",null,u),_.createElement("desc",null,h),r)}),SB=["children","className"];function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Cv.apply(null,arguments)}function EB(e,t){if(e==null)return{};var r,s,n=kB(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kB(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var Nr=_.forwardRef((e,t)=>{var{children:r,className:s}=e,n=EB(e,SB),i=ht("recharts-layer",s);return _.createElement("g",Cv({className:i},Vt(n,!0),{ref:t}),r)}),gO=_.createContext(null),CB=()=>_.useContext(gO);function Rt(e){return function(){return e}}const xO=Math.cos,rm=Math.sin,$s=Math.sqrt,am=Math.PI,ap=2*am,Av=Math.PI,Ov=2*Av,vo=1e-6,AB=Ov-vo;function bO(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function OB(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return bO;const r=10**t;return function(s){this._+=s[0];for(let n=1,i=s.length;n<i;++n)this._+=Math.round(arguments[n]*r)/r+s[n]}}class TB{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?bO:OB(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,n){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+n}`}bezierCurveTo(t,r,s,n,i,l){this._append`C${+t},${+r},${+s},${+n},${this._x1=+i},${this._y1=+l}`}arcTo(t,r,s,n,i){if(t=+t,r=+r,s=+s,n=+n,i=+i,i<0)throw new Error(`negative radius: ${i}`);let l=this._x1,d=this._y1,u=s-t,h=n-r,m=l-t,p=d-r,x=m*m+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(x>vo)if(!(Math.abs(p*u-h*m)>vo)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let b=s-l,y=n-d,v=u*u+h*h,w=b*b+y*y,N=Math.sqrt(v),S=Math.sqrt(x),j=i*Math.tan((Av-Math.acos((v+x-w)/(2*N*S)))/2),k=j/S,A=j/N;Math.abs(k-1)>vo&&this._append`L${t+k*m},${r+k*p}`,this._append`A${i},${i},0,0,${+(p*b>m*y)},${this._x1=t+A*u},${this._y1=r+A*h}`}}arc(t,r,s,n,i,l){if(t=+t,r=+r,s=+s,l=!!l,s<0)throw new Error(`negative radius: ${s}`);let d=s*Math.cos(n),u=s*Math.sin(n),h=t+d,m=r+u,p=1^l,x=l?n-i:i-n;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>vo||Math.abs(this._y1-m)>vo)&&this._append`L${h},${m}`,s&&(x<0&&(x=x%Ov+Ov),x>AB?this._append`A${s},${s},0,1,${p},${t-d},${r-u}A${s},${s},0,1,${p},${this._x1=h},${this._y1=m}`:x>vo&&this._append`A${s},${s},0,${+(x>=Av)},${p},${this._x1=t+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(t,r,s,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+n}h${-s}Z`}toString(){return this._}}function tw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new TB(t)}function rw(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vO(e){this._context=e}vO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function sp(e){return new vO(e)}function yO(e){return e[0]}function wO(e){return e[1]}function jO(e,t){var r=Rt(!0),s=null,n=sp,i=null,l=tw(d);e=typeof e=="function"?e:e===void 0?yO:Rt(e),t=typeof t=="function"?t:t===void 0?wO:Rt(t);function d(u){var h,m=(u=rw(u)).length,p,x=!1,b;for(s==null&&(i=n(b=l())),h=0;h<=m;++h)!(h<m&&r(p=u[h],h,u))===x&&((x=!x)?i.lineStart():i.lineEnd()),x&&i.point(+e(p,h,u),+t(p,h,u));if(b)return i=null,b+""||null}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:Rt(+u),d):e},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:Rt(+u),d):t},d.defined=function(u){return arguments.length?(r=typeof u=="function"?u:Rt(!!u),d):r},d.curve=function(u){return arguments.length?(n=u,s!=null&&(i=n(s)),d):n},d.context=function(u){return arguments.length?(u==null?s=i=null:i=n(s=u),d):s},d}function mf(e,t,r){var s=null,n=Rt(!0),i=null,l=sp,d=null,u=tw(h);e=typeof e=="function"?e:e===void 0?yO:Rt(+e),t=typeof t=="function"?t:Rt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?wO:Rt(+r);function h(p){var x,b,y,v=(p=rw(p)).length,w,N=!1,S,j=new Array(v),k=new Array(v);for(i==null&&(d=l(S=u())),x=0;x<=v;++x){if(!(x<v&&n(w=p[x],x,p))===N)if(N=!N)b=x,d.areaStart(),d.lineStart();else{for(d.lineEnd(),d.lineStart(),y=x-1;y>=b;--y)d.point(j[y],k[y]);d.lineEnd(),d.areaEnd()}N&&(j[x]=+e(w,x,p),k[x]=+t(w,x,p),d.point(s?+s(w,x,p):j[x],r?+r(w,x,p):k[x]))}if(S)return d=null,S+""||null}function m(){return jO().defined(n).curve(l).context(i)}return h.x=function(p){return arguments.length?(e=typeof p=="function"?p:Rt(+p),s=null,h):e},h.x0=function(p){return arguments.length?(e=typeof p=="function"?p:Rt(+p),h):e},h.x1=function(p){return arguments.length?(s=p==null?null:typeof p=="function"?p:Rt(+p),h):s},h.y=function(p){return arguments.length?(t=typeof p=="function"?p:Rt(+p),r=null,h):t},h.y0=function(p){return arguments.length?(t=typeof p=="function"?p:Rt(+p),h):t},h.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Rt(+p),h):r},h.lineX0=h.lineY0=function(){return m().x(e).y(t)},h.lineY1=function(){return m().x(e).y(r)},h.lineX1=function(){return m().x(s).y(t)},h.defined=function(p){return arguments.length?(n=typeof p=="function"?p:Rt(!!p),h):n},h.curve=function(p){return arguments.length?(l=p,i!=null&&(d=l(i)),h):l},h.context=function(p){return arguments.length?(p==null?i=d=null:d=l(i=p),h):i},h}class NO{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function PB(e){return new NO(e,!0)}function RB(e){return new NO(e,!1)}const aw={draw(e,t){const r=$s(t/am);e.moveTo(r,0),e.arc(0,0,r,0,ap)}},DB={draw(e,t){const r=$s(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},_O=$s(1/3),MB=_O*2,IB={draw(e,t){const r=$s(t/MB),s=r*_O;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},zB={draw(e,t){const r=$s(t),s=-r/2;e.rect(s,s,r,r)}},$B=.8908130915292852,SO=rm(am/10)/rm(7*am/10),LB=rm(ap/10)*SO,BB=-xO(ap/10)*SO,UB={draw(e,t){const r=$s(t*$B),s=LB*r,n=BB*r;e.moveTo(0,-r),e.lineTo(s,n);for(let i=1;i<5;++i){const l=ap*i/5,d=xO(l),u=rm(l);e.lineTo(u*r,-d*r),e.lineTo(d*s-u*n,u*s+d*n)}e.closePath()}},xx=$s(3),qB={draw(e,t){const r=-$s(t/(xx*3));e.moveTo(0,r*2),e.lineTo(-xx*r,-r),e.lineTo(xx*r,-r),e.closePath()}},cs=-.5,ds=$s(3)/2,Tv=1/$s(12),FB=(Tv/2+1)*3,HB={draw(e,t){const r=$s(t/FB),s=r/2,n=r*Tv,i=s,l=r*Tv+r,d=-i,u=l;e.moveTo(s,n),e.lineTo(i,l),e.lineTo(d,u),e.lineTo(cs*s-ds*n,ds*s+cs*n),e.lineTo(cs*i-ds*l,ds*i+cs*l),e.lineTo(cs*d-ds*u,ds*d+cs*u),e.lineTo(cs*s+ds*n,cs*n-ds*s),e.lineTo(cs*i+ds*l,cs*l-ds*i),e.lineTo(cs*d+ds*u,cs*u-ds*d),e.closePath()}};function VB(e,t){let r=null,s=tw(n);e=typeof e=="function"?e:Rt(e||aw),t=typeof t=="function"?t:Rt(t===void 0?64:+t);function n(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:Rt(i),n):e},n.size=function(i){return arguments.length?(t=typeof i=="function"?i:Rt(+i),n):t},n.context=function(i){return arguments.length?(r=i??null,n):r},n}function sm(){}function nm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function EO(e){this._context=e}EO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GB(e){return new EO(e)}function kO(e){this._context=e}kO.prototype={areaStart:sm,areaEnd:sm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KB(e){return new kO(e)}function CO(e){this._context=e}CO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:nm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WB(e){return new CO(e)}function AO(e){this._context=e}AO.prototype={areaStart:sm,areaEnd:sm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function YB(e){return new AO(e)}function KS(e){return e<0?-1:1}function WS(e,t,r){var s=e._x1-e._x0,n=t-e._x1,i=(e._y1-e._y0)/(s||n<0&&-0),l=(r-e._y1)/(n||s<0&&-0),d=(i*n+l*s)/(s+n);return(KS(i)+KS(l))*Math.min(Math.abs(i),Math.abs(l),.5*Math.abs(d))||0}function YS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function bx(e,t,r){var s=e._x0,n=e._y0,i=e._x1,l=e._y1,d=(i-s)/3;e._context.bezierCurveTo(s+d,n+d*t,i-d,l-d*r,i,l)}function im(e){this._context=e}im.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bx(this,this._t0,YS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bx(this,YS(this,r=WS(this,e,t)),r);break;default:bx(this,this._t0,r=WS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function OO(e){this._context=new TO(e)}(OO.prototype=Object.create(im.prototype)).point=function(e,t){im.prototype.point.call(this,t,e)};function TO(e){this._context=e}TO.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,n,i){this._context.bezierCurveTo(t,e,s,r,i,n)}};function XB(e){return new im(e)}function JB(e){return new OO(e)}function PO(e){this._context=e}PO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=XS(e),n=XS(t),i=0,l=1;l<r;++i,++l)this._context.bezierCurveTo(s[0][i],n[0][i],s[1][i],n[1][i],e[l],t[l]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function XS(e){var t,r=e.length-1,s,n=new Array(r),i=new Array(r),l=new Array(r);for(n[0]=0,i[0]=2,l[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,i[t]=4,l[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,i[r-1]=7,l[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=n[t]/i[t-1],i[t]-=s,l[t]-=s*l[t-1];for(n[r-1]=l[r-1]/i[r-1],t=r-2;t>=0;--t)n[t]=(l[t]-n[t+1])/i[t];for(i[r-1]=(e[r]+n[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-n[t+1];return[n,i]}function ZB(e){return new PO(e)}function np(e,t){this._context=e,this._t=t}np.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function QB(e){return new np(e,.5)}function eU(e){return new np(e,0)}function tU(e){return new np(e,1)}function tc(e,t){if((l=e.length)>1)for(var r=1,s,n,i=e[t[0]],l,d=i.length;r<l;++r)for(n=i,i=e[t[r]],s=0;s<d;++s)i[s][1]+=i[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}function Pv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function rU(e,t){return e[t]}function aU(e){const t=[];return t.key=e,t}function sU(){var e=Rt([]),t=Pv,r=tc,s=rU;function n(i){var l=Array.from(e.apply(this,arguments),aU),d,u=l.length,h=-1,m;for(const p of i)for(d=0,++h;d<u;++d)(l[d][h]=[0,+s(p,l[d].key,h,i)]).data=p;for(d=0,m=rw(t(l));d<u;++d)l[m[d]].index=d;return r(l,m),l}return n.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Rt(Array.from(i)),n):e},n.value=function(i){return arguments.length?(s=typeof i=="function"?i:Rt(+i),n):s},n.order=function(i){return arguments.length?(t=i==null?Pv:typeof i=="function"?i:Rt(Array.from(i)),n):t},n.offset=function(i){return arguments.length?(r=i??tc,n):r},n}function nU(e,t){if((s=e.length)>0){for(var r,s,n=0,i=e[0].length,l;n<i;++n){for(l=r=0;r<s;++r)l+=e[r][n][1]||0;if(l)for(r=0;r<s;++r)e[r][n][1]/=l}tc(e,t)}}function iU(e,t){if((n=e.length)>0){for(var r=0,s=e[t[0]],n,i=s.length;r<i;++r){for(var l=0,d=0;l<n;++l)d+=e[l][r][1]||0;s[r][1]+=s[r][0]=-d/2}tc(e,t)}}function oU(e,t){if(!(!((l=e.length)>0)||!((i=(n=e[t[0]]).length)>0))){for(var r=0,s=1,n,i,l;s<i;++s){for(var d=0,u=0,h=0;d<l;++d){for(var m=e[t[d]],p=m[s][1]||0,x=m[s-1][1]||0,b=(p-x)/2,y=0;y<d;++y){var v=e[t[y]],w=v[s][1]||0,N=v[s-1][1]||0;b+=w-N}u+=p,h+=b*p}n[s-1][1]+=n[s-1][0]=r,u&&(r-=h/u)}n[s-1][1]+=n[s-1][0]=r,tc(e,t)}}var lU=["type","size","sizeType"];function Rv(){return Rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Rv.apply(null,arguments)}function JS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function ZS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JS(Object(r),!0).forEach(function(s){cU(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JS(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function cU(e,t,r){return(t=dU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dU(e){var t=uU(e,"string");return typeof t=="symbol"?t:t+""}function uU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hU(e,t){if(e==null)return{};var r,s,n=fU(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fU(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var RO={symbolCircle:aw,symbolCross:DB,symbolDiamond:IB,symbolSquare:zB,symbolStar:UB,symbolTriangle:qB,symbolWye:HB},mU=Math.PI/180,pU=e=>{var t="symbol".concat(ku(e));return RO[t]||aw},gU=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var s=18*mU;return 1.25*e*e*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},xU=(e,t)=>{RO["symbol".concat(ku(e))]=t},sw=e=>{var{type:t="circle",size:r=64,sizeType:s="area"}=e,n=hU(e,lU),i=ZS(ZS({},n),{},{type:t,size:r,sizeType:s}),l=()=>{var p=pU(t),x=VB().type(p).size(gU(r,s,t));return x()},{className:d,cx:u,cy:h}=i,m=Vt(i,!0);return u===+u&&h===+h&&r===+r?_.createElement("path",Rv({},m,{className:ht("recharts-symbols",d),transform:"translate(".concat(u,", ").concat(h,")"),d:l()})):null};sw.registerSymbol=xU;function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Dv.apply(null,arguments)}function QS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function bU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QS(Object(r),!0).forEach(function(s){nw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QS(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nw(e,t,r){return(t=vU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vU(e){var t=yU(e,"string");return typeof t=="symbol"?t:t+""}function yU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var us=32;class iw extends _.PureComponent{renderIcon(t,r){var{inactiveColor:s}=this.props,n=us/2,i=us/6,l=us/3,d=t.inactive?s:t.color,u=r??t.type;if(u==="none")return null;if(u==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:n,x2:us,y2:n,className:"recharts-legend-icon"});if(u==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(n,"h").concat(l,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*l,",").concat(n,`
            H`).concat(us,"M").concat(2*l,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(l,",").concat(n),className:"recharts-legend-icon"});if(u==="rect")return _.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(us/8,"h").concat(us,"v").concat(us*3/4,"h").concat(-us,"z"),className:"recharts-legend-icon"});if(_.isValidElement(t.legendIcon)){var h=bU({},t);return delete h.legendIcon,_.cloneElement(t.legendIcon,h)}return _.createElement(sw,{fill:d,cx:n,cy:n,size:us,sizeType:"diameter",type:u})}renderItems(){var{payload:t,iconSize:r,layout:s,formatter:n,inactiveColor:i,iconType:l}=this.props,d={x:0,y:0,width:us,height:us},u={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((m,p)=>{var x=m.formatter||n,b=ht({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:m.inactive});if(m.type==="none")return null;var y=m.inactive?i:m.color,v=x?x(m.value,m,p):m.value;return _.createElement("li",Dv({className:b,style:u,key:"legend-item-".concat(p)},Cu(this.props,m,p)),_.createElement(ew,{width:r,height:r,viewBox:d,style:h,"aria-label":"".concat(v," legend icon")},this.renderIcon(m,l)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},v))})}render(){var{payload:t,layout:r,align:s}=this.props;if(!t||!t.length)return null;var n={padding:0,margin:0,textAlign:r==="horizontal"?s:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:n},this.renderItems())}}nw(iw,"displayName","Legend");nw(iw,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var vx={},yx={},eE;function wU(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,s){const n=new Map;for(let i=0;i<r.length;i++){const l=r[i],d=s(l);n.has(d)||n.set(d,l)}return Array.from(n.values())}e.uniqBy=t})(yx)),yx}var wx={},tE;function DO(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(wx)),wx}var jx={},Nx={},_x={},rE;function jU(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(_x)),_x}var aE;function ow(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jU();function r(s){return s!=null&&typeof s!="function"&&t.isLength(s.length)}e.isArrayLike=r})(Nx)),Nx}var Sx={},sE;function NU(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Sx)),Sx}var nE;function _U(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ow(),r=NU();function s(n){return r.isObjectLike(n)&&t.isArrayLike(n)}e.isArrayLikeObject=s})(jx)),jx}var Ex={},kx={},iE;function SU(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jy();function r(s){return function(n){return t.get(n,s)}}e.property=r})(kx)),kx}var Cx={},Ax={},Ox={},Tx={},oE;function MO(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Tx)),Tx}var Px={},lE;function IO(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Px)),Px}var Rx={},cE;function lw(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,s){return r===s||Number.isNaN(r)&&Number.isNaN(s)}e.eq=t})(Rx)),Rx}var dE;function EU(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cw(),r=MO(),s=IO(),n=lw();function i(p,x,b){return typeof b!="function"?t.isMatch(p,x):l(p,x,function y(v,w,N,S,j,k){const A=b(v,w,N,S,j,k);return A!==void 0?!!A:l(v,w,y,k)},new Map)}function l(p,x,b,y){if(x===p)return!0;switch(typeof x){case"object":return d(p,x,b,y);case"function":return Object.keys(x).length>0?l(p,{...x},b,y):n.eq(p,x);default:return r.isObject(p)?typeof x=="string"?x==="":!0:n.eq(p,x)}}function d(p,x,b,y){if(x==null)return!0;if(Array.isArray(x))return h(p,x,b,y);if(x instanceof Map)return u(p,x,b,y);if(x instanceof Set)return m(p,x,b,y);const v=Object.keys(x);if(p==null)return v.length===0;if(v.length===0)return!0;if(y&&y.has(x))return y.get(x)===p;y&&y.set(x,p);try{for(let w=0;w<v.length;w++){const N=v[w];if(!s.isPrimitive(p)&&!(N in p)||x[N]===void 0&&p[N]!==void 0||x[N]===null&&p[N]!==null||!b(p[N],x[N],N,p,x,y))return!1}return!0}finally{y&&y.delete(x)}}function u(p,x,b,y){if(x.size===0)return!0;if(!(p instanceof Map))return!1;for(const[v,w]of x.entries()){const N=p.get(v);if(b(N,w,v,p,x,y)===!1)return!1}return!0}function h(p,x,b,y){if(x.length===0)return!0;if(!Array.isArray(p))return!1;const v=new Set;for(let w=0;w<x.length;w++){const N=x[w];let S=!1;for(let j=0;j<p.length;j++){if(v.has(j))continue;const k=p[j];let A=!1;if(b(k,N,w,p,x,y)&&(A=!0),A){v.add(j),S=!0;break}}if(!S)return!1}return!0}function m(p,x,b,y){return x.size===0?!0:p instanceof Set?h([...p],[...x],b,y):!1}e.isMatchWith=i,e.isSetMatch=m})(Ox)),Ox}var uE;function cw(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=EU();function r(s,n){return t.isMatchWith(s,n,()=>{})}e.isMatch=r})(Ax)),Ax}var Dx={},Mx={},Ix={},hE;function zO(){return hE||(hE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(s=>Object.prototype.propertyIsEnumerable.call(r,s))}e.getSymbols=t})(Ix)),Ix}var zx={},fE;function dw(){return fE||(fE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(zx)),zx}var $x={},mE;function uw(){return mE||(mE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",s="[object Number]",n="[object Boolean]",i="[object Arguments]",l="[object Symbol]",d="[object Date]",u="[object Map]",h="[object Set]",m="[object Array]",p="[object Function]",x="[object ArrayBuffer]",b="[object Object]",y="[object Error]",v="[object DataView]",w="[object Uint8Array]",N="[object Uint8ClampedArray]",S="[object Uint16Array]",j="[object Uint32Array]",k="[object BigUint64Array]",A="[object Int8Array]",O="[object Int16Array]",T="[object Int32Array]",D="[object BigInt64Array]",R="[object Float32Array]",I="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=x,e.arrayTag=m,e.bigInt64ArrayTag=D,e.bigUint64ArrayTag=k,e.booleanTag=n,e.dataViewTag=v,e.dateTag=d,e.errorTag=y,e.float32ArrayTag=R,e.float64ArrayTag=I,e.functionTag=p,e.int16ArrayTag=O,e.int32ArrayTag=T,e.int8ArrayTag=A,e.mapTag=u,e.numberTag=s,e.objectTag=b,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=l,e.uint16ArrayTag=S,e.uint32ArrayTag=j,e.uint8ArrayTag=w,e.uint8ClampedArrayTag=N})($x)),$x}var Lx={},pE;function kU(){return pE||(pE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Lx)),Lx}var gE;function $O(){return gE||(gE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zO(),r=dw(),s=uw(),n=IO(),i=kU();function l(m,p){return d(m,void 0,m,new Map,p)}function d(m,p,x,b=new Map,y=void 0){const v=y==null?void 0:y(m,p,x,b);if(v!==void 0)return v;if(n.isPrimitive(m))return m;if(b.has(m))return b.get(m);if(Array.isArray(m)){const w=new Array(m.length);b.set(m,w);for(let N=0;N<m.length;N++)w[N]=d(m[N],N,x,b,y);return Object.hasOwn(m,"index")&&(w.index=m.index),Object.hasOwn(m,"input")&&(w.input=m.input),w}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const w=new RegExp(m.source,m.flags);return w.lastIndex=m.lastIndex,w}if(m instanceof Map){const w=new Map;b.set(m,w);for(const[N,S]of m)w.set(N,d(S,N,x,b,y));return w}if(m instanceof Set){const w=new Set;b.set(m,w);for(const N of m)w.add(d(N,void 0,x,b,y));return w}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(i.isTypedArray(m)){const w=new(Object.getPrototypeOf(m)).constructor(m.length);b.set(m,w);for(let N=0;N<m.length;N++)w[N]=d(m[N],N,x,b,y);return w}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const w=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return b.set(m,w),u(w,m,x,b,y),w}if(typeof File<"u"&&m instanceof File){const w=new File([m],m.name,{type:m.type});return b.set(m,w),u(w,m,x,b,y),w}if(m instanceof Blob){const w=new Blob([m],{type:m.type});return b.set(m,w),u(w,m,x,b,y),w}if(m instanceof Error){const w=new m.constructor;return b.set(m,w),w.message=m.message,w.name=m.name,w.stack=m.stack,w.cause=m.cause,u(w,m,x,b,y),w}if(typeof m=="object"&&h(m)){const w=Object.create(Object.getPrototypeOf(m));return b.set(m,w),u(w,m,x,b,y),w}return m}function u(m,p,x=m,b,y){const v=[...Object.keys(p),...t.getSymbols(p)];for(let w=0;w<v.length;w++){const N=v[w],S=Object.getOwnPropertyDescriptor(m,N);(S==null||S.writable)&&(m[N]=d(p[N],N,x,b,y))}}function h(m){switch(r.getTag(m)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=l,e.cloneDeepWithImpl=d,e.copyProperties=u})(Mx)),Mx}var xE;function CU(){return xE||(xE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$O();function r(s){return t.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}e.cloneDeep=r})(Dx)),Dx}var bE;function AU(){return bE||(bE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cw(),r=CU();function s(n){return n=r.cloneDeep(n),i=>t.isMatch(i,n)}e.matches=s})(Cx)),Cx}var Bx={},Ux={},qx={},vE;function OU(){return vE||(vE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$O(),r=uw();function s(n,i){return t.cloneDeepWith(n,(l,d,u,h)=>{const m=i==null?void 0:i(l,d,u,h);if(m!==void 0)return m;if(typeof n=="object")switch(Object.prototype.toString.call(n)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new n.constructor(n==null?void 0:n.valueOf());return t.copyProperties(p,n),p}case r.argumentsTag:{const p={};return t.copyProperties(p,n),p.length=n.length,p[Symbol.iterator]=n[Symbol.iterator],p}default:return}})}e.cloneDeepWith=s})(qx)),qx}var yE;function TU(){return yE||(yE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OU();function r(s){return t.cloneDeepWith(s)}e.cloneDeep=r})(Ux)),Ux}var Fx={},Hx={},wE;function LO(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(s,n=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<n;case"symbol":return!1;case"string":return t.test(s)}}e.isIndex=r})(Hx)),Hx}var Vx={},jE;function PU(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dw();function r(s){return s!==null&&typeof s=="object"&&t.getTag(s)==="[object Arguments]"}e.isArguments=r})(Vx)),Vx}var NE;function RU(){return NE||(NE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cO(),r=LO(),s=PU(),n=Xy();function i(l,d){let u;if(Array.isArray(d)?u=d:typeof d=="string"&&t.isDeepKey(d)&&(l==null?void 0:l[d])==null?u=n.toPath(d):u=[d],u.length===0)return!1;let h=l;for(let m=0;m<u.length;m++){const p=u[m];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||s.isArguments(h))&&r.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}e.has=i})(Fx)),Fx}var _E;function DU(){return _E||(_E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cw(),r=dO(),s=TU(),n=Jy(),i=RU();function l(d,u){switch(typeof d){case"object":{Object.is(d==null?void 0:d.valueOf(),-0)&&(d="-0");break}case"number":{d=r.toKey(d);break}}return u=s.cloneDeep(u),function(h){const m=n.get(h,d);return m===void 0?i.has(h,d):u===void 0?m===void 0:t.isMatch(m,u)}}e.matchesProperty=l})(Bx)),Bx}var SE;function MU(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DO(),r=SU(),s=AU(),n=DU();function i(l){if(l==null)return t.identity;switch(typeof l){case"function":return l;case"object":return Array.isArray(l)&&l.length===2?n.matchesProperty(l[0],l[1]):s.matches(l);case"string":case"symbol":case"number":return r.property(l)}}e.iteratee=i})(Ex)),Ex}var EE;function IU(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wU(),r=DO(),s=_U(),n=MU();function i(l,d=r.identity){return s.isArrayLikeObject(l)?t.uniqBy(Array.from(l),n.iteratee(d)):[]}e.uniqBy=i})(vx)),vx}var Gx,kE;function zU(){return kE||(kE=1,Gx=IU().uniqBy),Gx}var $U=zU();const CE=js($U);function BO(e,t,r){return t===!0?CE(e,r):typeof t=="function"?CE(e,t):e}var Kx={exports:{}},Wx={},Yx={exports:{}},Xx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AE;function LU(){if(AE)return Xx;AE=1;var e=uc();function t(p,x){return p===x&&(p!==0||1/p===1/x)||p!==p&&x!==x}var r=typeof Object.is=="function"?Object.is:t,s=e.useState,n=e.useEffect,i=e.useLayoutEffect,l=e.useDebugValue;function d(p,x){var b=x(),y=s({inst:{value:b,getSnapshot:x}}),v=y[0].inst,w=y[1];return i(function(){v.value=b,v.getSnapshot=x,u(v)&&w({inst:v})},[p,b,x]),n(function(){return u(v)&&w({inst:v}),p(function(){u(v)&&w({inst:v})})},[p]),l(b),b}function u(p){var x=p.getSnapshot;p=p.value;try{var b=x();return!r(p,b)}catch{return!0}}function h(p,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:d;return Xx.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:m,Xx}var OE;function BU(){return OE||(OE=1,Yx.exports=LU()),Yx.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TE;function UU(){if(TE)return Wx;TE=1;var e=uc(),t=BU();function r(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var s=typeof Object.is=="function"?Object.is:r,n=t.useSyncExternalStore,i=e.useRef,l=e.useEffect,d=e.useMemo,u=e.useDebugValue;return Wx.useSyncExternalStoreWithSelector=function(h,m,p,x,b){var y=i(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=d(function(){function N(O){if(!S){if(S=!0,j=O,O=x(O),b!==void 0&&v.hasValue){var T=v.value;if(b(T,O))return k=T}return k=O}if(T=k,s(j,O))return T;var D=x(O);return b!==void 0&&b(T,D)?(j=O,T):(j=O,k=D)}var S=!1,j,k,A=p===void 0?null:p;return[function(){return N(m())},A===null?void 0:function(){return N(A())}]},[m,p,x,b]);var w=n(h,y[0],y[1]);return l(function(){v.hasValue=!0,v.value=w},[w]),u(w),w},Wx}var PE;function qU(){return PE||(PE=1,Kx.exports=UU()),Kx.exports}var FU=qU(),hw=_.createContext(null),HU=e=>e,Kt=()=>{var e=_.useContext(hw);return e?e.store.dispatch:HU},qf=()=>{},VU=()=>qf,GU=(e,t)=>e===t;function Ue(e){var t=_.useContext(hw);return FU.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:VU,t?t.store.getState:qf,t?t.store.getState:qf,t?e:qf,GU)}function KU(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function WU(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function YU(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${t}[${r}]`)}}var RE=e=>Array.isArray(e)?e:[e];function XU(e){const t=Array.isArray(e[0])?e[0]:e;return YU(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function JU(e,t){const r=[],{length:s}=e;for(let n=0;n<s;n++)r.push(e[n].apply(null,t));return r}var ZU=class{constructor(e){this.value=e}deref(){return this.value}},QU=typeof WeakRef<"u"?WeakRef:ZU,eq=0,DE=1;function pf(){return{s:eq,v:void 0,o:null,p:null}}function UO(e,t={}){let r=pf();const{resultEqualityCheck:s}=t;let n,i=0;function l(){var p;let d=r;const{length:u}=arguments;for(let x=0,b=u;x<b;x++){const y=arguments[x];if(typeof y=="function"||typeof y=="object"&&y!==null){let v=d.o;v===null&&(d.o=v=new WeakMap);const w=v.get(y);w===void 0?(d=pf(),v.set(y,d)):d=w}else{let v=d.p;v===null&&(d.p=v=new Map);const w=v.get(y);w===void 0?(d=pf(),v.set(y,d)):d=w}}const h=d;let m;if(d.s===DE)m=d.v;else if(m=e.apply(null,arguments),i++,s){const x=((p=n==null?void 0:n.deref)==null?void 0:p.call(n))??n;x!=null&&s(x,m)&&(m=x,i!==0&&i--),n=typeof m=="object"&&m!==null||typeof m=="function"?new QU(m):m}return h.s=DE,h.v=m,m}return l.clearCache=()=>{r=pf(),l.resetResultsCount()},l.resultsCount=()=>i,l.resetResultsCount=()=>{i=0},l}function tq(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,s=(...n)=>{let i=0,l=0,d,u={},h=n.pop();typeof h=="object"&&(u=h,h=n.pop()),KU(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...r,...u},{memoize:p,memoizeOptions:x=[],argsMemoize:b=UO,argsMemoizeOptions:y=[]}=m,v=RE(x),w=RE(y),N=XU(n),S=p(function(){return i++,h.apply(null,arguments)},...v),j=b(function(){l++;const A=JU(N,arguments);return d=S.apply(null,A),d},...w);return Object.assign(j,{resultFunc:h,memoizedResultFunc:S,dependencies:N,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>d,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:p,argsMemoize:b})};return Object.assign(s,{withTypes:()=>s}),s}var ye=tq(UO),rq=Object.assign((e,t=ye)=>{WU(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),s=r.map(i=>e[i]);return t(s,(...i)=>i.reduce((l,d,u)=>(l[r[u]]=d,l),{}))},{withTypes:()=>rq}),Jx={},Zx={},Qx={},ME;function aq(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const r=(s,n,i)=>{if(s!==n){const l=t(s),d=t(n);if(l===d&&l===0){if(s<n)return i==="desc"?1:-1;if(s>n)return i==="desc"?-1:1}return i==="desc"?d-l:l-d}return 0};e.compareValues=r})(Qx)),Qx}var eb={},tb={},IE;function qO(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(tb)),tb}var zE;function sq(){return zE||(zE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qO(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function n(i,l){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(s.test(i)||!r.test(i))||l!=null&&Object.hasOwn(l,i)}e.isKey=n})(eb)),eb}var $E;function nq(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=aq(),r=sq(),s=Xy();function n(i,l,d,u){if(i==null)return[];d=u?void 0:d,Array.isArray(i)||(i=Object.values(i)),Array.isArray(l)||(l=l==null?[null]:[l]),l.length===0&&(l=[null]),Array.isArray(d)||(d=d==null?[]:[d]),d=d.map(b=>String(b));const h=(b,y)=>{let v=b;for(let w=0;w<y.length&&v!=null;++w)v=v[y[w]];return v},m=(b,y)=>y==null||b==null?y:typeof b=="object"&&"key"in b?Object.hasOwn(y,b.key)?y[b.key]:h(y,b.path):typeof b=="function"?b(y):Array.isArray(b)?h(y,b):typeof y=="object"?y[b]:y,p=l.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||r.isKey(b)?b:{key:b,path:s.toPath(b)}));return i.map(b=>({original:b,criteria:p.map(y=>m(y,b))})).slice().sort((b,y)=>{for(let v=0;v<p.length;v++){const w=t.compareValues(b.criteria[v],y.criteria[v],d[v]);if(w!==0)return w}return 0}).map(b=>b.original)}e.orderBy=n})(Zx)),Zx}var rb={},LE;function iq(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,s=1){const n=[],i=Math.floor(s),l=(d,u)=>{for(let h=0;h<d.length;h++){const m=d[h];Array.isArray(m)&&u<i?l(m,u+1):n.push(m)}};return l(r,0),n}e.flatten=t})(rb)),rb}var ab={},BE;function FO(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LO(),r=ow(),s=MO(),n=lw();function i(l,d,u){return s.isObject(u)&&(typeof d=="number"&&r.isArrayLike(u)&&t.isIndex(d)&&d<u.length||typeof d=="string"&&d in u)?n.eq(u[d],l):!1}e.isIterateeCall=i})(ab)),ab}var UE;function oq(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nq(),r=iq(),s=FO();function n(i,...l){const d=l.length;return d>1&&s.isIterateeCall(i,l[0],l[1])?l=[]:d>2&&s.isIterateeCall(l[0],l[1],l[2])&&(l=[l[0]]),t.orderBy(i,r.flatten(l),["asc"])}e.sortBy=n})(Jx)),Jx}var sb,qE;function lq(){return qE||(qE=1,sb=oq().sortBy),sb}var cq=lq();const ip=js(cq);var HO=e=>e.legend.settings,dq=e=>e.legend.size,uq=e=>e.legend.payload,hq=ye([uq,HO],(e,t)=>{var{itemSorter:r}=t,s=e.flat(1);return r?ip(s,r):s});function fq(){return Ue(hq)}var gf=1;function VO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=_.useState({height:0,left:0,top:0,width:0}),s=_.useCallback(n=>{if(n!=null){var i=n.getBoundingClientRect(),l={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(l.height-t.height)>gf||Math.abs(l.left-t.left)>gf||Math.abs(l.top-t.top)>gf||Math.abs(l.width-t.width)>gf)&&r({height:l.height,left:l.left,top:l.top,width:l.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}function Fr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var mq=typeof Symbol=="function"&&Symbol.observable||"@@observable",FE=mq,nb=()=>Math.random().toString(36).substring(7).split("").join("."),pq={INIT:`@@redux/INIT${nb()}`,REPLACE:`@@redux/REPLACE${nb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nb()}`},om=pq;function fw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function GO(e,t,r){if(typeof e!="function")throw new Error(Fr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Fr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Fr(1));return r(GO)(e,t)}let s=e,n=t,i=new Map,l=i,d=0,u=!1;function h(){l===i&&(l=new Map,i.forEach((w,N)=>{l.set(N,w)}))}function m(){if(u)throw new Error(Fr(3));return n}function p(w){if(typeof w!="function")throw new Error(Fr(4));if(u)throw new Error(Fr(5));let N=!0;h();const S=d++;return l.set(S,w),function(){if(N){if(u)throw new Error(Fr(6));N=!1,h(),l.delete(S),i=null}}}function x(w){if(!fw(w))throw new Error(Fr(7));if(typeof w.type>"u")throw new Error(Fr(8));if(typeof w.type!="string")throw new Error(Fr(17));if(u)throw new Error(Fr(9));try{u=!0,n=s(n,w)}finally{u=!1}return(i=l).forEach(S=>{S()}),w}function b(w){if(typeof w!="function")throw new Error(Fr(10));s=w,x({type:om.REPLACE})}function y(){const w=p;return{subscribe(N){if(typeof N!="object"||N===null)throw new Error(Fr(11));function S(){const k=N;k.next&&k.next(m())}return S(),{unsubscribe:w(S)}},[FE](){return this}}}return x({type:om.INIT}),{dispatch:x,subscribe:p,getState:m,replaceReducer:b,[FE]:y}}function gq(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:om.INIT})>"u")throw new Error(Fr(12));if(typeof r(void 0,{type:om.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Fr(13))})}function KO(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const l=t[i];typeof e[l]=="function"&&(r[l]=e[l])}const s=Object.keys(r);let n;try{gq(r)}catch(i){n=i}return function(l={},d){if(n)throw n;let u=!1;const h={};for(let m=0;m<s.length;m++){const p=s[m],x=r[p],b=l[p],y=x(b,d);if(typeof y>"u")throw d&&d.type,new Error(Fr(14));h[p]=y,u=u||y!==b}return u=u||s.length!==Object.keys(l).length,u?h:l}}function lm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...s)=>t(r(...s)))}function xq(...e){return t=>(r,s)=>{const n=t(r,s);let i=()=>{throw new Error(Fr(15))};const l={getState:n.getState,dispatch:(u,...h)=>i(u,...h)},d=e.map(u=>u(l));return i=lm(...d)(n.dispatch),{...n,dispatch:i}}}function WO(e){return fw(e)&&"type"in e&&typeof e.type=="string"}var YO=Symbol.for("immer-nothing"),HE=Symbol.for("immer-draftable"),Va=Symbol.for("immer-state");function Ps(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var rc=Object.getPrototypeOf;function Lo(e){return!!e&&!!e[Va]}function Dn(e){var t;return e?XO(e)||Array.isArray(e)||!!e[HE]||!!((t=e.constructor)!=null&&t[HE])||Ou(e)||lp(e):!1}var bq=Object.prototype.constructor.toString();function XO(e){if(!e||typeof e!="object")return!1;const t=rc(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===bq}function cm(e,t){op(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,s)=>t(s,r,e))}function op(e){const t=e[Va];return t?t.type_:Array.isArray(e)?1:Ou(e)?2:lp(e)?3:0}function Mv(e,t){return op(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function JO(e,t,r){const s=op(e);s===2?e.set(t,r):s===3?e.add(r):e[t]=r}function vq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Ou(e){return e instanceof Map}function lp(e){return e instanceof Set}function yo(e){return e.copy_||e.base_}function Iv(e,t){if(Ou(e))return new Map(e);if(lp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=XO(e);if(t===!0||t==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(e);delete s[Va];let n=Reflect.ownKeys(s);for(let i=0;i<n.length;i++){const l=n[i],d=s[l];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(s[l]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[l]})}return Object.create(rc(e),s)}else{const s=rc(e);if(s!==null&&r)return{...e};const n=Object.create(s);return Object.assign(n,e)}}function mw(e,t=!1){return cp(e)||Lo(e)||!Dn(e)||(op(e)>1&&Object.defineProperties(e,{set:{value:xf},add:{value:xf},clear:{value:xf},delete:{value:xf}}),Object.freeze(e),t&&Object.values(e).forEach(r=>mw(r,!0))),e}function xf(){Ps(2)}function cp(e){return Object.isFrozen(e)}var yq={};function Bo(e){const t=yq[e];return t||Ps(0,e),t}var su;function ZO(){return su}function wq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function VE(e,t){t&&(Bo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function zv(e){$v(e),e.drafts_.forEach(jq),e.drafts_=null}function $v(e){e===su&&(su=e.parent_)}function GE(e){return su=wq(su,e)}function jq(e){const t=e[Va];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function KE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Va].modified_&&(zv(t),Ps(4)),Dn(e)&&(e=dm(t,e),t.parent_||um(t,e)),t.patches_&&Bo("Patches").generateReplacementPatches_(r[Va].base_,e,t.patches_,t.inversePatches_)):e=dm(t,r,[]),zv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==YO?e:void 0}function dm(e,t,r){if(cp(t))return t;const s=t[Va];if(!s)return cm(t,(n,i)=>WE(e,s,t,n,i,r)),t;if(s.scope_!==e)return t;if(!s.modified_)return um(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const n=s.copy_;let i=n,l=!1;s.type_===3&&(i=new Set(n),n.clear(),l=!0),cm(i,(d,u)=>WE(e,s,n,d,u,r,l)),um(e,n,!1),r&&e.patches_&&Bo("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function WE(e,t,r,s,n,i,l){if(Lo(n)){const d=i&&t&&t.type_!==3&&!Mv(t.assigned_,s)?i.concat(s):void 0,u=dm(e,n,d);if(JO(r,s,u),Lo(u))e.canAutoFreeze_=!1;else return}else l&&r.add(n);if(Dn(n)&&!cp(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;dm(e,n),(!t||!t.scope_.parent_)&&typeof s!="symbol"&&(Ou(r)?r.has(s):Object.prototype.propertyIsEnumerable.call(r,s))&&um(e,n)}}function um(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&mw(t,r)}function Nq(e,t){const r=Array.isArray(e),s={type_:r?1:0,scope_:t?t.scope_:ZO(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=s,i=pw;r&&(n=[s],i=nu);const{revoke:l,proxy:d}=Proxy.revocable(n,i);return s.draft_=d,s.revoke_=l,d}var pw={get(e,t){if(t===Va)return e;const r=yo(e);if(!Mv(r,t))return _q(e,r,t);const s=r[t];return e.finalized_||!Dn(s)?s:s===ib(e.base_,t)?(ob(e),e.copy_[t]=Bv(s,e)):s},has(e,t){return t in yo(e)},ownKeys(e){return Reflect.ownKeys(yo(e))},set(e,t,r){const s=QO(yo(e),t);if(s!=null&&s.set)return s.set.call(e.draft_,r),!0;if(!e.modified_){const n=ib(yo(e),t),i=n==null?void 0:n[Va];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(vq(r,n)&&(r!==void 0||Mv(e.base_,t)))return!0;ob(e),Lv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return ib(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ob(e),Lv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=yo(e),s=Reflect.getOwnPropertyDescriptor(r,t);return s&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:s.enumerable,value:r[t]}},defineProperty(){Ps(11)},getPrototypeOf(e){return rc(e.base_)},setPrototypeOf(){Ps(12)}},nu={};cm(pw,(e,t)=>{nu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});nu.deleteProperty=function(e,t){return nu.set.call(this,e,t,void 0)};nu.set=function(e,t,r){return pw.set.call(this,e[0],t,r,e[0])};function ib(e,t){const r=e[Va];return(r?yo(r):e)[t]}function _q(e,t,r){var n;const s=QO(t,r);return s?"value"in s?s.value:(n=s.get)==null?void 0:n.call(e.draft_):void 0}function QO(e,t){if(!(t in e))return;let r=rc(e);for(;r;){const s=Object.getOwnPropertyDescriptor(r,t);if(s)return s;r=rc(r)}}function Lv(e){e.modified_||(e.modified_=!0,e.parent_&&Lv(e.parent_))}function ob(e){e.copy_||(e.copy_=Iv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Sq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,s)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const l=this;return function(u=i,...h){return l.produce(u,m=>r.call(this,m,...h))}}typeof r!="function"&&Ps(6),s!==void 0&&typeof s!="function"&&Ps(7);let n;if(Dn(t)){const i=GE(this),l=Bv(t,void 0);let d=!0;try{n=r(l),d=!1}finally{d?zv(i):$v(i)}return VE(i,s),KE(n,i)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===YO&&(n=void 0),this.autoFreeze_&&mw(n,!0),s){const i=[],l=[];Bo("Patches").generateReplacementPatches_(t,n,i,l),s(i,l)}return n}else Ps(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(l,...d)=>this.produceWithPatches(l,u=>t(u,...d));let s,n;return[this.produce(t,r,(l,d)=>{s=l,n=d}),s,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Dn(e)||Ps(8),Lo(e)&&(e=On(e));const t=GE(this),r=Bv(e,void 0);return r[Va].isManual_=!0,$v(t),r}finishDraft(e,t){const r=e&&e[Va];(!r||!r.isManual_)&&Ps(9);const{scope_:s}=r;return VE(s,t),KE(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const s=Bo("Patches").applyPatches_;return Lo(e)?s(e,t):this.produce(e,n=>s(n,t))}};function Bv(e,t){const r=Ou(e)?Bo("MapSet").proxyMap_(e,t):lp(e)?Bo("MapSet").proxySet_(e,t):Nq(e,t);return(t?t.scope_:ZO()).drafts_.push(r),r}function On(e){return Lo(e)||Ps(10,e),e3(e)}function e3(e){if(!Dn(e)||cp(e))return e;const t=e[Va];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Iv(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Iv(e,!0);return cm(r,(s,n)=>{JO(r,s,e3(n))}),t&&(t.finalized_=!1),r}var Eq=new Sq,t3=Eq.produce;function r3(e){return({dispatch:r,getState:s})=>n=>i=>typeof i=="function"?i(r,s,e):n(i)}var kq=r3(),Cq=r3,Aq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?lm:lm.apply(null,arguments)};function ys(e,t){function r(...s){if(t){let n=t(...s);if(!n)throw new Error(Ua(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:s[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=s=>WO(s)&&s.type===e,r}var a3=class Fd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Fd.prototype)}static get[Symbol.species](){return Fd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Fd(...t[0].concat(this)):new Fd(...t.concat(this))}};function YE(e){return Dn(e)?t3(e,()=>{}):e}function bf(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Oq(e){return typeof e=="boolean"}var Tq=()=>function(t){const{thunk:r=!0,immutableCheck:s=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=t??{};let l=new a3;return r&&(Oq(r)?l.push(kq):l.push(Cq(r.extraArgument))),l},Pq="RTK_autoBatch",XE=e=>t=>{setTimeout(t,e)},Rq=(e={type:"raf"})=>t=>(...r)=>{const s=t(...r);let n=!0,i=!1,l=!1;const d=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:XE(10):e.type==="callback"?e.queueNotification:XE(e.timeout),h=()=>{l=!1,i&&(i=!1,d.forEach(m=>m()))};return Object.assign({},s,{subscribe(m){const p=()=>n&&m(),x=s.subscribe(p);return d.add(m),()=>{x(),d.delete(m)}},dispatch(m){var p;try{return n=!((p=m==null?void 0:m.meta)!=null&&p[Pq]),i=!n,i&&(l||(l=!0,u(h))),s.dispatch(m)}finally{n=!0}}})},Dq=e=>function(r){const{autoBatch:s=!0}=r??{};let n=new a3(e);return s&&n.push(Rq(typeof s=="object"?s:void 0)),n};function Mq(e){const t=Tq(),{reducer:r=void 0,middleware:s,devTools:n=!0,preloadedState:i=void 0,enhancers:l=void 0}=e||{};let d;if(typeof r=="function")d=r;else if(fw(r))d=KO(r);else throw new Error(Ua(1));let u;typeof s=="function"?u=s(t):u=t();let h=lm;n&&(h=Aq({trace:!1,...typeof n=="object"&&n}));const m=xq(...u),p=Dq(m);let x=typeof l=="function"?l(p):p();const b=h(...x);return GO(d,i,b)}function s3(e){const t={},r=[];let s;const n={addCase(i,l){const d=typeof i=="string"?i:i.type;if(!d)throw new Error(Ua(28));if(d in t)throw new Error(Ua(29));return t[d]=l,n},addAsyncThunk(i,l){return l.pending&&(t[i.pending.type]=l.pending),l.rejected&&(t[i.rejected.type]=l.rejected),l.fulfilled&&(t[i.fulfilled.type]=l.fulfilled),l.settled&&r.push({matcher:i.settled,reducer:l.settled}),n},addMatcher(i,l){return r.push({matcher:i,reducer:l}),n},addDefaultCase(i){return s=i,n}};return e(n),[t,r,s]}function Iq(e){return typeof e=="function"}function zq(e,t){let[r,s,n]=s3(t),i;if(Iq(e))i=()=>YE(e());else{const d=YE(e);i=()=>d}function l(d=i(),u){let h=[r[u.type],...s.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[n]),h.reduce((m,p)=>{if(p)if(Lo(m)){const b=p(m,u);return b===void 0?m:b}else{if(Dn(m))return t3(m,x=>p(x,u));{const x=p(m,u);if(x===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return x}}return m},d)}return l.getInitialState=i,l}var $q="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Lq=(e=21)=>{let t="",r=e;for(;r--;)t+=$q[Math.random()*64|0];return t},Bq=Symbol.for("rtk-slice-createasyncthunk");function Uq(e,t){return`${e}/${t}`}function qq({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Bq];return function(n){const{name:i,reducerPath:l=i}=n;if(!i)throw new Error(Ua(11));const d=(typeof n.reducers=="function"?n.reducers(Hq()):n.reducers)||{},u=Object.keys(d),h={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},m={addCase(k,A){const O=typeof k=="string"?k:k.type;if(!O)throw new Error(Ua(12));if(O in h.sliceCaseReducersByType)throw new Error(Ua(13));return h.sliceCaseReducersByType[O]=A,m},addMatcher(k,A){return h.sliceMatchers.push({matcher:k,reducer:A}),m},exposeAction(k,A){return h.actionCreators[k]=A,m},exposeCaseReducer(k,A){return h.sliceCaseReducersByName[k]=A,m}};u.forEach(k=>{const A=d[k],O={reducerName:k,type:Uq(i,k),createNotation:typeof n.reducers=="function"};Gq(A)?Wq(O,A,m,t):Vq(O,A,m)});function p(){const[k={},A=[],O=void 0]=typeof n.extraReducers=="function"?s3(n.extraReducers):[n.extraReducers],T={...k,...h.sliceCaseReducersByType};return zq(n.initialState,D=>{for(let R in T)D.addCase(R,T[R]);for(let R of h.sliceMatchers)D.addMatcher(R.matcher,R.reducer);for(let R of A)D.addMatcher(R.matcher,R.reducer);O&&D.addDefaultCase(O)})}const x=k=>k,b=new Map,y=new WeakMap;let v;function w(k,A){return v||(v=p()),v(k,A)}function N(){return v||(v=p()),v.getInitialState()}function S(k,A=!1){function O(D){let R=D[k];return typeof R>"u"&&A&&(R=bf(y,O,N)),R}function T(D=x){const R=bf(b,A,()=>new WeakMap);return bf(R,D,()=>{const I={};for(const[L,$]of Object.entries(n.selectors??{}))I[L]=Fq($,D,()=>bf(y,D,N),A);return I})}return{reducerPath:k,getSelectors:T,get selectors(){return T(O)},selectSlice:O}}const j={name:i,reducer:w,actions:h.actionCreators,caseReducers:h.sliceCaseReducersByName,getInitialState:N,...S(l),injectInto(k,{reducerPath:A,...O}={}){const T=A??l;return k.inject({reducerPath:T,reducer:w},O),{...j,...S(T,!0)}}};return j}}function Fq(e,t,r,s){function n(i,...l){let d=t(i);return typeof d>"u"&&s&&(d=r()),e(d,...l)}return n.unwrapped=e,n}var Wa=qq();function Hq(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Vq({type:e,reducerName:t,createNotation:r},s,n){let i,l;if("reducer"in s){if(r&&!Kq(s))throw new Error(Ua(17));i=s.reducer,l=s.prepare}else i=s;n.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,l?ys(e,l):ys(e))}function Gq(e){return e._reducerDefinitionType==="asyncThunk"}function Kq(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Wq({type:e,reducerName:t},r,s,n){if(!n)throw new Error(Ua(18));const{payloadCreator:i,fulfilled:l,pending:d,rejected:u,settled:h,options:m}=r,p=n(e,i,m);s.exposeAction(t,p),l&&s.addCase(p.fulfilled,l),d&&s.addCase(p.pending,d),u&&s.addCase(p.rejected,u),h&&s.addMatcher(p.settled,h),s.exposeCaseReducer(t,{fulfilled:l||vf,pending:d||vf,rejected:u||vf,settled:h||vf})}function vf(){}var Yq="task",n3="listener",i3="completed",gw="cancelled",Xq=`task-${gw}`,Jq=`task-${i3}`,Uv=`${n3}-${gw}`,Zq=`${n3}-${i3}`,dp=class{constructor(e){Vg(this,"name","TaskAbortError");Vg(this,"message");this.code=e,this.message=`${Yq} ${gw} (reason: ${e})`}},xw=(e,t)=>{if(typeof e!="function")throw new TypeError(Ua(32))},hm=()=>{},o3=(e,t=hm)=>(e.catch(t),e),l3=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ro=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Do=e=>{if(e.aborted){const{reason:t}=e;throw new dp(t)}};function c3(e,t){let r=hm;return new Promise((s,n)=>{const i=()=>n(new dp(e.reason));if(e.aborted){i();return}r=l3(e,i),t.finally(()=>r()).then(s,n)}).finally(()=>{r=hm})}var Qq=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof dp?"cancelled":"rejected",error:r}}finally{t==null||t()}},fm=e=>t=>o3(c3(e,t).then(r=>(Do(e),r))),d3=e=>{const t=fm(e);return r=>t(new Promise(s=>setTimeout(s,r)))},{assign:Hl}=Object,JE={},up="listenerMiddleware",eF=(e,t)=>{const r=s=>l3(e,()=>Ro(s,e.reason));return(s,n)=>{xw(s);const i=new AbortController;r(i);const l=Qq(async()=>{Do(e),Do(i.signal);const d=await s({pause:fm(i.signal),delay:d3(i.signal),signal:i.signal});return Do(i.signal),d},()=>Ro(i,Jq));return n!=null&&n.autoJoin&&t.push(l.catch(hm)),{result:fm(e)(l),cancel(){Ro(i,Xq)}}}},tF=(e,t)=>{const r=async(s,n)=>{Do(t);let i=()=>{};const d=[new Promise((u,h)=>{let m=e({predicate:s,effect:(p,x)=>{x.unsubscribe(),u([p,x.getState(),x.getOriginalState()])}});i=()=>{m(),h()}})];n!=null&&d.push(new Promise(u=>setTimeout(u,n,null)));try{const u=await c3(t,Promise.race(d));return Do(t),u}finally{i()}};return(s,n)=>o3(r(s,n))},u3=e=>{let{type:t,actionCreator:r,matcher:s,predicate:n,effect:i}=e;if(t)n=ys(t).match;else if(r)t=r.type,n=r.match;else if(s)n=s;else if(!n)throw new Error(Ua(21));return xw(i),{predicate:n,type:t,effect:i}},h3=Hl(e=>{const{type:t,predicate:r,effect:s}=u3(e);return{id:Lq(),effect:s,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Ua(22))}}},{withTypes:()=>h3}),ZE=(e,t)=>{const{type:r,effect:s,predicate:n}=u3(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===n)&&i.effect===s)},qv=e=>{e.pending.forEach(t=>{Ro(t,Uv)})},rF=e=>()=>{e.forEach(qv),e.clear()},QE=(e,t,r)=>{try{e(t,r)}catch(s){setTimeout(()=>{throw s},0)}},f3=Hl(ys(`${up}/add`),{withTypes:()=>f3}),aF=ys(`${up}/removeAll`),m3=Hl(ys(`${up}/remove`),{withTypes:()=>m3}),sF=(...e)=>{console.error(`${up}/error`,...e)},Tu=(e={})=>{const t=new Map,{extra:r,onError:s=sF}=e;xw(s);const n=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),p=>{m.unsubscribe(),p!=null&&p.cancelActive&&qv(m)}),i=m=>{const p=ZE(t,m)??h3(m);return n(p)};Hl(i,{withTypes:()=>i});const l=m=>{const p=ZE(t,m);return p&&(p.unsubscribe(),m.cancelActive&&qv(p)),!!p};Hl(l,{withTypes:()=>l});const d=async(m,p,x,b)=>{const y=new AbortController,v=tF(i,y.signal),w=[];try{m.pending.add(y),await Promise.resolve(m.effect(p,Hl({},x,{getOriginalState:b,condition:(N,S)=>v(N,S).then(Boolean),take:v,delay:d3(y.signal),pause:fm(y.signal),extra:r,signal:y.signal,fork:eF(y.signal,w),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((N,S,j)=>{N!==y&&(Ro(N,Uv),j.delete(N))})},cancel:()=>{Ro(y,Uv),m.pending.delete(y)},throwIfCancelled:()=>{Do(y.signal)}})))}catch(N){N instanceof dp||QE(s,N,{raisedBy:"effect"})}finally{await Promise.all(w),Ro(y,Zq),m.pending.delete(y)}},u=rF(t);return{middleware:m=>p=>x=>{if(!WO(x))return p(x);if(f3.match(x))return i(x.payload);if(aF.match(x)){u();return}if(m3.match(x))return l(x.payload);let b=m.getState();const y=()=>{if(b===JE)throw new Error(Ua(23));return b};let v;try{if(v=p(x),t.size>0){const w=m.getState(),N=Array.from(t.values());for(const S of N){let j=!1;try{j=S.predicate(x,w,b)}catch(k){j=!1,QE(s,k,{raisedBy:"predicate"})}j&&d(S,x,m,y)}}}finally{b=JE}return v},startListening:i,stopListening:l,clearListeners:u}};function Ua(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nF={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},p3=Wa({name:"chartLayout",initialState:nF,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:iF,setLayout:oF,setChartSize:lF,setScale:cF}=p3.actions,dF=p3.reducer;function ek(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function tk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ek(Object(r),!0).forEach(function(s){uF(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ek(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function uF(e,t,r){return(t=hF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hF(e){var t=fF(e,"string");return typeof t=="symbol"?t:t+""}function fF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mm=Math.PI/180,mF=e=>e*180/Math.PI,fr=(e,t,r,s)=>({x:e+Math.cos(-mm*s)*r,y:t+Math.sin(-mm*s)*r}),g3=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},pF=(e,t)=>{var{x:r,y:s}=e,{x:n,y:i}=t;return Math.sqrt((r-n)**2+(s-i)**2)},gF=(e,t)=>{var{x:r,y:s}=e,{cx:n,cy:i}=t,l=pF({x:r,y:s},{x:n,y:i});if(l<=0)return{radius:l,angle:0};var d=(r-n)/l,u=Math.acos(d);return s>i&&(u=2*Math.PI-u),{radius:l,angle:mF(u),angleInRadian:u}},xF=e=>{var{startAngle:t,endAngle:r}=e,s=Math.floor(t/360),n=Math.floor(r/360),i=Math.min(s,n);return{startAngle:t-i*360,endAngle:r-i*360}},bF=(e,t)=>{var{startAngle:r,endAngle:s}=t,n=Math.floor(r/360),i=Math.floor(s/360),l=Math.min(n,i);return e+l*360},vF=(e,t)=>{var{x:r,y:s}=e,{radius:n,angle:i}=gF({x:r,y:s},t),{innerRadius:l,outerRadius:d}=t;if(n<l||n>d||n===0)return null;var{startAngle:u,endAngle:h}=xF(t),m=i,p;if(u<=h){for(;m>h;)m-=360;for(;m<u;)m+=360;p=m>=u&&m<=h}else{for(;m>u;)m-=360;for(;m<h;)m+=360;p=m>=h&&m<=u}return p?tk(tk({},t),{},{radius:n,angle:bF(m,t)}):null};function x3(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function rk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function ps(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rk(Object(r),!0).forEach(function(s){yF(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yF(e,t,r){return(t=wF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wF(e){var t=jF(e,"string");return typeof t=="symbol"?t:t+""}function jF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Et(e,t,r){return Bt(e)||Bt(t)?r:Qs(t)?Ri(e,t,r):typeof t=="function"?t(e):r}var NF=(e,t,r,s,n)=>{var i,l=-1,d=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(d<=1||e==null)return 0;if(s==="angleAxis"&&n!=null&&Math.abs(Math.abs(n[1]-n[0])-360)<=1e-6)for(var u=0;u<d;u++){var h=u>0?r[u-1].coordinate:r[d-1].coordinate,m=r[u].coordinate,p=u>=d-1?r[0].coordinate:r[u+1].coordinate,x=void 0;if(Ir(m-h)!==Ir(p-m)){var b=[];if(Ir(p-m)===Ir(n[1]-n[0])){x=p;var y=m+n[1]-n[0];b[0]=Math.min(y,(y+h)/2),b[1]=Math.max(y,(y+h)/2)}else{x=h;var v=p+n[1]-n[0];b[0]=Math.min(m,(v+m)/2),b[1]=Math.max(m,(v+m)/2)}var w=[Math.min(m,(x+m)/2),Math.max(m,(x+m)/2)];if(e>w[0]&&e<=w[1]||e>=b[0]&&e<=b[1]){({index:l}=r[u]);break}}else{var N=Math.min(h,p),S=Math.max(h,p);if(e>(N+m)/2&&e<=(S+m)/2){({index:l}=r[u]);break}}}else if(t){for(var j=0;j<d;j++)if(j===0&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<d-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===d-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:l}=t[j]);break}}return l},_F=(e,t,r)=>{if(t&&r){var{width:s,height:n}=r,{align:i,verticalAlign:l,layout:d}=t;if((d==="vertical"||d==="horizontal"&&l==="middle")&&i!=="center"&&De(e[i]))return ps(ps({},e),{},{[i]:e[i]+(s||0)});if((d==="horizontal"||d==="vertical"&&i==="center")&&l!=="middle"&&De(e[l]))return ps(ps({},e),{},{[l]:e[l]+(n||0)})}return e},Un=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",b3=(e,t,r,s)=>{if(s)return e.map(d=>d.coordinate);var n,i,l=e.map(d=>(d.coordinate===t&&(n=!0),d.coordinate===r&&(i=!0),d.coordinate));return n||l.push(t),i||l.push(r),l},v3=(e,t,r)=>{if(!e)return null;var{duplicateDomain:s,type:n,range:i,scale:l,realScaleType:d,isCategorical:u,categoricalDomain:h,tickCount:m,ticks:p,niceTicks:x,axisType:b}=e;if(!l)return null;var y=d==="scaleBand"&&l.bandwidth?l.bandwidth()/2:2,v=n==="category"&&l.bandwidth?l.bandwidth()/y:0;if(v=b==="angleAxis"&&i&&i.length>=2?Ir(i[0]-i[1])*2*v:v,p||x){var w=(p||x||[]).map((N,S)=>{var j=s?s.indexOf(N):N;return{coordinate:l(j)+v,value:N,offset:v,index:S}});return w.filter(N=>!Sa(N.coordinate))}return u&&h?h.map((N,S)=>({coordinate:l(N)+v,value:N,index:S,offset:v})):l.ticks&&m!=null?l.ticks(m).map((N,S)=>({coordinate:l(N)+v,value:N,offset:v,index:S})):l.domain().map((N,S)=>({coordinate:l(N)+v,value:s?s[N]:N,index:S,offset:v}))},ak=1e-4,SF=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,s=e.range(),n=Math.min(s[0],s[1])-ak,i=Math.max(s[0],s[1])+ak,l=e(t[0]),d=e(t[r-1]);(l<n||l>i||d<n||d>i)&&e.domain([t[0],t[r-1]])}},EF=(e,t)=>{if(!t||t.length!==2||!De(t[0])||!De(t[1]))return e;var r=Math.min(t[0],t[1]),s=Math.max(t[0],t[1]),n=[e[0],e[1]];return(!De(e[0])||e[0]<r)&&(n[0]=r),(!De(e[1])||e[1]>s)&&(n[1]=s),n[0]>s&&(n[0]=s),n[1]<r&&(n[1]=r),n},kF=e=>{var t=e.length;if(!(t<=0))for(var r=0,s=e[0].length;r<s;++r)for(var n=0,i=0,l=0;l<t;++l){var d=Sa(e[l][r][1])?e[l][r][0]:e[l][r][1];d>=0?(e[l][r][0]=n,e[l][r][1]=n+d,n=e[l][r][1]):(e[l][r][0]=i,e[l][r][1]=i+d,i=e[l][r][1])}},CF=e=>{var t=e.length;if(!(t<=0))for(var r=0,s=e[0].length;r<s;++r)for(var n=0,i=0;i<t;++i){var l=Sa(e[i][r][1])?e[i][r][0]:e[i][r][1];l>=0?(e[i][r][0]=n,e[i][r][1]=n+l,n=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},AF={sign:kF,expand:nU,none:tc,silhouette:iU,wiggle:oU,positive:CF},OF=(e,t,r)=>{var s=AF[r],n=sU().keys(t).value((i,l)=>+Et(i,l,0)).order(Pv).offset(s);return n(e)};function y3(e){return e==null?void 0:String(e)}function sk(e){var{axis:t,ticks:r,bandSize:s,entry:n,index:i,dataKey:l}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Bt(n[t.dataKey])){var d=hO(r,"value",n[t.dataKey]);if(d)return d.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var u=Et(n,Bt(l)?t.dataKey:l);return Bt(u)?null:t.scale(u)}var nk=e=>{var{axis:t,ticks:r,offset:s,bandSize:n,entry:i,index:l}=e;if(t.type==="category")return r[l]?r[l].coordinate+s:null;var d=Et(i,t.dataKey,t.scale.domain()[l]);return Bt(d)?null:t.scale(d)-n/2+s},TF=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var s=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return s<=0&&n>=0?0:n<0?n:s}return r[0]},PF=e=>{var t=e.flat(2).filter(De);return[Math.min(...t),Math.max(...t)]},RF=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],DF=(e,t,r)=>{if(e!=null)return RF(Object.keys(e).reduce((s,n)=>{var i=e[n],{stackedData:l}=i,d=l.reduce((u,h)=>{var m=x3(h,t,r),p=PF(m);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(d[0],s[0]),Math.max(d[1],s[1])]},[1/0,-1/0]))},ik=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ok=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iu=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var s=e.scale.bandwidth();if(!r||s>0)return s}if(e&&t&&t.length>=2){for(var n=ip(t,m=>m.coordinate),i=1/0,l=1,d=n.length;l<d;l++){var u=n[l],h=n[l-1];i=Math.min((u.coordinate||0)-(h.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function lk(e){var{tooltipEntrySettings:t,dataKey:r,payload:s,value:n,name:i}=e;return ps(ps({},t),{},{dataKey:r,payload:s,value:n,name:i})}function xc(e,t){if(e)return String(e);if(typeof t=="string")return t}function MF(e,t,r,s,n){if(r==="horizontal"||r==="vertical"){var i=e>=n.left&&e<=n.left+n.width&&t>=n.top&&t<=n.top+n.height;return i?{x:e,y:t}:null}return s?vF({x:e,y:t},s):null}var IF=(e,t,r,s)=>{var n=t.find(h=>h&&h.index===r);if(n){if(e==="horizontal")return{x:n.coordinate,y:s.y};if(e==="vertical")return{x:s.x,y:n.coordinate};if(e==="centric"){var i=n.coordinate,{radius:l}=s;return ps(ps(ps({},s),fr(s.cx,s.cy,l,i)),{},{angle:i,radius:l})}var d=n.coordinate,{angle:u}=s;return ps(ps(ps({},s),fr(s.cx,s.cy,d,u)),{},{angle:u,radius:d})}return{x:0,y:0}},zF=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,qn=e=>e.layout.width,Fn=e=>e.layout.height,$F=e=>e.layout.scale,w3=e=>e.layout.margin,bw=ye(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),vw=ye(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),j3="data-recharts-item-index",N3="data-recharts-item-data-key",hp=60;function ck(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function gi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(r),!0).forEach(function(s){LF(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ck(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function LF(e,t,r){return(t=BF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BF(e){var t=UF(e,"string");return typeof t=="symbol"?t:t+""}function UF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qF=e=>e.brush.height,_r=ye([qn,Fn,w3,qF,bw,vw,HO,dq],(e,t,r,s,n,i,l,d)=>{var u=i.reduce((y,v)=>{var{orientation:w}=v;if(!v.mirror&&!v.hide){var N=typeof v.width=="number"?v.width:hp;return gi(gi({},y),{},{[w]:y[w]+N})}return y},{left:r.left||0,right:r.right||0}),h=n.reduce((y,v)=>{var{orientation:w}=v;return!v.mirror&&!v.hide?gi(gi({},y),{},{[w]:Ri(y,"".concat(w))+v.height}):y},{top:r.top||0,bottom:r.bottom||0}),m=gi(gi({},h),u),p=m.bottom;m.bottom+=s,m=_F(m,l,d);var x=e-m.left-m.right,b=t-m.top-m.bottom;return gi(gi({brushBottom:p},m),{},{width:Math.max(x,0),height:Math.max(b,0)})}),FF=ye(_r,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),_3=ye(qn,Fn,(e,t)=>({x:0,y:0,width:e,height:t})),HF=_.createContext(null),Ea=()=>_.useContext(HF)!=null,fp=e=>e.brush,mp=ye([fp,_r,w3],(e,t,r)=>({height:e.height,x:De(e.x)?e.x:t.left,y:De(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:De(e.width)?e.width:t.width})),yw=()=>{var e,t=Ea(),r=Ue(FF),s=Ue(mp),n=(e=Ue(fp))===null||e===void 0?void 0:e.padding;return!t||!s||!n?r:{width:s.width-n.left-n.right,height:s.height-n.top-n.bottom,x:n.left,y:n.top}},VF={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},S3=()=>{var e;return(e=Ue(_r))!==null&&e!==void 0?e:VF},ww=()=>Ue(qn),jw=()=>Ue(Fn),GF={top:0,right:0,bottom:0,left:0},KF=()=>{var e;return(e=Ue(t=>t.layout.margin))!==null&&e!==void 0?e:GF},it=e=>e.layout.layoutType,pp=()=>Ue(it),WF={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},E3=Wa({name:"legend",initialState:WF,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=On(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:dk,setLegendSettings:YF,addLegendPayload:k3,removeLegendPayload:C3}=E3.actions,XF=E3.reducer,JF=["contextPayload"];function Fv(){return Fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Fv.apply(null,arguments)}function uk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function ac(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uk(Object(r),!0).forEach(function(s){Nw(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Nw(e,t,r){return(t=ZF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZF(e){var t=QF(e,"string");return typeof t=="symbol"?t:t+""}function QF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eH(e,t){if(e==null)return{};var r,s,n=tH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tH(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function rH(e){return e.value}function aH(e){var{contextPayload:t}=e,r=eH(e,JF),s=BO(t,e.payloadUniqBy,rH),n=ac(ac({},r),{},{payload:s});return _.isValidElement(e.content)?_.cloneElement(e.content,n):typeof e.content=="function"?_.createElement(e.content,n):_.createElement(iw,n)}function sH(e,t,r,s,n,i){var{layout:l,align:d,verticalAlign:u}=t,h,m;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&l==="vertical"?h={left:((s||0)-i.width)/2}:h=d==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(u==="middle"?m={top:((n||0)-i.height)/2}:m=u==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),ac(ac({},h),m)}function nH(e){var t=Kt();return _.useEffect(()=>{t(YF(e))},[t,e]),null}function iH(e){var t=Kt();return _.useEffect(()=>(t(dk(e)),()=>{t(dk({width:0,height:0}))}),[t,e]),null}function oH(e){var t=fq(),r=CB(),s=KF(),{width:n,height:i,wrapperStyle:l,portal:d}=e,[u,h]=VO([t]),m=ww(),p=jw(),x=m-(s.left||0)-(s.right||0),b=ou.getWidthOrHeight(e.layout,i,n,x),y=d?l:ac(ac({position:"absolute",width:(b==null?void 0:b.width)||n||"auto",height:(b==null?void 0:b.height)||i||"auto"},sH(l,e,s,m,p,u)),l),v=d??r;if(v==null)return null;var w=_.createElement("div",{className:"recharts-legend-wrapper",style:y,ref:h},_.createElement(nH,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),_.createElement(iH,{width:u.width,height:u.height}),_.createElement(aH,Fv({},e,b,{margin:s,chartWidth:m,chartHeight:p,contextPayload:t})));return Ei.createPortal(w,v)}class ou extends _.PureComponent{static getWidthOrHeight(t,r,s,n){return t==="vertical"&&De(r)?{height:r}:t==="horizontal"?{width:s||n}:null}render(){return _.createElement(oH,this.props)}}Nw(ou,"displayName","Legend");Nw(ou,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function Hv(){return Hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Hv.apply(null,arguments)}function hk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function lb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hk(Object(r),!0).forEach(function(s){lH(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function lH(e,t,r){return(t=cH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cH(e){var t=dH(e,"string");return typeof t=="symbol"?t:t+""}function dH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uH(e){return Array.isArray(e)&&Qs(e[0])&&Qs(e[1])?e.join(" ~ "):e}var hH=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:s={},labelStyle:n={},payload:i,formatter:l,itemSorter:d,wrapperClassName:u,labelClassName:h,label:m,labelFormatter:p,accessibilityLayer:x=!1}=e,b=()=>{if(i&&i.length){var A={padding:0,margin:0},O=(d?ip(i,d):i).map((T,D)=>{if(T.type==="none")return null;var R=T.formatter||l||uH,{value:I,name:L}=T,$=I,W=L;if(R){var P=R(I,L,T,D,i);if(Array.isArray(P))[$,W]=P;else if(P!=null)$=P;else return null}var U=lb({display:"block",paddingTop:4,paddingBottom:4,color:T.color||"#000"},s);return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:U},Qs(W)?_.createElement("span",{className:"recharts-tooltip-item-name"},W):null,Qs(W)?_.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,_.createElement("span",{className:"recharts-tooltip-item-value"},$),_.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:A},O)}return null},y=lb({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=lb({margin:0},n),w=!Bt(m),N=w?m:"",S=ht("recharts-default-tooltip",u),j=ht("recharts-tooltip-label",h);w&&p&&i!==void 0&&i!==null&&(N=p(m,i));var k=x?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",Hv({className:S,style:y},k),_.createElement("p",{className:j,style:v},_.isValidElement(N)?N:"".concat(N)),b())},Od="recharts-tooltip-wrapper",fH={visibility:"hidden"};function mH(e){var{coordinate:t,translateX:r,translateY:s}=e;return ht(Od,{["".concat(Od,"-right")]:De(r)&&t&&De(t.x)&&r>=t.x,["".concat(Od,"-left")]:De(r)&&t&&De(t.x)&&r<t.x,["".concat(Od,"-bottom")]:De(s)&&t&&De(t.y)&&s>=t.y,["".concat(Od,"-top")]:De(s)&&t&&De(t.y)&&s<t.y})}function fk(e){var{allowEscapeViewBox:t,coordinate:r,key:s,offsetTopLeft:n,position:i,reverseDirection:l,tooltipDimension:d,viewBox:u,viewBoxDimension:h}=e;if(i&&De(i[s]))return i[s];var m=r[s]-d-(n>0?n:0),p=r[s]+n;if(t[s])return l[s]?m:p;var x=u[s];if(x==null)return 0;if(l[s]){var b=m,y=x;return b<y?Math.max(p,x):Math.max(m,x)}if(h==null)return 0;var v=p+d,w=x+h;return v>w?Math.max(m,x):Math.max(p,x)}function pH(e){var{translateX:t,translateY:r,useTranslate3d:s}=e;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function gH(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:s,position:n,reverseDirection:i,tooltipBox:l,useTranslate3d:d,viewBox:u}=e,h,m,p;return l.height>0&&l.width>0&&r?(m=fk({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),p=fk({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:n,reverseDirection:i,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),h=pH({translateX:m,translateY:p,useTranslate3d:d})):h=fH,{cssProperties:h,cssClasses:mH({translateX:m,translateY:p,coordinate:r})}}function mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function yf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mk(Object(r),!0).forEach(function(s){Vv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Vv(e,t,r){return(t=xH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xH(e){var t=bH(e,"string");return typeof t=="symbol"?t:t+""}function bH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class vH extends _.PureComponent{constructor(){super(...arguments),Vv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,s,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&r!==void 0?r:0,y:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&n!==void 0?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:s,animationEasing:n,children:i,coordinate:l,hasPayload:d,isAnimationActive:u,offset:h,position:m,reverseDirection:p,useTranslate3d:x,viewBox:b,wrapperStyle:y,lastBoundingBox:v,innerRef:w,hasPortalFromProps:N}=this.props,{cssClasses:S,cssProperties:j}=gH({allowEscapeViewBox:r,coordinate:l,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:{height:v.height,width:v.width},useTranslate3d:x,viewBox:b}),k=N?{}:yf(yf({transition:u&&t?"transform ".concat(s,"ms ").concat(n):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&d?"visible":"hidden",position:"absolute",top:0,left:0}),A=yf(yf({},k),{},{visibility:!this.state.dismissed&&t&&d?"visible":"hidden"},y);return _.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:A,ref:w},i)}}var yH=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ho={isSsr:yH()},A3=()=>Ue(e=>e.rootProps.accessibilityLayer);function Yr(e){return Number.isFinite(e)}function sc(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Gv.apply(null,arguments)}function pk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function gk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pk(Object(r),!0).forEach(function(s){wH(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function wH(e,t,r){return(t=jH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jH(e){var t=NH(e,"string");return typeof t=="symbol"?t:t+""}function NH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xk={curveBasisClosed:KB,curveBasisOpen:WB,curveBasis:GB,curveBumpX:PB,curveBumpY:RB,curveLinearClosed:YB,curveLinear:sp,curveMonotoneX:XB,curveMonotoneY:JB,curveNatural:ZB,curveStep:QB,curveStepAfter:tU,curveStepBefore:eU},wf=e=>Yr(e.x)&&Yr(e.y),Td=e=>e.x,Pd=e=>e.y,_H=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(ku(e));return(r==="curveMonotone"||r==="curveBump")&&t?xk["".concat(r).concat(t==="vertical"?"Y":"X")]:xk[r]||sp},SH=e=>{var{type:t="linear",points:r=[],baseLine:s,layout:n,connectNulls:i=!1}=e,l=_H(t,n),d=i?r.filter(wf):r,u;if(Array.isArray(s)){var h=i?s.filter(p=>wf(p)):s,m=d.map((p,x)=>gk(gk({},p),{},{base:h[x]}));return n==="vertical"?u=mf().y(Pd).x1(Td).x0(p=>p.base.x):u=mf().x(Td).y1(Pd).y0(p=>p.base.y),u.defined(wf).curve(l),u(m)}return n==="vertical"&&De(s)?u=mf().y(Pd).x1(Td).x0(s):De(s)?u=mf().x(Td).y1(Pd).y0(s):u=jO().x(Td).y(Pd),u.defined(wf).curve(l),u(d)},Gd=e=>{var{className:t,points:r,path:s,pathRef:n}=e;if((!r||!r.length)&&!s)return null;var i=r&&r.length?SH(e):s;return _.createElement("path",Gv({},tn(e),Qy(e),{className:ht("recharts-curve",t),d:i===null?void 0:i,ref:n}))},EH=["x","y","top","left","width","height","className"];function Kv(){return Kv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Kv.apply(null,arguments)}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function kH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(s){CH(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function CH(e,t,r){return(t=AH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AH(e){var t=OH(e,"string");return typeof t=="symbol"?t:t+""}function OH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TH(e,t){if(e==null)return{};var r,s,n=PH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function PH(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var RH=(e,t,r,s,n,i)=>"M".concat(e,",").concat(n,"v").concat(s,"M").concat(i,",").concat(t,"h").concat(r),DH=e=>{var{x:t=0,y:r=0,top:s=0,left:n=0,width:i=0,height:l=0,className:d}=e,u=TH(e,EH),h=kH({x:t,y:r,top:s,left:n,width:i,height:l},u);return!De(t)||!De(r)||!De(i)||!De(l)||!De(s)||!De(n)?null:_.createElement("path",Kv({},Vt(h,!0),{className:ht("recharts-cross",d),d:RH(t,r,i,l,s,n)}))};function MH(e,t,r,s){var n=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-n:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-n,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function vk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function IH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vk(Object(r),!0).forEach(function(s){zH(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function zH(e,t,r){return(t=$H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $H(e){var t=LH(e,"string");return typeof t=="symbol"?t:t+""}function LH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ya(e,t){var r=IH({},e),s=t,n=Object.keys(t),i=n.reduce((l,d)=>(l[d]===void 0&&s[d]!==void 0&&(l[d]=s[d]),l),r);return i}var cb={},db={},ub={},yk;function BH(){return yk||(yk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const s=Object.getPrototypeOf(r);return s===null||s===Object.prototype||Object.getPrototypeOf(s)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t})(ub)),ub}var wk;function UH(){return wk||(wk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BH(),r=zO(),s=dw(),n=uw(),i=lw();function l(h,m,p){return d(h,m,void 0,void 0,void 0,void 0,p)}function d(h,m,p,x,b,y,v){const w=v(h,m,p,x,b,y);if(w!==void 0)return w;if(typeof h==typeof m)switch(typeof h){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return h===m;case"number":return h===m||Object.is(h,m);case"function":return h===m;case"object":return u(h,m,y,v)}return u(h,m,y,v)}function u(h,m,p,x){if(Object.is(h,m))return!0;let b=s.getTag(h),y=s.getTag(m);if(b===n.argumentsTag&&(b=n.objectTag),y===n.argumentsTag&&(y=n.objectTag),b!==y)return!1;switch(b){case n.stringTag:return h.toString()===m.toString();case n.numberTag:{const N=h.valueOf(),S=m.valueOf();return i.eq(N,S)}case n.booleanTag:case n.dateTag:case n.symbolTag:return Object.is(h.valueOf(),m.valueOf());case n.regexpTag:return h.source===m.source&&h.flags===m.flags;case n.functionTag:return h===m}p=p??new Map;const v=p.get(h),w=p.get(m);if(v!=null&&w!=null)return v===m;p.set(h,m),p.set(m,h);try{switch(b){case n.mapTag:{if(h.size!==m.size)return!1;for(const[N,S]of h.entries())if(!m.has(N)||!d(S,m.get(N),N,h,m,p,x))return!1;return!0}case n.setTag:{if(h.size!==m.size)return!1;const N=Array.from(h.values()),S=Array.from(m.values());for(let j=0;j<N.length;j++){const k=N[j],A=S.findIndex(O=>d(k,O,void 0,h,m,p,x));if(A===-1)return!1;S.splice(A,1)}return!0}case n.arrayTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:case n.bigUint64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.bigInt64ArrayTag:case n.float32ArrayTag:case n.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(h)!==Buffer.isBuffer(m)||h.length!==m.length)return!1;for(let N=0;N<h.length;N++)if(!d(h[N],m[N],N,h,m,p,x))return!1;return!0}case n.arrayBufferTag:return h.byteLength!==m.byteLength?!1:u(new Uint8Array(h),new Uint8Array(m),p,x);case n.dataViewTag:return h.byteLength!==m.byteLength||h.byteOffset!==m.byteOffset?!1:u(new Uint8Array(h),new Uint8Array(m),p,x);case n.errorTag:return h.name===m.name&&h.message===m.message;case n.objectTag:{if(!(u(h.constructor,m.constructor,p,x)||t.isPlainObject(h)&&t.isPlainObject(m)))return!1;const S=[...Object.keys(h),...r.getSymbols(h)],j=[...Object.keys(m),...r.getSymbols(m)];if(S.length!==j.length)return!1;for(let k=0;k<S.length;k++){const A=S[k],O=h[A];if(!Object.hasOwn(m,A))return!1;const T=m[A];if(!d(O,T,A,h,m,p,x))return!1}return!0}default:return!1}}finally{p.delete(h),p.delete(m)}}e.isEqualWith=l})(db)),db}var hb={},jk;function qH(){return jk||(jk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t})(hb)),hb}var Nk;function FH(){return Nk||(Nk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UH(),r=qH();function s(n,i){return t.isEqualWith(n,i,r.noop)}e.isEqual=s})(cb)),cb}var fb,_k;function HH(){return _k||(_k=1,fb=FH().isEqual),fb}var VH=HH();const GH=js(VH);var pm=1e-4,O3=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],T3=(e,t)=>e.map((r,s)=>r*t**s).reduce((r,s)=>r+s),Sk=(e,t)=>r=>{var s=O3(e,t);return T3(s,r)},KH=(e,t)=>r=>{var s=O3(e,t),n=[...s.map((i,l)=>i*l).slice(1),0];return T3(n,r)},Ek=function(){for(var t,r,s,n,i=arguments.length,l=new Array(i),d=0;d<i;d++)l[d]=arguments[d];if(l.length===1)switch(l[0]){case"linear":[t,s,r,n]=[0,0,1,1];break;case"ease":[t,s,r,n]=[.25,.1,.25,1];break;case"ease-in":[t,s,r,n]=[.42,0,1,1];break;case"ease-out":[t,s,r,n]=[.42,0,.58,1];break;case"ease-in-out":[t,s,r,n]=[0,0,.58,1];break;default:{var u=l[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([t,s,r,n]=u[1].split(")")[0].split(",").map(y=>parseFloat(y)))}}else l.length===4&&([t,s,r,n]=l);var h=Sk(t,r),m=Sk(s,n),p=KH(t,r),x=y=>y>1?1:y<0?0:y,b=y=>{for(var v=y>1?1:y,w=v,N=0;N<8;++N){var S=h(w)-v,j=p(w);if(Math.abs(S-v)<pm||j<pm)return m(w);w=x(w-S/j)}return m(w)};return b.isStepper=!1,b},WH=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:s=8,dt:n=17}=t,i=(l,d,u)=>{var h=-(l-d)*r,m=u*s,p=u+(h-m)*n/1e3,x=u*n/1e3+l;return Math.abs(x-d)<pm&&Math.abs(p)<pm?[d,0]:[x,p]};return i.isStepper=!0,i.dt=n,i},P3=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Ek(e);case"spring":return WH();default:if(e.split("(")[0]==="cubic-bezier")return Ek(e)}return typeof e=="function"?e:null};function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Ck(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kk(Object(r),!0).forEach(function(s){YH(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function YH(e,t,r){return(t=XH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XH(e){var t=JH(e,"string");return typeof t=="symbol"?t:t+""}function JH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZH=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),QH=(e,t,r)=>e.map(s=>"".concat(ZH(s)," ").concat(t,"ms ").concat(r)).join(","),eV=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,s)=>r.filter(n=>s.includes(n))),lu=(e,t)=>Object.keys(t).reduce((r,s)=>Ck(Ck({},r),{},{[s]:e(s,t[s])}),{});function Ak(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ak(Object(r),!0).forEach(function(s){tV(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ak(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function tV(e,t,r){return(t=rV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rV(e){var t=aV(e,"string");return typeof t=="symbol"?t:t+""}function aV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gm=(e,t,r)=>e+(t-e)*r,Wv=e=>{var{from:t,to:r}=e;return t!==r},R3=(e,t,r)=>{var s=lu((n,i)=>{if(Wv(i)){var[l,d]=e(i.from,i.to,i.velocity);return Vr(Vr({},i),{},{from:l,velocity:d})}return i},t);return r<1?lu((n,i)=>Wv(i)?Vr(Vr({},i),{},{velocity:gm(i.velocity,s[n].velocity,r),from:gm(i.from,s[n].from,r)}):i,t):R3(e,s,r-1)};function sV(e,t,r,s,n,i){var l,d=s.reduce((x,b)=>Vr(Vr({},x),{},{[b]:{from:e[b],velocity:0,to:t[b]}}),{}),u=()=>lu((x,b)=>b.from,d),h=()=>!Object.values(d).filter(Wv).length,m=null,p=x=>{l||(l=x);var b=x-l,y=b/r.dt;d=R3(r,d,y),n(Vr(Vr(Vr({},e),t),u())),l=x,h()||(m=i.setTimeout(p))};return()=>(m=i.setTimeout(p),()=>{m()})}function nV(e,t,r,s,n,i,l){var d=null,u=n.reduce((p,x)=>Vr(Vr({},p),{},{[x]:[e[x],t[x]]}),{}),h,m=p=>{h||(h=p);var x=(p-h)/s,b=lu((v,w)=>gm(...w,r(x)),u);if(i(Vr(Vr(Vr({},e),t),b)),x<1)d=l.setTimeout(m);else{var y=lu((v,w)=>gm(...w,r(1)),u);i(Vr(Vr(Vr({},e),t),y))}};return()=>(d=l.setTimeout(m),()=>{d()})}const D3=(e,t,r,s,n,i)=>{var l=eV(e,t);return r.isStepper===!0?sV(e,t,r,l,n,i):nV(e,t,r,s,l,n,i)};function iV(e){var t,r=()=>null,s=!1,n=null,i=l=>{if(!s){if(Array.isArray(l)){if(!l.length)return;var d=l,[u,...h]=d;if(typeof u=="number"){n=e.setTimeout(i.bind(null,h),u);return}i(u),n=e.setTimeout(i.bind(null,h));return}typeof l=="string"&&(t=l,r(t)),typeof l=="object"&&(t=l,r(t)),typeof l=="function"&&l()}};return{stop:()=>{s=!0},start:l=>{s=!1,n&&(n(),n=null),i(l)},subscribe:l=>(r=l,()=>{r=()=>null}),getTimeoutController:()=>e}}class oV{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),n=null,i=l=>{l-s>=r?t(l):typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{cancelAnimationFrame(n)}}}function lV(){return iV(new oV)}var cV=_.createContext(lV);function M3(e,t){var r=_.useContext(cV);return _.useMemo(()=>t??r(e),[e,t,r])}var dV=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Yv.apply(null,arguments)}function uV(e,t){if(e==null)return{};var r,s,n=hV(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function hV(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function xi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ok(Object(r),!0).forEach(function(s){Eo(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ok(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Eo(e,t,r){return(t=fV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fV(e){var t=mV(e,"string");return typeof t=="symbol"?t:t+""}function mV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class _w extends _.PureComponent{constructor(t,r){super(t,r),Eo(this,"mounted",!1),Eo(this,"manager",void 0),Eo(this,"stopJSAnimation",null),Eo(this,"unSubscribe",null);var{isActive:s,attributeName:n,from:i,to:l,children:d,duration:u,animationManager:h}=this.props;if(this.manager=h,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!s||u<=0){this.state={style:{}},typeof d=="function"&&(this.state={style:l});return}if(i){if(typeof d=="function"){this.state={style:i};return}this.state={style:n?{[n]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:s,attributeName:n,shouldReAnimate:i,to:l,from:d}=this.props,{style:u}=this.state;if(s){if(!r){var h={style:n?{[n]:l}:l};this.state&&u&&(n&&u[n]!==l||!n&&u!==l)&&this.setState(h);return}if(!(GH(t.to,l)&&t.canBegin&&t.isActive)){var m=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||i?d:t.to;if(this.state&&u){var x={style:n?{[n]:p}:p};(n&&u[n]!==p||!n&&u!==p)&&this.setState(x)}this.runAnimation(xi(xi({},this.props),{},{from:p,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:s,duration:n,easing:i,begin:l,onAnimationEnd:d,onAnimationStart:u}=t,h=D3(r,s,P3(i),n,this.changeStyle,this.manager.getTimeoutController()),m=()=>{this.stopJSAnimation=h()};this.manager.start([u,l,m,n,d])}runAnimation(t){var{begin:r,duration:s,attributeName:n,to:i,easing:l,onAnimationStart:d,onAnimationEnd:u,children:h}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof l=="function"||typeof h=="function"||l==="spring"){this.runJSAnimation(t);return}var m=n?{[n]:i}:i,p=QH(Object.keys(m),s,l);this.manager.start([d,r,xi(xi({},m),{},{transition:p}),s,u])}render(){var t=this.props,{children:r,begin:s,duration:n,attributeName:i,easing:l,isActive:d,from:u,to:h,canBegin:m,onAnimationEnd:p,shouldReAnimate:x,onAnimationReStart:b,animationManager:y}=t,v=uV(t,dV),w=_.Children.count(r),N=this.state.style;if(typeof r=="function")return r(N);if(!d||w===0||n<=0)return r;var S=j=>{var{style:k={},className:A}=j.props,O=_.cloneElement(j,xi(xi({},v),{},{style:xi(xi({},k),N),className:A}));return O};return w===1?S(_.Children.only(r)):_.createElement("div",null,_.Children.map(r,j=>S(j)))}}Eo(_w,"displayName","Animate");Eo(_w,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function xm(e){var t,r=M3((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return _.createElement(_w,Yv({},e,{animationManager:r}))}function bm(){return bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},bm.apply(null,arguments)}var Tk=(e,t,r,s,n)=>{var i=Math.min(Math.abs(r)/2,Math.abs(s)/2),l=s>=0?1:-1,d=r>=0?1:-1,u=s>=0&&r>=0||s<0&&r<0?1:0,h;if(i>0&&n instanceof Array){for(var m=[0,0,0,0],p=0,x=4;p<x;p++)m[p]=n[p]>i?i:n[p];h="M".concat(e,",").concat(t+l*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(e+d*m[0],",").concat(t)),h+="L ".concat(e+r-d*m[1],",").concat(t),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(t+l*m[1])),h+="L ".concat(e+r,",").concat(t+s-l*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(e+r-d*m[2],",").concat(t+s)),h+="L ".concat(e+d*m[3],",").concat(t+s),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(t+s-l*m[3])),h+="Z"}else if(i>0&&n===+n&&n>0){var b=Math.min(i,n);h="M ".concat(e,",").concat(t+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+d*b,",").concat(t,`
            L `).concat(e+r-d*b,",").concat(t,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r,",").concat(t+l*b,`
            L `).concat(e+r,",").concat(t+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e+r-d*b,",").concat(t+s,`
            L `).concat(e+d*b,",").concat(t+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(e,",").concat(t+s-l*b," Z")}else h="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return h},pV={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},I3=e=>{var t=Ya(e,pV),r=_.useRef(null),[s,n]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&n(N)}catch{}},[]);var{x:i,y:l,width:d,height:u,radius:h,className:m}=t,{animationEasing:p,animationDuration:x,animationBegin:b,isAnimationActive:y,isUpdateAnimationActive:v}=t;if(i!==+i||l!==+l||d!==+d||u!==+u||d===0||u===0)return null;var w=ht("recharts-rectangle",m);return v?_.createElement(xm,{canBegin:s>0,from:{width:d,height:u,x:i,y:l},to:{width:d,height:u,x:i,y:l},duration:x,animationEasing:p,isActive:v},N=>{var{width:S,height:j,x:k,y:A}=N;return _.createElement(xm,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,isActive:y,easing:p},_.createElement("path",bm({},Vt(t,!0),{className:w,d:Tk(k,A,S,j,h),ref:r})))}):_.createElement("path",bm({},Vt(t,!0),{className:w,d:Tk(i,l,d,u,h)}))};function z3(e){var{cx:t,cy:r,radius:s,startAngle:n,endAngle:i}=e,l=fr(t,r,s,n),d=fr(t,r,s,i);return{points:[l,d],cx:t,cy:r,radius:s,startAngle:n,endAngle:i}}function Xv(){return Xv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Xv.apply(null,arguments)}var gV=(e,t)=>{var r=Ir(t-e),s=Math.min(Math.abs(t-e),359.999);return r*s},jf=e=>{var{cx:t,cy:r,radius:s,angle:n,sign:i,isExternal:l,cornerRadius:d,cornerIsExternal:u}=e,h=d*(l?1:-1)+s,m=Math.asin(d/h)/mm,p=u?n:n+i*m,x=fr(t,r,h,p),b=fr(t,r,s,p),y=u?n-i*m:n,v=fr(t,r,h*Math.cos(m*mm),y);return{center:x,circleTangency:b,lineTangency:v,theta:m}},$3=e=>{var{cx:t,cy:r,innerRadius:s,outerRadius:n,startAngle:i,endAngle:l}=e,d=gV(i,l),u=i+d,h=fr(t,r,n,i),m=fr(t,r,n,u),p="M ".concat(h.x,",").concat(h.y,`
    A `).concat(n,",").concat(n,`,0,
    `).concat(+(Math.abs(d)>180),",").concat(+(i>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(s>0){var x=fr(t,r,s,i),b=fr(t,r,s,u);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(d)>180),",").concat(+(i<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else p+="L ".concat(t,",").concat(r," Z");return p},xV=e=>{var{cx:t,cy:r,innerRadius:s,outerRadius:n,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:d,startAngle:u,endAngle:h}=e,m=Ir(h-u),{circleTangency:p,lineTangency:x,theta:b}=jf({cx:t,cy:r,radius:n,angle:u,sign:m,cornerRadius:i,cornerIsExternal:d}),{circleTangency:y,lineTangency:v,theta:w}=jf({cx:t,cy:r,radius:n,angle:h,sign:-m,cornerRadius:i,cornerIsExternal:d}),N=d?Math.abs(u-h):Math.abs(u-h)-b-w;if(N<0)return l?"M ".concat(x.x,",").concat(x.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):$3({cx:t,cy:r,innerRadius:s,outerRadius:n,startAngle:u,endAngle:h});var S="M ".concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(n,",").concat(n,",0,").concat(+(N>180),",").concat(+(m<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(v.x,",").concat(v.y,`
  `);if(s>0){var{circleTangency:j,lineTangency:k,theta:A}=jf({cx:t,cy:r,radius:s,angle:u,sign:m,isExternal:!0,cornerRadius:i,cornerIsExternal:d}),{circleTangency:O,lineTangency:T,theta:D}=jf({cx:t,cy:r,radius:s,angle:h,sign:-m,isExternal:!0,cornerRadius:i,cornerIsExternal:d}),R=d?Math.abs(u-h):Math.abs(u-h)-A-D;if(R<0&&i===0)return"".concat(S,"L").concat(t,",").concat(r,"Z");S+="L".concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(R>180),",").concat(+(m>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(m<0),",").concat(k.x,",").concat(k.y,"Z")}else S+="L".concat(t,",").concat(r,"Z");return S},bV={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},L3=e=>{var t=Ya(e,bV),{cx:r,cy:s,innerRadius:n,outerRadius:i,cornerRadius:l,forceCornerRadius:d,cornerIsExternal:u,startAngle:h,endAngle:m,className:p}=t;if(i<n||h===m)return null;var x=ht("recharts-sector",p),b=i-n,y=ca(l,b,0,!0),v;return y>0&&Math.abs(h-m)<360?v=xV({cx:r,cy:s,innerRadius:n,outerRadius:i,cornerRadius:Math.min(y,b/2),forceCornerRadius:d,cornerIsExternal:u,startAngle:h,endAngle:m}):v=$3({cx:r,cy:s,innerRadius:n,outerRadius:i,startAngle:h,endAngle:m}),_.createElement("path",Xv({},Vt(t,!0),{className:x,d:v}))};function vV(e,t,r){var s,n,i,l;if(e==="horizontal")s=t.x,i=s,n=r.top,l=r.top+r.height;else if(e==="vertical")n=t.y,l=n,s=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:d,cy:u,innerRadius:h,outerRadius:m,angle:p}=t,x=fr(d,u,h,p),b=fr(d,u,m,p);s=x.x,n=x.y,i=b.x,l=b.y}else return z3(t);return[{x:s,y:n},{x:i,y:l}]}var mb={},pb={},gb={},Pk;function yV(){return Pk||(Pk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qO();function r(s){return t.isSymbol(s)?NaN:Number(s)}e.toNumber=r})(gb)),gb}var Rk;function wV(){return Rk||(Rk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yV();function r(s){return s?(s=t.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}e.toFinite=r})(pb)),pb}var Dk;function jV(){return Dk||(Dk=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FO(),r=wV();function s(n,i,l){l&&typeof l!="number"&&t.isIterateeCall(n,i,l)&&(i=l=void 0),n=r.toFinite(n),i===void 0?(i=n,n=0):i=r.toFinite(i),l=l===void 0?n<i?1:-1:r.toFinite(l);const d=Math.max(Math.ceil((i-n)/(l||1)),0),u=new Array(d);for(let h=0;h<d;h++)u[h]=n,n+=l;return u}e.range=s})(mb)),mb}var xb,Mk;function NV(){return Mk||(Mk=1,xb=jV().range),xb}var _V=NV();const B3=js(_V);function Ci(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function SV(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sw(e){let t,r,s;e.length!==2?(t=Ci,r=(d,u)=>Ci(e(d),u),s=(d,u)=>e(d)-u):(t=e===Ci||e===SV?e:EV,r=e,s=e);function n(d,u,h=0,m=d.length){if(h<m){if(t(u,u)!==0)return m;do{const p=h+m>>>1;r(d[p],u)<0?h=p+1:m=p}while(h<m)}return h}function i(d,u,h=0,m=d.length){if(h<m){if(t(u,u)!==0)return m;do{const p=h+m>>>1;r(d[p],u)<=0?h=p+1:m=p}while(h<m)}return h}function l(d,u,h=0,m=d.length){const p=n(d,u,h,m-1);return p>h&&s(d[p-1],u)>-s(d[p],u)?p-1:p}return{left:n,center:l,right:i}}function EV(){return 0}function U3(e){return e===null?NaN:+e}function*kV(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const CV=Sw(Ci),Pu=CV.right;Sw(U3).center;class Ik extends Map{constructor(t,r=TV){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,n]of t)this.set(s,n)}get(t){return super.get(zk(this,t))}has(t){return super.has(zk(this,t))}set(t,r){return super.set(AV(this,t),r)}delete(t){return super.delete(OV(this,t))}}function zk({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function AV({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function OV({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function TV(e){return e!==null&&typeof e=="object"?e.valueOf():e}function PV(e=Ci){if(e===Ci)return q3;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function q3(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const RV=Math.sqrt(50),DV=Math.sqrt(10),MV=Math.sqrt(2);function vm(e,t,r){const s=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(s)),i=s/Math.pow(10,n),l=i>=RV?10:i>=DV?5:i>=MV?2:1;let d,u,h;return n<0?(h=Math.pow(10,-n)/l,d=Math.round(e*h),u=Math.round(t*h),d/h<e&&++d,u/h>t&&--u,h=-h):(h=Math.pow(10,n)*l,d=Math.round(e/h),u=Math.round(t/h),d*h<e&&++d,u*h>t&&--u),u<d&&.5<=r&&r<2?vm(e,t,r*2):[d,u,h]}function Jv(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[n,i,l]=s?vm(t,e,r):vm(e,t,r);if(!(i>=n))return[];const d=i-n+1,u=new Array(d);if(s)if(l<0)for(let h=0;h<d;++h)u[h]=(i-h)/-l;else for(let h=0;h<d;++h)u[h]=(i-h)*l;else if(l<0)for(let h=0;h<d;++h)u[h]=(n+h)/-l;else for(let h=0;h<d;++h)u[h]=(n+h)*l;return u}function Zv(e,t,r){return t=+t,e=+e,r=+r,vm(e,t,r)[2]}function Qv(e,t,r){t=+t,e=+e,r=+r;const s=t<e,n=s?Zv(t,e,r):Zv(e,t,r);return(s?-1:1)*(n<0?1/-n:n)}function $k(e,t){let r;for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function Lk(e,t){let r;for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function F3(e,t,r=0,s=1/0,n){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(n=n===void 0?q3:PV(n);s>r;){if(s-r>600){const u=s-r+1,h=t-r+1,m=Math.log(u),p=.5*Math.exp(2*m/3),x=.5*Math.sqrt(m*p*(u-p)/u)*(h-u/2<0?-1:1),b=Math.max(r,Math.floor(t-h*p/u+x)),y=Math.min(s,Math.floor(t+(u-h)*p/u+x));F3(e,t,b,y,n)}const i=e[t];let l=r,d=s;for(Rd(e,r,t),n(e[s],i)>0&&Rd(e,r,s);l<d;){for(Rd(e,l,d),++l,--d;n(e[l],i)<0;)++l;for(;n(e[d],i)>0;)--d}n(e[r],i)===0?Rd(e,r,d):(++d,Rd(e,d,s)),d<=t&&(r=d+1),t<=d&&(s=d-1)}return e}function Rd(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function IV(e,t,r){if(e=Float64Array.from(kV(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return Lk(e);if(t>=1)return $k(e);var s,n=(s-1)*t,i=Math.floor(n),l=$k(F3(e,i).subarray(0,i+1)),d=Lk(e.subarray(i+1));return l+(d-l)*(n-i)}}function zV(e,t,r=U3){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,n=(s-1)*t,i=Math.floor(n),l=+r(e[i],i,e),d=+r(e[i+1],i+1,e);return l+(d-l)*(n-i)}}function $V(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var s=-1,n=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(n);++s<n;)i[s]=e+s*r;return i}function _s(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hn(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ey=Symbol("implicit");function Ew(){var e=new Ik,t=[],r=[],s=ey;function n(i){let l=e.get(i);if(l===void 0){if(s!==ey)return s;e.set(i,l=t.push(i)-1)}return r[l%r.length]}return n.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Ik;for(const l of i)e.has(l)||e.set(l,t.push(l)-1);return n},n.range=function(i){return arguments.length?(r=Array.from(i),n):r.slice()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return Ew(t,r).unknown(s)},_s.apply(n,arguments),n}function kw(){var e=Ew().unknown(void 0),t=e.domain,r=e.range,s=0,n=1,i,l,d=!1,u=0,h=0,m=.5;delete e.unknown;function p(){var x=t().length,b=n<s,y=b?n:s,v=b?s:n;i=(v-y)/Math.max(1,x-u+h*2),d&&(i=Math.floor(i)),y+=(v-y-i*(x-u))*m,l=i*(1-u),d&&(y=Math.round(y),l=Math.round(l));var w=$V(x).map(function(N){return y+i*N});return r(b?w.reverse():w)}return e.domain=function(x){return arguments.length?(t(x),p()):t()},e.range=function(x){return arguments.length?([s,n]=x,s=+s,n=+n,p()):[s,n]},e.rangeRound=function(x){return[s,n]=x,s=+s,n=+n,d=!0,p()},e.bandwidth=function(){return l},e.step=function(){return i},e.round=function(x){return arguments.length?(d=!!x,p()):d},e.padding=function(x){return arguments.length?(u=Math.min(1,h=+x),p()):u},e.paddingInner=function(x){return arguments.length?(u=Math.min(1,x),p()):u},e.paddingOuter=function(x){return arguments.length?(h=+x,p()):h},e.align=function(x){return arguments.length?(m=Math.max(0,Math.min(1,x)),p()):m},e.copy=function(){return kw(t(),[s,n]).round(d).paddingInner(u).paddingOuter(h).align(m)},_s.apply(p(),arguments)}function H3(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return H3(t())},e}function LV(){return H3(kw.apply(null,arguments).paddingInner(1))}function Cw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function V3(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function Ru(){}var cu=.7,ym=1/cu,Vl="\\s*([+-]?\\d+)\\s*",du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",BV=/^#([0-9a-f]{3,8})$/,UV=new RegExp(`^rgb\\(${Vl},${Vl},${Vl}\\)$`),qV=new RegExp(`^rgb\\(${Xs},${Xs},${Xs}\\)$`),FV=new RegExp(`^rgba\\(${Vl},${Vl},${Vl},${du}\\)$`),HV=new RegExp(`^rgba\\(${Xs},${Xs},${Xs},${du}\\)$`),VV=new RegExp(`^hsl\\(${du},${Xs},${Xs}\\)$`),GV=new RegExp(`^hsla\\(${du},${Xs},${Xs},${du}\\)$`),Bk={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cw(Ru,uu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Uk,formatHex:Uk,formatHex8:KV,formatHsl:WV,formatRgb:qk,toString:qk});function Uk(){return this.rgb().formatHex()}function KV(){return this.rgb().formatHex8()}function WV(){return G3(this).formatHsl()}function qk(){return this.rgb().formatRgb()}function uu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=BV.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Fk(t):r===3?new ja(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Nf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Nf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=UV.exec(e))?new ja(t[1],t[2],t[3],1):(t=qV.exec(e))?new ja(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=FV.exec(e))?Nf(t[1],t[2],t[3],t[4]):(t=HV.exec(e))?Nf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=VV.exec(e))?Gk(t[1],t[2]/100,t[3]/100,1):(t=GV.exec(e))?Gk(t[1],t[2]/100,t[3]/100,t[4]):Bk.hasOwnProperty(e)?Fk(Bk[e]):e==="transparent"?new ja(NaN,NaN,NaN,0):null}function Fk(e){return new ja(e>>16&255,e>>8&255,e&255,1)}function Nf(e,t,r,s){return s<=0&&(e=t=r=NaN),new ja(e,t,r,s)}function YV(e){return e instanceof Ru||(e=uu(e)),e?(e=e.rgb(),new ja(e.r,e.g,e.b,e.opacity)):new ja}function ty(e,t,r,s){return arguments.length===1?YV(e):new ja(e,t,r,s??1)}function ja(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}Cw(ja,ty,V3(Ru,{brighter(e){return e=e==null?ym:Math.pow(ym,e),new ja(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?cu:Math.pow(cu,e),new ja(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ja(Mo(this.r),Mo(this.g),Mo(this.b),wm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Hk,formatHex:Hk,formatHex8:XV,formatRgb:Vk,toString:Vk}));function Hk(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}`}function XV(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}${ko((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vk(){const e=wm(this.opacity);return`${e===1?"rgb(":"rgba("}${Mo(this.r)}, ${Mo(this.g)}, ${Mo(this.b)}${e===1?")":`, ${e})`}`}function wm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ko(e){return e=Mo(e),(e<16?"0":"")+e.toString(16)}function Gk(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Rs(e,t,r,s)}function G3(e){if(e instanceof Rs)return new Rs(e.h,e.s,e.l,e.opacity);if(e instanceof Ru||(e=uu(e)),!e)return new Rs;if(e instanceof Rs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,n=Math.min(t,r,s),i=Math.max(t,r,s),l=NaN,d=i-n,u=(i+n)/2;return d?(t===i?l=(r-s)/d+(r<s)*6:r===i?l=(s-t)/d+2:l=(t-r)/d+4,d/=u<.5?i+n:2-i-n,l*=60):d=u>0&&u<1?0:l,new Rs(l,d,u,e.opacity)}function JV(e,t,r,s){return arguments.length===1?G3(e):new Rs(e,t,r,s??1)}function Rs(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}Cw(Rs,JV,V3(Ru,{brighter(e){return e=e==null?ym:Math.pow(ym,e),new Rs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?cu:Math.pow(cu,e),new Rs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,n=2*r-s;return new ja(bb(e>=240?e-240:e+120,n,s),bb(e,n,s),bb(e<120?e+240:e-120,n,s),this.opacity)},clamp(){return new Rs(Kk(this.h),_f(this.s),_f(this.l),wm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wm(this.opacity);return`${e===1?"hsl(":"hsla("}${Kk(this.h)}, ${_f(this.s)*100}%, ${_f(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kk(e){return e=(e||0)%360,e<0?e+360:e}function _f(e){return Math.max(0,Math.min(1,e||0))}function bb(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Aw=e=>()=>e;function ZV(e,t){return function(r){return e+r*t}}function QV(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function eG(e){return(e=+e)==1?K3:function(t,r){return r-t?QV(t,r,e):Aw(isNaN(t)?r:t)}}function K3(e,t){var r=t-e;return r?ZV(e,r):Aw(isNaN(e)?t:e)}const Wk=(function e(t){var r=eG(t);function s(n,i){var l=r((n=ty(n)).r,(i=ty(i)).r),d=r(n.g,i.g),u=r(n.b,i.b),h=K3(n.opacity,i.opacity);return function(m){return n.r=l(m),n.g=d(m),n.b=u(m),n.opacity=h(m),n+""}}return s.gamma=e,s})(1);function tG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),n;return function(i){for(n=0;n<r;++n)s[n]=e[n]*(1-i)+t[n]*i;return s}}function rG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aG(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,n=new Array(s),i=new Array(r),l;for(l=0;l<s;++l)n[l]=bc(e[l],t[l]);for(;l<r;++l)i[l]=t[l];return function(d){for(l=0;l<s;++l)i[l]=n[l](d);return i}}function sG(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function jm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function nG(e,t){var r={},s={},n;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(n in t)n in e?r[n]=bc(e[n],t[n]):s[n]=t[n];return function(i){for(n in r)s[n]=r[n](i);return s}}var ry=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vb=new RegExp(ry.source,"g");function iG(e){return function(){return e}}function oG(e){return function(t){return e(t)+""}}function lG(e,t){var r=ry.lastIndex=vb.lastIndex=0,s,n,i,l=-1,d=[],u=[];for(e=e+"",t=t+"";(s=ry.exec(e))&&(n=vb.exec(t));)(i=n.index)>r&&(i=t.slice(r,i),d[l]?d[l]+=i:d[++l]=i),(s=s[0])===(n=n[0])?d[l]?d[l]+=n:d[++l]=n:(d[++l]=null,u.push({i:l,x:jm(s,n)})),r=vb.lastIndex;return r<t.length&&(i=t.slice(r),d[l]?d[l]+=i:d[++l]=i),d.length<2?u[0]?oG(u[0].x):iG(t):(t=u.length,function(h){for(var m=0,p;m<t;++m)d[(p=u[m]).i]=p.x(h);return d.join("")})}function bc(e,t){var r=typeof t,s;return t==null||r==="boolean"?Aw(t):(r==="number"?jm:r==="string"?(s=uu(t))?(t=s,Wk):lG:t instanceof uu?Wk:t instanceof Date?sG:rG(t)?tG:Array.isArray(t)?aG:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?nG:jm)(e,t)}function Ow(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function cG(e,t){t===void 0&&(t=e,e=bc);for(var r=0,s=t.length-1,n=t[0],i=new Array(s<0?0:s);r<s;)i[r]=e(n,n=t[++r]);return function(l){var d=Math.max(0,Math.min(s-1,Math.floor(l*=s)));return i[d](l-d)}}function dG(e){return function(){return e}}function Nm(e){return+e}var Yk=[0,1];function la(e){return e}function ay(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:dG(isNaN(t)?NaN:.5)}function uG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function hG(e,t,r){var s=e[0],n=e[1],i=t[0],l=t[1];return n<s?(s=ay(n,s),i=r(l,i)):(s=ay(s,n),i=r(i,l)),function(d){return i(s(d))}}function fG(e,t,r){var s=Math.min(e.length,t.length)-1,n=new Array(s),i=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<s;)n[l]=ay(e[l],e[l+1]),i[l]=r(t[l],t[l+1]);return function(d){var u=Pu(e,d,1,s)-1;return i[u](n[u](d))}}function Du(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function gp(){var e=Yk,t=Yk,r=bc,s,n,i,l=la,d,u,h;function m(){var x=Math.min(e.length,t.length);return l!==la&&(l=uG(e[0],e[x-1])),d=x>2?fG:hG,u=h=null,p}function p(x){return x==null||isNaN(x=+x)?i:(u||(u=d(e.map(s),t,r)))(s(l(x)))}return p.invert=function(x){return l(n((h||(h=d(t,e.map(s),jm)))(x)))},p.domain=function(x){return arguments.length?(e=Array.from(x,Nm),m()):e.slice()},p.range=function(x){return arguments.length?(t=Array.from(x),m()):t.slice()},p.rangeRound=function(x){return t=Array.from(x),r=Ow,m()},p.clamp=function(x){return arguments.length?(l=x?!0:la,m()):l!==la},p.interpolate=function(x){return arguments.length?(r=x,m()):r},p.unknown=function(x){return arguments.length?(i=x,p):i},function(x,b){return s=x,n=b,m()}}function Tw(){return gp()(la,la)}function mG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _m(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function nc(e){return e=_m(Math.abs(e)),e?e[1]:NaN}function pG(e,t){return function(r,s){for(var n=r.length,i=[],l=0,d=e[0],u=0;n>0&&d>0&&(u+d+1>s&&(d=Math.max(1,s-u)),i.push(r.substring(n-=d,n+d)),!((u+=d+1)>s));)d=e[l=(l+1)%e.length];return i.reverse().join(t)}}function gG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var xG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hu(e){if(!(t=xG.exec(e)))throw new Error("invalid format: "+e);var t;return new Pw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}hu.prototype=Pw.prototype;function Pw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Pw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bG(e){e:for(var t=e.length,r=1,s=-1,n;r<t;++r)switch(e[r]){case".":s=n=r;break;case"0":s===0&&(s=r),n=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(n+1):e}var W3;function vG(e,t){var r=_m(e,t);if(!r)return e+"";var s=r[0],n=r[1],i=n-(W3=Math.max(-8,Math.min(8,Math.floor(n/3)))*3)+1,l=s.length;return i===l?s:i>l?s+new Array(i-l+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+_m(e,Math.max(0,t+i-1))[0]}function Xk(e,t){var r=_m(e,t);if(!r)return e+"";var s=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+s:s.length>n+1?s.slice(0,n+1)+"."+s.slice(n+1):s+new Array(n-s.length+2).join("0")}const Jk={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:mG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Xk(e*100,t),r:Xk,s:vG,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Zk(e){return e}var Qk=Array.prototype.map,eC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function yG(e){var t=e.grouping===void 0||e.thousands===void 0?Zk:pG(Qk.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",n=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Zk:gG(Qk.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",d=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function h(p){p=hu(p);var x=p.fill,b=p.align,y=p.sign,v=p.symbol,w=p.zero,N=p.width,S=p.comma,j=p.precision,k=p.trim,A=p.type;A==="n"?(S=!0,A="g"):Jk[A]||(j===void 0&&(j=12),k=!0,A="g"),(w||x==="0"&&b==="=")&&(w=!0,x="0",b="=");var O=v==="$"?r:v==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",T=v==="$"?s:/[%p]/.test(A)?l:"",D=Jk[A],R=/[defgprs%]/.test(A);j=j===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function I(L){var $=O,W=T,P,U,K;if(A==="c")W=D(L)+W,L="";else{L=+L;var G=L<0||1/L<0;if(L=isNaN(L)?u:D(Math.abs(L),j),k&&(L=bG(L)),G&&+L==0&&y!=="+"&&(G=!1),$=(G?y==="("?y:d:y==="-"||y==="("?"":y)+$,W=(A==="s"?eC[8+W3/3]:"")+W+(G&&y==="("?")":""),R){for(P=-1,U=L.length;++P<U;)if(K=L.charCodeAt(P),48>K||K>57){W=(K===46?n+L.slice(P+1):L.slice(P))+W,L=L.slice(0,P);break}}}S&&!w&&(L=t(L,1/0));var Q=$.length+L.length+W.length,le=Q<N?new Array(N-Q+1).join(x):"";switch(S&&w&&(L=t(le+L,le.length?N-W.length:1/0),le=""),b){case"<":L=$+L+W+le;break;case"=":L=$+le+L+W;break;case"^":L=le.slice(0,Q=le.length>>1)+$+L+W+le.slice(Q);break;default:L=le+$+L+W;break}return i(L)}return I.toString=function(){return p+""},I}function m(p,x){var b=h((p=hu(p),p.type="f",p)),y=Math.max(-8,Math.min(8,Math.floor(nc(x)/3)))*3,v=Math.pow(10,-y),w=eC[8+y/3];return function(N){return b(v*N)+w}}return{format:h,formatPrefix:m}}var Sf,Rw,Y3;wG({thousands:",",grouping:[3],currency:["$",""]});function wG(e){return Sf=yG(e),Rw=Sf.format,Y3=Sf.formatPrefix,Sf}function jG(e){return Math.max(0,-nc(Math.abs(e)))}function NG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nc(t)/3)))*3-nc(Math.abs(e)))}function _G(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nc(t)-nc(e))+1}function X3(e,t,r,s){var n=Qv(e,t,r),i;switch(s=hu(s??",f"),s.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=NG(n,l))&&(s.precision=i),Y3(s,l)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=_G(n,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=jG(n))&&(s.precision=i-(s.type==="%")*2);break}}return Rw(s)}function Li(e){var t=e.domain;return e.ticks=function(r){var s=t();return Jv(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var n=t();return X3(n[0],n[n.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),n=0,i=s.length-1,l=s[n],d=s[i],u,h,m=10;for(d<l&&(h=l,l=d,d=h,h=n,n=i,i=h);m-- >0;){if(h=Zv(l,d,r),h===u)return s[n]=l,s[i]=d,t(s);if(h>0)l=Math.floor(l/h)*h,d=Math.ceil(d/h)*h;else if(h<0)l=Math.ceil(l*h)/h,d=Math.floor(d*h)/h;else break;u=h}return e},e}function J3(){var e=Tw();return e.copy=function(){return Du(e,J3())},_s.apply(e,arguments),Li(e)}function Z3(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,Nm),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return Z3(e).unknown(t)},e=arguments.length?Array.from(e,Nm):[0,1],Li(r)}function Q3(e,t){e=e.slice();var r=0,s=e.length-1,n=e[r],i=e[s],l;return i<n&&(l=r,r=s,s=l,l=n,n=i,i=l),e[r]=t.floor(n),e[s]=t.ceil(i),e}function tC(e){return Math.log(e)}function rC(e){return Math.exp(e)}function SG(e){return-Math.log(-e)}function EG(e){return-Math.exp(-e)}function kG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function CG(e){return e===10?kG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function AG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function aC(e){return(t,r)=>-e(-t,r)}function Dw(e){const t=e(tC,rC),r=t.domain;let s=10,n,i;function l(){return n=AG(s),i=CG(s),r()[0]<0?(n=aC(n),i=aC(i),e(SG,EG)):e(tC,rC),t}return t.base=function(d){return arguments.length?(s=+d,l()):s},t.domain=function(d){return arguments.length?(r(d),l()):r()},t.ticks=d=>{const u=r();let h=u[0],m=u[u.length-1];const p=m<h;p&&([h,m]=[m,h]);let x=n(h),b=n(m),y,v;const w=d==null?10:+d;let N=[];if(!(s%1)&&b-x<w){if(x=Math.floor(x),b=Math.ceil(b),h>0){for(;x<=b;++x)for(y=1;y<s;++y)if(v=x<0?y/i(-x):y*i(x),!(v<h)){if(v>m)break;N.push(v)}}else for(;x<=b;++x)for(y=s-1;y>=1;--y)if(v=x>0?y/i(-x):y*i(x),!(v<h)){if(v>m)break;N.push(v)}N.length*2<w&&(N=Jv(h,m,w))}else N=Jv(x,b,Math.min(b-x,w)).map(i);return p?N.reverse():N},t.tickFormat=(d,u)=>{if(d==null&&(d=10),u==null&&(u=s===10?"s":","),typeof u!="function"&&(!(s%1)&&(u=hu(u)).precision==null&&(u.trim=!0),u=Rw(u)),d===1/0)return u;const h=Math.max(1,s*d/t.ticks().length);return m=>{let p=m/i(Math.round(n(m)));return p*s<s-.5&&(p*=s),p<=h?u(m):""}},t.nice=()=>r(Q3(r(),{floor:d=>i(Math.floor(n(d))),ceil:d=>i(Math.ceil(n(d)))})),t}function e6(){const e=Dw(gp()).domain([1,10]);return e.copy=()=>Du(e,e6()).base(e.base()),_s.apply(e,arguments),e}function sC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function nC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Mw(e){var t=1,r=e(sC(t),nC(t));return r.constant=function(s){return arguments.length?e(sC(t=+s),nC(t)):t},Li(r)}function t6(){var e=Mw(gp());return e.copy=function(){return Du(e,t6()).constant(e.constant())},_s.apply(e,arguments)}function iC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function OG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function TG(e){return e<0?-e*e:e*e}function Iw(e){var t=e(la,la),r=1;function s(){return r===1?e(la,la):r===.5?e(OG,TG):e(iC(r),iC(1/r))}return t.exponent=function(n){return arguments.length?(r=+n,s()):r},Li(t)}function zw(){var e=Iw(gp());return e.copy=function(){return Du(e,zw()).exponent(e.exponent())},_s.apply(e,arguments),e}function PG(){return zw.apply(null,arguments).exponent(.5)}function oC(e){return Math.sign(e)*e*e}function RG(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function r6(){var e=Tw(),t=[0,1],r=!1,s;function n(i){var l=RG(e(i));return isNaN(l)?s:r?Math.round(l):l}return n.invert=function(i){return e.invert(oC(i))},n.domain=function(i){return arguments.length?(e.domain(i),n):e.domain()},n.range=function(i){return arguments.length?(e.range((t=Array.from(i,Nm)).map(oC)),n):t.slice()},n.rangeRound=function(i){return n.range(i).round(!0)},n.round=function(i){return arguments.length?(r=!!i,n):r},n.clamp=function(i){return arguments.length?(e.clamp(i),n):e.clamp()},n.unknown=function(i){return arguments.length?(s=i,n):s},n.copy=function(){return r6(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},_s.apply(n,arguments),Li(n)}function a6(){var e=[],t=[],r=[],s;function n(){var l=0,d=Math.max(1,t.length);for(r=new Array(d-1);++l<d;)r[l-1]=zV(e,l/d);return i}function i(l){return l==null||isNaN(l=+l)?s:t[Pu(r,l)]}return i.invertExtent=function(l){var d=t.indexOf(l);return d<0?[NaN,NaN]:[d>0?r[d-1]:e[0],d<r.length?r[d]:e[e.length-1]]},i.domain=function(l){if(!arguments.length)return e.slice();e=[];for(let d of l)d!=null&&!isNaN(d=+d)&&e.push(d);return e.sort(Ci),n()},i.range=function(l){return arguments.length?(t=Array.from(l),n()):t.slice()},i.unknown=function(l){return arguments.length?(s=l,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return a6().domain(e).range(t).unknown(s)},_s.apply(i,arguments)}function s6(){var e=0,t=1,r=1,s=[.5],n=[0,1],i;function l(u){return u!=null&&u<=u?n[Pu(s,u,0,r)]:i}function d(){var u=-1;for(s=new Array(r);++u<r;)s[u]=((u+1)*t-(u-r)*e)/(r+1);return l}return l.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,d()):[e,t]},l.range=function(u){return arguments.length?(r=(n=Array.from(u)).length-1,d()):n.slice()},l.invertExtent=function(u){var h=n.indexOf(u);return h<0?[NaN,NaN]:h<1?[e,s[0]]:h>=r?[s[r-1],t]:[s[h-1],s[h]]},l.unknown=function(u){return arguments.length&&(i=u),l},l.thresholds=function(){return s.slice()},l.copy=function(){return s6().domain([e,t]).range(n).unknown(i)},_s.apply(Li(l),arguments)}function n6(){var e=[.5],t=[0,1],r,s=1;function n(i){return i!=null&&i<=i?t[Pu(e,i,0,s)]:r}return n.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),n):e.slice()},n.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),n):t.slice()},n.invertExtent=function(i){var l=t.indexOf(i);return[e[l-1],e[l]]},n.unknown=function(i){return arguments.length?(r=i,n):r},n.copy=function(){return n6().domain(e).range(t).unknown(r)},_s.apply(n,arguments)}const yb=new Date,wb=new Date;function Sr(e,t,r,s){function n(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return n.floor=i=>(e(i=new Date(+i)),i),n.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),n.round=i=>{const l=n(i),d=n.ceil(i);return i-l<d-i?l:d},n.offset=(i,l)=>(t(i=new Date(+i),l==null?1:Math.floor(l)),i),n.range=(i,l,d)=>{const u=[];if(i=n.ceil(i),d=d==null?1:Math.floor(d),!(i<l)||!(d>0))return u;let h;do u.push(h=new Date(+i)),t(i,d),e(i);while(h<i&&i<l);return u},n.filter=i=>Sr(l=>{if(l>=l)for(;e(l),!i(l);)l.setTime(l-1)},(l,d)=>{if(l>=l)if(d<0)for(;++d<=0;)for(;t(l,-1),!i(l););else for(;--d>=0;)for(;t(l,1),!i(l););}),r&&(n.count=(i,l)=>(yb.setTime(+i),wb.setTime(+l),e(yb),e(wb),Math.floor(r(yb,wb))),n.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?n.filter(s?l=>s(l)%i===0:l=>n.count(0,l)%i===0):n)),n}const Sm=Sr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Sm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Sr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Sm);Sm.range;const kn=1e3,gs=kn*60,Cn=gs*60,Mn=Cn*24,$w=Mn*7,lC=Mn*30,jb=Mn*365,Co=Sr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*kn)},(e,t)=>(t-e)/kn,e=>e.getUTCSeconds());Co.range;const Lw=Sr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kn)},(e,t)=>{e.setTime(+e+t*gs)},(e,t)=>(t-e)/gs,e=>e.getMinutes());Lw.range;const Bw=Sr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*gs)},(e,t)=>(t-e)/gs,e=>e.getUTCMinutes());Bw.range;const Uw=Sr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*kn-e.getMinutes()*gs)},(e,t)=>{e.setTime(+e+t*Cn)},(e,t)=>(t-e)/Cn,e=>e.getHours());Uw.range;const qw=Sr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Cn)},(e,t)=>(t-e)/Cn,e=>e.getUTCHours());qw.range;const Mu=Sr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*gs)/Mn,e=>e.getDate()-1);Mu.range;const xp=Sr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mn,e=>e.getUTCDate()-1);xp.range;const i6=Sr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Mn,e=>Math.floor(e/Mn));i6.range;function Vo(e){return Sr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*gs)/$w)}const bp=Vo(0),Em=Vo(1),DG=Vo(2),MG=Vo(3),ic=Vo(4),IG=Vo(5),zG=Vo(6);bp.range;Em.range;DG.range;MG.range;ic.range;IG.range;zG.range;function Go(e){return Sr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/$w)}const vp=Go(0),km=Go(1),$G=Go(2),LG=Go(3),oc=Go(4),BG=Go(5),UG=Go(6);vp.range;km.range;$G.range;LG.range;oc.range;BG.range;UG.range;const Fw=Sr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Fw.range;const Hw=Sr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Hw.range;const In=Sr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());In.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});In.range;const zn=Sr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());zn.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Sr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});zn.range;function o6(e,t,r,s,n,i){const l=[[Co,1,kn],[Co,5,5*kn],[Co,15,15*kn],[Co,30,30*kn],[i,1,gs],[i,5,5*gs],[i,15,15*gs],[i,30,30*gs],[n,1,Cn],[n,3,3*Cn],[n,6,6*Cn],[n,12,12*Cn],[s,1,Mn],[s,2,2*Mn],[r,1,$w],[t,1,lC],[t,3,3*lC],[e,1,jb]];function d(h,m,p){const x=m<h;x&&([h,m]=[m,h]);const b=p&&typeof p.range=="function"?p:u(h,m,p),y=b?b.range(h,+m+1):[];return x?y.reverse():y}function u(h,m,p){const x=Math.abs(m-h)/p,b=Sw(([,,w])=>w).right(l,x);if(b===l.length)return e.every(Qv(h/jb,m/jb,p));if(b===0)return Sm.every(Math.max(Qv(h,m,p),1));const[y,v]=l[x/l[b-1][2]<l[b][2]/x?b-1:b];return y.every(v)}return[d,u]}const[qG,FG]=o6(zn,Hw,vp,i6,qw,Bw),[HG,VG]=o6(In,Fw,bp,Mu,Uw,Lw);function Nb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function _b(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Dd(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function GG(e){var t=e.dateTime,r=e.date,s=e.time,n=e.periods,i=e.days,l=e.shortDays,d=e.months,u=e.shortMonths,h=Md(n),m=Id(n),p=Md(i),x=Id(i),b=Md(l),y=Id(l),v=Md(d),w=Id(d),N=Md(u),S=Id(u),j={a:G,A:Q,b:le,B:H,c:null,d:mC,e:mC,f:pK,g:SK,G:kK,H:hK,I:fK,j:mK,L:l6,m:gK,M:xK,p:V,q:B,Q:xC,s:bC,S:bK,u:vK,U:yK,V:wK,w:jK,W:NK,x:null,X:null,y:_K,Y:EK,Z:CK,"%":gC},k={a:ne,A:ie,b:ee,B:Z,c:null,d:pC,e:pC,f:PK,g:qK,G:HK,H:AK,I:OK,j:TK,L:d6,m:RK,M:DK,p:re,q:J,Q:xC,s:bC,S:MK,u:IK,U:zK,V:$K,w:LK,W:BK,x:null,X:null,y:UK,Y:FK,Z:VK,"%":gC},A={a:I,A:L,b:$,B:W,c:P,d:hC,e:hC,f:lK,g:uC,G:dC,H:fC,I:fC,j:sK,L:oK,m:aK,M:nK,p:R,q:rK,Q:dK,s:uK,S:iK,u:JG,U:ZG,V:QG,w:XG,W:eK,x:U,X:K,y:uC,Y:dC,Z:tK,"%":cK};j.x=O(r,j),j.X=O(s,j),j.c=O(t,j),k.x=O(r,k),k.X=O(s,k),k.c=O(t,k);function O(F,de){return function(_e){var se=[],Te=-1,M=0,xe=F.length,pe,X,Y;for(_e instanceof Date||(_e=new Date(+_e));++Te<xe;)F.charCodeAt(Te)===37&&(se.push(F.slice(M,Te)),(X=cC[pe=F.charAt(++Te)])!=null?pe=F.charAt(++Te):X=pe==="e"?" ":"0",(Y=de[pe])&&(pe=Y(_e,X)),se.push(pe),M=Te+1);return se.push(F.slice(M,Te)),se.join("")}}function T(F,de){return function(_e){var se=Dd(1900,void 0,1),Te=D(se,F,_e+="",0),M,xe;if(Te!=_e.length)return null;if("Q"in se)return new Date(se.Q);if("s"in se)return new Date(se.s*1e3+("L"in se?se.L:0));if(de&&!("Z"in se)&&(se.Z=0),"p"in se&&(se.H=se.H%12+se.p*12),se.m===void 0&&(se.m="q"in se?se.q:0),"V"in se){if(se.V<1||se.V>53)return null;"w"in se||(se.w=1),"Z"in se?(M=_b(Dd(se.y,0,1)),xe=M.getUTCDay(),M=xe>4||xe===0?km.ceil(M):km(M),M=xp.offset(M,(se.V-1)*7),se.y=M.getUTCFullYear(),se.m=M.getUTCMonth(),se.d=M.getUTCDate()+(se.w+6)%7):(M=Nb(Dd(se.y,0,1)),xe=M.getDay(),M=xe>4||xe===0?Em.ceil(M):Em(M),M=Mu.offset(M,(se.V-1)*7),se.y=M.getFullYear(),se.m=M.getMonth(),se.d=M.getDate()+(se.w+6)%7)}else("W"in se||"U"in se)&&("w"in se||(se.w="u"in se?se.u%7:"W"in se?1:0),xe="Z"in se?_b(Dd(se.y,0,1)).getUTCDay():Nb(Dd(se.y,0,1)).getDay(),se.m=0,se.d="W"in se?(se.w+6)%7+se.W*7-(xe+5)%7:se.w+se.U*7-(xe+6)%7);return"Z"in se?(se.H+=se.Z/100|0,se.M+=se.Z%100,_b(se)):Nb(se)}}function D(F,de,_e,se){for(var Te=0,M=de.length,xe=_e.length,pe,X;Te<M;){if(se>=xe)return-1;if(pe=de.charCodeAt(Te++),pe===37){if(pe=de.charAt(Te++),X=A[pe in cC?de.charAt(Te++):pe],!X||(se=X(F,_e,se))<0)return-1}else if(pe!=_e.charCodeAt(se++))return-1}return se}function R(F,de,_e){var se=h.exec(de.slice(_e));return se?(F.p=m.get(se[0].toLowerCase()),_e+se[0].length):-1}function I(F,de,_e){var se=b.exec(de.slice(_e));return se?(F.w=y.get(se[0].toLowerCase()),_e+se[0].length):-1}function L(F,de,_e){var se=p.exec(de.slice(_e));return se?(F.w=x.get(se[0].toLowerCase()),_e+se[0].length):-1}function $(F,de,_e){var se=N.exec(de.slice(_e));return se?(F.m=S.get(se[0].toLowerCase()),_e+se[0].length):-1}function W(F,de,_e){var se=v.exec(de.slice(_e));return se?(F.m=w.get(se[0].toLowerCase()),_e+se[0].length):-1}function P(F,de,_e){return D(F,t,de,_e)}function U(F,de,_e){return D(F,r,de,_e)}function K(F,de,_e){return D(F,s,de,_e)}function G(F){return l[F.getDay()]}function Q(F){return i[F.getDay()]}function le(F){return u[F.getMonth()]}function H(F){return d[F.getMonth()]}function V(F){return n[+(F.getHours()>=12)]}function B(F){return 1+~~(F.getMonth()/3)}function ne(F){return l[F.getUTCDay()]}function ie(F){return i[F.getUTCDay()]}function ee(F){return u[F.getUTCMonth()]}function Z(F){return d[F.getUTCMonth()]}function re(F){return n[+(F.getUTCHours()>=12)]}function J(F){return 1+~~(F.getUTCMonth()/3)}return{format:function(F){var de=O(F+="",j);return de.toString=function(){return F},de},parse:function(F){var de=T(F+="",!1);return de.toString=function(){return F},de},utcFormat:function(F){var de=O(F+="",k);return de.toString=function(){return F},de},utcParse:function(F){var de=T(F+="",!0);return de.toString=function(){return F},de}}}var cC={"-":"",_:" ",0:"0"},zr=/^\s*\d+/,KG=/^%/,WG=/[\\^$*+?|[\]().{}]/g;function pt(e,t,r){var s=e<0?"-":"",n=(s?-e:e)+"",i=n.length;return s+(i<r?new Array(r-i+1).join(t)+n:n)}function YG(e){return e.replace(WG,"\\$&")}function Md(e){return new RegExp("^(?:"+e.map(YG).join("|")+")","i")}function Id(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function XG(e,t,r){var s=zr.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function JG(e,t,r){var s=zr.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function ZG(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function QG(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function eK(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function dC(e,t,r){var s=zr.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function uC(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function tK(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function rK(e,t,r){var s=zr.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function aK(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function hC(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function sK(e,t,r){var s=zr.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function fC(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function nK(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function iK(e,t,r){var s=zr.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function oK(e,t,r){var s=zr.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function lK(e,t,r){var s=zr.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function cK(e,t,r){var s=KG.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function dK(e,t,r){var s=zr.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function uK(e,t,r){var s=zr.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function mC(e,t){return pt(e.getDate(),t,2)}function hK(e,t){return pt(e.getHours(),t,2)}function fK(e,t){return pt(e.getHours()%12||12,t,2)}function mK(e,t){return pt(1+Mu.count(In(e),e),t,3)}function l6(e,t){return pt(e.getMilliseconds(),t,3)}function pK(e,t){return l6(e,t)+"000"}function gK(e,t){return pt(e.getMonth()+1,t,2)}function xK(e,t){return pt(e.getMinutes(),t,2)}function bK(e,t){return pt(e.getSeconds(),t,2)}function vK(e){var t=e.getDay();return t===0?7:t}function yK(e,t){return pt(bp.count(In(e)-1,e),t,2)}function c6(e){var t=e.getDay();return t>=4||t===0?ic(e):ic.ceil(e)}function wK(e,t){return e=c6(e),pt(ic.count(In(e),e)+(In(e).getDay()===4),t,2)}function jK(e){return e.getDay()}function NK(e,t){return pt(Em.count(In(e)-1,e),t,2)}function _K(e,t){return pt(e.getFullYear()%100,t,2)}function SK(e,t){return e=c6(e),pt(e.getFullYear()%100,t,2)}function EK(e,t){return pt(e.getFullYear()%1e4,t,4)}function kK(e,t){var r=e.getDay();return e=r>=4||r===0?ic(e):ic.ceil(e),pt(e.getFullYear()%1e4,t,4)}function CK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pt(t/60|0,"0",2)+pt(t%60,"0",2)}function pC(e,t){return pt(e.getUTCDate(),t,2)}function AK(e,t){return pt(e.getUTCHours(),t,2)}function OK(e,t){return pt(e.getUTCHours()%12||12,t,2)}function TK(e,t){return pt(1+xp.count(zn(e),e),t,3)}function d6(e,t){return pt(e.getUTCMilliseconds(),t,3)}function PK(e,t){return d6(e,t)+"000"}function RK(e,t){return pt(e.getUTCMonth()+1,t,2)}function DK(e,t){return pt(e.getUTCMinutes(),t,2)}function MK(e,t){return pt(e.getUTCSeconds(),t,2)}function IK(e){var t=e.getUTCDay();return t===0?7:t}function zK(e,t){return pt(vp.count(zn(e)-1,e),t,2)}function u6(e){var t=e.getUTCDay();return t>=4||t===0?oc(e):oc.ceil(e)}function $K(e,t){return e=u6(e),pt(oc.count(zn(e),e)+(zn(e).getUTCDay()===4),t,2)}function LK(e){return e.getUTCDay()}function BK(e,t){return pt(km.count(zn(e)-1,e),t,2)}function UK(e,t){return pt(e.getUTCFullYear()%100,t,2)}function qK(e,t){return e=u6(e),pt(e.getUTCFullYear()%100,t,2)}function FK(e,t){return pt(e.getUTCFullYear()%1e4,t,4)}function HK(e,t){var r=e.getUTCDay();return e=r>=4||r===0?oc(e):oc.ceil(e),pt(e.getUTCFullYear()%1e4,t,4)}function VK(){return"+0000"}function gC(){return"%"}function xC(e){return+e}function bC(e){return Math.floor(+e/1e3)}var Rl,h6,f6;GK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function GK(e){return Rl=GG(e),h6=Rl.format,Rl.parse,f6=Rl.utcFormat,Rl.utcParse,Rl}function KK(e){return new Date(e)}function WK(e){return e instanceof Date?+e:+new Date(+e)}function Vw(e,t,r,s,n,i,l,d,u,h){var m=Tw(),p=m.invert,x=m.domain,b=h(".%L"),y=h(":%S"),v=h("%I:%M"),w=h("%I %p"),N=h("%a %d"),S=h("%b %d"),j=h("%B"),k=h("%Y");function A(O){return(u(O)<O?b:d(O)<O?y:l(O)<O?v:i(O)<O?w:s(O)<O?n(O)<O?N:S:r(O)<O?j:k)(O)}return m.invert=function(O){return new Date(p(O))},m.domain=function(O){return arguments.length?x(Array.from(O,WK)):x().map(KK)},m.ticks=function(O){var T=x();return e(T[0],T[T.length-1],O??10)},m.tickFormat=function(O,T){return T==null?A:h(T)},m.nice=function(O){var T=x();return(!O||typeof O.range!="function")&&(O=t(T[0],T[T.length-1],O??10)),O?x(Q3(T,O)):m},m.copy=function(){return Du(m,Vw(e,t,r,s,n,i,l,d,u,h))},m}function YK(){return _s.apply(Vw(HG,VG,In,Fw,bp,Mu,Uw,Lw,Co,h6).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function XK(){return _s.apply(Vw(qG,FG,zn,Hw,vp,xp,qw,Bw,Co,f6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yp(){var e=0,t=1,r,s,n,i,l=la,d=!1,u;function h(p){return p==null||isNaN(p=+p)?u:l(n===0?.5:(p=(i(p)-r)*n,d?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t]=p,r=i(e=+e),s=i(t=+t),n=r===s?0:1/(s-r),h):[e,t]},h.clamp=function(p){return arguments.length?(d=!!p,h):d},h.interpolator=function(p){return arguments.length?(l=p,h):l};function m(p){return function(x){var b,y;return arguments.length?([b,y]=x,l=p(b,y),h):[l(0),l(1)]}}return h.range=m(bc),h.rangeRound=m(Ow),h.unknown=function(p){return arguments.length?(u=p,h):u},function(p){return i=p,r=p(e),s=p(t),n=r===s?0:1/(s-r),h}}function Bi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function m6(){var e=Li(yp()(la));return e.copy=function(){return Bi(e,m6())},Hn.apply(e,arguments)}function p6(){var e=Dw(yp()).domain([1,10]);return e.copy=function(){return Bi(e,p6()).base(e.base())},Hn.apply(e,arguments)}function g6(){var e=Mw(yp());return e.copy=function(){return Bi(e,g6()).constant(e.constant())},Hn.apply(e,arguments)}function Gw(){var e=Iw(yp());return e.copy=function(){return Bi(e,Gw()).exponent(e.exponent())},Hn.apply(e,arguments)}function JK(){return Gw.apply(null,arguments).exponent(.5)}function x6(){var e=[],t=la;function r(s){if(s!=null&&!isNaN(s=+s))return t((Pu(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let n of s)n!=null&&!isNaN(n=+n)&&e.push(n);return e.sort(Ci),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,n)=>t(n/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(n,i)=>IV(e,i/s))},r.copy=function(){return x6(t).domain(e)},Hn.apply(r,arguments)}function wp(){var e=0,t=.5,r=1,s=1,n,i,l,d,u,h=la,m,p=!1,x;function b(v){return isNaN(v=+v)?x:(v=.5+((v=+m(v))-i)*(s*v<s*i?d:u),h(p?Math.max(0,Math.min(1,v)):v))}b.domain=function(v){return arguments.length?([e,t,r]=v,n=m(e=+e),i=m(t=+t),l=m(r=+r),d=n===i?0:.5/(i-n),u=i===l?0:.5/(l-i),s=i<n?-1:1,b):[e,t,r]},b.clamp=function(v){return arguments.length?(p=!!v,b):p},b.interpolator=function(v){return arguments.length?(h=v,b):h};function y(v){return function(w){var N,S,j;return arguments.length?([N,S,j]=w,h=cG(v,[N,S,j]),b):[h(0),h(.5),h(1)]}}return b.range=y(bc),b.rangeRound=y(Ow),b.unknown=function(v){return arguments.length?(x=v,b):x},function(v){return m=v,n=v(e),i=v(t),l=v(r),d=n===i?0:.5/(i-n),u=i===l?0:.5/(l-i),s=i<n?-1:1,b}}function b6(){var e=Li(wp()(la));return e.copy=function(){return Bi(e,b6())},Hn.apply(e,arguments)}function v6(){var e=Dw(wp()).domain([.1,1,10]);return e.copy=function(){return Bi(e,v6()).base(e.base())},Hn.apply(e,arguments)}function y6(){var e=Mw(wp());return e.copy=function(){return Bi(e,y6()).constant(e.constant())},Hn.apply(e,arguments)}function Kw(){var e=Iw(wp());return e.copy=function(){return Bi(e,Kw()).exponent(e.exponent())},Hn.apply(e,arguments)}function ZK(){return Kw.apply(null,arguments).exponent(.5)}const Hd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kw,scaleDiverging:b6,scaleDivergingLog:v6,scaleDivergingPow:Kw,scaleDivergingSqrt:ZK,scaleDivergingSymlog:y6,scaleIdentity:Z3,scaleImplicit:ey,scaleLinear:J3,scaleLog:e6,scaleOrdinal:Ew,scalePoint:LV,scalePow:zw,scaleQuantile:a6,scaleQuantize:s6,scaleRadial:r6,scaleSequential:m6,scaleSequentialLog:p6,scaleSequentialPow:Gw,scaleSequentialQuantile:x6,scaleSequentialSqrt:JK,scaleSequentialSymlog:g6,scaleSqrt:PG,scaleSymlog:t6,scaleThreshold:n6,scaleTime:YK,scaleUtc:XK,tickFormat:X3},Symbol.toStringTag,{value:"Module"}));var Ui=e=>e.chartData,Ww=ye([Ui],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),jp=(e,t,r,s)=>s?Ww(e):Ui(e);function lc(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Yr(t)&&Yr(r))return!0}return!1}function vC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function QK(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,s]=e,n,i;if(Yr(r))n=r;else if(typeof r=="function")return;if(Yr(s))i=s;else if(typeof s=="function")return;var l=[n,i];if(lc(l))return l}}function eW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var s=e(t,r);if(lc(s))return vC(s,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[n,i]=e,l,d;if(n==="auto")t!=null&&(l=Math.min(...t));else if(De(n))l=n;else if(typeof n=="function")try{t!=null&&(l=n(t==null?void 0:t[0]))}catch{}else if(typeof n=="string"&&ik.test(n)){var u=ik.exec(n);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[0]-h}}else l=t==null?void 0:t[0];if(i==="auto")t!=null&&(d=Math.max(...t));else if(De(i))d=i;else if(typeof i=="function")try{t!=null&&(d=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&ok.test(i)){var m=ok.exec(i);if(m==null||t==null)d=void 0;else{var p=+m[1];d=t[1]+p}}else d=t==null?void 0:t[1];var x=[l,d];if(lc(x))return t==null?x:vC(x,t,r)}}}var vc=1e9,tW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Xw,$t=!0,ws="[DecimalError] ",Io=ws+"Invalid argument: ",Yw=ws+"Exponent out of range: ",yc=Math.floor,wo=Math.pow,rW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,La,Dr=1e7,Mt=7,w6=9007199254740991,Cm=yc(w6/Mt),ze={};ze.absoluteValue=ze.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ze.comparedTo=ze.cmp=function(e){var t,r,s,n,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,n=e.d.length,t=0,r=s<n?s:n;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===n?0:s>n^i.s<0?1:-1};ze.decimalPlaces=ze.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Mt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ze.dividedBy=ze.div=function(e){return Tn(this,new this.constructor(e))};ze.dividedToIntegerBy=ze.idiv=function(e){var t=this,r=t.constructor;return kt(Tn(t,new r(e),0,1),r.precision)};ze.equals=ze.eq=function(e){return!this.cmp(e)};ze.exponent=function(){return mr(this)};ze.greaterThan=ze.gt=function(e){return this.cmp(e)>0};ze.greaterThanOrEqualTo=ze.gte=function(e){return this.cmp(e)>=0};ze.isInteger=ze.isint=function(){return this.e>this.d.length-2};ze.isNegative=ze.isneg=function(){return this.s<0};ze.isPositive=ze.ispos=function(){return this.s>0};ze.isZero=function(){return this.s===0};ze.lessThan=ze.lt=function(e){return this.cmp(e)<0};ze.lessThanOrEqualTo=ze.lte=function(e){return this.cmp(e)<1};ze.logarithm=ze.log=function(e){var t,r=this,s=r.constructor,n=s.precision,i=n+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(La))throw Error(ws+"NaN");if(r.s<1)throw Error(ws+(r.s?"NaN":"-Infinity"));return r.eq(La)?new s(0):($t=!1,t=Tn(fu(r,i),fu(e,i),i),$t=!0,kt(t,n))};ze.minus=ze.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_6(t,e):j6(t,(e.s=-e.s,e))};ze.modulo=ze.mod=function(e){var t,r=this,s=r.constructor,n=s.precision;if(e=new s(e),!e.s)throw Error(ws+"NaN");return r.s?($t=!1,t=Tn(r,e,0,1).times(e),$t=!0,r.minus(t)):kt(new s(r),n)};ze.naturalExponential=ze.exp=function(){return N6(this)};ze.naturalLogarithm=ze.ln=function(){return fu(this)};ze.negated=ze.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ze.plus=ze.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?j6(t,e):_6(t,(e.s=-e.s,e))};ze.precision=ze.sd=function(e){var t,r,s,n=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Io+e);if(t=mr(n)+1,s=n.d.length-1,r=s*Mt+1,s=n.d[s],s){for(;s%10==0;s/=10)r--;for(s=n.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};ze.squareRoot=ze.sqrt=function(){var e,t,r,s,n,i,l,d=this,u=d.constructor;if(d.s<1){if(!d.s)return new u(0);throw Error(ws+"NaN")}for(e=mr(d),$t=!1,n=Math.sqrt(+d),n==0||n==1/0?(t=Ws(d.d),(t.length+e)%2==0&&(t+="0"),n=Math.sqrt(t),e=yc((e+1)/2)-(e<0||e%2),n==1/0?t="5e"+e:(t=n.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new u(t)):s=new u(n.toString()),r=u.precision,n=l=r+3;;)if(i=s,s=i.plus(Tn(d,i,l+2)).times(.5),Ws(i.d).slice(0,l)===(t=Ws(s.d)).slice(0,l)){if(t=t.slice(l-3,l+1),n==l&&t=="4999"){if(kt(i,r+1,0),i.times(i).eq(d)){s=i;break}}else if(t!="9999")break;l+=4}return $t=!0,kt(s,r)};ze.times=ze.mul=function(e){var t,r,s,n,i,l,d,u,h,m=this,p=m.constructor,x=m.d,b=(e=new p(e)).d;if(!m.s||!e.s)return new p(0);for(e.s*=m.s,r=m.e+e.e,u=x.length,h=b.length,u<h&&(i=x,x=b,b=i,l=u,u=h,h=l),i=[],l=u+h,s=l;s--;)i.push(0);for(s=h;--s>=0;){for(t=0,n=u+s;n>s;)d=i[n]+b[s]*x[n-s-1]+t,i[n--]=d%Dr|0,t=d/Dr|0;i[n]=(i[n]+t)%Dr|0}for(;!i[--l];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,$t?kt(e,p.precision):e};ze.toDecimalPlaces=ze.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(en(e,0,vc),t===void 0?t=s.rounding:en(t,0,8),kt(r,e+mr(r)+1,t))};ze.toExponential=function(e,t){var r,s=this,n=s.constructor;return e===void 0?r=Uo(s,!0):(en(e,0,vc),t===void 0?t=n.rounding:en(t,0,8),s=kt(new n(s),e+1,t),r=Uo(s,!0,e+1)),r};ze.toFixed=function(e,t){var r,s,n=this,i=n.constructor;return e===void 0?Uo(n):(en(e,0,vc),t===void 0?t=i.rounding:en(t,0,8),s=kt(new i(n),e+mr(n)+1,t),r=Uo(s.abs(),!1,e+mr(s)+1),n.isneg()&&!n.isZero()?"-"+r:r)};ze.toInteger=ze.toint=function(){var e=this,t=e.constructor;return kt(new t(e),mr(e)+1,t.rounding)};ze.toNumber=function(){return+this};ze.toPower=ze.pow=function(e){var t,r,s,n,i,l,d=this,u=d.constructor,h=12,m=+(e=new u(e));if(!e.s)return new u(La);if(d=new u(d),!d.s){if(e.s<1)throw Error(ws+"Infinity");return d}if(d.eq(La))return d;if(s=u.precision,e.eq(La))return kt(d,s);if(t=e.e,r=e.d.length-1,l=t>=r,i=d.s,l){if((r=m<0?-m:m)<=w6){for(n=new u(La),t=Math.ceil(s/Mt+4),$t=!1;r%2&&(n=n.times(d),wC(n.d,t)),r=yc(r/2),r!==0;)d=d.times(d),wC(d.d,t);return $t=!0,e.s<0?new u(La).div(n):kt(n,s)}}else if(i<0)throw Error(ws+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,d.s=1,$t=!1,n=e.times(fu(d,s+h)),$t=!0,n=N6(n),n.s=i,n};ze.toPrecision=function(e,t){var r,s,n=this,i=n.constructor;return e===void 0?(r=mr(n),s=Uo(n,r<=i.toExpNeg||r>=i.toExpPos)):(en(e,1,vc),t===void 0?t=i.rounding:en(t,0,8),n=kt(new i(n),e,t),r=mr(n),s=Uo(n,e<=r||r<=i.toExpNeg,e)),s};ze.toSignificantDigits=ze.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(en(e,1,vc),t===void 0?t=s.rounding:en(t,0,8)),kt(new s(r),e,t)};ze.toString=ze.valueOf=ze.val=ze.toJSON=ze[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mr(e),r=e.constructor;return Uo(e,t<=r.toExpNeg||t>=r.toExpPos)};function j6(e,t){var r,s,n,i,l,d,u,h,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),$t?kt(t,p):t;if(u=e.d,h=t.d,l=e.e,n=t.e,u=u.slice(),i=l-n,i){for(i<0?(s=u,i=-i,d=h.length):(s=h,n=l,d=u.length),l=Math.ceil(p/Mt),d=l>d?l+1:d+1,i>d&&(i=d,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(d=u.length,i=h.length,d-i<0&&(i=d,s=h,h=u,u=s),r=0;i;)r=(u[--i]=u[i]+h[i]+r)/Dr|0,u[i]%=Dr;for(r&&(u.unshift(r),++n),d=u.length;u[--d]==0;)u.pop();return t.d=u,t.e=n,$t?kt(t,p):t}function en(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Io+e)}function Ws(e){var t,r,s,n=e.length-1,i="",l=e[0];if(n>0){for(i+=l,t=1;t<n;t++)s=e[t]+"",r=Mt-s.length,r&&(i+=yi(r)),i+=s;l=e[t],s=l+"",r=Mt-s.length,r&&(i+=yi(r))}else if(l===0)return"0";for(;l%10===0;)l/=10;return i+l}var Tn=(function(){function e(s,n){var i,l=0,d=s.length;for(s=s.slice();d--;)i=s[d]*n+l,s[d]=i%Dr|0,l=i/Dr|0;return l&&s.unshift(l),s}function t(s,n,i,l){var d,u;if(i!=l)u=i>l?1:-1;else for(d=u=0;d<i;d++)if(s[d]!=n[d]){u=s[d]>n[d]?1:-1;break}return u}function r(s,n,i){for(var l=0;i--;)s[i]-=l,l=s[i]<n[i]?1:0,s[i]=l*Dr+s[i]-n[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,n,i,l){var d,u,h,m,p,x,b,y,v,w,N,S,j,k,A,O,T,D,R=s.constructor,I=s.s==n.s?1:-1,L=s.d,$=n.d;if(!s.s)return new R(s);if(!n.s)throw Error(ws+"Division by zero");for(u=s.e-n.e,T=$.length,A=L.length,b=new R(I),y=b.d=[],h=0;$[h]==(L[h]||0);)++h;if($[h]>(L[h]||0)&&--u,i==null?S=i=R.precision:l?S=i+(mr(s)-mr(n))+1:S=i,S<0)return new R(0);if(S=S/Mt+2|0,h=0,T==1)for(m=0,$=$[0],S++;(h<A||m)&&S--;h++)j=m*Dr+(L[h]||0),y[h]=j/$|0,m=j%$|0;else{for(m=Dr/($[0]+1)|0,m>1&&($=e($,m),L=e(L,m),T=$.length,A=L.length),k=T,v=L.slice(0,T),w=v.length;w<T;)v[w++]=0;D=$.slice(),D.unshift(0),O=$[0],$[1]>=Dr/2&&++O;do m=0,d=t($,v,T,w),d<0?(N=v[0],T!=w&&(N=N*Dr+(v[1]||0)),m=N/O|0,m>1?(m>=Dr&&(m=Dr-1),p=e($,m),x=p.length,w=v.length,d=t(p,v,x,w),d==1&&(m--,r(p,T<x?D:$,x))):(m==0&&(d=m=1),p=$.slice()),x=p.length,x<w&&p.unshift(0),r(v,p,w),d==-1&&(w=v.length,d=t($,v,T,w),d<1&&(m++,r(v,T<w?D:$,w))),w=v.length):d===0&&(m++,v=[0]),y[h++]=m,d&&v[0]?v[w++]=L[k]||0:(v=[L[k]],w=1);while((k++<A||v[0]!==void 0)&&S--)}return y[0]||y.shift(),b.e=u,kt(b,l?i+mr(b)+1:i)}})();function N6(e,t){var r,s,n,i,l,d,u=0,h=0,m=e.constructor,p=m.precision;if(mr(e)>16)throw Error(Yw+mr(e));if(!e.s)return new m(La);for($t=!1,d=p,l=new m(.03125);e.abs().gte(.1);)e=e.times(l),h+=5;for(s=Math.log(wo(2,h))/Math.LN10*2+5|0,d+=s,r=n=i=new m(La),m.precision=d;;){if(n=kt(n.times(e),d),r=r.times(++u),l=i.plus(Tn(n,r,d)),Ws(l.d).slice(0,d)===Ws(i.d).slice(0,d)){for(;h--;)i=kt(i.times(i),d);return m.precision=p,t==null?($t=!0,kt(i,p)):i}i=l}}function mr(e){for(var t=e.e*Mt,r=e.d[0];r>=10;r/=10)t++;return t}function Sb(e,t,r){if(t>e.LN10.sd())throw $t=!0,r&&(e.precision=r),Error(ws+"LN10 precision limit exceeded");return kt(new e(e.LN10),t)}function yi(e){for(var t="";e--;)t+="0";return t}function fu(e,t){var r,s,n,i,l,d,u,h,m,p=1,x=10,b=e,y=b.d,v=b.constructor,w=v.precision;if(b.s<1)throw Error(ws+(b.s?"NaN":"-Infinity"));if(b.eq(La))return new v(0);if(t==null?($t=!1,h=w):h=t,b.eq(10))return t==null&&($t=!0),Sb(v,h);if(h+=x,v.precision=h,r=Ws(y),s=r.charAt(0),i=mr(b),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)b=b.times(e),r=Ws(b.d),s=r.charAt(0),p++;i=mr(b),s>1?(b=new v("0."+r),i++):b=new v(s+"."+r.slice(1))}else return u=Sb(v,h+2,w).times(i+""),b=fu(new v(s+"."+r.slice(1)),h-x).plus(u),v.precision=w,t==null?($t=!0,kt(b,w)):b;for(d=l=b=Tn(b.minus(La),b.plus(La),h),m=kt(b.times(b),h),n=3;;){if(l=kt(l.times(m),h),u=d.plus(Tn(l,new v(n),h)),Ws(u.d).slice(0,h)===Ws(d.d).slice(0,h))return d=d.times(2),i!==0&&(d=d.plus(Sb(v,h+2,w).times(i+""))),d=Tn(d,new v(p),h),v.precision=w,t==null?($t=!0,kt(d,w)):d;d=u,n+=2}}function yC(e,t){var r,s,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(n=t.length;t.charCodeAt(n-1)===48;)--n;if(t=t.slice(s,n),t){if(n-=s,r=r-s-1,e.e=yc(r/Mt),e.d=[],s=(r+1)%Mt,r<0&&(s+=Mt),s<n){for(s&&e.d.push(+t.slice(0,s)),n-=Mt;s<n;)e.d.push(+t.slice(s,s+=Mt));t=t.slice(s),s=Mt-t.length}else s-=n;for(;s--;)t+="0";if(e.d.push(+t),$t&&(e.e>Cm||e.e<-Cm))throw Error(Yw+r)}else e.s=0,e.e=0,e.d=[0];return e}function kt(e,t,r){var s,n,i,l,d,u,h,m,p=e.d;for(l=1,i=p[0];i>=10;i/=10)l++;if(s=t-l,s<0)s+=Mt,n=t,h=p[m=0];else{if(m=Math.ceil((s+1)/Mt),i=p.length,m>=i)return e;for(h=i=p[m],l=1;i>=10;i/=10)l++;s%=Mt,n=s-Mt+l}if(r!==void 0&&(i=wo(10,l-n-1),d=h/i%10|0,u=t<0||p[m+1]!==void 0||h%i,u=r<4?(d||u)&&(r==0||r==(e.s<0?3:2)):d>5||d==5&&(r==4||u||r==6&&(s>0?n>0?h/wo(10,l-n):0:p[m-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return u?(i=mr(e),p.length=1,t=t-i-1,p[0]=wo(10,(Mt-t%Mt)%Mt),e.e=yc(-t/Mt)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(s==0?(p.length=m,i=1,m--):(p.length=m+1,i=wo(10,Mt-s),p[m]=n>0?(h/wo(10,l-n)%wo(10,n)|0)*i:0),u)for(;;)if(m==0){(p[0]+=i)==Dr&&(p[0]=1,++e.e);break}else{if(p[m]+=i,p[m]!=Dr)break;p[m--]=0,i=1}for(s=p.length;p[--s]===0;)p.pop();if($t&&(e.e>Cm||e.e<-Cm))throw Error(Yw+mr(e));return e}function _6(e,t){var r,s,n,i,l,d,u,h,m,p,x=e.constructor,b=x.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new x(e),$t?kt(t,b):t;if(u=e.d,p=t.d,s=t.e,h=e.e,u=u.slice(),l=h-s,l){for(m=l<0,m?(r=u,l=-l,d=p.length):(r=p,s=h,d=u.length),n=Math.max(Math.ceil(b/Mt),d)+2,l>n&&(l=n,r.length=1),r.reverse(),n=l;n--;)r.push(0);r.reverse()}else{for(n=u.length,d=p.length,m=n<d,m&&(d=n),n=0;n<d;n++)if(u[n]!=p[n]){m=u[n]<p[n];break}l=0}for(m&&(r=u,u=p,p=r,t.s=-t.s),d=u.length,n=p.length-d;n>0;--n)u[d++]=0;for(n=p.length;n>l;){if(u[--n]<p[n]){for(i=n;i&&u[--i]===0;)u[i]=Dr-1;--u[i],u[n]+=Dr}u[n]-=p[n]}for(;u[--d]===0;)u.pop();for(;u[0]===0;u.shift())--s;return u[0]?(t.d=u,t.e=s,$t?kt(t,b):t):new x(0)}function Uo(e,t,r){var s,n=mr(e),i=Ws(e.d),l=i.length;return t?(r&&(s=r-l)>0?i=i.charAt(0)+"."+i.slice(1)+yi(s):l>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(n<0?"e":"e+")+n):n<0?(i="0."+yi(-n-1)+i,r&&(s=r-l)>0&&(i+=yi(s))):n>=l?(i+=yi(n+1-l),r&&(s=r-n-1)>0&&(i=i+"."+yi(s))):((s=n+1)<l&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-l)>0&&(n+1===l&&(i+="."),i+=yi(s))),e.s<0?"-"+i:i}function wC(e,t){if(e.length>t)return e.length=t,!0}function S6(e){var t,r,s;function n(i){var l=this;if(!(l instanceof n))return new n(i);if(l.constructor=n,i instanceof n){l.s=i.s,l.e=i.e,l.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Io+i);if(i>0)l.s=1;else if(i<0)i=-i,l.s=-1;else{l.s=0,l.e=0,l.d=[0];return}if(i===~~i&&i<1e7){l.e=0,l.d=[i];return}return yC(l,i.toString())}else if(typeof i!="string")throw Error(Io+i);if(i.charCodeAt(0)===45?(i=i.slice(1),l.s=-1):l.s=1,rW.test(i))yC(l,i);else throw Error(Io+i)}if(n.prototype=ze,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.clone=S6,n.config=n.set=aW,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return n.config(e),n}function aW(e){if(!e||typeof e!="object")throw Error(ws+"Object expected");var t,r,s,n=["precision",1,vc,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<n.length;t+=3)if((s=e[r=n[t]])!==void 0)if(yc(s)===s&&s>=n[t+1]&&s<=n[t+2])this[r]=s;else throw Error(Io+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Io+r+": "+s);return this}var Xw=S6(tW);La=new Xw(1);const bt=Xw;var sW=e=>e,E6={},k6=e=>e===E6,jC=e=>function t(){return arguments.length===0||arguments.length===1&&k6(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},C6=(e,t)=>e===1?t:jC(function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];var i=s.filter(l=>l!==E6).length;return i>=e?t(...s):C6(e-i,jC(function(){for(var l=arguments.length,d=new Array(l),u=0;u<l;u++)d[u]=arguments[u];var h=s.map(m=>k6(m)?d.shift():m);return t(...h,...d)}))}),Np=e=>C6(e.length,e),sy=(e,t)=>{for(var r=[],s=e;s<t;++s)r[s-e]=s;return r},nW=Np((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),iW=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return sW;var n=r.reverse(),i=n[0],l=n.slice(1);return function(){return l.reduce((d,u)=>u(d),i(...arguments))}},ny=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),A6=e=>{var t=null,r=null;return function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return t&&n.every((l,d)=>{var u;return l===((u=t)===null||u===void 0?void 0:u[d])})||(t=n,r=e(...n)),r}};function O6(e){var t;return e===0?t=1:t=Math.floor(new bt(e).abs().log(10).toNumber())+1,t}function T6(e,t,r){for(var s=new bt(e),n=0,i=[];s.lt(t)&&n<1e5;)i.push(s.toNumber()),s=s.add(r),n++;return i}Np((e,t,r)=>{var s=+e,n=+t;return s+r*(n-s)});Np((e,t,r)=>{var s=t-+e;return s=s||1/0,(r-e)/s});Np((e,t,r)=>{var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});var P6=e=>{var[t,r]=e,[s,n]=[t,r];return t>r&&([s,n]=[r,t]),[s,n]},R6=(e,t,r)=>{if(e.lte(0))return new bt(0);var s=O6(e.toNumber()),n=new bt(10).pow(s),i=e.div(n),l=s!==1?.05:.1,d=new bt(Math.ceil(i.div(l).toNumber())).add(r).mul(l),u=d.mul(n);return t?new bt(u.toNumber()):new bt(Math.ceil(u.toNumber()))},oW=(e,t,r)=>{var s=new bt(1),n=new bt(e);if(!n.isint()&&r){var i=Math.abs(e);i<1?(s=new bt(10).pow(O6(e)-1),n=new bt(Math.floor(n.div(s).toNumber())).mul(s)):i>1&&(n=new bt(Math.floor(e)))}else e===0?n=new bt(Math.floor((t-1)/2)):r||(n=new bt(Math.floor(e)));var l=Math.floor((t-1)/2),d=iW(nW(u=>n.add(new bt(u-l).mul(s)).toNumber()),sy);return d(0,t)},D6=function(t,r,s,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(s-1)))return{step:new bt(0),tickMin:new bt(0),tickMax:new bt(0)};var l=R6(new bt(r).sub(t).div(s-1),n,i),d;t<=0&&r>=0?d=new bt(0):(d=new bt(t).add(r).div(2),d=d.sub(new bt(d).mod(l)));var u=Math.ceil(d.sub(t).div(l).toNumber()),h=Math.ceil(new bt(r).sub(d).div(l).toNumber()),m=u+h+1;return m>s?D6(t,r,s,n,i+1):(m<s&&(h=r>0?h+(s-m):h,u=r>0?u:u+(s-m)),{step:l,tickMin:d.sub(new bt(u).mul(l)),tickMax:d.add(new bt(h).mul(l))})};function lW(e){var[t,r]=e,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(s,2),[l,d]=P6([t,r]);if(l===-1/0||d===1/0){var u=d===1/0?[l,...sy(0,s-1).map(()=>1/0)]:[...sy(0,s-1).map(()=>-1/0),d];return t>r?ny(u):u}if(l===d)return oW(l,s,n);var{step:h,tickMin:m,tickMax:p}=D6(l,d,i,n,0),x=T6(m,p.add(new bt(.1).mul(h)),h);return t>r?ny(x):x}function cW(e,t){var[r,s]=e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,l]=P6([r,s]);if(i===-1/0||l===1/0)return[r,s];if(i===l)return[i];var d=Math.max(t,2),u=R6(new bt(l).sub(i).div(d-1),n,0),h=[...T6(new bt(i),new bt(l),u),l];return n===!1&&(h=h.map(m=>Math.round(m))),r>s?ny(h):h}var dW=A6(lW),uW=A6(cW),M6=e=>e.rootProps.maxBarSize,hW=e=>e.rootProps.barGap,I6=e=>e.rootProps.barCategoryGap,fW=e=>e.rootProps.barSize,Iu=e=>e.rootProps.stackOffset,Jw=e=>e.options.chartName,Zw=e=>e.rootProps.syncId,z6=e=>e.rootProps.syncMethod,Qw=e=>e.options.eventEmitter,Sn={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Ia={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},_p=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},mW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Sn.angleAxisId,includeHidden:!1,name:void 0,reversed:Sn.reversed,scale:Sn.scale,tick:Sn.tick,tickCount:void 0,ticks:void 0,type:Sn.type,unit:void 0},pW={allowDataOverflow:Ia.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ia.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ia.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ia.scale,tick:Ia.tick,tickCount:Ia.tickCount,ticks:void 0,type:Ia.type,unit:void 0},gW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Sn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sn.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sn.scale,tick:Sn.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},xW={allowDataOverflow:Ia.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Ia.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ia.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ia.scale,tick:Ia.tick,tickCount:Ia.tickCount,ticks:void 0,type:"category",unit:void 0},ej=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?gW:mW,tj=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?xW:pW,Sp=e=>e.polarOptions,rj=ye([qn,Fn,_r],g3),$6=ye([Sp,rj],(e,t)=>{if(e!=null)return ca(e.innerRadius,t,0)}),L6=ye([Sp,rj],(e,t)=>{if(e!=null)return ca(e.outerRadius,t,t*.8)}),bW=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},B6=ye([Sp],bW);ye([ej,B6],_p);var U6=ye([rj,$6,L6],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});ye([tj,U6],_p);var q6=ye([it,Sp,$6,L6,qn,Fn],(e,t,r,s,n,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||s==null)){var{cx:l,cy:d,startAngle:u,endAngle:h}=t;return{cx:ca(l,n,n/2),cy:ca(d,i,i/2),innerRadius:r,outerRadius:s,startAngle:u,endAngle:h,clockWise:!1}}}),Ut=(e,t)=>t,zu=(e,t,r)=>r;function Ep(e){return e==null?void 0:e.id}var Er=e=>{var t=it(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},wc=e=>e.tooltip.settings.axisId,kr=e=>{var t=Er(e),r=wc(e);return $u(e,t,r)};function F6(e,t,r){var{chartData:s=[]}=t,n=r==null?void 0:r.dataKey,i=new Map;return e.forEach(l=>{var d,u=(d=l.data)!==null&&d!==void 0?d:s;if(!(u==null||u.length===0)){var h=Ep(l);u.forEach((m,p)=>{var x=n==null?p:String(Et(m,n,null)),b=Et(m,l.dataKey,0),y;i.has(x)?y=i.get(x):y={},Object.assign(y,{[h]:b}),i.set(x,y)})}}),Array.from(i.values())}function kp(e){return e.stackId!=null&&e.dataKey!=null}function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Am(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(s){vW(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function vW(e,t,r){return(t=yW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yW(e){var t=wW(e,"string");return typeof t=="symbol"?t:t+""}function wW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iy=[0,"auto"],Da={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Vn=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Da},Ma={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iy,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:hp},qi=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ma},jW={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},aj=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??jW},sr=(e,t,r)=>{switch(t){case"xAxis":return Vn(e,r);case"yAxis":return qi(e,r);case"zAxis":return aj(e,r);case"angleAxis":return ej(e,r);case"radiusAxis":return tj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},NW=(e,t,r)=>{switch(t){case"xAxis":return Vn(e,r);case"yAxis":return qi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},$u=(e,t,r)=>{switch(t){case"xAxis":return Vn(e,r);case"yAxis":return qi(e,r);case"angleAxis":return ej(e,r);case"radiusAxis":return tj(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},H6=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function sj(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Cp=e=>e.graphicalItems.cartesianItems,_W=ye([Ut,zu],sj),nj=(e,t,r)=>e.filter(r).filter(s=>(t==null?void 0:t.includeHidden)===!0?!0:!s.hide),Lu=ye([Cp,sr,_W],nj),V6=ye([Lu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(kp)),G6=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),K6=ye([Lu],G6),ij=e=>e.map(t=>t.data).filter(Boolean).flat(1),SW=ye([Lu],ij),oj=(e,t)=>{var{chartData:r=[],dataStartIndex:s,dataEndIndex:n}=t;return e.length>0?e:r.slice(s,n+1)},lj=ye([SW,jp],oj),cj=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Et(s,t.dataKey)})):r.length>0?r.map(s=>s.dataKey).flatMap(s=>e.map(n=>({value:Et(n,s)}))):e.map(s=>({value:s})),Ap=ye([lj,sr,Lu],cj);function W6(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Ko(e){return e.filter(t=>Qs(t)||t instanceof Date).map(Number).filter(t=>Sa(t)===!1)}function EW(e,t,r){return!r||typeof t!="number"||Sa(t)?[]:r.length?Ko(r.flatMap(s=>{var n=Et(e,s.dataKey),i,l;if(Array.isArray(n)?[i,l]=n:i=l=n,!(!Yr(i)||!Yr(l)))return[t-i,t+l]})):[]}var kW=ye([V6,jp,kr],F6),Y6=(e,t,r)=>{var s={},n=t.reduce((i,l)=>(l.stackId==null||(i[l.stackId]==null&&(i[l.stackId]=[]),i[l.stackId].push(l)),i),s);return Object.fromEntries(Object.entries(n).map(i=>{var[l,d]=i,u=d.map(Ep);return[l,{stackedData:OF(e,u,r),graphicalItems:d}]}))},mu=ye([kW,V6,Iu],Y6),X6=(e,t,r)=>{var{dataStartIndex:s,dataEndIndex:n}=t;if(r!=="zAxis"){var i=DF(e,s,n);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},CW=ye([mu,Ui,Ut],X6),J6=(e,t,r,s,n)=>r.length>0?e.flatMap(i=>r.flatMap(l=>{var d,u,h=(d=s[l.id])===null||d===void 0?void 0:d.filter(p=>W6(n,p)),m=Et(i,(u=t.dataKey)!==null&&u!==void 0?u:l.dataKey);return{value:m,errorDomain:EW(i,m,h)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(i=>({value:Et(i,t.dataKey),errorDomain:[]})):e.map(i=>({value:i,errorDomain:[]})),Op=e=>e.errorBars,Z6=(e,t,r)=>e.flatMap(s=>t[s.id]).filter(Boolean).filter(s=>W6(r,s));ye([K6,Op,Ut],Z6);var AW=ye([lj,sr,K6,Op,Ut],J6);function OW(e){var{value:t}=e;if(Qs(t)||t instanceof Date)return t}var _C=e=>{var t=e.flatMap(s=>[s.value,s.errorDomain]).flat(1),r=Ko(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},TW=(e,t,r)=>{var s=e.map(OW).filter(n=>n!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&uO(s))?B3(0,e.length):t.allowDuplicatedCategory?s:Array.from(new Set(s))},dj=e=>{var t;if(e==null||!("domain"in e))return iy;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Ko(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:iy},Om=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var n=r.filter(Boolean);if(n.length!==0){var i=n.flat(),l=Math.min(...i),d=Math.max(...i);return[l,d]}},Q6=e=>e.referenceElements.dots,jc=(e,t,r)=>e.filter(s=>s.ifOverflow==="extendDomain").filter(s=>t==="xAxis"?s.xAxisId===r:s.yAxisId===r),PW=ye([Q6,Ut,zu],jc),eT=e=>e.referenceElements.areas,RW=ye([eT,Ut,zu],jc),tT=e=>e.referenceElements.lines,DW=ye([tT,Ut,zu],jc),rT=(e,t)=>{var r=Ko(e.map(s=>t==="xAxis"?s.x:s.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},MW=ye(PW,Ut,rT),aT=(e,t)=>{var r=Ko(e.flatMap(s=>[t==="xAxis"?s.x1:s.y1,t==="xAxis"?s.x2:s.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},IW=ye([RW,Ut],aT),sT=(e,t)=>{var r=Ko(e.map(s=>t==="xAxis"?s.x:s.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},zW=ye(DW,Ut,sT),$W=ye(MW,zW,IW,(e,t,r)=>Om(e,r,t)),nT=ye([sr],dj),uj=(e,t,r,s,n,i,l)=>{var d=QK(t,e.allowDataOverflow);if(d!=null)return d;var u=i==="vertical"&&l==="xAxis"||i==="horizontal"&&l==="yAxis",h=u?Om(r,n,_C(s)):Om(n,_C(s));return eW(t,h,e.allowDataOverflow)},LW=ye([sr,nT,CW,AW,$W,it,Ut],uj),BW=[0,1],hj=(e,t,r,s,n,i,l)=>{if(!((e==null||r==null||r.length===0)&&l===void 0)){var{dataKey:d,type:u}=e,h=Un(t,i);return h&&d==null?B3(0,r.length):u==="category"?TW(s,e,h):n==="expand"?BW:l}},fj=ye([sr,it,lj,Ap,Iu,Ut,LW],hj),iT=(e,t,r,s,n)=>{if(e!=null){var{scale:i,type:l}=e;if(i==="auto")return t==="radial"&&n==="radiusAxis"?"band":t==="radial"&&n==="angleAxis"?"linear":l==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!r)?"point":l==="category"?"band":"linear";if(typeof i=="string"){var d="scale".concat(ku(i));return d in Hd?d:"point"}}},Nc=ye([sr,it,H6,Jw,Ut],iT);function UW(e){if(e!=null){if(e in Hd)return Hd[e]();var t="scale".concat(ku(e));if(t in Hd)return Hd[t]()}}function mj(e,t,r,s){if(!(r==null||s==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(s);var n=UW(t);if(n!=null){var i=n.domain(r).range(s);return SF(i),i}}}var pj=(e,t,r)=>{var s=dj(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&lc(e))return dW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&lc(e))return uW(e,t.tickCount,t.allowDecimals)}},gj=ye([fj,$u,Nc],pj),xj=(e,t,r,s)=>{if(s!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&lc(t)&&Array.isArray(r)&&r.length>0){var n=t[0],i=r[0],l=t[1],d=r[r.length-1];return[Math.min(n,i),Math.max(l,d)]}return t},qW=ye([sr,fj,gj,Ut],xj),FW=ye(Ap,sr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,s=Array.from(Ko(e.map(d=>d.value))).sort((d,u)=>d-u);if(s.length<2)return 1/0;var n=s[s.length-1]-s[0];if(n===0)return 1/0;for(var i=0;i<s.length-1;i++){var l=s[i+1]-s[i];r=Math.min(r,l)}return r/n}}),oT=ye(FW,it,I6,_r,(e,t,r,s)=>s,(e,t,r,s,n)=>{if(!Yr(e))return 0;var i=t==="vertical"?s.height:s.width;if(n==="gap")return e*i/2;if(n==="no-gap"){var l=ca(r,e*i),d=e*i/2;return d-l-(d-l)/i*l}return 0}),HW=(e,t)=>{var r=Vn(e,t);return r==null||typeof r.padding!="string"?0:oT(e,"xAxis",t,r.padding)},VW=(e,t)=>{var r=qi(e,t);return r==null||typeof r.padding!="string"?0:oT(e,"yAxis",t,r.padding)},GW=ye(Vn,HW,(e,t)=>{var r,s;if(e==null)return{left:0,right:0};var{padding:n}=e;return typeof n=="string"?{left:t,right:t}:{left:((r=n.left)!==null&&r!==void 0?r:0)+t,right:((s=n.right)!==null&&s!==void 0?s:0)+t}}),KW=ye(qi,VW,(e,t)=>{var r,s;if(e==null)return{top:0,bottom:0};var{padding:n}=e;return typeof n=="string"?{top:t,bottom:t}:{top:((r=n.top)!==null&&r!==void 0?r:0)+t,bottom:((s=n.bottom)!==null&&s!==void 0?s:0)+t}}),WW=ye([_r,GW,mp,fp,(e,t,r)=>r],(e,t,r,s,n)=>{var{padding:i}=s;return n?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),YW=ye([_r,it,KW,mp,fp,(e,t,r)=>r],(e,t,r,s,n,i)=>{var{padding:l}=n;return i?[s.height-l.bottom,l.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Bu=(e,t,r,s)=>{var n;switch(t){case"xAxis":return WW(e,r,s);case"yAxis":return YW(e,r,s);case"zAxis":return(n=aj(e,r))===null||n===void 0?void 0:n.range;case"angleAxis":return B6(e);case"radiusAxis":return U6(e,r);default:return}},lT=ye([sr,Bu],_p),_c=ye([sr,Nc,qW,lT],mj);ye([Lu,Op,Ut],Z6);function cT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Tp=(e,t)=>t,Pp=(e,t,r)=>r,XW=ye(bw,Tp,Pp,(e,t,r)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===r).sort(cT)),JW=ye(vw,Tp,Pp,(e,t,r)=>e.filter(s=>s.orientation===t).filter(s=>s.mirror===r).sort(cT)),dT=(e,t)=>({width:e.width,height:t.height}),ZW=(e,t)=>{var r=typeof t.width=="number"?t.width:hp;return{width:r,height:e.height}},uT=ye(_r,Vn,dT),QW=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},eY=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},tY=ye(Fn,_r,XW,Tp,Pp,(e,t,r,s,n)=>{var i={},l;return r.forEach(d=>{var u=dT(t,d);l==null&&(l=QW(t,s,e));var h=s==="top"&&!n||s==="bottom"&&n;i[d.id]=l-Number(h)*u.height,l+=(h?-1:1)*u.height}),i}),rY=ye(qn,_r,JW,Tp,Pp,(e,t,r,s,n)=>{var i={},l;return r.forEach(d=>{var u=ZW(t,d);l==null&&(l=eY(t,s,e));var h=s==="left"&&!n||s==="right"&&n;i[d.id]=l-Number(h)*u.width,l+=(h?-1:1)*u.width}),i}),aY=(e,t)=>{var r=_r(e),s=Vn(e,t);if(s!=null){var n=tY(e,s.orientation,s.mirror),i=n[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},sY=(e,t)=>{var r=_r(e),s=qi(e,t);if(s!=null){var n=rY(e,s.orientation,s.mirror),i=n[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},hT=ye(_r,qi,(e,t)=>{var r=typeof t.width=="number"?t.width:hp;return{width:r,height:e.height}}),SC=(e,t,r)=>{switch(t){case"xAxis":return uT(e,r).width;case"yAxis":return hT(e,r).height;default:return}},fT=(e,t,r,s)=>{if(r!=null){var{allowDuplicatedCategory:n,type:i,dataKey:l}=r,d=Un(e,s),u=t.map(h=>h.value);if(l&&d&&i==="category"&&n&&uO(u))return u}},bj=ye([it,Ap,sr,Ut],fT),mT=(e,t,r,s)=>{if(!(r==null||r.dataKey==null)){var{type:n,scale:i}=r,l=Un(e,s);if(l&&(n==="number"||i!=="auto"))return t.map(d=>d.value)}},vj=ye([it,Ap,$u,Ut],mT),EC=ye([it,NW,Nc,_c,bj,vj,Bu,gj,Ut],(e,t,r,s,n,i,l,d,u)=>{if(t==null)return null;var h=Un(e,u);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:u,categoricalDomain:i,duplicateDomain:n,isCategorical:h,niceTicks:d,range:l,realScaleType:r,scale:s}}),nY=(e,t,r,s,n,i,l,d,u)=>{if(!(t==null||s==null)){var h=Un(e,u),{type:m,ticks:p,tickCount:x}=t,b=r==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,y=m==="category"&&s.bandwidth?s.bandwidth()/b:0;y=u==="angleAxis"&&i!=null&&i.length>=2?Ir(i[0]-i[1])*2*y:y;var v=p||n;if(v){var w=v.map((N,S)=>{var j=l?l.indexOf(N):N;return{index:S,coordinate:s(j)+y,value:N,offset:y}});return w.filter(N=>!Sa(N.coordinate))}return h&&d?d.map((N,S)=>({coordinate:s(N)+y,value:N,index:S,offset:y})):s.ticks?s.ticks(x).map(N=>({coordinate:s(N)+y,value:N,offset:y})):s.domain().map((N,S)=>({coordinate:s(N)+y,value:l?l[N]:N,index:S,offset:y}))}},pT=ye([it,$u,Nc,_c,gj,Bu,bj,vj,Ut],nY),iY=(e,t,r,s,n,i,l)=>{if(!(t==null||r==null||s==null||s[0]===s[1])){var d=Un(e,l),{tickCount:u}=t,h=0;return h=l==="angleAxis"&&(s==null?void 0:s.length)>=2?Ir(s[0]-s[1])*2*h:h,d&&i?i.map((m,p)=>({coordinate:r(m)+h,value:m,index:p,offset:h})):r.ticks?r.ticks(u).map(m=>({coordinate:r(m)+h,value:m,offset:h})):r.domain().map((m,p)=>({coordinate:r(m)+h,value:n?n[m]:m,index:p,offset:h}))}},Di=ye([it,$u,_c,Bu,bj,vj,Ut],iY),Mi=ye(sr,_c,(e,t)=>{if(!(e==null||t==null))return Am(Am({},e),{},{scale:t})}),oY=ye([sr,Nc,fj,lT],mj);ye((e,t,r)=>aj(e,r),oY,(e,t)=>{if(!(e==null||t==null))return Am(Am({},e),{},{scale:t})});var lY=ye([it,bw,vw],(e,t,r)=>{switch(e){case"horizontal":return t.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),gT=e=>e.options.defaultTooltipEventType,xT=e=>e.options.validateTooltipEventTypes;function bT(e,t,r){if(e==null)return t;var s=e?"axis":"item";return r==null?t:r.includes(s)?s:t}function yj(e,t){var r=gT(e),s=xT(e);return bT(t,r,s)}function cY(e){return Ue(t=>yj(t,e))}var vT=(e,t)=>{var r,s=Number(t);if(!(Sa(s)||t==null))return s>=0?e==null||(r=e[s])===null||r===void 0?void 0:r.value:void 0},dY=e=>e.tooltip.settings,_i={active:!1,index:null,dataKey:void 0,coordinate:void 0},uY={itemInteraction:{click:_i,hover:_i},axisInteraction:{click:_i,hover:_i},keyboardInteraction:_i,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},yT=Wa({name:"tooltip",initialState:uY,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=On(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:hY,removeTooltipEntrySettings:fY,setTooltipSettingsState:mY,setActiveMouseOverItemIndex:wT,mouseLeaveItem:pY,mouseLeaveChart:jT,setActiveClickItemIndex:gY,setMouseOverAxisIndex:NT,setMouseClickAxisIndex:xY,setSyncInteraction:oy,setKeyboardInteraction:ly}=yT.actions,bY=yT.reducer;function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Ef(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(s){vY(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function vY(e,t,r){return(t=yY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yY(e){var t=wY(e,"string");return typeof t=="symbol"?t:t+""}function wY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jY(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function NY(e){return e.index!=null}var _T=(e,t,r,s)=>{if(t==null)return _i;var n=jY(e,t,r);if(n==null)return _i;if(n.active)return n;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(NY(n)){if(i)return Ef(Ef({},n),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s};return Ef(Ef({},_i),{},{coordinate:n.coordinate})},wj=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var s=Number(r);if(!Yr(s))return r;var n=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(n,Math.min(s,i)))},ST=(e,t,r,s,n,i,l,d)=>{if(!(i==null||d==null)){var u=l[0],h=u==null?void 0:d(u.positions,i);if(h!=null)return h;var m=n==null?void 0:n[Number(i)];if(m)switch(r){case"horizontal":return{x:m.coordinate,y:(s.top+t)/2};default:return{x:(s.left+e)/2,y:m.coordinate}}}},ET=(e,t,r,s)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var n;return r==="hover"?n=e.itemInteraction.hover.dataKey:n=e.itemInteraction.click.dataKey,n==null&&s!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var l;return((l=i.settings)===null||l===void 0?void 0:l.dataKey)===n})},Uu=e=>e.options.tooltipPayloadSearcher,Sc=e=>e.tooltip;function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function AC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(s){_Y(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _Y(e,t,r){return(t=SY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SY(e){var t=EY(e,"string");return typeof t=="symbol"?t:t+""}function EY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kY(e,t){return e??t}var kT=(e,t,r,s,n,i,l)=>{if(!(t==null||i==null)){var{chartData:d,computedData:u,dataStartIndex:h,dataEndIndex:m}=r,p=[];return e.reduce((x,b)=>{var y,{dataDefinedOnItem:v,settings:w}=b,N=kY(v,d),S=Array.isArray(N)?x3(N,h,m):N,j=(y=w==null?void 0:w.dataKey)!==null&&y!==void 0?y:s==null?void 0:s.dataKey,k=w==null?void 0:w.nameKey,A;if(s!=null&&s.dataKey&&Array.isArray(S)&&!Array.isArray(S[0])&&l==="axis"?A=hO(S,s.dataKey,n):A=i(S,t,u,k),Array.isArray(A))A.forEach(T=>{var D=AC(AC({},w),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});x.push(lk({tooltipEntrySettings:D,dataKey:T.dataKey,payload:T.payload,value:Et(T.payload,T.dataKey),name:T.name}))});else{var O;x.push(lk({tooltipEntrySettings:w,dataKey:j,payload:A,value:Et(A,j),name:(O=Et(A,k))!==null&&O!==void 0?O:w==null?void 0:w.name}))}return x},p)}},jj=ye([kr,it,H6,Jw,Er],iT),CY=ye([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),AY=ye([Er,wc],sj),qu=ye([CY,kr,AY],nj),OY=ye([qu],e=>e.filter(kp)),TY=ye([qu],ij),Ec=ye([TY,Ui],oj),PY=ye([OY,Ui,kr],F6),Nj=ye([Ec,kr,qu],cj),RY=ye([kr],dj),DY=ye([qu],e=>e.filter(kp)),MY=ye([PY,DY,Iu],Y6),IY=ye([MY,Ui,Er],X6),zY=ye([qu],G6),$Y=ye([Ec,kr,zY,Op,Er],J6),LY=ye([Q6,Er,wc],jc),BY=ye([LY,Er],rT),UY=ye([eT,Er,wc],jc),qY=ye([UY,Er],aT),FY=ye([tT,Er,wc],jc),HY=ye([FY,Er],sT),VY=ye([BY,HY,qY],Om),GY=ye([kr,RY,IY,$Y,VY,it,Er],uj),CT=ye([kr,it,Ec,Nj,Iu,Er,GY],hj),KY=ye([CT,kr,jj],pj),WY=ye([kr,CT,KY,Er],xj),AT=e=>{var t=Er(e),r=wc(e),s=!1;return Bu(e,t,r,s)},OT=ye([kr,AT],_p),TT=ye([kr,jj,WY,OT],mj),YY=ye([it,Nj,kr,Er],fT),XY=ye([it,Nj,kr,Er],mT),JY=(e,t,r,s,n,i,l,d)=>{if(t){var{type:u}=t,h=Un(e,d);if(s){var m=r==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,p=u==="category"&&s.bandwidth?s.bandwidth()/m:0;return p=d==="angleAxis"&&n!=null&&(n==null?void 0:n.length)>=2?Ir(n[0]-n[1])*2*p:p,h&&l?l.map((x,b)=>({coordinate:s(x)+p,value:x,index:b,offset:p})):s.domain().map((x,b)=>({coordinate:s(x)+p,value:i?i[x]:x,index:b,offset:p}))}}},Gn=ye([it,kr,jj,TT,AT,YY,XY,Er],JY),_j=ye([gT,xT,dY],(e,t,r)=>bT(r.shared,e,t)),PT=e=>e.tooltip.settings.trigger,Sj=e=>e.tooltip.settings.defaultIndex,Rp=ye([Sc,_j,PT,Sj],_T),Ii=ye([Rp,Ec],wj),RT=ye([Gn,Ii],vT),DT=ye([Rp],e=>{if(e)return e.dataKey}),MT=ye([Sc,_j,PT,Sj],ET),ZY=ye([qn,Fn,it,_r,Gn,Sj,MT,Uu],ST),QY=ye([Rp,ZY],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),eX=ye([Rp],e=>e.active),tX=ye([MT,Ii,Ui,kr,RT,Uu,_j],kT),rX=ye([tX],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function OC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function TC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(r),!0).forEach(function(s){aX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function aX(e,t,r){return(t=sX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sX(e){var t=nX(e,"string");return typeof t=="symbol"?t:t+""}function nX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iX=()=>Ue(kr),oX=()=>{var e=iX(),t=Ue(Gn),r=Ue(TT);return iu(TC(TC({},e),{},{scale:r}),t)},IT=()=>Ue(Jw),Ej=(e,t)=>t,zT=(e,t,r)=>r,kj=(e,t,r,s)=>s,lX=ye(Gn,e=>ip(e,t=>t.coordinate)),Cj=ye([Sc,Ej,zT,kj],_T),$T=ye([Cj,Ec],wj),cX=(e,t,r)=>{if(t!=null){var s=Sc(e);return t==="axis"?r==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:r==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},LT=ye([Sc,Ej,zT,kj],ET),Tm=ye([qn,Fn,it,_r,Gn,kj,LT,Uu],ST),dX=ye([Cj,Tm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),BT=ye(Gn,$T,vT),uX=ye([LT,$T,Ui,kr,BT,Uu,Ej],kT),hX=ye([Cj],e=>({isActive:e.active,activeIndex:e.index})),fX=(e,t,r,s,n,i,l,d)=>{if(!(!e||!t||!s||!n||!i)){var u=MF(e.chartX,e.chartY,t,r,d);if(u){var h=zF(u,t),m=NF(h,l,i,s,n),p=IF(t,i,m,u);return{activeIndex:String(m),activeCoordinate:p}}}};function cy(){return cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},cy.apply(null,arguments)}function PC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function kf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(r),!0).forEach(function(s){mX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function mX(e,t,r){return(t=pX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pX(e){var t=gX(e,"string");return typeof t=="symbol"?t:t+""}function gX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xX(e){var{coordinate:t,payload:r,index:s,offset:n,tooltipAxisBandSize:i,layout:l,cursor:d,tooltipEventType:u,chartName:h}=e,m=t,p=r,x=s;if(!d||!m||h!=="ScatterChart"&&u!=="axis")return null;var b,y;if(h==="ScatterChart")b=m,y=DH;else if(h==="BarChart")b=MH(l,m,n,i),y=I3;else if(l==="radial"){var{cx:v,cy:w,radius:N,startAngle:S,endAngle:j}=z3(m);b={cx:v,cy:w,startAngle:S,endAngle:j,innerRadius:N,outerRadius:N},y=L3}else b={points:vV(l,m,n)},y=Gd;var k=typeof d=="object"&&"className"in d?d.className:void 0,A=kf(kf(kf(kf({stroke:"#ccc",pointerEvents:"none"},n),b),Vt(d,!1)),{},{payload:p,payloadIndex:x,className:ht("recharts-tooltip-cursor",k)});return _.isValidElement(d)?_.cloneElement(d,A):_.createElement(y,A)}function bX(e){var t=oX(),r=S3(),s=pp(),n=IT();return _.createElement(xX,cy({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:s,tooltipAxisBandSize:t,chartName:n}))}var UT=_.createContext(null),vX=()=>_.useContext(UT),Eb={exports:{}},RC;function yX(){return RC||(RC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function n(u,h,m){this.fn=u,this.context=h,this.once=m||!1}function i(u,h,m,p,x){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new n(m,p||u,x),y=r?r+h:h;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],b]:u._events[y].push(b):(u._events[y]=b,u._eventsCount++),u}function l(u,h){--u._eventsCount===0?u._events=new s:delete u._events[h]}function d(){this._events=new s,this._eventsCount=0}d.prototype.eventNames=function(){var h=[],m,p;if(this._eventsCount===0)return h;for(p in m=this._events)t.call(m,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},d.prototype.listeners=function(h){var m=r?r+h:h,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var x=0,b=p.length,y=new Array(b);x<b;x++)y[x]=p[x].fn;return y},d.prototype.listenerCount=function(h){var m=r?r+h:h,p=this._events[m];return p?p.fn?1:p.length:0},d.prototype.emit=function(h,m,p,x,b,y){var v=r?r+h:h;if(!this._events[v])return!1;var w=this._events[v],N=arguments.length,S,j;if(w.fn){switch(w.once&&this.removeListener(h,w.fn,void 0,!0),N){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,m),!0;case 3:return w.fn.call(w.context,m,p),!0;case 4:return w.fn.call(w.context,m,p,x),!0;case 5:return w.fn.call(w.context,m,p,x,b),!0;case 6:return w.fn.call(w.context,m,p,x,b,y),!0}for(j=1,S=new Array(N-1);j<N;j++)S[j-1]=arguments[j];w.fn.apply(w.context,S)}else{var k=w.length,A;for(j=0;j<k;j++)switch(w[j].once&&this.removeListener(h,w[j].fn,void 0,!0),N){case 1:w[j].fn.call(w[j].context);break;case 2:w[j].fn.call(w[j].context,m);break;case 3:w[j].fn.call(w[j].context,m,p);break;case 4:w[j].fn.call(w[j].context,m,p,x);break;default:if(!S)for(A=1,S=new Array(N-1);A<N;A++)S[A-1]=arguments[A];w[j].fn.apply(w[j].context,S)}}return!0},d.prototype.on=function(h,m,p){return i(this,h,m,p,!1)},d.prototype.once=function(h,m,p){return i(this,h,m,p,!0)},d.prototype.removeListener=function(h,m,p,x){var b=r?r+h:h;if(!this._events[b])return this;if(!m)return l(this,b),this;var y=this._events[b];if(y.fn)y.fn===m&&(!x||y.once)&&(!p||y.context===p)&&l(this,b);else{for(var v=0,w=[],N=y.length;v<N;v++)(y[v].fn!==m||x&&!y[v].once||p&&y[v].context!==p)&&w.push(y[v]);w.length?this._events[b]=w.length===1?w[0]:w:l(this,b)}return this},d.prototype.removeAllListeners=function(h){var m;return h?(m=r?r+h:h,this._events[m]&&l(this,m)):(this._events=new s,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=r,d.EventEmitter=d,e.exports=d})(Eb)),Eb.exports}var wX=yX();const jX=js(wX);var pu=new jX,dy="recharts.syncEvent.tooltip",DC="recharts.syncEvent.brush";function Aj(e,t){if(t){var r=Number.parseInt(t,10);if(!Sa(r))return e==null?void 0:e[r]}}var NX={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},qT=Wa({name:"options",initialState:NX,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),_X=qT.reducer,{createEventEmitter:SX}=qT.actions;function EX(e){return e.tooltip.syncInteraction}var kX={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},FT=Wa({name:"chartData",initialState:kX,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:s}=t.payload;r!=null&&(e.dataStartIndex=r),s!=null&&(e.dataEndIndex=s)}}}),{setChartData:MC,setDataStartEndIndexes:CX,setComputedData:xle}=FT.actions,AX=FT.reducer,HT=()=>{};function OX(){var e=Ue(Zw),t=Ue(Qw),r=Kt(),s=Ue(z6),n=Ue(Gn),i=pp(),l=yw(),d=Ue(u=>u.rootProps.className);_.useEffect(()=>{if(e==null)return HT;var u=(h,m,p)=>{if(t!==p&&e===h){if(s==="index"){r(m);return}if(n!=null){var x;if(typeof s=="function"){var b={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},y=s(n,b);x=n[y]}else s==="value"&&(x=n.find(O=>String(O.value)===m.payload.label));var{coordinate:v}=m.payload;if(x==null||m.payload.active===!1||v==null||l==null){r(oy({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:w,y:N}=v,S=Math.min(w,l.x+l.width),j=Math.min(N,l.y+l.height),k={x:i==="horizontal"?x.coordinate:S,y:i==="horizontal"?j:x.coordinate},A=oy({active:m.payload.active,coordinate:k,dataKey:m.payload.dataKey,index:String(x.index),label:m.payload.label});r(A)}}};return pu.on(dy,u),()=>{pu.off(dy,u)}},[d,r,t,e,s,n,i,l])}function TX(){var e=Ue(Zw),t=Ue(Qw),r=Kt();_.useEffect(()=>{if(e==null)return HT;var s=(n,i,l)=>{t!==l&&e===n&&r(CX(i))};return pu.on(DC,s),()=>{pu.off(DC,s)}},[r,t,e])}function PX(){var e=Kt();_.useEffect(()=>{e(SX())},[e]),OX(),TX()}function RX(e,t,r,s,n,i){var l=Ue(x=>cX(x,e,t)),d=Ue(Qw),u=Ue(Zw),h=Ue(z6),m=Ue(EX),p=m==null?void 0:m.active;_.useEffect(()=>{if(!p&&u!=null&&d!=null){var x=oy({active:i,coordinate:r,dataKey:l,index:n,label:typeof s=="number"?String(s):s});pu.emit(dy,u,x,d)}},[p,r,l,n,s,d,u,h,i])}function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function zC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(s){DX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function DX(e,t,r){return(t=MX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MX(e){var t=IX(e,"string");return typeof t=="symbol"?t:t+""}function IX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zX(e){return e.dataKey}function $X(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(hH,t)}var $C=[],LX={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ho.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function kb(e){var t=Ya(e,LX),{active:r,allowEscapeViewBox:s,animationDuration:n,animationEasing:i,content:l,filterNull:d,isAnimationActive:u,offset:h,payloadUniqBy:m,position:p,reverseDirection:x,useTranslate3d:b,wrapperStyle:y,cursor:v,shared:w,trigger:N,defaultIndex:S,portal:j,axisId:k}=t,A=Kt(),O=typeof S=="number"?String(S):S;_.useEffect(()=>{A(mY({shared:w,trigger:N,axisId:k,active:r,defaultIndex:O}))},[A,w,N,k,r,O]);var T=yw(),D=A3(),R=cY(w),{activeIndex:I,isActive:L}=Ue(ee=>hX(ee,R,N,O)),$=Ue(ee=>uX(ee,R,N,O)),W=Ue(ee=>BT(ee,R,N,O)),P=Ue(ee=>dX(ee,R,N,O)),U=$,K=vX(),G=r??L,[Q,le]=VO([U,G]),H=R==="axis"?W:void 0;RX(R,N,P,H,I,G);var V=j??K;if(V==null)return null;var B=U??$C;G||(B=$C),d&&B.length&&(B=BO(U.filter(ee=>ee.value!=null&&(ee.hide!==!0||t.includeHidden)),m,zX));var ne=B.length>0,ie=_.createElement(vH,{allowEscapeViewBox:s,animationDuration:n,animationEasing:i,isAnimationActive:u,active:G,coordinate:P,hasPayload:ne,offset:h,position:p,reverseDirection:x,useTranslate3d:b,viewBox:T,wrapperStyle:y,lastBoundingBox:Q,innerRef:le,hasPortalFromProps:!!j},$X(l,zC(zC({},t),{},{payload:B,label:H,active:G,coordinate:P,accessibilityLayer:D})));return _.createElement(_.Fragment,null,Ei.createPortal(ie,V),G&&_.createElement(bX,{cursor:v,tooltipEventType:R,coordinate:P,payload:U,index:I}))}var Cb={},Ab={},Ob={},LC;function BX(){return LC||(LC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,s,{signal:n,edges:i}={}){let l,d=null;const u=i!=null&&i.includes("leading"),h=i==null||i.includes("trailing"),m=()=>{d!==null&&(r.apply(l,d),l=void 0,d=null)},p=()=>{h&&m(),v()};let x=null;const b=()=>{x!=null&&clearTimeout(x),x=setTimeout(()=>{x=null,p()},s)},y=()=>{x!==null&&(clearTimeout(x),x=null)},v=()=>{y(),l=void 0,d=null},w=()=>{m()},N=function(...S){if(n!=null&&n.aborted)return;l=this,d=S;const j=x==null;b(),u&&j&&m()};return N.schedule=b,N.cancel=v,N.flush=w,n==null||n.addEventListener("abort",v,{once:!0}),N}e.debounce=t})(Ob)),Ob}var BC;function UX(){return BC||(BC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BX();function r(s,n=0,i={}){typeof i!="object"&&(i={});const{leading:l=!1,trailing:d=!0,maxWait:u}=i,h=Array(2);l&&(h[0]="leading"),d&&(h[1]="trailing");let m,p=null;const x=t.debounce(function(...v){m=s.apply(this,v),p=null},n,{edges:h}),b=function(...v){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(m=s.apply(this,v),p=Date.now(),x.cancel(),x.schedule(),m):(x.apply(this,v),m)},y=()=>(x.flush(),m);return b.cancel=x.cancel,b.flush=y,b}e.debounce=r})(Ab)),Ab}var UC;function qX(){return UC||(UC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UX();function r(s,n=0,i={}){const{leading:l=!0,trailing:d=!0}=i;return t.debounce(s,n,{leading:l,maxWait:n,trailing:d})}e.throttle=r})(Cb)),Cb}var Tb,qC;function FX(){return qC||(qC=1,Tb=qX().throttle),Tb}var HX=FX();const VX=js(HX);var Kd=function(t,r){for(var s=arguments.length,n=new Array(s>2?s-2:0),i=2;i<s;i++)n[i-2]=arguments[i]};function FC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Pb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(r),!0).forEach(function(s){GX(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function GX(e,t,r){return(t=KX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KX(e){var t=WX(e,"string");return typeof t=="symbol"?t:t+""}function WX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rb=_.forwardRef((e,t)=>{var{aspect:r,initialDimension:s={width:-1,height:-1},width:n="100%",height:i="100%",minWidth:l=0,minHeight:d,maxHeight:u,children:h,debounce:m=0,id:p,className:x,onResize:b,style:y={}}=e,v=_.useRef(null),w=_.useRef();w.current=b,_.useImperativeHandle(t,()=>v.current);var[N,S]=_.useState({containerWidth:s.width,containerHeight:s.height}),j=_.useCallback((A,O)=>{S(T=>{var D=Math.round(A),R=Math.round(O);return T.containerWidth===D&&T.containerHeight===R?T:{containerWidth:D,containerHeight:R}})},[]);_.useEffect(()=>{var A=R=>{var I,{width:L,height:$}=R[0].contentRect;j(L,$),(I=w.current)===null||I===void 0||I.call(w,L,$)};m>0&&(A=VX(A,m,{trailing:!0,leading:!1}));var O=new ResizeObserver(A),{width:T,height:D}=v.current.getBoundingClientRect();return j(T,D),O.observe(v.current),()=>{O.disconnect()}},[j,m]);var k=_.useMemo(()=>{var{containerWidth:A,containerHeight:O}=N;if(A<0||O<0)return null;Kd(So(n)||So(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,n,i),Kd(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=So(n)?A:n,D=So(i)?O:i;return r&&r>0&&(T?D=T/r:D&&(T=D*r),u&&D>u&&(D=u)),Kd(T>0||D>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,D,n,i,l,d,r),_.Children.map(h,R=>_.cloneElement(R,{width:T,height:D,style:Pb({width:T,height:D},R.props.style)}))},[r,h,i,u,d,l,N,n]);return _.createElement("div",{id:p?"".concat(p):void 0,className:ht("recharts-responsive-container",x),style:Pb(Pb({},y),{},{width:n,height:i,minWidth:l,minHeight:d,maxHeight:u}),ref:v},_.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))}),cc=e=>null;cc.displayName="Cell";function YX(e,t,r){return(t=XX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XX(e){var t=JX(e,"string");return typeof t=="symbol"?t:t+""}function JX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ZX{constructor(t){YX(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function QX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(s){eJ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function eJ(e,t,r){return(t=tJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tJ(e){var t=rJ(e,"string");return typeof t=="symbol"?t:t+""}function rJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aJ={cacheSize:2e3,enableCache:!0},VT=QX({},aJ),VC=new ZX(VT.cacheSize),sJ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},GC="recharts_measurement_span";function nJ(e,t){var r=t.fontSize||"",s=t.fontFamily||"",n=t.fontWeight||"",i=t.fontStyle||"",l=t.letterSpacing||"",d=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(s,"|").concat(n,"|").concat(i,"|").concat(l,"|").concat(d)}var KC=(e,t)=>{try{var r=document.getElementById(GC);r||(r=document.createElement("span"),r.setAttribute("id",GC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,sJ,t),r.textContent="".concat(e);var s=r.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Wd=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ho.isSsr)return{width:0,height:0};if(!VT.enableCache)return KC(t,r);var s=nJ(t,r),n=VC.get(s);if(n)return n;var i=KC(t,r);return VC.set(s,i),i},WC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,YC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iJ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,GT={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lJ=Object.keys(GT),$l="NaN";function cJ(e,t){return e*GT[t]}class ya{static parse(t){var r,[,s,n]=(r=oJ.exec(t))!==null&&r!==void 0?r:[];return new ya(parseFloat(s),n??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Sa(t)&&(this.unit=""),r!==""&&!iJ.test(r)&&(this.num=NaN,this.unit=""),lJ.includes(r)&&(this.num=cJ(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ya(NaN,""):new ya(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ya(NaN,""):new ya(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ya(NaN,""):new ya(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ya(NaN,""):new ya(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Sa(this.num)}}function KT(e){if(e.includes($l))return $l;for(var t=e;t.includes("*")||t.includes("/");){var r,[,s,n,i]=(r=WC.exec(t))!==null&&r!==void 0?r:[],l=ya.parse(s??""),d=ya.parse(i??""),u=n==="*"?l.multiply(d):l.divide(d);if(u.isNaN())return $l;t=t.replace(WC,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,m,p,x]=(h=YC.exec(t))!==null&&h!==void 0?h:[],b=ya.parse(m??""),y=ya.parse(x??""),v=p==="+"?b.add(y):b.subtract(y);if(v.isNaN())return $l;t=t.replace(YC,v.toString())}return t}var XC=/\(([^()]*)\)/;function dJ(e){for(var t=e,r;(r=XC.exec(t))!=null;){var[,s]=r;t=t.replace(XC,KT(s))}return t}function uJ(e){var t=e.replace(/\s+/g,"");return t=dJ(t),t=KT(t),t}function hJ(e){try{return uJ(e)}catch{return $l}}function Db(e){var t=hJ(e.slice(5,-1));return t===$l?"":t}var fJ=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],mJ=["dx","dy","angle","className","breakAll"];function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uy.apply(null,arguments)}function JC(e,t){if(e==null)return{};var r,s,n=pJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pJ(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var WT=/[ \f\n\r\t\v\u2028\u2029]+/,YT=e=>{var{children:t,breakAll:r,style:s}=e;try{var n=[];Bt(t)||(r?n=t.toString().split(""):n=t.toString().split(WT));var i=n.map(d=>({word:d,width:Wd(d,s).width})),l=r?0:Wd("",s).width;return{wordsWithComputedWidth:i,spaceWidth:l}}catch{return null}},gJ=(e,t,r,s,n)=>{var{maxLines:i,children:l,style:d,breakAll:u}=e,h=De(i),m=l,p=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(($,W)=>{var{word:P,width:U}=W,K=$[$.length-1];if(K&&(s==null||n||K.width+U+r<Number(s)))K.words.push(P),K.width+=U+r;else{var G={words:[P],width:U};$.push(G)}return $},[])},x=p(t),b=I=>I.reduce((L,$)=>L.width>$.width?L:$);if(!h||n)return x;var y=x.length>i||b(x).width>Number(s);if(!y)return x;for(var v="",w=I=>{var L=m.slice(0,I),$=YT({breakAll:u,style:d,children:L+v}).wordsWithComputedWidth,W=p($),P=W.length>i||b(W).width>Number(s);return[P,W]},N=0,S=m.length-1,j=0,k;N<=S&&j<=m.length-1;){var A=Math.floor((N+S)/2),O=A-1,[T,D]=w(O),[R]=w(A);if(!T&&!R&&(N=A+1),T&&R&&(S=A-1),!T&&R){k=D;break}j++}return k||x},ZC=e=>{var t=Bt(e)?[]:e.toString().split(WT);return[{words:t}]},xJ=e=>{var{width:t,scaleToFit:r,children:s,style:n,breakAll:i,maxLines:l}=e;if((t||r)&&!Ho.isSsr){var d,u,h=YT({breakAll:i,children:s,style:n});if(h){var{wordsWithComputedWidth:m,spaceWidth:p}=h;d=m,u=p}else return ZC(s);return gJ({breakAll:i,children:s,maxLines:l,style:n},d,u,t,r)}return ZC(s)},QC="#808080",Dp=_.forwardRef((e,t)=>{var{x:r=0,y:s=0,lineHeight:n="1em",capHeight:i="0.71em",scaleToFit:l=!1,textAnchor:d="start",verticalAnchor:u="end",fill:h=QC}=e,m=JC(e,fJ),p=_.useMemo(()=>xJ({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:l,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,l,m.style,m.width]),{dx:x,dy:b,angle:y,className:v,breakAll:w}=m,N=JC(m,mJ);if(!Qs(r)||!Qs(s))return null;var S=r+(De(x)?x:0),j=s+(De(b)?b:0),k;switch(u){case"start":k=Db("calc(".concat(i,")"));break;case"middle":k=Db("calc(".concat((p.length-1)/2," * -").concat(n," + (").concat(i," / 2))"));break;default:k=Db("calc(".concat(p.length-1," * -").concat(n,")"));break}var A=[];if(l){var O=p[0].width,{width:T}=m;A.push("scale(".concat(De(T)?T/O:1,")"))}return y&&A.push("rotate(".concat(y,", ").concat(S,", ").concat(j,")")),A.length&&(N.transform=A.join(" ")),_.createElement("text",uy({},Vt(N,!0),{ref:t,x:S,y:j,className:ht("recharts-text",v),textAnchor:d,fill:h.includes("url")?QC:h}),p.map((D,R)=>{var I=D.words.join(w?"":" ");return _.createElement("tspan",{x:S,dy:R===0?k:n,key:"".concat(I,"-").concat(R)},I)}))});Dp.displayName="Text";var bJ=["offset"],vJ=["labelRef"];function eA(e,t){if(e==null)return{};var r,s,n=yJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yJ(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function tA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(r),!0).forEach(function(s){wJ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function wJ(e,t,r){return(t=jJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jJ(e){var t=NJ(e,"string");return typeof t=="symbol"?t:t+""}function NJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function En(){return En=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},En.apply(null,arguments)}var _J=e=>{var{value:t,formatter:r}=e,s=Bt(e.children)?t:e.children;return typeof r=="function"?r(s):s},Oj=e=>e!=null&&typeof e=="function",SJ=(e,t)=>{var r=Ir(t-e),s=Math.min(Math.abs(t-e),360);return r*s},EJ=(e,t,r,s)=>{var{position:n,offset:i,className:l}=e,{cx:d,cy:u,innerRadius:h,outerRadius:m,startAngle:p,endAngle:x,clockWise:b}=s,y=(h+m)/2,v=SJ(p,x),w=v>=0?1:-1,N,S;n==="insideStart"?(N=p+w*i,S=b):n==="insideEnd"?(N=x-w*i,S=!b):n==="end"&&(N=x+w*i,S=b),S=v<=0?S:!S;var j=fr(d,u,y,N),k=fr(d,u,y,N+(S?1:-1)*359),A="M".concat(j.x,",").concat(j.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(S?0:1,`,
    `).concat(k.x,",").concat(k.y),O=Bt(e.id)?au("recharts-radial-line-"):e.id;return _.createElement("text",En({},r,{dominantBaseline:"central",className:ht("recharts-radial-bar-label",l)}),_.createElement("defs",null,_.createElement("path",{id:O,d:A})),_.createElement("textPath",{xlinkHref:"#".concat(O)},t))},kJ=(e,t,r)=>{var{cx:s,cy:n,innerRadius:i,outerRadius:l,startAngle:d,endAngle:u}=e,h=(d+u)/2;if(r==="outside"){var{x:m,y:p}=fr(s,n,l+t,h);return{x:m,y:p,textAnchor:m>=s?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:s,y:n,textAnchor:"middle",verticalAnchor:"end"};var x=(i+l)/2,{x:b,y}=fr(s,n,x,h);return{x:b,y,textAnchor:"middle",verticalAnchor:"middle"}},CJ=(e,t)=>{var{parentViewBox:r,offset:s,position:n}=e,{x:i,y:l,width:d,height:u}=t,h=u>=0?1:-1,m=h*s,p=h>0?"end":"start",x=h>0?"start":"end",b=d>=0?1:-1,y=b*s,v=b>0?"end":"start",w=b>0?"start":"end";if(n==="top"){var N={x:i+d/2,y:l-h*s,textAnchor:"middle",verticalAnchor:p};return Qt(Qt({},N),r?{height:Math.max(l-r.y,0),width:d}:{})}if(n==="bottom"){var S={x:i+d/2,y:l+u+m,textAnchor:"middle",verticalAnchor:x};return Qt(Qt({},S),r?{height:Math.max(r.y+r.height-(l+u),0),width:d}:{})}if(n==="left"){var j={x:i-y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"};return Qt(Qt({},j),r?{width:Math.max(j.x-r.x,0),height:u}:{})}if(n==="right"){var k={x:i+d+y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"};return Qt(Qt({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:u}:{})}var A=r?{width:d,height:u}:{};return n==="insideLeft"?Qt({x:i+y,y:l+u/2,textAnchor:w,verticalAnchor:"middle"},A):n==="insideRight"?Qt({x:i+d-y,y:l+u/2,textAnchor:v,verticalAnchor:"middle"},A):n==="insideTop"?Qt({x:i+d/2,y:l+m,textAnchor:"middle",verticalAnchor:x},A):n==="insideBottom"?Qt({x:i+d/2,y:l+u-m,textAnchor:"middle",verticalAnchor:p},A):n==="insideTopLeft"?Qt({x:i+y,y:l+m,textAnchor:w,verticalAnchor:x},A):n==="insideTopRight"?Qt({x:i+d-y,y:l+m,textAnchor:v,verticalAnchor:x},A):n==="insideBottomLeft"?Qt({x:i+y,y:l+u-m,textAnchor:w,verticalAnchor:p},A):n==="insideBottomRight"?Qt({x:i+d-y,y:l+u-m,textAnchor:v,verticalAnchor:p},A):n&&typeof n=="object"&&(De(n.x)||So(n.x))&&(De(n.y)||So(n.y))?Qt({x:i+ca(n.x,d),y:l+ca(n.y,u),textAnchor:"end",verticalAnchor:"end"},A):Qt({x:i+d/2,y:l+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},AJ=e=>"cx"in e&&De(e.cx);function za(e){var{offset:t=5}=e,r=eA(e,bJ),s=Qt({offset:t},r),{viewBox:n,position:i,value:l,children:d,content:u,className:h="",textBreakAll:m,labelRef:p}=s,x=Ue(q6),b=yw(),y=i==="center"?b:x??b,v=n||y;if(!v||Bt(l)&&Bt(d)&&!_.isValidElement(u)&&typeof u!="function")return null;var w=Qt(Qt({},s),{},{viewBox:v});if(_.isValidElement(u)){var{labelRef:N}=w,S=eA(w,vJ);return _.cloneElement(u,S)}var j;if(typeof u=="function"){if(j=_.createElement(u,w),_.isValidElement(j))return j}else j=_J(s);var k=AJ(v),A=Vt(s,!0);if(k&&(i==="insideStart"||i==="insideEnd"||i==="end"))return EJ(s,j,A,v);var O=k?kJ(v,s.offset,s.position):CJ(s,v);return _.createElement(Dp,En({ref:p,className:ht("recharts-label",h)},A,O,{breakAll:m}),j)}za.displayName="Label";var XT=e=>{var{cx:t,cy:r,angle:s,startAngle:n,endAngle:i,r:l,radius:d,innerRadius:u,outerRadius:h,x:m,y:p,top:x,left:b,width:y,height:v,clockWise:w,labelViewBox:N}=e;if(N)return N;if(De(y)&&De(v)){if(De(m)&&De(p))return{x:m,y:p,width:y,height:v};if(De(x)&&De(b))return{x,y:b,width:y,height:v}}if(De(m)&&De(p))return{x:m,y:p,width:0,height:0};if(De(t)&&De(r))return{cx:t,cy:r,startAngle:n||s||0,endAngle:i||s||0,innerRadius:u||0,outerRadius:h||d||l||0,clockWise:w};if(e.viewBox)return e.viewBox},OJ=(e,t,r)=>{if(!e)return null;var s={viewBox:t,labelRef:r};return e===!0?_.createElement(za,En({key:"label-implicit"},s)):Qs(e)?_.createElement(za,En({key:"label-implicit",value:e},s)):_.isValidElement(e)?e.type===za?_.cloneElement(e,Qt({key:"label-implicit"},s)):_.createElement(za,En({key:"label-implicit",content:e},s)):Oj(e)?_.createElement(za,En({key:"label-implicit",content:e},s)):e&&typeof e=="object"?_.createElement(za,En({},e,{key:"label-implicit"},s)):null},TJ=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var{children:n,labelRef:i}=t,l=XT(t),d=Au(n,za).map((h,m)=>_.cloneElement(h,{viewBox:r||l,key:"label-".concat(m)}));if(!s)return d;var u=OJ(t.label,r||l,i);return[u,...d]};za.parseViewBox=XT;za.renderCallByParent=TJ;var Mb={},Ib={},rA;function PJ(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Ib)),Ib}var zb={},aA;function RJ(){return aA||(aA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(zb)),zb}var sA;function DJ(){return sA||(sA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PJ(),r=RJ(),s=ow();function n(i){if(s.isArrayLike(i))return t.last(r.toArray(i))}e.last=n})(Mb)),Mb}var $b,nA;function MJ(){return nA||(nA=1,$b=DJ().last),$b}var IJ=MJ();const zJ=js(IJ);var $J=["valueAccessor"],LJ=["data","dataKey","clockWise","id","textBreakAll"];function Pm(){return Pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Pm.apply(null,arguments)}function iA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function oA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iA(Object(r),!0).forEach(function(s){BJ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function BJ(e,t,r){return(t=UJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UJ(e){var t=qJ(e,"string");return typeof t=="symbol"?t:t+""}function qJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lA(e,t){if(e==null)return{};var r,s,n=FJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function FJ(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var HJ=e=>Array.isArray(e.value)?zJ(e.value):e.value;function Ai(e){var{valueAccessor:t=HJ}=e,r=lA(e,$J),{data:s,dataKey:n,clockWise:i,id:l,textBreakAll:d}=r,u=lA(r,LJ);return!s||!s.length?null:_.createElement(Nr,{className:"recharts-label-list"},s.map((h,m)=>{var p=Bt(n)?t(h,m):Et(h&&h.payload,n),x=Bt(l)?{}:{id:"".concat(l,"-").concat(m)};return _.createElement(za,Pm({},Vt(h,!0),u,x,{parentViewBox:h.parentViewBox,value:p,textBreakAll:d,viewBox:za.parseViewBox(Bt(i)?h:oA(oA({},h),{},{clockWise:i})),key:"label-".concat(m),index:m}))}))}Ai.displayName="LabelList";function VJ(e,t){return e?e===!0?_.createElement(Ai,{key:"labelList-implicit",data:t}):_.isValidElement(e)||Oj(e)?_.createElement(Ai,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?_.createElement(Ai,Pm({data:t},e,{key:"labelList-implicit"})):null:null}function GJ(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:s}=e,n=Au(s,Ai).map((l,d)=>_.cloneElement(l,{data:t,key:"labelList-".concat(d)}));if(!r)return n;var i=VJ(e.label,t);return[i,...n]}Ai.renderCallByParent=GJ;function hy(){return hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},hy.apply(null,arguments)}var JT=e=>{var{cx:t,cy:r,r:s,className:n}=e,i=ht("recharts-dot",n);return t===+t&&r===+r&&s===+s?_.createElement("circle",hy({},tn(e),Qy(e),{className:i,cx:t,cy:r,r:s})):null},ZT=e=>e.graphicalItems.polarItems,KJ=ye([Ut,zu],sj),Tj=ye([ZT,sr,KJ],nj),WJ=ye([Tj],ij),Pj=ye([WJ,Ww],oj),YJ=ye([Pj,sr,Tj],cj),XJ=ye([Pj,sr,Tj],(e,t,r)=>r.length>0?e.flatMap(s=>r.flatMap(n=>{var i,l=Et(s,(i=t.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:l,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Et(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]}))),cA=()=>{},JJ=ye([sr,nT,cA,XJ,cA,it,Ut],uj),QT=ye([sr,it,Pj,YJ,Iu,Ut,JJ],hj),ZJ=ye([QT,sr,Nc],pj);ye([sr,QT,ZJ,Ut],xj);var QJ={radiusAxis:{},angleAxis:{}},eP=Wa({name:"polarAxis",initialState:QJ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ble,removeRadiusAxis:vle,addAngleAxis:yle,removeAngleAxis:wle}=eP.actions,eZ=eP.reducer;function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function uA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(s){tZ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function tZ(e,t,r){return(t=rZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rZ(e){var t=aZ(e,"string");return typeof t=="symbol"?t:t+""}function aZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sZ=(e,t)=>t,Rj=ye([ZT,sZ],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),nZ=[],Dj=(e,t,r)=>(r==null?void 0:r.length)===0?nZ:r,tP=ye([Ww,Rj,Dj],(e,t,r)=>{var{chartData:s}=e;if(t!=null){var n;if((t==null?void 0:t.data)!=null&&t.data.length>0?n=t.data:n=s,(!n||!n.length)&&r!=null&&(n=r.map(i=>uA(uA({},t.presentationProps),i.props))),n!=null)return n}}),iZ=ye([tP,Rj,Dj],(e,t,r)=>{if(!(e==null||t==null))return e.map((s,n)=>{var i,l=Et(s,t.nameKey,t.name),d;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?d=r[n].props.fill:typeof s=="object"&&s!=null&&"fill"in s?d=s.fill:d=t.fill,{value:xc(l,t.dataKey),color:d,payload:s,type:t.legendType}})}),oZ=ye([tP,Rj,Dj,_r],(e,t,r,s)=>{if(!(t==null||e==null))return eQ({offset:s,pieSettings:t,displayedData:e,cells:r})}),Lb={},hA;function lZ(){return hA||(hA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((n=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&n.writable)?!1:r.toString()===`[object ${i}]`}let s=r;for(;Object.getPrototypeOf(s)!==null;)s=Object.getPrototypeOf(s);return Object.getPrototypeOf(r)===s}e.isPlainObject=t})(Lb)),Lb}var Bb,fA;function cZ(){return fA||(fA=1,Bb=lZ().isPlainObject),Bb}var dZ=cZ();const uZ=js(dZ);function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Rm.apply(null,arguments)}var mA=(e,t,r,s,n)=>{var i=r-s,l;return l="M ".concat(e,",").concat(t),l+="L ".concat(e+r,",").concat(t),l+="L ".concat(e+r-i/2,",").concat(t+n),l+="L ".concat(e+r-i/2-s,",").concat(t+n),l+="L ".concat(e,",").concat(t," Z"),l},hZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},fZ=e=>{var t=Ya(e,hZ),r=_.useRef(),[s,n]=_.useState(-1);_.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var w=r.current.getTotalLength();w&&n(w)}catch{}},[]);var{x:i,y:l,upperWidth:d,lowerWidth:u,height:h,className:m}=t,{animationEasing:p,animationDuration:x,animationBegin:b,isUpdateAnimationActive:y}=t;if(i!==+i||l!==+l||d!==+d||u!==+u||h!==+h||d===0&&u===0||h===0)return null;var v=ht("recharts-trapezoid",m);return y?_.createElement(xm,{canBegin:s>0,from:{upperWidth:0,lowerWidth:0,height:h,x:i,y:l},to:{upperWidth:d,lowerWidth:u,height:h,x:i,y:l},duration:x,animationEasing:p,isActive:y},w=>{var{upperWidth:N,lowerWidth:S,height:j,x:k,y:A}=w;return _.createElement(xm,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:x,easing:p},_.createElement("path",Rm({},Vt(t,!0),{className:v,d:mA(k,A,N,S,j),ref:r})))}):_.createElement("g",null,_.createElement("path",Rm({},Vt(t,!0),{className:v,d:mA(i,l,d,u,h)})))},mZ=["option","shapeType","propTransformer","activeClassName","isActive"];function pZ(e,t){if(e==null)return{};var r,s,n=gZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function gZ(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function pA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(r),!0).forEach(function(s){xZ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function xZ(e,t,r){return(t=bZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bZ(e){var t=vZ(e,"string");return typeof t=="symbol"?t:t+""}function vZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yZ(e,t){return Dm(Dm({},t),e)}function wZ(e,t){return e==="symbols"}function gA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return _.createElement(I3,r);case"trapezoid":return _.createElement(fZ,r);case"sector":return _.createElement(L3,r);case"symbols":if(wZ(t))return _.createElement(sw,r);break;default:return null}}function jZ(e){return _.isValidElement(e)?e.props:e}function rP(e){var{option:t,shapeType:r,propTransformer:s=yZ,activeClassName:n="recharts-active-shape",isActive:i}=e,l=pZ(e,mZ),d;if(_.isValidElement(t))d=_.cloneElement(t,Dm(Dm({},l),jZ(t)));else if(typeof t=="function")d=t(l);else if(uZ(t)&&typeof t!="boolean"){var u=s(t,l);d=_.createElement(gA,{shapeType:r,elementProps:u})}else{var h=l;d=_.createElement(gA,{shapeType:r,elementProps:h})}return i?_.createElement(Nr,{className:n},d):d}var Mj=(e,t)=>{var r=Kt();return(s,n)=>i=>{e==null||e(s,n,i),r(wT({activeIndex:String(n),activeDataKey:t,activeCoordinate:s.tooltipPosition}))}},Ij=e=>{var t=Kt();return(r,s)=>n=>{e==null||e(r,s,n),t(pY())}},zj=(e,t)=>{var r=Kt();return(s,n)=>i=>{e==null||e(s,n,i),r(gY({activeIndex:String(n),activeDataKey:t,activeCoordinate:s.tooltipPosition}))}};function $j(e){var{fn:t,args:r}=e,s=Kt(),n=Ea();return _.useEffect(()=>{if(!n){var i=t(r);return s(hY(i)),()=>{s(fY(i))}}},[t,r,s,n]),null}var aP=()=>{};function sP(e){var{legendPayload:t}=e,r=Kt(),s=Ea();return _.useEffect(()=>s?aP:(r(k3(t)),()=>{r(C3(t))}),[r,s,t]),null}function NZ(e){var{legendPayload:t}=e,r=Kt(),s=Ue(it);return _.useEffect(()=>s!=="centric"&&s!=="radial"?aP:(r(k3(t)),()=>{r(C3(t))}),[r,s,t]),null}function Lj(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=_.useRef(au(t)),s=_.useRef(e);return s.current!==e&&(r.current=au(t),s.current=e),r.current}var Ub,_Z=()=>{var[e]=_.useState(()=>au("uid-"));return e},SZ=(Ub=eI.useId)!==null&&Ub!==void 0?Ub:_Z;function EZ(e,t){var r=SZ();return t||(e?"".concat(e,"-").concat(r):r)}var kZ=_.createContext(void 0),Bj=e=>{var{id:t,type:r,children:s}=e,n=EZ("recharts-".concat(r),t);return _.createElement(kZ.Provider,{value:n},s(n))},CZ={cartesianItems:[],polarItems:[]},nP=Wa({name:"graphicalItems",initialState:CZ,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:s}=t.payload,n=On(e).cartesianItems.indexOf(r);n>-1&&(e.cartesianItems[n]=s)},removeCartesianGraphicalItem(e,t){var r=On(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=On(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:AZ,replaceCartesianGraphicalItem:OZ,removeCartesianGraphicalItem:TZ,addPolarGraphicalItem:PZ,removePolarGraphicalItem:RZ}=nP.actions,DZ=nP.reducer;function iP(e){var t=Kt(),r=_.useRef(null);return _.useEffect(()=>{r.current===null?t(AZ(e)):r.current!==e&&t(OZ({prev:r.current,next:e})),r.current=e},[t,e]),_.useEffect(()=>()=>{r.current&&(t(TZ(r.current)),r.current=null)},[t]),null}function MZ(e){var t=Kt();return _.useEffect(()=>(t(PZ(e)),()=>{t(RZ(e))}),[t,e]),null}function IZ(){}var zZ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},xA={t:0},qb={t:1};function Uj(e){var t=Ya(e,zZ),{isActive:r,canBegin:s,duration:n,easing:i,begin:l,onAnimationEnd:d,onAnimationStart:u,children:h}=t,m=M3("JavascriptAnimate",t.animationManager),[p,x]=_.useState(r?xA:qb),b=_.useRef(null);return _.useEffect(()=>{r||x(qb)},[r]),_.useEffect(()=>{if(!r||!s)return IZ;var y=D3(xA,qb,P3(i),n,x,m.getTimeoutController()),v=()=>{b.current=y()};return m.start([u,l,v,n,d]),()=>{m.stop(),b.current&&b.current(),d()}},[r,s,n,i,l,u,d,m]),h(p.t)}var $Z=["onMouseEnter","onClick","onMouseLeave"],LZ=["id"],BZ=["id"];function qj(e,t){if(e==null)return{};var r,s,n=UZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function UZ(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(s){qZ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function qZ(e,t,r){return(t=FZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FZ(e){var t=HZ(e,"string");return typeof t=="symbol"?t:t+""}function HZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $n(){return $n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},$n.apply(null,arguments)}function VZ(e){var t=_.useMemo(()=>Au(e.children,cc),[e.children]),r=Ue(s=>iZ(s,e.id,t));return r==null?null:_.createElement(NZ,{legendPayload:r})}function GZ(e){var{dataKey:t,nameKey:r,sectors:s,stroke:n,strokeWidth:i,fill:l,name:d,hide:u,tooltipType:h}=e;return{dataDefinedOnItem:s==null?void 0:s.map(m=>m.tooltipPayload),positions:s==null?void 0:s.map(m=>m.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:l,dataKey:t,nameKey:r,name:xc(d,t),hide:u,type:h,color:l,unit:""}}}var KZ=(e,t)=>e>t?"start":e<t?"end":"middle",WZ=(e,t,r)=>typeof t=="function"?t(e):ca(t,r,r*.8),YZ=(e,t,r)=>{var{top:s,left:n,width:i,height:l}=t,d=g3(i,l),u=n+ca(e.cx,i,i/2),h=s+ca(e.cy,l,l/2),m=ca(e.innerRadius,d,0),p=WZ(r,e.outerRadius,d),x=e.maxRadius||Math.sqrt(i*i+l*l)/2;return{cx:u,cy:h,innerRadius:m,outerRadius:p,maxRadius:x}},XZ=(e,t)=>{var r=Ir(t-e),s=Math.min(Math.abs(t-e),360);return r*s},JZ=(e,t)=>{if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ht("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return _.createElement(Gd,$n({},t,{type:"linear",className:r}))},ZZ=(e,t,r)=>{if(_.isValidElement(e))return _.cloneElement(e,t);var s=r;if(typeof e=="function"&&(s=e(t),_.isValidElement(s)))return s;var n=ht("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return _.createElement(Dp,$n({},t,{alignmentBaseline:"middle",className:n}),s)};function QZ(e){var{sectors:t,props:r,showLabels:s}=e,{label:n,labelLine:i,dataKey:l}=r;if(!s||!n||!t)return null;var d=tn(r),u=Vt(n,!1),h=Vt(i,!1),m=typeof n=="object"&&"offsetRadius"in n&&n.offsetRadius||20,p=t.map((x,b)=>{var y=(x.startAngle+x.endAngle)/2,v=fr(x.cx,x.cy,x.outerRadius+m,y),w=er(er(er(er({},d),x),{},{stroke:"none"},u),{},{index:b,textAnchor:KZ(v.x,x.cx)},v),N=er(er(er(er({},d),x),{},{fill:"none",stroke:x.fill},h),{},{index:b,points:[fr(x.cx,x.cy,x.outerRadius,y),v],key:"line"});return _.createElement(Nr,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(b)},i&&JZ(i,N),ZZ(n,w,Et(x,l)))});return _.createElement(Nr,{className:"recharts-pie-labels"},p)}function oP(e){var{sectors:t,activeShape:r,inactiveShape:s,allOtherPieProps:n,showLabels:i}=e,l=Ue(Ii),{onMouseEnter:d,onClick:u,onMouseLeave:h}=n,m=qj(n,$Z),p=Mj(d,n.dataKey),x=Ij(h),b=zj(u,n.dataKey);return t==null?null:_.createElement(_.Fragment,null,t.map((y,v)=>{if((y==null?void 0:y.startAngle)===0&&(y==null?void 0:y.endAngle)===0&&t.length!==1)return null;var w=r&&String(v)===l,N=l?s:null,S=w?r:N,j=er(er({},y),{},{stroke:y.stroke,tabIndex:-1,[j3]:v,[N3]:n.dataKey});return _.createElement(Nr,$n({tabIndex:-1,className:"recharts-pie-sector"},Cu(m,y,v),{onMouseEnter:p(y,v),onMouseLeave:x(y,v),onClick:b(y,v),key:"sector-".concat(y==null?void 0:y.startAngle,"-").concat(y==null?void 0:y.endAngle,"-").concat(y.midAngle,"-").concat(v)}),_.createElement(rP,$n({option:S,isActive:w,shapeType:"sector"},j)))}),_.createElement(QZ,{sectors:t,props:n,showLabels:i}))}function eQ(e){var t,{pieSettings:r,displayedData:s,cells:n,offset:i}=e,{cornerRadius:l,startAngle:d,endAngle:u,dataKey:h,nameKey:m,tooltipType:p}=r,x=Math.abs(r.minAngle),b=XZ(d,u),y=Math.abs(b),v=s.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,w=s.filter(O=>Et(O,h,0)!==0).length,N=(y>=360?w:w-1)*v,S=y-w*x-N,j=s.reduce((O,T)=>{var D=Et(T,h,0);return O+(De(D)?D:0)},0),k;if(j>0){var A;k=s.map((O,T)=>{var D=Et(O,h,0),R=Et(O,m,T),I=YZ(r,i,O),L=(De(D)?D:0)/j,$,W=er(er({},O),n&&n[T]&&n[T].props);T?$=A.endAngle+Ir(b)*v*(D!==0?1:0):$=d;var P=$+Ir(b)*((D!==0?x:0)+L*S),U=($+P)/2,K=(I.innerRadius+I.outerRadius)/2,G=[{name:R,value:D,payload:W,dataKey:h,type:p}],Q=fr(I.cx,I.cy,K,U);return A=er(er(er(er({},r.presentationProps),{},{percent:L,cornerRadius:l,name:R,tooltipPayload:G,midAngle:U,middleRadius:K,tooltipPosition:Q},W),I),{},{value:Et(O,h),startAngle:$,endAngle:P,payload:W,paddingAngle:Ir(b)*v}),A})}return k}function tQ(e){var{props:t,previousSectorsRef:r}=e,{sectors:s,isAnimationActive:n,animationBegin:i,animationDuration:l,animationEasing:d,activeShape:u,inactiveShape:h,onAnimationStart:m,onAnimationEnd:p}=t,x=Lj(t,"recharts-pie-"),b=r.current,[y,v]=_.useState(!0),w=_.useCallback(()=>{typeof p=="function"&&p(),v(!1)},[p]),N=_.useCallback(()=>{typeof m=="function"&&m(),v(!0)},[m]);return _.createElement(Uj,{begin:i,duration:l,isActive:n,easing:d,onAnimationStart:N,onAnimationEnd:w,key:x},S=>{var j=[],k=s&&s[0],A=k.startAngle;return s.forEach((O,T)=>{var D=b&&b[T],R=T>0?Ri(O,"paddingAngle",0):0;if(D){var I=FS(D.endAngle-D.startAngle,O.endAngle-O.startAngle),L=er(er({},O),{},{startAngle:A+R,endAngle:A+I(S)+R});j.push(L),A=L.endAngle}else{var{endAngle:$,startAngle:W}=O,P=FS(0,$-W),U=P(S),K=er(er({},O),{},{startAngle:A+R,endAngle:A+U+R});j.push(K),A=K.endAngle}}),r.current=j,_.createElement(Nr,null,_.createElement(oP,{sectors:j,activeShape:u,inactiveShape:h,allOtherPieProps:t,showLabels:!y}))})}function rQ(e){var{sectors:t,isAnimationActive:r,activeShape:s,inactiveShape:n}=e,i=_.useRef(null),l=i.current;return r&&t&&t.length&&(!l||l!==t)?_.createElement(tQ,{props:e,previousSectorsRef:i}):_.createElement(oP,{sectors:t,activeShape:s,inactiveShape:n,allOtherPieProps:e,showLabels:!0})}function aQ(e){var{hide:t,className:r,rootTabIndex:s}=e,n=ht("recharts-pie",r);return t?null:_.createElement(Nr,{tabIndex:s,className:n},_.createElement(rQ,e))}var sQ={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ho.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function nQ(e){var{id:t}=e,r=qj(e,LZ),s=_.useMemo(()=>Au(e.children,cc),[e.children]),n=Ue(i=>oZ(i,t,s));return _.createElement(_.Fragment,null,_.createElement($j,{fn:GZ,args:er(er({},e),{},{sectors:n})}),_.createElement(aQ,$n({},r,{sectors:n})))}function lP(e){var t=Ya(e,sQ),{id:r}=t,s=qj(t,BZ),n=tn(s);return _.createElement(Bj,{id:r,type:"pie"},i=>_.createElement(_.Fragment,null,_.createElement(MZ,{type:"pie",id:i,data:s.data,dataKey:s.dataKey,hide:s.hide,angleAxisId:0,radiusAxisId:0,name:s.name,nameKey:s.nameKey,tooltipType:s.tooltipType,legendType:s.legendType,fill:s.fill,cx:s.cx,cy:s.cy,startAngle:s.startAngle,endAngle:s.endAngle,paddingAngle:s.paddingAngle,minAngle:s.minAngle,innerRadius:s.innerRadius,outerRadius:s.outerRadius,cornerRadius:s.cornerRadius,presentationProps:n}),_.createElement(VZ,$n({},s,{id:i})),_.createElement(nQ,$n({},s,{id:i})),s.children))}lP.displayName="Pie";var iQ=ye([_r],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),oQ=ye([iQ,qn,Fn],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Fj=()=>Ue(oQ),lQ=()=>Ue(rX);function vA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function yA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(r),!0).forEach(function(s){cQ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function cQ(e,t,r){return(t=dQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dQ(e){var t=uQ(e,"string");return typeof t=="symbol"?t:t+""}function uQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hQ=e=>{var{point:t,childIndex:r,mainColor:s,activeDot:n,dataKey:i}=e;if(n===!1||t.x==null||t.y==null)return null;var l=yA(yA({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Vt(n,!1)),Qy(n)),d;return _.isValidElement(n)?d=_.cloneElement(n,l):typeof n=="function"?d=n(l):d=_.createElement(JT,l),_.createElement(Nr,{className:"recharts-active-dot"},d)};function wA(e){var{points:t,mainColor:r,activeDot:s,itemDataKey:n}=e,i=Ue(Ii),l=lQ();if(t==null||l==null)return null;var d=t.find(u=>l.includes(u.payload));return Bt(d)?null:hQ({point:d,childIndex:Number(i),mainColor:r,dataKey:n,activeDot:s})}var fQ="Invariant failed";function mQ(e,t){throw new Error(fQ)}var pQ=["x","y"];function fy(){return fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},fy.apply(null,arguments)}function jA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(r),!0).forEach(function(s){gQ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function gQ(e,t,r){return(t=xQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xQ(e){var t=bQ(e,"string");return typeof t=="symbol"?t:t+""}function bQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vQ(e,t){if(e==null)return{};var r,s,n=yQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yQ(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function wQ(e,t){var{x:r,y:s}=e,n=vQ(e,pQ),i="".concat(r),l=parseInt(i,10),d="".concat(s),u=parseInt(d,10),h="".concat(t.height||n.height),m=parseInt(h,10),p="".concat(t.width||n.width),x=parseInt(p,10);return zd(zd(zd(zd(zd({},t),n),l?{x:l}:{}),u?{y:u}:{}),{},{height:m,width:x,name:t.name,radius:t.radius})}function cP(e){return _.createElement(rP,fy({shapeType:"rectangle",propTransformer:wQ,activeClassName:"recharts-active-bar"},e))}var jQ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(s,n)=>{if(De(t))return t;var i=De(s)||Bt(s);return i?t(s,n):(i||mQ(),r)}},NQ={},dP=Wa({name:"errorBars",initialState:NQ,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:s}=t.payload;e[r]||(e[r]=[]),e[r].push(s)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:s}=t.payload;e[r]&&(e[r]=e[r].filter(n=>n.dataKey!==s.dataKey||n.direction!==s.direction))}}}),{addErrorBar:jle,removeErrorBar:Nle}=dP.actions,_Q=dP.reducer,SQ=["children"];function EQ(e,t){if(e==null)return{};var r,s,n=kQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function kQ(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var CQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},AQ=_.createContext(CQ);function OQ(e){var{children:t}=e,r=EQ(e,SQ);return _.createElement(AQ.Provider,{value:r},t)}function Hj(e,t){var r,s,n=Ue(h=>Vn(h,e)),i=Ue(h=>qi(h,t)),l=(r=n==null?void 0:n.allowDataOverflow)!==null&&r!==void 0?r:Da.allowDataOverflow,d=(s=i==null?void 0:i.allowDataOverflow)!==null&&s!==void 0?s:Ma.allowDataOverflow,u=l||d;return{needClip:u,needClipX:l,needClipY:d}}function uP(e){var{xAxisId:t,yAxisId:r,clipPathId:s}=e,n=Fj(),{needClipX:i,needClipY:l,needClip:d}=Hj(t,r);if(!d)return null;var{x:u,y:h,width:m,height:p}=n;return _.createElement("clipPath",{id:"clipPath-".concat(s)},_.createElement("rect",{x:i?u:u-m/2,y:l?h:h-p/2,width:i?m:m*2,height:l?p:p*2}))}var TQ=["onMouseEnter","onMouseLeave","onClick"],PQ=["value","background","tooltipPosition"],RQ=["id"],DQ=["onMouseEnter","onClick","onMouseLeave"];function dc(){return dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},dc.apply(null,arguments)}function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(s){MQ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function MQ(e,t,r){return(t=IQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IQ(e){var t=zQ(e,"string");return typeof t=="symbol"?t:t+""}function zQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mm(e,t){if(e==null)return{};var r,s,n=$Q(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $Q(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var LQ=e=>{var{dataKey:t,name:r,fill:s,legendType:n,hide:i}=e;return[{inactive:i,dataKey:t,type:n,color:s,value:xc(r,t),payload:e}]};function BQ(e){var{dataKey:t,stroke:r,strokeWidth:s,fill:n,name:i,hide:l,unit:d}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:s,fill:n,dataKey:t,nameKey:void 0,name:xc(i,t),hide:l,type:e.tooltipType,color:e.fill,unit:d}}}function UQ(e){var t=Ue(Ii),{data:r,dataKey:s,background:n,allOtherBarProps:i}=e,{onMouseEnter:l,onMouseLeave:d,onClick:u}=i,h=Mm(i,TQ),m=Mj(l,s),p=Ij(d),x=zj(u,s);if(!n||r==null)return null;var b=Vt(n,!1);return _.createElement(_.Fragment,null,r.map((y,v)=>{var{value:w,background:N,tooltipPosition:S}=y,j=Mm(y,PQ);if(!N)return null;var k=m(y,v),A=p(y,v),O=x(y,v),T=ta(ta(ta(ta(ta({option:n,isActive:String(v)===t},j),{},{fill:"#eee"},N),b),Cu(h,y,v)),{},{onMouseEnter:k,onMouseLeave:A,onClick:O,dataKey:s,index:v,className:"recharts-bar-background-rectangle"});return _.createElement(cP,dc({key:"background-bar-".concat(v)},T))}))}function hP(e){var{data:t,props:r,showLabels:s}=e,n=tn(r),{id:i}=n,l=Mm(n,RQ),{shape:d,dataKey:u,activeBar:h}=r,m=Ue(Ii),p=Ue(DT),{onMouseEnter:x,onClick:b,onMouseLeave:y}=r,v=Mm(r,DQ),w=Mj(x,u),N=Ij(y),S=zj(b,u);return t?_.createElement(_.Fragment,null,t.map((j,k)=>{var A=h&&String(k)===m&&(p==null||u===p),O=A?h:d,T=ta(ta(ta({},l),j),{},{isActive:A,option:O,index:k,dataKey:u});return _.createElement(Nr,dc({className:"recharts-bar-rectangle"},Cu(v,j,k),{onMouseEnter:w(j,k),onMouseLeave:N(j,k),onClick:S(j,k),key:"rectangle-".concat(j==null?void 0:j.x,"-").concat(j==null?void 0:j.y,"-").concat(j==null?void 0:j.value,"-").concat(k)}),_.createElement(cP,T))}),s&&Ai.renderCallByParent(r,t)):null}function qQ(e){var{props:t,previousRectanglesRef:r}=e,{data:s,layout:n,isAnimationActive:i,animationBegin:l,animationDuration:d,animationEasing:u,onAnimationEnd:h,onAnimationStart:m}=t,p=r.current,x=Lj(t,"recharts-bar-"),[b,y]=_.useState(!1),v=_.useCallback(()=>{typeof h=="function"&&h(),y(!1)},[h]),w=_.useCallback(()=>{typeof m=="function"&&m(),y(!0)},[m]);return _.createElement(Uj,{begin:l,duration:d,isActive:i,easing:u,onAnimationEnd:v,onAnimationStart:w,key:x},N=>{var S=N===1?s:s==null?void 0:s.map((j,k)=>{var A=p&&p[k];if(A)return ta(ta({},j),{},{x:ms(A.x,j.x,N),y:ms(A.y,j.y,N),width:ms(A.width,j.width,N),height:ms(A.height,j.height,N)});if(n==="horizontal"){var O=ms(0,j.height,N);return ta(ta({},j),{},{y:j.y+j.height-O,height:O})}var T=ms(0,j.width,N);return ta(ta({},j),{},{width:T})});return N>0&&(r.current=S??null),S==null?null:_.createElement(Nr,null,_.createElement(hP,{props:t,data:S,showLabels:!b}))})}function FQ(e){var{data:t,isAnimationActive:r}=e,s=_.useRef(null);return r&&t&&t.length&&(s.current==null||s.current!==t)?_.createElement(qQ,{previousRectanglesRef:s,props:e}):_.createElement(hP,{props:e,data:t,showLabels:!0})}var fP=0,HQ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Et(e,t)}};class VQ extends _.PureComponent{render(){var{hide:t,data:r,dataKey:s,className:n,xAxisId:i,yAxisId:l,needClip:d,background:u,id:h}=this.props;if(t)return null;var m=ht("recharts-bar",n),p=h;return _.createElement(Nr,{className:m,id:h},d&&_.createElement("defs",null,_.createElement(uP,{clipPathId:p,xAxisId:i,yAxisId:l})),_.createElement(Nr,{className:"recharts-bar-rectangles",clipPath:d?"url(#clipPath-".concat(p,")"):void 0},_.createElement(UQ,{data:r,dataKey:s,background:u,allOtherBarProps:this.props}),_.createElement(FQ,this.props)),this.props.children)}}var GQ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ho.isSsr,legendType:"rect",minPointSize:fP,xAxisId:0,yAxisId:0};function KQ(e){var{xAxisId:t,yAxisId:r,hide:s,legendType:n,minPointSize:i,activeBar:l,animationBegin:d,animationDuration:u,animationEasing:h,isAnimationActive:m}=e,{needClip:p}=Hj(t,r),x=pp(),b=Ea(),y=Au(e.children,cc),v=Ue(S=>yee(S,t,r,b,e.id,y));if(x!=="vertical"&&x!=="horizontal")return null;var w,N=v==null?void 0:v[0];return N==null||N.height==null||N.width==null?w=0:w=x==="vertical"?N.height/2:N.width/2,_.createElement(OQ,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:HQ,errorBarOffset:w},_.createElement(VQ,dc({},e,{layout:x,needClip:p,data:v,xAxisId:t,yAxisId:r,hide:s,legendType:n,minPointSize:i,activeBar:l,animationBegin:d,animationDuration:u,animationEasing:h,isAnimationActive:m})))}function WQ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:s},pos:n,bandSize:i,xAxis:l,yAxis:d,xAxisTicks:u,yAxisTicks:h,stackedData:m,displayedData:p,offset:x,cells:b}=e,y=t==="horizontal"?d:l,v=m?y.scale.domain():null,w=TF({numericAxis:y});return p.map((N,S)=>{var j,k,A,O,T,D;m?j=EF(m[S],v):(j=Et(N,r),Array.isArray(j)||(j=[w,j]));var R=jQ(s,fP)(j[1],S);if(t==="horizontal"){var I,[L,$]=[d.scale(j[0]),d.scale(j[1])];k=nk({axis:l,ticks:u,bandSize:i,offset:n.offset,entry:N,index:S}),A=(I=$??L)!==null&&I!==void 0?I:void 0,O=n.size;var W=L-$;if(T=Sa(W)?0:W,D={x:k,y:x.top,width:O,height:x.height},Math.abs(R)>0&&Math.abs(T)<Math.abs(R)){var P=Ir(T||R)*(Math.abs(R)-Math.abs(T));A-=P,T+=P}}else{var[U,K]=[l.scale(j[0]),l.scale(j[1])];if(k=U,A=nk({axis:d,ticks:h,bandSize:i,offset:n.offset,entry:N,index:S}),O=K-U,T=n.size,D={x:x.left,y:A,width:x.width,height:T},Math.abs(R)>0&&Math.abs(O)<Math.abs(R)){var G=Ir(O||R)*(Math.abs(R)-Math.abs(O));O+=G}}if(k==null||A==null||O==null||T==null)return null;var Q=ta(ta({},N),{},{x:k,y:A,width:O,height:T,value:m?j:j[1],payload:N,background:D,tooltipPosition:{x:k+O/2,y:A+T/2}},b&&b[S]&&b[S].props);return Q}).filter(Boolean)}function mP(e){var t=Ya(e,GQ),r=Ea();return _.createElement(Bj,{id:t.id,type:"bar"},s=>_.createElement(_.Fragment,null,_.createElement(sP,{legendPayload:LQ(t)}),_.createElement($j,{fn:BQ,args:t}),_.createElement(iP,{type:"bar",id:s,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:y3(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),_.createElement(KQ,dc({},t,{id:s}))))}mP.displayName="Bar";function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(s){YQ(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function YQ(e,t,r){return(t=XQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XQ(e){var t=JQ(e,"string");return typeof t=="symbol"?t:t+""}function JQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZQ=(e,t)=>t,QQ=(e,t,r)=>r,eee=(e,t,r,s)=>s,tee=(e,t,r,s,n)=>n,Fu=ye([Cp,tee],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),ree=ye([Fu],e=>e==null?void 0:e.maxBarSize),aee=(e,t,r,s,n,i)=>i,SA=(e,t,r)=>{var s=r??e;if(!Bt(s))return ca(s,t,0)},see=ye([it,Cp,ZQ,QQ,eee],(e,t,r,s,n)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===s).filter(i=>i.isPanorama===n).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),nee=(e,t,r,s)=>{var n=it(e);return n==="horizontal"?mu(e,"yAxis",r,s):mu(e,"xAxis",t,s)},iee=(e,t,r)=>{var s=it(e);return s==="horizontal"?SC(e,"xAxis",t):SC(e,"yAxis",r)},oee=(e,t,r)=>{var s={},n=e.filter(kp),i=e.filter(h=>h.stackId==null),l=n.reduce((h,m)=>(h[m.stackId]||(h[m.stackId]=[]),h[m.stackId].push(m),h),s),d=Object.entries(l).map(h=>{var[m,p]=h,x=p.map(y=>y.dataKey),b=SA(t,r,p[0].barSize);return{stackId:m,dataKeys:x,barSize:b}}),u=i.map(h=>{var m=[h.dataKey].filter(x=>x!=null),p=SA(t,r,h.barSize);return{stackId:void 0,dataKeys:m,barSize:p}});return[...d,...u]},lee=ye([see,fW,iee],oee),cee=(e,t,r,s,n)=>{var i,l,d=Fu(e,t,r,s,n);if(d!=null){var u=it(e),h=M6(e),{maxBarSize:m}=d,p=Bt(m)?h:m,x,b;return u==="horizontal"?(x=Mi(e,"xAxis",t,s),b=Di(e,"xAxis",t,s)):(x=Mi(e,"yAxis",r,s),b=Di(e,"yAxis",r,s)),(i=(l=iu(x,b,!0))!==null&&l!==void 0?l:p)!==null&&i!==void 0?i:0}},pP=(e,t,r,s)=>{var n=it(e),i,l;return n==="horizontal"?(i=Mi(e,"xAxis",t,s),l=Di(e,"xAxis",t,s)):(i=Mi(e,"yAxis",r,s),l=Di(e,"yAxis",r,s)),iu(i,l)};function dee(e,t,r,s,n){var i=s.length;if(!(i<1)){var l=ca(e,r,0,!0),d,u=[];if(Yr(s[0].barSize)){var h=!1,m=r/i,p=s.reduce((N,S)=>N+(S.barSize||0),0);p+=(i-1)*l,p>=r&&(p-=(i-1)*l,l=0),p>=r&&m>0&&(h=!0,m*=.9,p=i*m);var x=(r-p)/2>>0,b={offset:x-l,size:0};d=s.reduce((N,S)=>{var j,k={stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:b.offset+b.size+l,size:h?m:(j=S.barSize)!==null&&j!==void 0?j:0}},A=[...N,k];return b=A[A.length-1].position,A},u)}else{var y=ca(t,r,0,!0);r-2*y-(i-1)*l<=0&&(l=0);var v=(r-2*y-(i-1)*l)/i;v>1&&(v>>=0);var w=Yr(n)?Math.min(v,n):v;d=s.reduce((N,S,j)=>[...N,{stackId:S.stackId,dataKeys:S.dataKeys,position:{offset:y+(v+l)*j+(v-w)/2,size:w}}],u)}return d}}var uee=(e,t,r,s,n,i,l)=>{var d=Bt(l)?t:l,u=dee(r,s,n!==i?n:i,e,d);return n!==i&&u!=null&&(u=u.map(h=>Cf(Cf({},h),{},{position:Cf(Cf({},h.position),{},{offset:h.position.offset-n/2})}))),u},hee=ye([lee,M6,hW,I6,cee,pP,ree],uee),fee=(e,t,r,s)=>Mi(e,"xAxis",t,s),mee=(e,t,r,s)=>Mi(e,"yAxis",r,s),pee=(e,t,r,s)=>Di(e,"xAxis",t,s),gee=(e,t,r,s)=>Di(e,"yAxis",r,s),xee=ye([hee,Fu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(s=>s.stackId===t.stackId&&t.dataKey!=null&&s.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),bee=(e,t)=>{var r=Ep(t);if(!(!e||r==null||t==null)){var{stackId:s}=t;if(s!=null){var n=e[s];if(n){var{stackedData:i}=n;if(i)return i.find(l=>l.key===r)}}}},vee=ye([nee,Fu],bee),yee=ye([_r,fee,mee,pee,gee,xee,it,jp,pP,vee,Fu,aee],(e,t,r,s,n,i,l,d,u,h,m,p)=>{var{chartData:x,dataStartIndex:b,dataEndIndex:y}=d;if(!(m==null||i==null||l!=="horizontal"&&l!=="vertical"||t==null||r==null||s==null||n==null||u==null)){var{data:v}=m,w;if(v!=null&&v.length>0?w=v:w=x==null?void 0:x.slice(b,y+1),w!=null)return WQ({layout:l,barSettings:m,pos:i,bandSize:u,xAxis:t,yAxis:r,xAxisTicks:s,yAxisTicks:n,stackedData:h,displayedData:w,offset:e,cells:p})}}),gP=e=>{var{chartData:t}=e,r=Kt(),s=Ea();return _.useEffect(()=>s?()=>{}:(r(MC(t)),()=>{r(MC(void 0))}),[t,r,s]),null},EA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xP=Wa({name:"brush",initialState:EA,reducers:{setBrushSettings(e,t){return t.payload==null?EA:t.payload}}}),{setBrushSettings:_le}=xP.actions,wee=xP.reducer;function jee(e,t,r){return(t=Nee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nee(e){var t=_ee(e,"string");return typeof t=="symbol"?t:t+""}function _ee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Vj{static create(t){return new Vj(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(s)switch(s){case"start":return this.scale(t);case"middle":{var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+n}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var l=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+l}return this.scale(t)}}isInRange(t){var r=this.range(),s=r[0],n=r[r.length-1];return s<=n?t>=s&&t<=n:t>=n&&t<=s}}jee(Vj,"EPS",1e-4);function See(e){return(e%180+180)%180}var Eee=function(t){var{width:r,height:s}=t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=See(n),l=i*Math.PI/180,d=Math.atan(s/r),u=l>d&&l<Math.PI-d?s/Math.sin(l):r/Math.cos(l);return Math.abs(u)},kee={dots:[],areas:[],lines:[]},bP=Wa({name:"referenceElements",initialState:kee,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=On(e).dots.findIndex(s=>s===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=On(e).areas.findIndex(s=>s===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=On(e).lines.findIndex(s=>s===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Sle,removeDot:Ele,addArea:kle,removeArea:Cle,addLine:Ale,removeLine:Ole}=bP.actions,Cee=bP.reducer,Aee=_.createContext(void 0),Oee=e=>{var{children:t}=e,[r]=_.useState("".concat(au("recharts"),"-clip")),s=Fj();if(s==null)return null;var{x:n,y:i,width:l,height:d}=s;return _.createElement(Aee.Provider,{value:r},_.createElement("defs",null,_.createElement("clipPath",{id:r},_.createElement("rect",{x:n,y:i,height:d,width:l}))),t)};function Fb(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function vP(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],n=0;n<e.length;n+=t)s.push(e[n]);return s}function Tee(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return Eee(s,r)}function Pee(e,t,r){var s=r==="width",{x:n,y:i,width:l,height:d}=e;return t===1?{start:s?n:i,end:s?n+l:i+d}:{start:s?n+l:i+d,end:s?n:i}}function Im(e,t,r,s,n){if(e*t<e*s||e*t>e*n)return!1;var i=r();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-n)<=0}function Ree(e,t){return vP(e,t+1)}function Dee(e,t,r,s,n){for(var i=(s||[]).slice(),{start:l,end:d}=t,u=0,h=1,m=l,p=function(){var y=s==null?void 0:s[u];if(y===void 0)return{v:vP(s,h)};var v=u,w,N=()=>(w===void 0&&(w=r(y,v)),w),S=y.coordinate,j=u===0||Im(e,S,N,m,d);j||(u=0,m=l,h+=1),j&&(m=S+e*(N()/2+n),u+=h)},x;h<=i.length;)if(x=p(),x)return x.v;return[]}function kA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(r),!0).forEach(function(s){Mee(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Mee(e,t,r){return(t=Iee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Iee(e){var t=zee(e,"string");return typeof t=="symbol"?t:t+""}function zee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ee(e,t,r,s,n){for(var i=(s||[]).slice(),l=i.length,{start:d}=t,{end:u}=t,h=function(x){var b=i[x],y,v=()=>(y===void 0&&(y=r(b,x)),y);if(x===l-1){var w=e*(b.coordinate+e*v()/2-u);i[x]=b=ea(ea({},b),{},{tickCoord:w>0?b.coordinate-w*e:b.coordinate})}else i[x]=b=ea(ea({},b),{},{tickCoord:b.coordinate});var N=Im(e,b.tickCoord,v,d,u);N&&(u=b.tickCoord-e*(v()/2+n),i[x]=ea(ea({},b),{},{isShow:!0}))},m=l-1;m>=0;m--)h(m);return i}function Lee(e,t,r,s,n,i){var l=(s||[]).slice(),d=l.length,{start:u,end:h}=t;if(i){var m=s[d-1],p=r(m,d-1),x=e*(m.coordinate+e*p/2-h);l[d-1]=m=ea(ea({},m),{},{tickCoord:x>0?m.coordinate-x*e:m.coordinate});var b=Im(e,m.tickCoord,()=>p,u,h);b&&(h=m.tickCoord-e*(p/2+n),l[d-1]=ea(ea({},m),{},{isShow:!0}))}for(var y=i?d-1:d,v=function(S){var j=l[S],k,A=()=>(k===void 0&&(k=r(j,S)),k);if(S===0){var O=e*(j.coordinate-e*A()/2-u);l[S]=j=ea(ea({},j),{},{tickCoord:O<0?j.coordinate-O*e:j.coordinate})}else l[S]=j=ea(ea({},j),{},{tickCoord:j.coordinate});var T=Im(e,j.tickCoord,A,u,h);T&&(u=j.tickCoord+e*(A()/2+n),l[S]=ea(ea({},j),{},{isShow:!0}))},w=0;w<y;w++)v(w);return l}function Gj(e,t,r){var{tick:s,ticks:n,viewBox:i,minTickGap:l,orientation:d,interval:u,tickFormatter:h,unit:m,angle:p}=e;if(!n||!n.length||!s)return[];if(De(u)||Ho.isSsr){var x;return(x=Ree(n,De(u)?u:0))!==null&&x!==void 0?x:[]}var b=[],y=d==="top"||d==="bottom"?"width":"height",v=m&&y==="width"?Wd(m,{fontSize:t,letterSpacing:r}):{width:0,height:0},w=(j,k)=>{var A=typeof h=="function"?h(j.value,k):j.value;return y==="width"?Tee(Wd(A,{fontSize:t,letterSpacing:r}),v,p):Wd(A,{fontSize:t,letterSpacing:r})[y]},N=n.length>=2?Ir(n[1].coordinate-n[0].coordinate):1,S=Pee(i,N,y);return u==="equidistantPreserveStart"?Dee(N,S,w,n,l):(u==="preserveStart"||u==="preserveStartEnd"?b=Lee(N,S,w,n,l,u==="preserveStartEnd"):b=$ee(N,S,w,n,l),b.filter(j=>j.isShow))}var Bee=["viewBox"],Uee=["viewBox"];function Ll(){return Ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ll.apply(null,arguments)}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(s){Kj(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function AA(e,t){if(e==null)return{};var r,s,n=qee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function qee(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Kj(e,t,r){return(t=Fee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fee(e){var t=Hee(e,"string");return typeof t=="symbol"?t:t+""}function Hee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Fi extends _.Component{constructor(t){super(t),this.tickRefs=_.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:s}=t,n=AA(t,Bee),i=this.props,{viewBox:l}=i,d=AA(i,Uee);return!Fb(s,l)||!Fb(n,d)||!Fb(r,this.state)}getTickLineCoord(t){var{x:r,y:s,width:n,height:i,orientation:l,tickSize:d,mirror:u,tickMargin:h}=this.props,m,p,x,b,y,v,w=u?-1:1,N=t.tickSize||d,S=De(t.tickCoord)?t.tickCoord:t.coordinate;switch(l){case"top":m=p=t.coordinate,b=s+ +!u*i,x=b-w*N,v=x-w*h,y=S;break;case"left":x=b=t.coordinate,p=r+ +!u*n,m=p-w*N,y=m-w*h,v=S;break;case"right":x=b=t.coordinate,p=r+ +u*n,m=p+w*N,y=m+w*h,v=S;break;default:m=p=t.coordinate,b=s+ +u*i,x=b+w*N,v=x+w*h,y=S;break}return{line:{x1:m,y1:x,x2:p,y2:b},tick:{x:y,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,s;switch(t){case"left":s=r?"start":"end";break;case"right":s=r?"end":"start";break;default:s="middle";break}return s}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:s,height:n,orientation:i,mirror:l,axisLine:d}=this.props,u=xr(xr(xr({},Vt(this.props,!1)),Vt(d,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var h=+(i==="top"&&!l||i==="bottom"&&l);u=xr(xr({},u),{},{x1:t,y1:r+h*n,x2:t+s,y2:r+h*n})}else{var m=+(i==="left"&&!l||i==="right"&&l);u=xr(xr({},u),{},{x1:t+m*s,y1:r,x2:t+m*s,y2:r+n})}return _.createElement("line",Ll({},u,{className:ht("recharts-cartesian-axis-line",Ri(d,"className"))}))}static renderTickItem(t,r,s){var n,i=ht(r.className,"recharts-cartesian-axis-tick-value");if(_.isValidElement(t))n=_.cloneElement(t,xr(xr({},r),{},{className:i}));else if(typeof t=="function")n=t(xr(xr({},r),{},{className:i}));else{var l="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(l=ht(l,t.className)),n=_.createElement(Dp,Ll({},r,{className:l}),s)}return n}renderTicks(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:n,stroke:i,tick:l,tickFormatter:d,unit:u,padding:h}=this.props,m=Gj(xr(xr({},this.props),{},{ticks:s}),t,r),p=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),b=tn(this.props),y=Vt(l,!1),v=xr(xr({},b),{},{fill:"none"},Vt(n,!1)),w=m.map((N,S)=>{var{line:j,tick:k}=this.getTickLineCoord(N),A=xr(xr(xr(xr({textAnchor:p,verticalAnchor:x},b),{},{stroke:"none",fill:i},y),k),{},{index:S,payload:N,visibleTicksCount:m.length,tickFormatter:d,padding:h});return _.createElement(Nr,Ll({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Cu(this.props,N,S)),n&&_.createElement("line",Ll({},v,j,{className:ht("recharts-cartesian-axis-tick-line",Ri(n,"className"))})),l&&Fi.renderTickItem(l,A,"".concat(typeof d=="function"?d(N.value,S):N.value).concat(u||"")))});return w.length>0?_.createElement("g",{className:"recharts-cartesian-axis-ticks"},w):null}render(){var{axisLine:t,width:r,height:s,className:n,hide:i}=this.props;if(i)return null;var{ticks:l}=this.props;return r!=null&&r<=0||s!=null&&s<=0?null:_.createElement(Nr,{className:ht("recharts-cartesian-axis",n),ref:d=>{if(d){var u=d.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(u);var h=u[0];if(h){var m=window.getComputedStyle(h).fontSize,p=window.getComputedStyle(h).letterSpacing;(m!==this.state.fontSize||p!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,l),za.renderCallByParent(this.props))}}Kj(Fi,"displayName","CartesianAxis");Kj(Fi,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Vee=["x1","y1","x2","y2","key"],Gee=["offset"],Kee=["xAxisId","yAxisId"],Wee=["xAxisId","yAxisId"];function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function ra(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(s){Yee(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Yee(e,t,r){return(t=Xee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xee(e){var t=Jee(e,"string");return typeof t=="symbol"?t:t+""}function Jee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ao.apply(null,arguments)}function zm(e,t){if(e==null)return{};var r,s,n=Zee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zee(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var Qee=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:s,y:n,width:i,height:l,ry:d}=e;return _.createElement("rect",{x:s,y:n,ry:d,width:i,height:l,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function yP(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:s,y1:n,x2:i,y2:l,key:d}=t,u=zm(t,Vee),h=tn(u),{offset:m}=h,p=zm(h,Gee);r=_.createElement("line",Ao({},p,{x1:s,y1:n,x2:i,y2:l,fill:"none",key:d}))}return r}function ete(e){var{x:t,width:r,horizontal:s=!0,horizontalPoints:n}=e;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:l}=e,d=zm(e,Kee),u=n.map((h,m)=>{var p=ra(ra({},d),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(m),index:m});return yP(s,p)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function tte(e){var{y:t,height:r,vertical:s=!0,verticalPoints:n}=e;if(!s||!n||!n.length)return null;var{xAxisId:i,yAxisId:l}=e,d=zm(e,Wee),u=n.map((h,m)=>{var p=ra(ra({},d),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(m),index:m});return yP(s,p)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function rte(e){var{horizontalFill:t,fillOpacity:r,x:s,y:n,width:i,height:l,horizontalPoints:d,horizontal:u=!0}=e;if(!u||!t||!t.length)return null;var h=d.map(p=>Math.round(p+n-n)).sort((p,x)=>p-x);n!==h[0]&&h.unshift(0);var m=h.map((p,x)=>{var b=!h[x+1],y=b?n+l-p:h[x+1]-p;if(y<=0)return null;var v=x%t.length;return _.createElement("rect",{key:"react-".concat(x),y:p,x:s,height:y,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function ate(e){var{vertical:t=!0,verticalFill:r,fillOpacity:s,x:n,y:i,width:l,height:d,verticalPoints:u}=e;if(!t||!r||!r.length)return null;var h=u.map(p=>Math.round(p+n-n)).sort((p,x)=>p-x);n!==h[0]&&h.unshift(0);var m=h.map((p,x)=>{var b=!h[x+1],y=b?n+l-p:h[x+1]-p;if(y<=0)return null;var v=x%r.length;return _.createElement("rect",{key:"react-".concat(x),x:p,y:i,width:y,height:d,stroke:"none",fill:r[v],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var ste=(e,t)=>{var{xAxis:r,width:s,height:n,offset:i}=e;return b3(Gj(ra(ra(ra({},Fi.defaultProps),r),{},{ticks:v3(r),viewBox:{x:0,y:0,width:s,height:n}})),i.left,i.left+i.width,t)},nte=(e,t)=>{var{yAxis:r,width:s,height:n,offset:i}=e;return b3(Gj(ra(ra(ra({},Fi.defaultProps),r),{},{ticks:v3(r),viewBox:{x:0,y:0,width:s,height:n}})),i.top,i.top+i.height,t)},ite={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function my(e){var t=ww(),r=jw(),s=S3(),n=ra(ra({},Ya(e,ite)),{},{x:De(e.x)?e.x:s.left,y:De(e.y)?e.y:s.top,width:De(e.width)?e.width:s.width,height:De(e.height)?e.height:s.height}),{xAxisId:i,yAxisId:l,x:d,y:u,width:h,height:m,syncWithTicks:p,horizontalValues:x,verticalValues:b}=n,y=Ea(),v=Ue(R=>EC(R,"xAxis",i,y)),w=Ue(R=>EC(R,"yAxis",l,y));if(!De(h)||h<=0||!De(m)||m<=0||!De(d)||d!==+d||!De(u)||u!==+u)return null;var N=n.verticalCoordinatesGenerator||ste,S=n.horizontalCoordinatesGenerator||nte,{horizontalPoints:j,verticalPoints:k}=n;if((!j||!j.length)&&typeof S=="function"){var A=x&&x.length,O=S({yAxis:w?ra(ra({},w),{},{ticks:A?x:w.ticks}):void 0,width:t,height:r,offset:s},A?!0:p);Kd(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(j=O)}if((!k||!k.length)&&typeof N=="function"){var T=b&&b.length,D=N({xAxis:v?ra(ra({},v),{},{ticks:T?b:v.ticks}):void 0,width:t,height:r,offset:s},T?!0:p);Kd(Array.isArray(D),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(k=D)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(Qee,{fill:n.fill,fillOpacity:n.fillOpacity,x:n.x,y:n.y,width:n.width,height:n.height,ry:n.ry}),_.createElement(rte,Ao({},n,{horizontalPoints:j})),_.createElement(ate,Ao({},n,{verticalPoints:k})),_.createElement(ete,Ao({},n,{offset:s,horizontalPoints:j,xAxis:v,yAxis:w})),_.createElement(tte,Ao({},n,{offset:s,verticalPoints:k,xAxis:v,yAxis:w})))}my.displayName="CartesianGrid";var wP=(e,t,r,s)=>Mi(e,"xAxis",t,s),jP=(e,t,r,s)=>Di(e,"xAxis",t,s),NP=(e,t,r,s)=>Mi(e,"yAxis",r,s),_P=(e,t,r,s)=>Di(e,"yAxis",r,s),ote=ye([it,wP,NP,jP,_P],(e,t,r,s,n)=>Un(e,"xAxis")?iu(t,s,!1):iu(r,n,!1)),lte=(e,t,r,s,n)=>n,SP=ye([Cp,lte],(e,t)=>e.filter(r=>r.type==="area").find(r=>r.id===t)),cte=(e,t,r,s,n)=>{var i,l=SP(e,t,r,s,n);if(l!=null){var d=it(e),u=Un(d,"xAxis"),h;if(u?h=mu(e,"yAxis",r,s):h=mu(e,"xAxis",t,s),h!=null){var{stackId:m}=l,p=Ep(l);if(!(m==null||p==null)){var x=(i=h[m])===null||i===void 0?void 0:i.stackedData;return x==null?void 0:x.find(b=>b.key===p)}}}},dte=ye([it,wP,NP,jP,_P,cte,jp,ote,SP],(e,t,r,s,n,i,l,d,u)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:p}=l;if(!(u==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||s==null||n==null||s.length===0||n.length===0||d==null)){var{data:x}=u,b;if(x&&x.length>0?b=x:b=h==null?void 0:h.slice(m,p+1),b!=null){var y=void 0;return Ote({layout:e,xAxis:t,yAxis:r,xAxisTicks:s,yAxisTicks:n,dataStartIndex:m,areaSettings:u,stackedData:i,displayedData:b,chartBaseValue:y,bandSize:d})}}}),ute=["id"],hte=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function EP(e,t){if(e==null)return{};var r,s,n=fte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fte(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function TA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function Oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(r),!0).forEach(function(s){mte(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function mte(e,t,r){return(t=pte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pte(e){var t=gte(e,"string");return typeof t=="symbol"?t:t+""}function gte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pn(){return Pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Pn.apply(null,arguments)}function $m(e,t){return e&&e!=="none"?e:t}var xte=e=>{var{dataKey:t,name:r,stroke:s,fill:n,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:$m(s,n),value:xc(r,t),payload:e}]};function bte(e){var{dataKey:t,data:r,stroke:s,strokeWidth:n,fill:i,name:l,hide:d,unit:u}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:s,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:xc(l,t),hide:d,type:e.tooltipType,color:$m(s,i),unit:u}}}var vte=(e,t)=>{var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var s=ht("recharts-area-dot",typeof e!="boolean"?e.className:"");r=_.createElement(JT,Pn({},t,{className:s}))}return r};function yte(e,t){return e==null?!1:t?!0:e.length===1}function wte(e){var{clipPathId:t,points:r,props:s}=e,{needClip:n,dot:i,dataKey:l}=s;if(!yte(r,i))return null;var d=pO(i),u=tn(s),h=Vt(i,!0),m=r.map((x,b)=>{var y=Oo(Oo(Oo({key:"dot-".concat(b),r:3},u),h),{},{index:b,cx:x.x,cy:x.y,dataKey:l,value:x.value,payload:x.payload,points:r});return vte(i,y)}),p={clipPath:n?"url(#clipPath-".concat(d?"":"dots-").concat(t,")"):void 0};return _.createElement(Nr,Pn({className:"recharts-area-dots"},p),m)}function py(e){var{points:t,baseLine:r,needClip:s,clipPathId:n,props:i,showLabels:l}=e,{layout:d,type:u,stroke:h,connectNulls:m,isRange:p}=i,{id:x}=i,b=EP(i,ute),y=tn(b);return _.createElement(_.Fragment,null,(t==null?void 0:t.length)>1&&_.createElement(Nr,{clipPath:s?"url(#clipPath-".concat(n,")"):void 0},_.createElement(Gd,Pn({},y,{id:x,points:t,connectNulls:m,type:u,baseLine:r,layout:d,stroke:"none",className:"recharts-area-area"})),h!=="none"&&_.createElement(Gd,Pn({},y,{className:"recharts-area-curve",layout:d,type:u,connectNulls:m,fill:"none",points:t})),h!=="none"&&p&&_.createElement(Gd,Pn({},y,{className:"recharts-area-curve",layout:d,type:u,connectNulls:m,fill:"none",points:r}))),_.createElement(wte,{points:t,props:b,clipPathId:n}),l&&Ai.renderCallByParent(b,t))}function jte(e){var{alpha:t,baseLine:r,points:s,strokeWidth:n}=e,i=s[0].y,l=s[s.length-1].y;if(!Yr(i)||!Yr(l))return null;var d=t*Math.abs(i-l),u=Math.max(...s.map(h=>h.x||0));return De(r)?u=Math.max(r,u):r&&Array.isArray(r)&&r.length&&(u=Math.max(...r.map(h=>h.x||0),u)),De(u)?_.createElement("rect",{x:0,y:i<l?i:i-d,width:u+(n?parseInt("".concat(n),10):1),height:Math.floor(d)}):null}function Nte(e){var{alpha:t,baseLine:r,points:s,strokeWidth:n}=e,i=s[0].x,l=s[s.length-1].x;if(!Yr(i)||!Yr(l))return null;var d=t*Math.abs(i-l),u=Math.max(...s.map(h=>h.y||0));return De(r)?u=Math.max(r,u):r&&Array.isArray(r)&&r.length&&(u=Math.max(...r.map(h=>h.y||0),u)),De(u)?_.createElement("rect",{x:i<l?i:i-d,y:0,width:d,height:Math.floor(u+(n?parseInt("".concat(n),10):1))}):null}function _te(e){var{alpha:t,layout:r,points:s,baseLine:n,strokeWidth:i}=e;return r==="vertical"?_.createElement(jte,{alpha:t,points:s,baseLine:n,strokeWidth:i}):_.createElement(Nte,{alpha:t,points:s,baseLine:n,strokeWidth:i})}function Ste(e){var{needClip:t,clipPathId:r,props:s,previousPointsRef:n,previousBaselineRef:i}=e,{points:l,baseLine:d,isAnimationActive:u,animationBegin:h,animationDuration:m,animationEasing:p,onAnimationStart:x,onAnimationEnd:b}=s,y=Lj(s,"recharts-area-"),[v,w]=_.useState(!0),N=_.useCallback(()=>{typeof b=="function"&&b(),w(!1)},[b]),S=_.useCallback(()=>{typeof x=="function"&&x(),w(!0)},[x]),j=n.current,k=i.current;return _.createElement(Uj,{begin:h,duration:m,isActive:u,easing:p,onAnimationEnd:N,onAnimationStart:S,key:y},A=>{if(j){var O=j.length/l.length,T=A===1?l:l.map((R,I)=>{var L=Math.floor(I*O);if(j[L]){var $=j[L];return Oo(Oo({},R),{},{x:ms($.x,R.x,A),y:ms($.y,R.y,A)})}return R}),D;return De(d)?D=ms(k,d,A):Bt(d)||Sa(d)?D=ms(k,0,A):D=d.map((R,I)=>{var L=Math.floor(I*O);if(Array.isArray(k)&&k[L]){var $=k[L];return Oo(Oo({},R),{},{x:ms($.x,R.x,A),y:ms($.y,R.y,A)})}return R}),A>0&&(n.current=T,i.current=D),_.createElement(py,{points:T,baseLine:D,needClip:t,clipPathId:r,props:s,showLabels:!v})}return A>0&&(n.current=l,i.current=d),_.createElement(Nr,null,_.createElement("defs",null,_.createElement("clipPath",{id:"animationClipPath-".concat(r)},_.createElement(_te,{alpha:A,points:l,baseLine:d,layout:s.layout,strokeWidth:s.strokeWidth}))),_.createElement(Nr,{clipPath:"url(#animationClipPath-".concat(r,")")},_.createElement(py,{points:l,baseLine:d,needClip:t,clipPathId:r,props:s,showLabels:!0})))})}function Ete(e){var{needClip:t,clipPathId:r,props:s}=e,{points:n,baseLine:i,isAnimationActive:l}=s,d=_.useRef(null),u=_.useRef(),h=d.current,m=u.current;return l&&n&&n.length&&(h!==n||m!==i)?_.createElement(Ste,{needClip:t,clipPathId:r,props:s,previousPointsRef:d,previousBaselineRef:u}):_.createElement(py,{points:n,baseLine:i,needClip:t,clipPathId:r,props:s,showLabels:!0})}class kte extends _.PureComponent{render(){var t,{hide:r,dot:s,points:n,className:i,top:l,left:d,needClip:u,xAxisId:h,yAxisId:m,width:p,height:x,id:b,baseLine:y}=this.props;if(r)return null;var v=ht("recharts-area",i),w=b,{r:N=3,strokeWidth:S=2}=(t=Vt(s,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},j=pO(s),k=N*2+S;return _.createElement(_.Fragment,null,_.createElement(Nr,{className:v},u&&_.createElement("defs",null,_.createElement(uP,{clipPathId:w,xAxisId:h,yAxisId:m}),!j&&_.createElement("clipPath",{id:"clipPath-dots-".concat(w)},_.createElement("rect",{x:d-k/2,y:l-k/2,width:p+k,height:x+k}))),_.createElement(Ete,{needClip:u,clipPathId:w,props:this.props})),_.createElement(wA,{points:n,mainColor:$m(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(y)&&_.createElement(wA,{points:y,mainColor:$m(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var kP={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Ho.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Cte(e){var t,r=Ya(e,kP),{activeDot:s,animationBegin:n,animationDuration:i,animationEasing:l,connectNulls:d,dot:u,fill:h,fillOpacity:m,hide:p,isAnimationActive:x,legendType:b,stroke:y,xAxisId:v,yAxisId:w}=r,N=EP(r,hte),S=pp(),j=IT(),{needClip:k}=Hj(v,w),A=Ea(),{points:O,isRange:T,baseLine:D}=(t=Ue(P=>dte(P,v,w,A,e.id)))!==null&&t!==void 0?t:{},R=Fj();if(S!=="horizontal"&&S!=="vertical"||R==null||j!=="AreaChart"&&j!=="ComposedChart")return null;var{height:I,width:L,x:$,y:W}=R;return!O||!O.length?null:_.createElement(kte,Pn({},N,{activeDot:s,animationBegin:n,animationDuration:i,animationEasing:l,baseLine:D,connectNulls:d,dot:u,fill:h,fillOpacity:m,height:I,hide:p,layout:S,isAnimationActive:x,isRange:T,legendType:b,needClip:k,points:O,stroke:y,width:L,left:$,top:W,xAxisId:v,yAxisId:w}))}var Ate=(e,t,r,s,n)=>{var i=r??t;if(De(i))return i;var l=e==="horizontal"?n:s,d=l.scale.domain();if(l.type==="number"){var u=Math.max(d[0],d[1]),h=Math.min(d[0],d[1]);return i==="dataMin"?h:i==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return i==="dataMin"?d[0]:i==="dataMax"?d[1]:d[0]};function Ote(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:s},stackedData:n,layout:i,chartBaseValue:l,xAxis:d,yAxis:u,displayedData:h,dataStartIndex:m,xAxisTicks:p,yAxisTicks:x,bandSize:b}=e,y=n&&n.length,v=Ate(i,l,r,d,u),w=i==="horizontal",N=!1,S=h.map((k,A)=>{var O;y?O=n[m+A]:(O=Et(k,s),Array.isArray(O)?N=!0:O=[v,O]);var T=O[1]==null||y&&!t&&Et(k,s)==null;return w?{x:sk({axis:d,ticks:p,bandSize:b,entry:k,index:A}),y:T?null:u.scale(O[1]),value:O,payload:k}:{x:T?null:d.scale(O[1]),y:sk({axis:u,ticks:x,bandSize:b,entry:k,index:A}),value:O,payload:k}}),j;return y||N?j=S.map(k=>{var A=Array.isArray(k.value)?k.value[0]:null;return w?{x:k.x,y:A!=null&&k.y!=null?u.scale(A):null,payload:k.payload}:{x:A!=null?d.scale(A):null,y:k.y,payload:k.payload}}):j=w?u.scale(v):d.scale(v),{points:S,baseLine:j,isRange:N}}function gy(e){var t=Ya(e,kP),r=Ea();return _.createElement(Bj,{id:t.id,type:"area"},s=>_.createElement(_.Fragment,null,_.createElement(sP,{legendPayload:xte(t)}),_.createElement($j,{fn:bte,args:t}),_.createElement(iP,{type:"area",id:s,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:y3(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:r,connectNulls:t.connectNulls}),_.createElement(Cte,Pn({},t,{id:s}))))}gy.displayName="Area";function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function RA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(s){Tte(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Tte(e,t,r){return(t=Pte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pte(e){var t=Rte(e,"string");return typeof t=="symbol"?t:t+""}function Rte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dte={xAxis:{},yAxis:{},zAxis:{}},CP=Wa({name:"cartesianAxis",initialState:Dte,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:s}=t.payload;e.yAxis[r]&&(e.yAxis[r]=RA(RA({},e.yAxis[r]),{},{width:s}))}}}),{addXAxis:Mte,removeXAxis:Ite,addYAxis:zte,removeYAxis:$te,addZAxis:Tle,removeZAxis:Ple,updateYAxisWidth:Lte}=CP.actions,Bte=CP.reducer,Ute=["children"],qte=["dangerouslySetInnerHTML","ticks"];function AP(e,t,r){return(t=Fte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fte(e){var t=Hte(e,"string");return typeof t=="symbol"?t:t+""}function Hte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xy(){return xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},xy.apply(null,arguments)}function OP(e,t){if(e==null)return{};var r,s,n=Vte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Vte(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Gte(e){var t=Kt(),r=_.useMemo(()=>{var{children:i}=e,l=OP(e,Ute);return l},[e]),s=Ue(i=>Vn(i,r.id)),n=r===s;return _.useEffect(()=>(t(Mte(r)),()=>{t(Ite(r))}),[r,t]),n?e.children:null}var Kte=e=>{var{xAxisId:t,className:r}=e,s=Ue(_3),n=Ea(),i="xAxis",l=Ue(b=>_c(b,i,t,n)),d=Ue(b=>pT(b,i,t,n)),u=Ue(b=>uT(b,t)),h=Ue(b=>aY(b,t));if(u==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:p}=e,x=OP(e,qte);return _.createElement(Fi,xy({},x,{scale:l,x:h.x,y:h.y,width:u.width,height:u.height,className:ht("recharts-".concat(i," ").concat(i),r),viewBox:s,ticks:d}))},Wte=e=>{var t,r,s,n,i;return _.createElement(Gte,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(s=e.angle)!==null&&s!==void 0?s:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},_.createElement(Kte,e))};class Lm extends _.Component{render(){return _.createElement(Wte,this.props)}}AP(Lm,"displayName","XAxis");AP(Lm,"defaultProps",{allowDataOverflow:Da.allowDataOverflow,allowDecimals:Da.allowDecimals,allowDuplicatedCategory:Da.allowDuplicatedCategory,height:Da.height,hide:!1,mirror:Da.mirror,orientation:Da.orientation,padding:Da.padding,reversed:Da.reversed,scale:Da.scale,tickCount:Da.tickCount,type:Da.type,xAxisId:0});var Yte=e=>{var{ticks:t,label:r,labelGapWithTick:s=5,tickSize:n=0,tickMargin:i=0}=e,l=0;if(t){t.forEach(m=>{if(m){var p=m.getBoundingClientRect();p.width>l&&(l=p.width)}});var d=r?r.getBoundingClientRect().width:0,u=n+i,h=l+u+d+(r?s:0);return Math.round(h)}return 0},Xte=["dangerouslySetInnerHTML","ticks"];function TP(e,t,r){return(t=Jte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jte(e){var t=Zte(e,"string");return typeof t=="symbol"?t:t+""}function Zte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},by.apply(null,arguments)}function Qte(e,t){if(e==null)return{};var r,s,n=ere(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ere(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function tre(e){var t=Kt();return _.useEffect(()=>(t(zte(e)),()=>{t($te(e))}),[e,t]),null}var rre=e=>{var t,{yAxisId:r,className:s,width:n,label:i}=e,l=_.useRef(null),d=_.useRef(null),u=Ue(_3),h=Ea(),m=Kt(),p="yAxis",x=Ue(j=>_c(j,p,r,h)),b=Ue(j=>hT(j,r)),y=Ue(j=>sY(j,r)),v=Ue(j=>pT(j,p,r,h));if(_.useLayoutEffect(()=>{var j;if(!(n!=="auto"||!b||Oj(i)||_.isValidElement(i))){var k=l.current,A=k==null||(j=k.tickRefs)===null||j===void 0?void 0:j.current,{tickSize:O,tickMargin:T}=k.props,D=Yte({ticks:A,label:d.current,labelGapWithTick:5,tickSize:O,tickMargin:T});Math.round(b.width)!==Math.round(D)&&m(Lte({id:r,width:D}))}},[l,l==null||(t=l.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,b==null?void 0:b.width,b,m,i,r,n]),b==null||y==null)return null;var{dangerouslySetInnerHTML:w,ticks:N}=e,S=Qte(e,Xte);return _.createElement(Fi,by({},S,{ref:l,labelRef:d,scale:x,x:y.x,y:y.y,width:b.width,height:b.height,className:ht("recharts-".concat(p," ").concat(p),s),viewBox:u,ticks:v}))},are=e=>{var t,r,s,n,i;return _.createElement(_.Fragment,null,_.createElement(tre,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(s=e.angle)!==null&&s!==void 0?s:0,minTickGap:(n=e.minTickGap)!==null&&n!==void 0?n:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),_.createElement(rre,e))},sre={allowDataOverflow:Ma.allowDataOverflow,allowDecimals:Ma.allowDecimals,allowDuplicatedCategory:Ma.allowDuplicatedCategory,hide:!1,mirror:Ma.mirror,orientation:Ma.orientation,padding:Ma.padding,reversed:Ma.reversed,scale:Ma.scale,tickCount:Ma.tickCount,type:Ma.type,width:Ma.width,yAxisId:0};class Bm extends _.Component{render(){return _.createElement(are,this.props)}}TP(Bm,"displayName","YAxis");TP(Bm,"defaultProps",sre);var Hb={exports:{}},Vb={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DA;function nre(){if(DA)return Vb;DA=1;var e=uc();function t(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var r=typeof Object.is=="function"?Object.is:t,s=e.useSyncExternalStore,n=e.useRef,i=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Vb.useSyncExternalStoreWithSelector=function(u,h,m,p,x){var b=n(null);if(b.current===null){var y={hasValue:!1,value:null};b.current=y}else y=b.current;b=l(function(){function w(A){if(!N){if(N=!0,S=A,A=p(A),x!==void 0&&y.hasValue){var O=y.value;if(x(O,A))return j=O}return j=A}if(O=j,r(S,A))return O;var T=p(A);return x!==void 0&&x(O,T)?(S=A,O):(S=A,j=T)}var N=!1,S,j,k=m===void 0?null:m;return[function(){return w(h())},k===null?void 0:function(){return w(k())}]},[h,m,p,x]);var v=s(u,b[0],b[1]);return i(function(){y.hasValue=!0,y.value=v},[v]),d(v),v},Vb}var MA;function ire(){return MA||(MA=1,Hb.exports=nre()),Hb.exports}ire();function ore(e){e()}function lre(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ore(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0;const n=t={callback:r,next:null,prev:t};return n.prev?n.prev.next=n:e=n,function(){!s||e===null||(s=!1,n.next?n.next.prev=n.prev:t=n.prev,n.prev?n.prev.next=n.next:e=n.next)}}}}var IA={notify(){},get:()=>[]};function cre(e,t){let r,s=IA,n=0,i=!1;function l(v){m();const w=s.subscribe(v);let N=!1;return()=>{N||(N=!0,w(),p())}}function d(){s.notify()}function u(){y.onStateChange&&y.onStateChange()}function h(){return i}function m(){n++,r||(r=e.subscribe(u),s=lre())}function p(){n--,r&&n===0&&(r(),r=void 0,s.clear(),s=IA)}function x(){i||(i=!0,m())}function b(){i&&(i=!1,p())}const y={addNestedSub:l,notifyNestedSubs:d,handleChangeWrapper:u,isSubscribed:h,trySubscribe:x,tryUnsubscribe:b,getListeners:()=>s};return y}var dre=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ure=dre(),hre=()=>typeof navigator<"u"&&navigator.product==="ReactNative",fre=hre(),mre=()=>ure||fre?_.useLayoutEffect:_.useEffect,pre=mre(),Gb=Symbol.for("react-redux-context"),Kb=typeof globalThis<"u"?globalThis:{};function gre(){if(!_.createContext)return{};const e=Kb[Gb]??(Kb[Gb]=new Map);let t=e.get(_.createContext);return t||(t=_.createContext(null),e.set(_.createContext,t)),t}var xre=gre();function bre(e){const{children:t,context:r,serverState:s,store:n}=e,i=_.useMemo(()=>{const u=cre(n);return{store:n,subscription:u,getServerState:s?()=>s:void 0}},[n,s]),l=_.useMemo(()=>n.getState(),[n]);pre(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),l!==n.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,l]);const d=r||xre;return _.createElement(d.Provider,{value:i},t)}var vre=bre,yre=(e,t)=>t,Wj=ye([yre,it,q6,Er,OT,Gn,lX,_r],fX),Yj=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,s=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/s)}},PP=ys("mouseClick"),RP=Tu();RP.startListening({actionCreator:PP,effect:(e,t)=>{var r=e.payload,s=Wj(t.getState(),Yj(r));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(xY({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var vy=ys("mouseMove"),DP=Tu();DP.startListening({actionCreator:vy,effect:(e,t)=>{var r=e.payload,s=t.getState(),n=yj(s,s.tooltip.settings.shared),i=Wj(s,Yj(r));n==="axis"&&((i==null?void 0:i.activeIndex)!=null?t.dispatch(NT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(jT()))}});function wre(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var zA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},MP=Wa({name:"rootProps",initialState:zA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:zA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),jre=MP.reducer,{updateOptions:Nre}=MP.actions,IP=Wa({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:_re}=IP.actions,Sre=IP.reducer,zP=ys("keyDown"),$P=ys("focus"),Xj=Tu();Xj.startListening({actionCreator:zP,effect:(e,t)=>{var r=t.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var l=Number(wj(n,Ec(r))),d=Gn(r);if(i==="Enter"){var u=Tm(r,"axis","hover",String(n.index));t.dispatch(ly({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:u}));return}var h=lY(r),m=h==="left-to-right"?1:-1,p=i==="ArrowRight"?1:-1,x=l+p*m;if(!(d==null||x>=d.length||x<0)){var b=Tm(r,"axis","hover",String(x));t.dispatch(ly({active:!0,activeIndex:x.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});Xj.startListening({actionCreator:$P,effect:(e,t)=>{var r=t.getState(),s=r.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&n.index==null){var i="0",l=Tm(r,"axis","hover",String(i));t.dispatch(ly({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:l}))}}}});var hs=ys("externalEvent"),LP=Tu();LP.startListening({actionCreator:hs,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),s={activeCoordinate:QY(r),activeDataKey:DT(r),activeIndex:Ii(r),activeLabel:RT(r),activeTooltipIndex:Ii(r),isTooltipActive:eX(r)};e.payload.handler(s,e.payload.reactEvent)}}});var Ere=ye([Sc],e=>e.tooltipItemPayloads),kre=ye([Ere,Uu,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,s)=>{var n=e.find(d=>d.settings.dataKey===s);if(n!=null){var{positions:i}=n;if(i!=null){var l=t(i,r);return l}}}),BP=ys("touchMove"),UP=Tu();UP.startListening({actionCreator:BP,effect:(e,t)=>{var r=e.payload,s=t.getState(),n=yj(s,s.tooltip.settings.shared);if(n==="axis"){var i=Wj(s,Yj({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(i==null?void 0:i.activeIndex)!=null&&t.dispatch(NT({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(n==="item"){var l,d=r.touches[0],u=document.elementFromPoint(d.clientX,d.clientY);if(!u||!u.getAttribute)return;var h=u.getAttribute(j3),m=(l=u.getAttribute(N3))!==null&&l!==void 0?l:void 0,p=kre(t.getState(),h,m);t.dispatch(wT({activeDataKey:m,activeIndex:h,activeCoordinate:p}))}}});var Cre=KO({brush:wee,cartesianAxis:Bte,chartData:AX,errorBars:_Q,graphicalItems:DZ,layout:dF,legend:XF,options:_X,polarAxis:eZ,polarOptions:Sre,referenceElements:Cee,rootProps:jre,tooltip:bY}),Are=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Mq({reducer:Cre,preloadedState:t,middleware:s=>s({serializableCheck:!1}).concat([RP.middleware,DP.middleware,Xj.middleware,LP.middleware,UP.middleware]),devTools:{serialize:{replacer:wre},name:"recharts-".concat(r)}})};function qP(e){var{preloadedState:t,children:r,reduxStoreName:s}=e,n=Ea(),i=_.useRef(null);if(n)return r;i.current==null&&(i.current=Are(t,s));var l=hw;return _.createElement(vre,{context:l,store:i.current},r)}function FP(e){var{layout:t,width:r,height:s,margin:n}=e,i=Kt(),l=Ea();return _.useEffect(()=>{l||(i(oF(t)),i(lF({width:r,height:s})),i(iF(n)))},[i,l,t,r,s,n]),null}function HP(e){var t=Kt();return _.useEffect(()=>{t(Nre(e))},[t,e]),null}var Ore=["children"];function Tre(e,t){if(e==null)return{};var r,s,n=Pre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Pre(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}function Um(){return Um=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Um.apply(null,arguments)}var Rre={width:"100%",height:"100%"},Dre=_.forwardRef((e,t)=>{var r=ww(),s=jw(),n=A3();if(!sc(r)||!sc(s))return null;var{children:i,otherAttributes:l,title:d,desc:u}=e,h,m;return typeof l.tabIndex=="number"?h=l.tabIndex:h=n?0:void 0,typeof l.role=="string"?m=l.role:m=n?"application":void 0,_.createElement(ew,Um({},l,{title:d,desc:u,role:m,tabIndex:h,width:r,height:s,style:Rre,ref:t}),i)}),Mre=e=>{var{children:t}=e,r=Ue(mp);if(!r)return null;var{width:s,height:n,y:i,x:l}=r;return _.createElement(ew,{width:s,height:n,x:l,y:i},t)},$A=_.forwardRef((e,t)=>{var{children:r}=e,s=Tre(e,Ore),n=Ea();return n?_.createElement(Mre,null,r):_.createElement(Dre,Um({ref:t},s),r)});function Ire(){var e=Kt(),[t,r]=_.useState(null),s=Ue($F);return _.useEffect(()=>{if(t!=null){var n=t.getBoundingClientRect(),i=n.width/t.offsetWidth;Yr(i)&&i!==s&&e(cF(i))}},[t,e,s]),r}function LA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,s)}return r}function zre(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LA(Object(r),!0).forEach(function(s){$re(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function $re(e,t,r){return(t=Lre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lre(e){var t=Bre(e,"string");return typeof t=="symbol"?t:t+""}function Bre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ure=_.forwardRef((e,t)=>{var{children:r,className:s,height:n,onClick:i,onContextMenu:l,onDoubleClick:d,onMouseDown:u,onMouseEnter:h,onMouseLeave:m,onMouseMove:p,onMouseUp:x,onTouchEnd:b,onTouchMove:y,onTouchStart:v,style:w,width:N}=e,S=Kt(),[j,k]=_.useState(null),[A,O]=_.useState(null);PX();var T=Ire(),D=_.useCallback(B=>{T(B),typeof t=="function"&&t(B),k(B),O(B)},[T,t,k,O]),R=_.useCallback(B=>{S(PP(B)),S(hs({handler:i,reactEvent:B}))},[S,i]),I=_.useCallback(B=>{S(vy(B)),S(hs({handler:h,reactEvent:B}))},[S,h]),L=_.useCallback(B=>{S(jT()),S(hs({handler:m,reactEvent:B}))},[S,m]),$=_.useCallback(B=>{S(vy(B)),S(hs({handler:p,reactEvent:B}))},[S,p]),W=_.useCallback(()=>{S($P())},[S]),P=_.useCallback(B=>{S(zP(B.key))},[S]),U=_.useCallback(B=>{S(hs({handler:l,reactEvent:B}))},[S,l]),K=_.useCallback(B=>{S(hs({handler:d,reactEvent:B}))},[S,d]),G=_.useCallback(B=>{S(hs({handler:u,reactEvent:B}))},[S,u]),Q=_.useCallback(B=>{S(hs({handler:x,reactEvent:B}))},[S,x]),le=_.useCallback(B=>{S(hs({handler:v,reactEvent:B}))},[S,v]),H=_.useCallback(B=>{S(BP(B)),S(hs({handler:y,reactEvent:B}))},[S,y]),V=_.useCallback(B=>{S(hs({handler:b,reactEvent:B}))},[S,b]);return _.createElement(UT.Provider,{value:j},_.createElement(gO.Provider,{value:A},_.createElement("div",{className:ht("recharts-wrapper",s),style:zre({position:"relative",cursor:"default",width:N,height:n},w),onClick:R,onContextMenu:U,onDoubleClick:K,onFocus:W,onKeyDown:P,onMouseDown:G,onMouseEnter:I,onMouseLeave:L,onMouseMove:$,onMouseUp:Q,onTouchEnd:V,onTouchMove:H,onTouchStart:le,ref:D},r)))}),qre=["children","className","width","height","style","compact","title","desc"];function Fre(e,t){if(e==null)return{};var r,s,n=Hre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hre(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var VP=_.forwardRef((e,t)=>{var{children:r,className:s,width:n,height:i,style:l,compact:d,title:u,desc:h}=e,m=Fre(e,qre),p=tn(m);return d?_.createElement($A,{otherAttributes:p,title:u,desc:h},r):_.createElement(Ure,{className:s,style:l,width:n,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},_.createElement($A,{otherAttributes:p,title:u,desc:h,ref:t},_.createElement(Oee,null,r)))}),Vre=["width","height"];function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yy.apply(null,arguments)}function Gre(e,t){if(e==null)return{};var r,s,n=Kre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kre(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var Wre={top:5,right:5,bottom:5,left:5},Yre={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Wre,reverseStackOrder:!1,syncMethod:"index"},GP=_.forwardRef(function(t,r){var s,n=Ya(t.categoricalChartProps,Yre),{width:i,height:l}=n,d=Gre(n,Vre);if(!sc(i)||!sc(l))return null;var{chartName:u,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:p,categoricalChartProps:x}=t,b={chartName:u,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:p,eventEmitter:void 0};return _.createElement(qP,{preloadedState:{options:b},reduxStoreName:(s=x.id)!==null&&s!==void 0?s:u},_.createElement(gP,{chartData:x.data}),_.createElement(FP,{width:i,height:l,layout:n.layout,margin:n.margin}),_.createElement(HP,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),_.createElement(VP,yy({},d,{width:i,height:l,ref:r})))}),Xre=["axis","item"],Jre=_.forwardRef((e,t)=>_.createElement(GP,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Xre,tooltipPayloadSearcher:Aj,categoricalChartProps:e,ref:t}));function Zre(e){var t=Kt();return _.useEffect(()=>{t(_re(e))},[t,e]),null}var Qre=["width","height","layout"];function wy(){return wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},wy.apply(null,arguments)}function eae(e,t){if(e==null)return{};var r,s,n=tae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function tae(e,t){if(e==null)return{};var r={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)!==-1)continue;r[s]=e[s]}return r}var rae={top:5,right:5,bottom:5,left:5},aae={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:rae,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},sae=_.forwardRef(function(t,r){var s,n=Ya(t.categoricalChartProps,aae),{width:i,height:l,layout:d}=n,u=eae(n,Qre);if(!sc(i)||!sc(l))return null;var{chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:x}=t,b={chartName:h,defaultTooltipEventType:m,validateTooltipEventTypes:p,tooltipPayloadSearcher:x,eventEmitter:void 0};return _.createElement(qP,{preloadedState:{options:b},reduxStoreName:(s=n.id)!==null&&s!==void 0?s:h},_.createElement(gP,{chartData:n.data}),_.createElement(FP,{width:i,height:l,layout:d,margin:n.margin}),_.createElement(HP,{accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className}),_.createElement(Zre,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),_.createElement(VP,wy({width:i,height:l},u,{ref:r})))}),nae=["item"],iae={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},oae=_.forwardRef((e,t)=>{var r=Ya(e,iae);return _.createElement(sae,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:nae,tooltipPayloadSearcher:Aj,categoricalChartProps:r,ref:t})}),lae=["axis"],cae=_.forwardRef((e,t)=>_.createElement(GP,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:lae,tooltipPayloadSearcher:Aj,categoricalChartProps:e,ref:t}));function dae({stats:e,actionSummary:t}){if(!e||!t)return null;const r={primary:"#1565C0",success:"#10B981",warning:"#F59E0B",error:"#EF4444",slate800:"#1E293B",slate500:"#64748B",grid:"#F1F5F9"},s=[{name:"Concludas",value:e.completed,color:r.success},{name:"Em Andamento",value:e.inProgress,color:r.primary},{name:"Pendentes",value:e.pending,color:r.warning}].filter(d=>d.value>0),n=[{name:"Concludas",value:t.completed_actions,color:r.success},{name:"Em Andamento",value:t.in_progress_actions,color:r.primary},{name:"Pendentes",value:t.pending_actions,color:r.warning},{name:"Atrasadas",value:t.overdue_actions,color:r.error}].filter(d=>d.value>0),i=[{month:"Jan",inspections:12,actions:28},{month:"Fev",inspections:15,actions:32},{month:"Mar",inspections:18,actions:41},{month:"Abr",inspections:22,actions:38},{month:"Mai",inspections:25,actions:45},{month:"Jun",inspections:e.total,actions:t.total_actions}],l=({active:d,payload:u,label:h})=>d&&u&&u.length?a.jsxs("div",{className:"bg-white p-3 border border-slate-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"font-medium text-slate-800",children:h}),u.map((m,p)=>a.jsxs("p",{className:"text-sm",style:{color:m.color},children:[m.dataKey,": ",m.value]},p))]}):null;return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Distribuio de Inspees"}),s.length>0?a.jsx(Rb,{width:"100%",height:250,children:a.jsxs(oae,{children:[a.jsx(lP,{data:s,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"value",children:s.map((d,u)=>a.jsx(cc,{fill:d.color},`cell-${u}`))}),a.jsx(kb,{formatter:d=>[d,"Inspees"],contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",color:r.slate800}}),a.jsx(ou,{})]})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:"Nenhum dado disponvel"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Status dos Planos de Ao"}),n.length>0?a.jsx(Rb,{width:"100%",height:250,children:a.jsxs(Jre,{data:n,children:[a.jsx(my,{strokeDasharray:"3 3",stroke:r.grid}),a.jsx(Lm,{dataKey:"name",tick:{fontSize:12,fill:r.slate500},stroke:r.slate500}),a.jsx(Bm,{tick:{fontSize:12,fill:r.slate500},stroke:r.slate500}),a.jsx(kb,{content:a.jsx(l,{})}),a.jsx(mP,{dataKey:"value",radius:[4,4,0,0],children:n.map((d,u)=>a.jsx(cc,{fill:d.color},`cell-${u}`))})]})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:"Nenhum dado disponvel"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-4",children:"Tendncia Mensal"}),a.jsx(Rb,{width:"100%",height:300,children:a.jsxs(cae,{data:i,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"inspectionsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:r.primary,stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:r.primary,stopOpacity:0})]}),a.jsxs("linearGradient",{id:"actionsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:r.success,stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:r.success,stopOpacity:0})]})]}),a.jsx(my,{strokeDasharray:"3 3",stroke:r.grid}),a.jsx(Lm,{dataKey:"month",tick:{fontSize:12,fill:r.slate500},stroke:r.slate500}),a.jsx(Bm,{tick:{fontSize:12,fill:r.slate500},stroke:r.slate500}),a.jsx(kb,{content:a.jsx(l,{})}),a.jsx(gy,{type:"monotone",dataKey:"inspections",stroke:r.primary,strokeWidth:2,fillOpacity:1,fill:"url(#inspectionsGradient)",name:"Inspees"}),a.jsx(gy,{type:"monotone",dataKey:"actions",stroke:r.success,strokeWidth:2,fillOpacity:1,fill:"url(#actionsGradient)",name:"Aes"}),a.jsx(ou,{})]})})]})]})}function hr({title:e,value:t,icon:r,trend:s,color:n="blue",onClick:i,change:l,clickable:d}){const u={blue:{icon:"text-blue-600",bg:"bg-blue-50",hover:"group-hover:bg-blue-100",border:"hover:border-blue-300"},green:{icon:"text-emerald-600",bg:"bg-emerald-50",hover:"group-hover:bg-emerald-100",border:"hover:border-emerald-300"},yellow:{icon:"text-amber-600",bg:"bg-amber-50",hover:"group-hover:bg-amber-100",border:"hover:border-amber-300"},red:{icon:"text-red-600",bg:"bg-red-50",hover:"group-hover:bg-red-100",border:"hover:border-red-300"},purple:{icon:"text-purple-600",bg:"bg-purple-50",hover:"group-hover:bg-purple-100",border:"hover:border-purple-300"},orange:{icon:"text-orange-600",bg:"bg-orange-50",hover:"group-hover:bg-orange-100",border:"hover:border-orange-300"}},h=u[n]||u.blue;return a.jsx("div",{className:`bg-white rounded-xl border border-gray-200 p-5 shadow-sm transition-all duration-200 group ${h.border} ${d?"cursor-pointer hover:shadow-md transform hover:-translate-y-0.5":""}`,onClick:d?i:void 0,children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide",children:e}),a.jsx("h3",{className:"text-2xl font-bold text-slate-800 mt-1",children:t}),s&&a.jsxs("div",{className:`flex items-center text-xs font-bold mt-2 ${s.isPositive?"text-emerald-600":"text-red-500"}`,children:[s.isPositive?"+":"",s.value,a.jsx("span",{className:"ml-1 text-slate-400 font-normal",children:"vs ms anterior"})]}),l&&a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:l})]}),a.jsx("div",{className:`p-2.5 rounded-lg transition-colors ${h.bg} ${h.hover}`,children:a.jsx(r,{className:`w-5 h-5 ${h.icon}`})})]})})}function uae({userEmail:e,userName:t,onContactAdmin:r}){const s=()=>{const n=`
Assunto: Solicitao de Acesso - ${t||e}

Ol,

Criei minha conta no sistema COMPIA e preciso ser atribudo(a) a uma organizao para ter acesso completo s funcionalidades.

Dados da conta:
- Nome: ${t||"No informado"}
- Email: ${e}
- Data de registro: ${new Date().toLocaleDateString("pt-BR")}

Por favor, configure meu perfil de acesso.

Obrigado(a),
${t||"Usurio"}
    `.trim();try{navigator.clipboard.writeText(n),alert("Informaes copiadas! Cole no seu email ao administrador.")}catch{prompt("Copie estas informaes para enviar ao administrador:",n)}};return a.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6 mb-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-amber-100 rounded-lg",children:a.jsx(Nt,{className:"w-6 h-6 text-amber-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-amber-900 mb-2",children:" Conta Criada com Sucesso!"}),a.jsx("p",{className:"text-amber-800 mb-4",children:"Sua conta foi criada e voc est logado, mas ainda precisa ser atribudo(a) a uma organizao por um administrador para ter acesso completo s funcionalidades do sistema."}),a.jsxs("div",{className:"bg-amber-100 rounded-lg p-4 mb-4",children:[a.jsxs("h4",{className:"font-medium text-amber-900 mb-2 flex items-center gap-2",children:[a.jsx(Gt,{className:"w-4 h-4"}),"Prximos Passos:"]}),a.jsxs("ol",{className:"list-decimal list-inside text-sm text-amber-800 space-y-1",children:[a.jsx("li",{children:"Entre em contato com um administrador do sistema"}),a.jsxs("li",{children:["Informe seu email de cadastro: ",a.jsx("strong",{children:e})]}),a.jsx("li",{children:"Aguarde a configurao do seu perfil e organizao"}),a.jsx("li",{children:"Aps a configurao, voc ter acesso completo"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsxs("button",{onClick:s,className:"flex items-center px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition-colors text-sm",children:[a.jsx(sa,{className:"w-4 h-4 mr-2"}),"Copiar Dados para Contato"]}),r&&a.jsx("button",{onClick:r,className:"flex items-center px-4 py-2 border border-amber-300 text-amber-700 rounded-lg hover:bg-amber-100 transition-colors text-sm",children:"Mais Informaes"})]}),a.jsxs("div",{className:"mt-4 text-xs text-amber-600",children:[a.jsx("strong",{children:"Dica:"})," Voc pode navegar pelo sistema em modo de visualizao, mas algumas funcionalidades estaro limitadas at a configurao completa."]})]})]})})}function hae(){var b,y,v,w,N,S,j;const{user:e}=da(),t=e,[r,s]=_.useState(null),[n,i]=_.useState(null),[l,d]=_.useState(!0),[u,h]=_.useState(((b=t==null?void 0:t.profile)==null?void 0:b.organization_id)||null);_.useEffect(()=>{m()},[u]);const m=async()=>{try{let k="/api/dashboard/stats",A="/api/dashboard/action-plan-summary";u&&(k+=`?organization_id=${u}`,A+=`?organization_id=${u}`);const[O,T]=await Promise.all([fetch(k),fetch(A)]);if(O.ok){const D=await O.json();s(D)}if(T.ok){const D=await T.json();i(D)}}catch(k){console.error("Error fetching dashboard data:",k)}finally{d(!1)}},p=()=>!r||r.total===0?0:Math.round(r.completed/r.total*100),x=()=>!n||n.total_actions===0?0:Math.round(n.completed_actions/n.total_actions*100);return l?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Carregando insights..."})]})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[(t==null?void 0:t.profile)&&!t.profile.organization_id&&a.jsx(uae,{userEmail:(e==null?void 0:e.email)||"",userName:t.profile.name}),a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 sm:p-6 flex flex-col gap-4 shadow-sm",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-1",children:[a.jsxs("h2",{className:"text-lg sm:text-xl font-bold text-slate-800",children:["Ol, ",((y=t==null?void 0:t.profile)==null?void 0:y.name)||((v=e==null?void 0:e.email)==null?void 0:v.split("@")[0]),"! "]}),a.jsx("span",{className:"text-xs font-semibold bg-blue-50 text-blue-700 px-2 py-1 rounded-full border border-blue-100",children:new Date().toLocaleDateString("pt-BR",{day:"numeric",month:"long"})})]}),a.jsx("p",{className:"text-slate-500 text-sm mt-1",children:r&&a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx(Zs,{className:"w-4 h-4"}),p(),"% de concluso em inspees de hoje."]})})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-4",children:[((w=t==null?void 0:t.profile)==null?void 0:w.role)==="system_admin"&&a.jsx("div",{className:"w-full sm:w-48",children:a.jsx(Eu,{selectedOrgId:u,onOrganizationChange:h,showAllOption:!0,className:"bg-white border-gray-200 text-slate-700"})}),a.jsxs("a",{href:"/inspections/new",className:"bg-primary hover:bg-primary-hover text-white px-4 py-2.5 rounded-lg text-sm font-medium shadow-md shadow-primary/20 transition-all flex items-center justify-center gap-2 transform hover:-translate-y-0.5",children:[a.jsx(jv,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Nova Inspeo"}),a.jsx("span",{className:"sm:hidden",children:"Nova"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(hr,{title:"Total de Inspees",value:(r==null?void 0:r.total)||0,icon:ki,color:"blue",trend:r!=null&&r.total?{value:"+12%",isPositive:!0}:void 0}),a.jsx(hr,{title:"Pendentes",value:(r==null?void 0:r.pending)||0,icon:wr,color:"yellow",trend:r!=null&&r.pending?{value:"-5%",isPositive:!0}:void 0}),a.jsx(hr,{title:"Em Andamento",value:(r==null?void 0:r.inProgress)||0,icon:Zs,color:"purple",trend:r!=null&&r.inProgress?{value:"+8%",isPositive:!0}:void 0}),a.jsx(hr,{title:"Concludas",value:(r==null?void 0:r.completed)||0,icon:Ct,color:"green",trend:r!=null&&r.completed?{value:"+15%",isPositive:!0}:void 0})]}),n&&(n.overdue_actions>0||n.high_priority_pending>0)&&a.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-xl p-6 relative overflow-hidden group",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-red-100 rounded-bl-full -mr-16 -mt-16 opacity-50"}),a.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[a.jsx("div",{className:"p-3 bg-white rounded-lg shadow-sm border border-red-100 text-red-500",children:a.jsx(Nt,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Ateno Necessria"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.overdue_actions>0&&a.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[a.jsx(wr,{className:"w-4 h-4"}),a.jsx("span",{className:"font-bold",children:n.overdue_actions}),a.jsx("span",{className:"text-sm",children:"aes atrasadas"})]}),n.high_priority_pending>0&&a.jsxs("div",{className:"flex items-center gap-2 text-rose-700",children:[a.jsx(Nt,{className:"w-4 h-4"}),a.jsx("span",{className:"font-bold",children:n.high_priority_pending}),a.jsx("span",{className:"text-sm",children:"aes de alta prioridade"})]})]}),a.jsx("a",{href:"/action-plans",className:"inline-flex items-center text-sm font-semibold text-red-600 hover:text-red-800 mt-3 hover:underline",children:"Resolver Pendncias "})]})]})]}),r&&n&&a.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm p-1",children:a.jsx(dae,{stats:r,actionSummary:n})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 bg-white rounded-xl shadow-sm border border-gray-200 p-6 flex flex-col h-full",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-blue-50 rounded-lg text-blue-600",children:a.jsx(ec,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Aes Rpidas"})]}),a.jsxs("div",{className:"space-y-3 flex-1",children:[a.jsxs("a",{href:"/inspections/new",className:"flex items-center gap-4 p-4 border border-gray-100 rounded-xl hover:bg-gray-50 hover:border-gray-200 transition-all group",children:[a.jsx("div",{className:"p-2.5 bg-blue-50 text-blue-600 rounded-lg group-hover:bg-blue-100 transition-colors",children:a.jsx(jv,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Nova Inspeo"}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Iniciar auditoria agora"})]})]}),a.jsxs("a",{href:"/checklists",className:"flex items-center gap-4 p-4 border border-gray-100 rounded-xl hover:bg-gray-50 hover:border-gray-200 transition-all group",children:[a.jsx("div",{className:"p-2.5 bg-purple-50 text-purple-600 rounded-lg group-hover:bg-purple-100 transition-colors",children:a.jsx(To,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Gerenciar Checklists"}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Criar ou editar modelos"})]})]}),a.jsxs("a",{href:"/reports",className:"flex items-center gap-4 p-4 border border-gray-100 rounded-xl hover:bg-gray-50 hover:border-gray-200 transition-all group",children:[a.jsx("div",{className:"p-2.5 bg-emerald-50 text-emerald-600 rounded-lg group-hover:bg-emerald-100 transition-colors",children:a.jsx(tu,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800 text-sm",children:"Relatrios e Dados"}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"Viso analtica completa"})]})]})]})]}),n&&a.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-50 rounded-lg text-amber-600",children:a.jsx(yr,{className:"w-5 h-5"})}),a.jsx("div",{children:a.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Status dos Planos de Ao"})})]}),a.jsxs("span",{className:"text-xs font-medium bg-slate-100 text-slate-600 px-2.5 py-1 rounded-full",children:[x(),"% Resolvido"]})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-xl border border-gray-100",children:[a.jsx("p",{className:"text-2xl font-bold text-slate-800",children:n.total_actions}),a.jsx("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide mt-1",children:"Total"})]}),a.jsxs("div",{className:"text-center p-4 bg-amber-50 rounded-xl border border-amber-100",children:[a.jsx("p",{className:"text-2xl font-bold text-amber-600",children:n.pending_actions}),a.jsx("p",{className:"text-xs font-semibold text-amber-600/70 uppercase tracking-wide mt-1",children:"Pendentes"})]}),a.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl border border-blue-100",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.in_progress_actions}),a.jsx("p",{className:"text-xs font-semibold text-blue-600/70 uppercase tracking-wide mt-1",children:"Andamento"})]}),a.jsxs("div",{className:"text-center p-4 bg-emerald-50 rounded-xl border border-emerald-100",children:[a.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:n.completed_actions}),a.jsx("p",{className:"text-xs font-semibold text-emerald-600/70 uppercase tracking-wide mt-1",children:"Concludas"})]})]}),n.ai_generated_count>0&&a.jsxs("div",{className:"p-4 bg-gradient-to-r from-violet-50 to-fuchsia-50 rounded-xl border border-violet-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-1.5 bg-white rounded-md shadow-sm text-violet-600",children:a.jsx(ec,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-violet-900 text-sm",children:"IA Assistente em Ao"}),a.jsxs("p",{className:"text-xs text-violet-700",children:[a.jsx("span",{className:"font-bold",children:n.ai_generated_count})," aes geradas automaticamente"]})]})]}),a.jsx("a",{href:"/action-plans",className:"text-xs font-bold text-violet-600 hover:text-violet-800 hover:underline",children:"Ver detalhes"})]})]})]}),(((N=t==null?void 0:t.profile)==null?void 0:N.role)==="system_admin"||((S=t==null?void 0:t.profile)==null?void 0:S.role)==="org_admin")&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-slate-100 rounded-lg text-slate-600",children:a.jsx(Gt,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-lg font-bold text-slate-800",children:"Painel Administrativo"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("a",{href:"/users",className:"flex items-center gap-4 p-5 border border-gray-200 rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all group",children:[a.jsx("div",{className:"p-3 bg-blue-50 text-blue-600 rounded-lg group-hover:bg-blue-100 transition-colors",children:a.jsx(Dt,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800",children:"Gerenciar Usurios"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Controle de acesso e permisses da equipe"})]})]}),a.jsxs("a",{href:"/organizations",className:"flex items-center gap-4 p-5 border border-gray-200 rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all group",children:[a.jsx("div",{className:"p-3 bg-purple-50 text-purple-600 rounded-lg group-hover:bg-purple-100 transition-colors",children:a.jsx(lt,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-slate-800",children:"Organizaes"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:((j=t==null?void 0:t.profile)==null?void 0:j.role)==="system_admin"?"Empresas, consultorias e clientes":"Minha organizao"})]})]})]})]})]})})}const BA=({target:e,duration:t=2e3,prefix:r="",suffix:s=""})=>{const[n,i]=_.useState(0);return _.useEffect(()=>{let l,d;const u=h=>{l||(l=h);const m=Math.min((h-l)/t,1);i(Math.floor(m*e)),m<1&&(d=requestAnimationFrame(u))};return d=requestAnimationFrame(u),()=>cancelAnimationFrame(d)},[e,t]),a.jsxs("span",{children:[r,n,s]})},bi=[{quote:"Os assistentes IA identificaram riscos que passavam despercebidos nas inspees manuais.",author:"Carlos Silva",role:"Eng. de Segurana",company:"Industrial Metalrgica",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face"},{quote:"Reduzimos 70% do tempo para gerar relatrios tcnicos de NR-12.",author:"Ana Santos",role:"Tc. de Segurana",company:"Construtora Nacional",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b814?w=150&h=150&fit=crop&crop=face"},{quote:"A conformidade com as NRs ficou mais precisa e documentada.",author:"Roberto Lima",role:"Coordenador de SST",company:"Petroqumica Brasil",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face"}],fae=[{title:"NR-12  Mquinas e Equipamentos",description:"Protees, dispositivos de segurana e anlises especializadas.",icon:a.jsx(J9,{className:"w-8 h-8"}),color:"from-blue-500 to-cyan-500"},{title:"NR-35  Trabalho em Altura",description:"AR, PT, verificaes de EPIs/EPCs.",icon:a.jsx(Hy,{className:"w-8 h-8"}),color:"from-purple-500 to-pink-500"},{title:"NR-17  Ergonomia",description:"AET automatizada com recomendaes especficas.",icon:a.jsx(xL,{className:"w-8 h-8"}),color:"from-green-500 to-teal-500"},{title:"NR-10  Eletricidade",description:"Pronturios, anlises de risco e procedimentos.",icon:a.jsx(ec,{className:"w-8 h-8"}),color:"from-yellow-500 to-orange-500"},{title:"Qualidade & Compliance",description:"Auditorias ISO 9001, no conformidades e rastreabilidade.",icon:a.jsx(Fy,{className:"w-8 h-8"}),color:"from-indigo-500 to-purple-500"},{title:"Meio Ambiente",description:"ISO 14001, resduos e evidncias de compliance ambiental.",icon:a.jsx(eO,{className:"w-8 h-8"}),color:"from-emerald-500 to-green-500"}];function KP(){const[e,t]=_.useState(0),[r,s]=_.useState(!1),[n,i]=_.useState(!1);_.useEffect(()=>{i(!0);const d=setInterval(()=>{t(u=>(u+1)%bi.length)},5e3);return()=>clearInterval(d)},[]);const l=d=>{var u;(u=document.getElementById(d))==null||u.scrollIntoView({behavior:"smooth"}),s(!1)};return a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx("nav",{className:"fixed top-0 w-full bg-white/95 backdrop-blur-sm z-50 border-b border-gray-100",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("img",{src:"https://mocha-cdn.com/01990832-c49f-733d-bfcf-59bd1aee484d/logo_preto_ico_azulclaro.svg",alt:"COMPIA Logo",className:"h-28 w-28",style:{height:"113px",width:"113px"}})}),a.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[a.jsx("button",{onClick:()=>l("produto"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Produto"}),a.jsx("button",{onClick:()=>l("como-funciona"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Como funciona"}),a.jsx("button",{onClick:()=>l("casos-uso"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Casos de uso"}),a.jsx("button",{onClick:()=>l("recursos"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Recursos"}),a.jsx("button",{onClick:()=>l("depoimentos"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Depoimentos"}),a.jsx("button",{onClick:()=>l("precos"),className:"text-gray-700 hover:text-blue-600 transition-colors",children:"Preos"}),a.jsx("a",{href:"/login",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105",children:"Teste grtis"})]}),a.jsx("button",{onClick:()=>s(!r),className:"md:hidden p-2",children:r?a.jsx(ct,{size:24}):a.jsx(tO,{size:24})})]}),r&&a.jsx("div",{className:"md:hidden bg-white border-t border-gray-100 py-4",children:a.jsxs("div",{className:"flex flex-col space-y-4",children:[a.jsx("button",{onClick:()=>l("produto"),className:"text-gray-700 text-left px-4 py-2",children:"Produto"}),a.jsx("button",{onClick:()=>l("como-funciona"),className:"text-gray-700 text-left px-4 py-2",children:"Como funciona"}),a.jsx("button",{onClick:()=>l("casos-uso"),className:"text-gray-700 text-left px-4 py-2",children:"Casos de uso"}),a.jsx("button",{onClick:()=>l("recursos"),className:"text-gray-700 text-left px-4 py-2",children:"Recursos"}),a.jsx("button",{onClick:()=>l("depoimentos"),className:"text-gray-700 text-left px-4 py-2",children:"Depoimentos"}),a.jsx("button",{onClick:()=>l("precos"),className:"text-gray-700 text-left px-4 py-2",children:"Preos"}),a.jsx("a",{href:"/login",className:"bg-blue-600 text-white px-4 py-2 rounded-lg mx-4",children:"Teste grtis"})]})})]})}),a.jsx("section",{className:"pt-20 pb-16 bg-gradient-to-br from-blue-50 via-white to-cyan-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:`transition-all duration-1000 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-8"}`,children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Inspees inteligentes",a.jsx("br",{}),"para ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-cyan-600",children:"qualquer rea"})]}),a.jsxs("p",{className:"text-xl md:text-2xl text-gray-700 mb-4 max-w-4xl mx-auto",children:["Digitalize, padronize e analise inspees e checklists em minutos  com colaborao em tempo real, ",a.jsx("strong",{children:"Assistentes IA por NR"})," e insights automticos."]}),a.jsxs("p",{className:"text-lg text-gray-600 mb-8 max-w-4xl mx-auto",children:[a.jsx("strong",{children:"Inteligncia Artificial em Segurana do Trabalho"}),": analise conformidade com NRs e gere planos de ao automaticamente  sem perder a versatilidade para Qualidade, Meio Ambiente e Operaes."]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-8",children:[a.jsxs("a",{href:"/login",className:"bg-blue-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105 flex items-center group",children:["Teste grtis por 14 dias",a.jsx(_n,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsxs("button",{className:"border-2 border-blue-600 text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-blue-50 transition-all duration-300 flex items-center group",children:[a.jsx(Fl,{className:"mr-2 w-5 h-5"}),"Agendar demonstrao"]})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((d,u)=>a.jsx(rp,{className:"w-4 h-4 text-yellow-400 fill-current"},u)),a.jsx("span",{className:"ml-2",children:"4,9/5 por profissionais"})]}),a.jsx("div",{className:"hidden sm:block",children:""}),a.jsxs("div",{children:["+",a.jsx(BA,{target:1e3}),"+ inspees executadas"]}),a.jsx("div",{className:"hidden sm:block",children:""}),a.jsx("div",{children:"Dados e conformidade garantidos"})]})]})})})}),a.jsx("section",{id:"produto",className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{icon:a.jsx(Oi,{className:"w-12 h-12 text-blue-600"}),title:"Assistentes IA especializados por NR",description:"Anlises tcnicas especficas para NR-12, NR-35, NR-10, NR-17 e demais normas regulamentadoras."},{icon:a.jsx(yr,{className:"w-12 h-12 text-green-600"}),title:"Do checklist ao plano 5W2H",description:"Identifique no conformidades e gere automaticamente planos com responsveis, prazos e SLA."},{icon:a.jsx(Gt,{className:"w-12 h-12 text-purple-600"}),title:"Compliance em tempo real",description:"Execute inspees em campo (online/offline), analise riscos com IA e mantenha conformidade contnua."},{icon:a.jsx(jr,{className:"w-12 h-12 text-orange-600"}),title:"Relatrios tcnicos automticos",description:"Laudos, AET (NR-17), anlises e documentao tcnica gerados por assistentes virtuais."}].map((d,u)=>a.jsxs("div",{className:"text-center p-6 rounded-xl bg-gray-50 hover:bg-white hover:shadow-lg transition-all duration-300 transform hover:-translate-y-2 group",children:[a.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-white rounded-lg shadow-sm mb-4 group-hover:scale-110 transition-transform duration-300",children:d.icon}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:d.title}),a.jsx("p",{className:"text-gray-600",children:d.description})]},u))}),a.jsx("div",{className:"text-center mt-12",children:a.jsxs("a",{href:"/login",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105",children:["Experimente agora",a.jsx(_n,{className:"ml-2 w-5 h-5"})]})})]})}),a.jsx("section",{id:"como-funciona",className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Como funciona"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-cyan-600 mx-auto"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8 relative",children:[a.jsx("div",{className:"hidden md:block absolute top-1/2 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200 -translate-y-1/2"}),[{step:"1",title:"Inspecione",description:"Execute checklists no app ou web, com fotos, geolocalizao, evidncias e assinatura. Funciona offline.",icon:a.jsx(aa,{className:"w-8 h-8"})},{step:"2",title:"Analise com IA",description:"Assistentes especializados verificam conformidade, identificam riscos e sugerem correes por NR.",icon:a.jsx(Oi,{className:"w-8 h-8"})},{step:"3",title:"Aja & acompanhe",description:"Planos 5W2H automticos, alertas de prazo e dashboards de indicadores de segurana.",icon:a.jsx(tu,{className:"w-8 h-8"})}].map((d,u)=>a.jsxs("div",{className:"relative text-center p-8 bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:[a.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2",children:a.jsx("div",{className:"w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center font-bold text-lg shadow-lg",children:d.step})}),a.jsxs("div",{className:"mt-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-blue-50 rounded-lg mb-4",children:d.icon}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:d.title}),a.jsx("p",{className:"text-gray-600",children:d.description})]})]},u))]})]})}),a.jsx("section",{id:"casos-uso",className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Casos de uso"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"SST por NR e alm"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-cyan-600 mx-auto mt-4"})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:fae.map((d,u)=>a.jsx("div",{className:"group cursor-pointer",children:a.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-white border border-gray-200 hover:border-transparent hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:[a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${d.color} opacity-0 group-hover:opacity-10 transition-opacity duration-300`}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:`inline-flex items-center justify-center p-3 rounded-lg bg-gradient-to-br ${d.color} text-white mb-4 group-hover:scale-110 transition-transform duration-300`,children:d.icon}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:d.title}),a.jsx("p",{className:"text-gray-600 text-sm",children:d.description})]})]})},u))}),a.jsx("div",{className:"text-center",children:a.jsxs("a",{href:"/login",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105",children:["Ver modelos por NR",a.jsx(_n,{className:"ml-2 w-5 h-5"})]})})]})}),a.jsx("section",{className:"py-16 bg-gradient-to-br from-blue-600 to-cyan-700 text-white",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:a.jsxs("div",{className:"mb-8",children:[a.jsx("img",{src:"https://mocha-cdn.com/01990832-c49f-733d-bfcf-59bd1aee484d/icone-azul-marinho.svg",alt:"COMPIA AI Icon",className:"w-16 h-16 mx-auto mb-6 animate-pulse"}),a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"IA que entende de SST"}),a.jsxs("p",{className:"text-xl text-blue-100 max-w-4xl mx-auto mb-8",children:["Cada assistente domina uma norma especfica  ",a.jsx("strong",{children:"NR-12"})," (mquinas), ",a.jsx("strong",{children:"NR-35"})," (altura), ",a.jsx("strong",{children:"NR-17"})," (ergonomia), ",a.jsx("strong",{children:"NR-10"})," (eletricidade) e mais. Receba orientaes tcnicas precisas e planos de ao fundamentados."]}),a.jsxs("button",{className:"bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition-all duration-300 transform hover:scale-105 flex items-center mx-auto",children:[a.jsx(Fl,{className:"mr-2 w-5 h-5"}),"Ver demonstrao da IA"]})]})})}),a.jsx("section",{id:"recursos",className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Recursos"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-cyan-600 mx-auto"})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:["15+ Assistentes IA especializados: um para cada NR, com conhecimento tcnico embutido","Checklists por norma: NR-12, NR-35, NR-10, NR-17 e modelos tcnicos pr-configurados","Anlises tcnicas automticas: identificao de riscos, no conformidades e recomendaes","Planos 5W2H integrados: gerao automtica a partir de achados, com SLA e notificaes","Relatrios & dashboards: por NR, unidade, criticidade e tendncias","Mobile offline: execute em campo sem internet, sincronize depois","Biblioteca tcnica: SQR-20/25, APR/AST, checklists CIPA e documentos obrigatrios","Gesto de no conformidades: rastreamento completo at a resoluo","Integraes/APIs: exportaes CSV/PDF, webhooks e conexo com BI/ERP"].map((d,u)=>a.jsxs("div",{className:"flex items-start space-x-3 p-4 bg-white rounded-lg hover:shadow-md transition-all duration-300",children:[a.jsx(aa,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-700",children:d})]},u))}),a.jsx("div",{className:"text-center mt-12",children:a.jsxs("a",{href:"/login",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105",children:["Falar com especialista",a.jsx(_n,{className:"ml-2 w-5 h-5"})]})})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"grid md:grid-cols-4 gap-8 text-center",children:[{value:70,prefix:"-",suffix:"%",label:"no tempo de elaborao de laudos tcnicos"},{value:45,prefix:"+",suffix:"%",label:"de no conformidades identificadas automaticamente"},{value:60,prefix:"-",suffix:"%",label:"no tempo de resposta a fiscalizaes"},{value:500,prefix:"+",suffix:"",label:"anlises tcnicas realizadas/ms"}].map((d,u)=>a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"text-4xl md:text-5xl font-bold text-blue-600 mb-2",children:a.jsx(BA,{target:d.value,prefix:d.prefix,suffix:d.suffix})}),a.jsx("p",{className:"text-gray-600",children:d.label})]},u))}),a.jsx("div",{className:"text-center mt-12",children:a.jsxs("a",{href:"/login",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105",children:["Quero esses resultados",a.jsx(_n,{className:"ml-2 w-5 h-5"})]})})]})}),a.jsx("section",{id:"depoimentos",className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Depoimentos"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-cyan-600 mx-auto"})]}),a.jsxs("div",{className:"relative max-w-4xl mx-auto",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 md:p-12",children:[a.jsx(o9,{className:"w-12 h-12 text-blue-600 mb-6"}),a.jsxs("blockquote",{className:"text-xl md:text-2xl text-gray-700 mb-8 italic",children:['"',bi[e].quote,'"']}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:bi[e].avatar,alt:bi[e].author,className:"w-16 h-16 rounded-full mr-4"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:bi[e].author}),a.jsx("div",{className:"text-gray-600",children:bi[e].role}),a.jsx("div",{className:"text-blue-600",children:bi[e].company})]})]})]}),a.jsx("div",{className:"flex justify-center mt-6 space-x-2",children:bi.map((d,u)=>a.jsx("button",{onClick:()=>t(u),className:`w-3 h-3 rounded-full transition-all duration-300 ${u===e?"bg-blue-600":"bg-gray-300"}`},u))})]}),a.jsx("div",{className:"text-center mt-12",children:a.jsxs("a",{href:"/login",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105",children:["Ver mais cases",a.jsx(_n,{className:"ml-2 w-5 h-5"})]})})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Segurana & Conformidade"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-cyan-600 mx-auto"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{icon:a.jsx(Jl,{className:"w-12 h-12 text-blue-600"}),title:"Dados seguros",description:"Criptografia, controle de acesso e trilhas de auditoria completas."},{icon:a.jsx(Gt,{className:"w-12 h-12 text-green-600"}),title:"Conformidade tcnica",description:"Relatrios e evidncias alinhados  fiscalizao trabalhista."},{icon:a.jsx(z7,{className:"w-12 h-12 text-purple-600"}),title:"Backup automtico",description:"Documentos protegidos e rastreveis."}].map((d,u)=>a.jsxs("div",{className:"text-center p-6",children:[a.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-gray-50 rounded-lg mb-4",children:d.icon}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:d.title}),a.jsx("p",{className:"text-gray-600",children:d.description})]},u))})]})}),a.jsx("section",{id:"precos",className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Planos & Preos"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-cyan-600 mx-auto"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{name:"Tcnico",description:"Para profissionais iniciando a digitalizao",features:["At 10 inspees/ms","2 assistentes IA","Relatrios bsicos","Suporte por email"]},{name:"Empresa",description:"Assistentes IA, anlises avanadas e mltiplas unidades",features:["Inspees ilimitadas","Todos os assistentes IA","Dashboards avanados","Mltiplas unidades","Suporte prioritrio"],featured:!0},{name:"Corporativo",description:"Customizaes, integraes e suporte tcnico dedicado",features:["Tudo do Empresa","Customizaes","Integraes API","Suporte dedicado","Treinamento especializado"]}].map((d,u)=>a.jsxs("div",{className:`relative p-8 rounded-xl ${d.featured?"bg-blue-600 text-white shadow-xl scale-105":"bg-white border border-gray-200"}`,children:[d.featured&&a.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:a.jsx("span",{className:"bg-yellow-400 text-blue-900 px-4 py-1 rounded-full text-sm font-semibold",children:"Mais Popular"})}),a.jsx("h3",{className:`text-2xl font-bold mb-2 ${d.featured?"text-white":"text-gray-900"}`,children:d.name}),a.jsx("p",{className:`mb-6 ${d.featured?"text-blue-100":"text-gray-600"}`,children:d.description}),a.jsx("ul",{className:"space-y-3 mb-8",children:d.features.map((h,m)=>a.jsxs("li",{className:"flex items-center",children:[a.jsx(aa,{className:`w-5 h-5 mr-3 ${d.featured?"text-blue-200":"text-green-500"}`}),a.jsx("span",{className:d.featured?"text-blue-100":"text-gray-700",children:h})]},m))}),a.jsx("button",{className:`w-full py-3 px-6 rounded-lg font-semibold transition-all duration-300 ${d.featured?"bg-white text-blue-600 hover:bg-gray-100":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u===2?"Falar com vendas":"Comear teste grtis"})]},u))}),a.jsxs("div",{className:"text-center mt-12 space-x-4",children:[a.jsx("a",{href:"/login",className:"inline-flex items-center bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-all duration-300 transform hover:scale-105",children:"Ver preos"}),a.jsx("button",{className:"inline-flex items-center border-2 border-blue-600 text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-blue-50 transition-all duration-300",children:"Agendar demonstrao"})]})]})}),a.jsx("section",{className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Perguntas Frequentes"}),a.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-blue-600 to-cyan-600 mx-auto"})]}),a.jsx("div",{className:"space-y-6",children:[{question:"A COMPIA atende todas as NRs?",answer:"Sim. Temos assistentes especializados para as principais normas regulamentadoras."},{question:"Como a IA analisa conformidade?",answer:"Cada assistente foi treinado com conhecimento especfico da norma, identificando riscos e sugerindo correes."},{question:"Posso personalizar checklists por empresa?",answer:"Totalmente: adapte modelos s suas atividades, riscos e procedimentos internos."},{question:"O sistema gera documentao para fiscalizao?",answer:"Sim. Relatrios tcnicos, evidncias e trilhas atendem exigncias da fiscalizao trabalhista."},{question:"Como  o treinamento da equipe?",answer:"Onboarding tcnico com especialistas, importao de checklists atuais e acompanhamento inicial."}].map((d,u)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:d.question}),a.jsx("p",{className:"text-gray-600",children:d.answer})]},u))})]})}),a.jsx("section",{className:"py-16 bg-gradient-to-br from-blue-600 to-cyan-700 text-white text-center",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Eleve sua gesto com Inteligncia Artificial"}),a.jsxs("p",{className:"text-xl text-blue-100 mb-8",children:["Menos papel. Mais tcnica. ",a.jsx("strong",{children:"Conformidade garantida."})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[a.jsxs("a",{href:"/login",className:"bg-white text-blue-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition-all duration-300 transform hover:scale-105 flex items-center",children:["Teste grtis por 14 dias",a.jsx(_n,{className:"ml-2 w-5 h-5"})]}),a.jsxs("button",{className:"border-2 border-white text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-white hover:text-blue-600 transition-all duration-300 flex items-center",children:[a.jsx(Fl,{className:"mr-2 w-5 h-5"}),"Agendar demonstrao"]})]})]})}),a.jsx("footer",{className:"bg-gray-900 text-white py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-8",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("img",{src:"https://mocha-cdn.com/01990832-c49f-733d-bfcf-59bd1aee484d/icone-azul-marinho.svg",alt:"COMPIA Icon",className:"h-8 w-8"}),a.jsx("span",{className:"text-xl font-bold",children:"COMPIA"})]}),a.jsx("p",{className:"text-gray-400 mb-4 max-w-md",children:"Plataforma inteligente para inspees de segurana do trabalho com IA especializada por NR."}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(Fo,{className:"w-5 h-5 text-gray-400"}),a.jsx(sa,{className:"w-5 h-5 text-gray-400"}),a.jsx(Na,{className:"w-5 h-5 text-gray-400"})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-4",children:"Produto"}),a.jsxs("ul",{className:"space-y-2 text-gray-400",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Recursos"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Preos"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"API"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Integraes"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold mb-4",children:"Empresa"}),a.jsxs("ul",{className:"space-y-2 text-gray-400",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Sobre"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contato"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacidade"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Termos"})})]})]})]}),a.jsx("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:a.jsx("p",{children:"COMPIA  2025. Todos os direitos reservados."})})]})})]})}function mae(){const{user:e}=da(),[t,r]=_.useState(null);return _.useEffect(()=>{const s=localStorage.getItem("demo-auth"),n=localStorage.getItem("demo-user");if(s==="true"&&n)try{const i=JSON.parse(n);r(i)}catch(i){console.error("Error parsing demo user:",i),localStorage.removeItem("demo-auth"),localStorage.removeItem("demo-user")}},[]),!e&&!t?a.jsx(KP,{}):a.jsx(hae,{})}function Jj({type:e,onImport:t,onExport:r,isLoading:s}){const[n,i]=_.useState(!1),[l,d]=_.useState(""),[u,h]=_.useState(!1),[m,p]=_.useState(!1),b=(()=>{switch(e){case"organizations":return{icon:lt,label:"Organizaes",color:"blue",sampleHeaders:"nome,tipo,descricao,email_contato,telefone_contato,endereco",sampleRow:"ABC Indstria Ltda,company,Empresa de manufatura,contato@abc.com,(11) 99999-9999,Rua das Indstrias 123"};case"users":return{icon:Dt,label:"Usurios",color:"green",sampleHeaders:"email,nome,cargo,organizacao_id,telefone",sampleRow:"joao@empresa.com,Joo Silva,inspector,1,(11) 98888-8888"};case"inspections":return{icon:ki,label:"Inspees",color:"purple",sampleHeaders:"titulo,descricao,local,empresa,tecnico_nome,prioridade,data_agendada",sampleRow:"Inspeo EPIs,Verificao de equipamentos,Galpo A,ABC Ltda,Joo Silva,alta,2024-01-15"};case"templates":return{icon:S9,label:"Templates de Checklist",color:"orange",sampleHeaders:"nome_campo,tipo_campo,obrigatorio,opcoes",sampleRow:"Uso de capacetes,boolean,true,sim/no"};case"action-items":return{icon:yr,label:"Itens de Ao",color:"red",sampleHeaders:"titulo,descricao,local,responsavel,prazo,prioridade",sampleRow:"Troca de EPIs,Substituir capacetes danificados,Setor A,Joo Silva,2024-02-01,alta"};default:return{icon:jr,label:"Dados",color:"gray",sampleHeaders:"",sampleRow:""}}})(),y=b.icon,v=k=>{const A=new FileReader;A.onload=O=>{var D;const T=(D=O.target)==null?void 0:D.result;d(T),h(!0)},A.readAsText(k)},w=k=>{k.preventDefault(),i(!1);const O=Array.from(k.dataTransfer.files).find(T=>T.type==="text/csv"||T.name.endsWith(".csv"));O?v(O):alert("Por favor, selecione um arquivo CSV vlido.")},N=k=>{var O;const A=(O=k.target.files)==null?void 0:O[0];A&&v(A)},S=()=>{if(!l.trim()){alert("Por favor, cole ou carregue os dados CSV.");return}try{const k=l.trim().split(`
`);if(k.length<2){alert("O arquivo deve conter pelo menos uma linha de cabealho e uma linha de dados.");return}const A=k[0].split(",").map(T=>T.trim()),O=k.slice(1).map(T=>{const D=T.split(",").map(I=>I.trim()),R={};return A.forEach((I,L)=>{R[I]=D[L]||""}),R});t==null||t(O),h(!1),d("")}catch(k){console.error("Erro ao processar CSV:",k),alert("Erro ao processar o arquivo CSV. Verifique o formato e tente novamente.")}},j=()=>{const k=`${b.sampleHeaders}
${b.sampleRow}`,A=new Blob([k],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a"),T=URL.createObjectURL(A);O.setAttribute("href",T),O.setAttribute("download",`template_${e}.csv`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("button",{onClick:r,disabled:s,className:`flex items-center justify-center px-4 py-2 ${b.color==="blue"?"bg-blue-600 hover:bg-blue-700":b.color==="green"?"bg-green-600 hover:bg-green-700":b.color==="purple"?"bg-purple-600 hover:bg-purple-700":b.color==="orange"?"bg-orange-600 hover:bg-orange-700":b.color==="red"?"bg-red-600 hover:bg-red-700":"bg-gray-600 hover:bg-gray-700"} text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed transition-colors`,children:[s?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Exportar ",b.label]}),a.jsxs("button",{onClick:j,className:"flex items-center justify-center px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[a.jsx(jr,{className:"w-4 h-4 mr-2"}),"Baixar Modelo CSV"]})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`p-3 ${b.color==="blue"?"bg-blue-100":b.color==="green"?"bg-green-100":b.color==="purple"?"bg-purple-100":b.color==="orange"?"bg-orange-100":b.color==="red"?"bg-red-100":"bg-gray-100"} rounded-lg`,children:a.jsx(y,{className:`w-6 h-6 ${b.color==="blue"?"text-blue-600":b.color==="green"?"text-green-600":b.color==="purple"?"text-purple-600":b.color==="orange"?"text-orange-600":b.color==="red"?"text-red-600":"text-gray-600"}`})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Importar ",b.label]}),a.jsx("p",{className:"text-sm text-slate-600",children:"Cole os dados CSV ou carregue um arquivo"})]})]}),a.jsx("button",{onClick:()=>h(!1),className:"text-slate-400 hover:text-slate-600",children:""})]}),a.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${n?"border-blue-400 bg-blue-50":"border-slate-300 hover:border-slate-400"}`,onDragEnter:k=>{k.preventDefault(),i(!0)},onDragLeave:k=>{k.preventDefault(),i(!1)},onDragOver:k=>k.preventDefault(),onDrop:w,children:[a.jsx(Pi,{className:"w-8 h-8 text-slate-400 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600 mb-2",children:"Arraste um arquivo CSV aqui ou clique para selecionar"}),a.jsx("input",{type:"file",accept:".csv",onChange:N,className:"hidden",id:"csv-upload"}),a.jsx("label",{htmlFor:"csv-upload",className:"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:"Selecionar Arquivo"})]}),a.jsx("div",{className:"mt-4",children:a.jsxs("button",{onClick:()=>p(!m),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:[m?"Esconder":"Mostrar"," opo de colar texto"]})}),m&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Cole os dados CSV aqui:"}),a.jsx("textarea",{value:l,onChange:k=>d(k.target.value),rows:8,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:`${b.sampleHeaders}
${b.sampleRow}`})]}),a.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-2",children:"Formato esperado:"}),a.jsxs("div",{className:"text-xs font-mono text-slate-600 space-y-1",children:[a.jsx("div",{className:"font-semibold",children:b.sampleHeaders}),a.jsx("div",{children:b.sampleRow})]})]}),a.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(tr,{className:"w-4 h-4 text-yellow-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm text-yellow-800",children:[a.jsx("strong",{children:"Ateno:"})," A importao ir adicionar novos registros. Certifique-se de que os dados esto corretos antes de proceder."]})]})}),a.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[a.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:S,disabled:!l.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Importar Dados"})]})]})})]})}function pae(){const[e,t]=ju(),[r,s]=_.useState([]),[n,i]=_.useState(!0),[l,d]=_.useState(""),[u,h]=_.useState("all"),[m,p]=_.useState(e.get("org")?parseInt(e.get("org")):null),[x,b]=_.useState(null),[y,v]=_.useState(!1);_.useEffect(()=>{w()},[m]),_.useEffect(()=>{t(m?{org:m.toString()}:{})},[m,t]);const w=()=>{let R="/api/inspections";m&&(R+=`?organization_id=${m}`),console.log("[INSPECTIONS] [REACT] Buscando inspees de:",R),Fe(R).then(I=>I.json()).then(I=>{var L;console.log("[INSPECTIONS] [REACT] Inspees recebidas:",((L=I.inspections)==null?void 0:L.length)||0),s(I.inspections||[]),i(!1)}).catch(I=>{console.error("[INSPECTIONS] [REACT] Erro ao carregar inspees:",I),i(!1)})},N=async R=>{try{if((await Fe(`/api/inspections/${R}`,{method:"DELETE"})).ok)s(L=>L.filter($=>$.id!==R)),b(null),alert("Inspeo excluda com sucesso!");else throw new Error("Erro ao excluir inspeo")}catch(I){console.error("Erro ao excluir inspeo:",I),alert("Erro ao excluir inspeo. Tente novamente.")}},S=async(R,I)=>{try{const L=await Fe(`/api/inspections/${R}/clone`,{method:"POST",headers:{"Content-Type":"application/json"}});if(L.ok)await L.json(),await w(),alert(`Inspeo "${I}" duplicada com sucesso! Apenas os dados bsicos foram copiados. A nova inspeo est pronta para ser preenchida.`);else{const $=await L.json();throw new Error($.error||"Erro ao clonar inspeo")}}catch(L){console.error("Erro ao clonar inspeo:",L),alert(`Erro ao clonar inspeo: ${L instanceof Error?L.message:"Erro desconhecido"}`)}},j=async()=>{v(!0);try{const L=["titulo,descricao,local,empresa,tecnico_nome,tecnico_email,status,prioridade,data_agendada,data_criacao,endereco,cep",...A.map(U=>({titulo:U.title,descricao:U.description||"",local:U.location,empresa:U.company_name||"",tecnico_nome:U.inspector_name,tecnico_email:U.inspector_email||"",status:T(U.status),prioridade:U.priority,data_agendada:U.scheduled_date||"",data_criacao:new Date(U.created_at).toLocaleDateString("pt-BR"),endereco:U.address||"",cep:U.cep||""})).map(U=>Object.values(U).map(K=>`"${K}"`).join(","))].join(`
`),$=new Blob([L],{type:"text/csv;charset=utf-8;"}),W=document.createElement("a"),P=URL.createObjectURL($);W.setAttribute("href",P),W.setAttribute("download",`inspecoes_${new Date().toISOString().split("T")[0]}.csv`),W.style.visibility="hidden",document.body.appendChild(W),W.click(),document.body.removeChild(W)}catch(R){console.error("Erro ao exportar inspees:",R),alert("Erro ao exportar dados. Tente novamente.")}finally{v(!1)}},k=async R=>{v(!0);try{for(const I of R){const L={title:I.titulo||I.title,description:I.descricao||I.description,location:I.local||I.location,company_name:I.empresa||I.company_name,inspector_name:I.tecnico_nome||I.inspector_name,inspector_email:I.tecnico_email||I.inspector_email,priority:I.prioridade||I.priority||"media",scheduled_date:I.data_agendada||I.scheduled_date,address:I.endereco||I.address,cep:I.cep,organization_id:m};if(!(await Fe("/api/inspections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)})).ok)throw new Error(`Erro ao importar inspeo: ${L.title}`)}await w(),alert(`${R.length} inspees importadas com sucesso!`)}catch(I){console.error("Erro ao importar inspees:",I),alert("Erro ao importar dados. Verifique o formato e tente novamente.")}finally{v(!1)}},A=r.filter(R=>{const I=R.title.toLowerCase().includes(l.toLowerCase())||R.location.toLowerCase().includes(l.toLowerCase())||R.inspector_name.toLowerCase().includes(l.toLowerCase())||R.company_name&&R.company_name.toLowerCase().includes(l.toLowerCase()),L=u==="all"||R.status===u;return I&&L}),O=R=>{switch(R){case"pendente":return a.jsx(wr,{className:"w-4 h-4 text-yellow-500"});case"em_andamento":return a.jsx(Fl,{className:"w-4 h-4 text-blue-500"});case"concluida":return a.jsx(Ct,{className:"w-4 h-4 text-green-500"});case"cancelada":return a.jsx(tr,{className:"w-4 h-4 text-red-500"});default:return a.jsx(wr,{className:"w-4 h-4 text-gray-500"})}},T=R=>{switch(R){case"pendente":return"Pendente";case"em_andamento":return"Em Andamento";case"concluida":return"Concluda";case"cancelada":return"Cancelada";default:return R}},D=R=>{switch(R){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-orange-100 text-orange-800";case"critica":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return n?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-2xl sm:text-3xl font-bold text-slate-900",children:"Inspees"}),a.jsx("p",{className:"text-slate-600 mt-1 text-sm sm:text-base",children:"Gerencie suas inspees de segurana do trabalho"})]}),a.jsxs(vt,{to:"/inspections/new",className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 text-sm sm:text-base",children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Nova Inspeo"}),a.jsx("span",{className:"sm:hidden",children:"Nova"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Buscar por ttulo, empresa, local ou tcnico...",value:l,onChange:R=>d(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsx(Eu,{selectedOrgId:m,onOrganizationChange:p,showAllOption:!0}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tp,{className:"w-4 h-4 text-slate-400 hidden sm:block"}),a.jsxs("select",{value:u,onChange:R=>h(R.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"all",children:"Todos os Status"}),a.jsx("option",{value:"pendente",children:"Pendente"}),a.jsx("option",{value:"em_andamento",children:"Em Andamento"}),a.jsx("option",{value:"concluida",children:"Concluda"}),a.jsx("option",{value:"cancelada",children:"Cancelada"})]})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Importar/Exportar Inspees"}),a.jsx(Jj,{type:"inspections",onExport:j,onImport:k,isLoading:y})]}),a.jsx("div",{className:"space-y-4",children:A.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center",children:[a.jsx(tr,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:r.length===0?"Nenhuma inspeo encontrada":"Nenhuma inspeo corresponde aos filtros"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:r.length===0?"Crie sua primeira inspeo para comear":"Tente ajustar os filtros ou termo de busca"})]}):A.map(R=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 sm:p-6 hover:shadow-md transition-shadow duration-200",children:a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 mb-2",children:[a.jsx("h3",{className:"font-heading text-base sm:text-lg font-semibold text-slate-900",children:R.title}),a.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full ${D(R.priority)}`,children:R.priority.charAt(0).toUpperCase()+R.priority.slice(1)})]}),R.description&&a.jsx("p",{className:"text-slate-600 mb-3 line-clamp-2 text-sm",children:R.description}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs sm:text-sm text-slate-500",children:[R.company_name&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),a.jsx("span",{className:"truncate max-w-[100px] sm:max-w-none",children:R.company_name})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Na,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:R.location})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Wr,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:R.inspector_name})]}),R.scheduled_date&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Gr,{className:"w-4 h-4"}),new Date(R.scheduled_date).toLocaleDateString("pt-BR")]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-slate-50 rounded-lg",children:[O(R.status),a.jsx("span",{className:"text-xs sm:text-sm font-medium text-slate-700",children:T(R.status)})]}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsx(vt,{to:`/inspections/${R.id}/edit`,className:"p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"Editar inspeo",children:a.jsx(Ha,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>S(R.id,R.title),className:"p-2 text-slate-500 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors duration-200",title:"Clonar inspeo",children:a.jsx(Ti,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>b(R.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"Excluir inspeo",children:a.jsx(rr,{className:"w-4 h-4"})}),a.jsxs(vt,{to:`/inspections/${R.id}`,className:"px-3 sm:px-4 py-2 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors duration-200 text-xs sm:text-sm",children:[a.jsx("span",{className:"hidden sm:inline",children:"Ver Detalhes"}),a.jsx("span",{className:"sm:hidden",children:"Ver"})]})]})]})]})},R.id))}),x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:a.jsx(tr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900",children:"Confirmar Excluso"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Esta ao no pode ser desfeita."})]})]}),a.jsx("p",{className:"text-slate-700 mb-6",children:"Tem certeza que deseja excluir esta inspeo? Todos os dados relacionados sero permanentemente removidos."}),a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:()=>b(null),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>N(x),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Excluir Inspeo"})]})]})})]})})}function Bl({label:e,name:t,value:r,onChange:s,placeholder:n,required:i=!1,apiEndpoint:l,onAddNew:d,addNewText:u="Adicionar novo",showEmail:h=!1,className:m=""}){const[p,x]=_.useState([]),[b,y]=_.useState(!1),[v,w]=_.useState(!1),[N,S]=_.useState(r),[j,k]=_.useState(!0),A=_.useRef(null),O=_.useRef(null),T=async L=>{if(!(L.length>0&&L.length<2)){w(!0);try{const $=await Fe(`${l}?search=${encodeURIComponent(L)}`);if($.ok){const W=await $.json();x(W.suggestions||[]),k(L==="")}}catch($){console.error("Erro ao buscar sugestes:",$),x([])}finally{w(!1)}}},D=L=>{const $=L.target.value;S($),s($),$.trim()?(T($.trim()),y(!0)):(T(""),y(!0))},R=L=>{S(L.value),s(L.value,L.email),y(!1)},I=()=>{y(!0),p.length===0&&T(N.trim()||"")};return _.useEffect(()=>{const L=$=>{O.current&&!O.current.contains($.target)&&y(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]),_.useEffect(()=>{S(r)},[r]),a.jsxs("div",{className:m,children:[a.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-slate-700 mb-2",children:[e," ",i&&a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{ref:O,className:"relative",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),a.jsx("input",{ref:A,type:"text",id:t,name:t,value:N,onChange:D,onFocus:I,required:i,placeholder:n,className:"w-full pl-10 pr-10 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoComplete:"off"}),v&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(It,{className:"w-4 h-4 text-blue-600 animate-spin"})})]}),d&&a.jsx("button",{type:"button",onClick:d,className:"flex items-center px-3 py-2 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors",title:u,children:a.jsx(Kr,{className:"w-4 h-4"})})]}),b&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:v&&p.length===0?a.jsxs("div",{className:"px-3 py-4 text-center text-slate-500",children:[a.jsx(It,{className:"w-5 h-5 mx-auto mb-2 text-blue-600 animate-spin"}),a.jsx("span",{className:"text-sm",children:"Buscando..."})]}):p.length>0?a.jsxs(a.Fragment,{children:[j&&!N.trim()&&a.jsx("div",{className:"px-3 py-2 text-xs font-medium text-slate-500 bg-slate-50 border-b border-slate-200",children:" Recentes / Disponveis"}),p.map((L,$)=>a.jsx("button",{type:"button",onClick:()=>R(L),className:"w-full px-3 py-2 text-left hover:bg-blue-50 transition-colors border-b border-slate-100 last:border-b-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-slate-900",children:L.label}),h&&L.email&&a.jsx("span",{className:"text-xs text-slate-500",children:L.email})]})},$))]}):v?null:a.jsxs("div",{className:"px-3 py-4 text-center text-slate-500",children:[a.jsx("span",{className:"text-sm",children:"Nenhum resultado encontrado"}),d&&a.jsxs("button",{type:"button",onClick:d,className:"block w-full mt-2 px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded transition-colors",children:[a.jsx(Kr,{className:"w-4 h-4 inline mr-1"}),u]})]})})]})]})}function UA({label:e,apiEndpoint:t,onTagSelect:r,className:s="",maxTags:n=6,placeholder:i="Tags sugeridas aparecero aqui"}){const[l,d]=_.useState([]),[u,h]=_.useState(!1);_.useEffect(()=>{m()},[t]);const m=async()=>{h(!0);try{const x=await Fe(`${t}?search=`);if(x.ok){const b=await x.json();d((b.suggestions||[]).slice(0,n))}}catch(x){console.error("Erro ao buscar tags de sugesto:",x),d([])}finally{h(!1)}},p=x=>{r(x.value)};return u?a.jsxs("div",{className:`mt-2 ${s}`,children:[e&&a.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:e}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[1,2,3].map(x=>a.jsx("div",{className:"px-3 py-1.5 bg-slate-100 text-slate-400 text-sm rounded-full animate-pulse",children:"Carregando..."},x))})]}):l.length===0?a.jsxs("div",{className:`mt-2 ${s}`,children:[e&&a.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:e}),a.jsx("p",{className:"text-xs text-slate-400 italic",children:i})]}):a.jsxs("div",{className:`mt-2 ${s}`,children:[e&&a.jsx("p",{className:"text-xs font-medium text-slate-600 mb-2",children:e}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((x,b)=>a.jsxs("button",{type:"button",onClick:()=>p(x),className:"group flex items-center px-3 py-1.5 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 text-blue-700 text-sm rounded-full hover:from-blue-100 hover:to-indigo-100 hover:border-blue-300 hover:text-blue-800 transition-all duration-200 hover:shadow-md",title:`Clique para usar: ${x.label}`,children:[a.jsx(Kr,{className:"w-3 h-3 mr-1.5 group-hover:scale-110 transition-transform duration-200"}),a.jsx("span",{className:"font-medium",children:x.label})]},b))}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 opacity-75",children:" Clique nas tags acima para preencher automaticamente"})]})}function WP({isOpen:e,onClose:t,title:r,description:s,children:n,className:i="",maxWidth:l="max-w-md"}){if(!e)return null;const d=u=>{u.target===u.currentTarget&&t()};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:d,children:a.jsxs("div",{className:`bg-white rounded-xl shadow-xl ${l} w-full ${i}`,role:"dialog","aria-labelledby":"dialog-title","aria-describedby":s?"dialog-description":void 0,onClick:u=>u.stopPropagation(),children:[a.jsx("h2",{id:"dialog-title",className:"sr-only",children:r}),s&&a.jsx("p",{id:"dialog-description",className:"sr-only",children:s}),n]})})}function YP({isOpen:e,onClose:t,onUserCreated:r,organizationId:s}){const[n,i]=_.useState({name:"",email:"",role:"inspector"}),[l,d]=_.useState(!1);if(!e)return null;const u=async m=>{m.preventDefault(),d(!0);try{const p=await fetch("/api/users/invite",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...n,organization_id:s})});if(p.ok)r({name:n.name,email:n.email}),i({name:"",email:"",role:"inspector"}),t();else{const x=await p.json().catch(()=>({}));throw new Error(x.error||"Erro ao criar usurio")}}catch(p){console.error("Erro:",p),alert(`Erro ao criar usurio: ${p instanceof Error?p.message:"Tente novamente."}`)}finally{d(!1)}},h=m=>{const{name:p,value:x}=m.target;i(b=>({...b,[p]:x}))};return a.jsxs(WP,{isOpen:e,onClose:t,title:"Novo Usurio",description:"Criar um novo usurio no sistema",className:"mx-4 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-heading text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Wr,{className:"w-5 h-5 text-blue-600"}),"Novo Usurio"]}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Criar um novo usurio no sistema"})]}),a.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700 transition-colors",children:a.jsx(ct,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-user-name",className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Completo *"}),a.jsx("input",{type:"text",id:"new-user-name",name:"name",required:!0,value:n.name,onChange:h,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite o nome completo"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-user-email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email *"}),a.jsx("input",{type:"email",id:"new-user-email",name:"email",required:!0,value:n.email,onChange:h,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"usuario@exemplo.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"new-user-role",className:"block text-sm font-medium text-slate-700 mb-2",children:"Funo"}),a.jsxs("select",{id:"new-user-role",name:"role",value:n.role,onChange:h,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"inspector",children:"Inspetor"}),a.jsx("option",{value:"manager",children:"Gerente"}),a.jsx("option",{value:"admin",children:"Administrador"}),a.jsx("option",{value:"client",children:"Cliente"})]})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(sa,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Convite por Email"})]}),a.jsx("p",{className:"text-xs text-blue-800",children:"Um email de convite ser enviado para o usurio com instrues para ativar a conta."})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:l,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[l?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Wr,{className:"w-4 h-4 mr-2"}),l?"Criando...":"Criar Usurio"]})]})]})]})}const Hr={SYSTEM_ADMIN:"system_admin",ORG_ADMIN:"org_admin",MANAGER:"manager",INSPECTOR:"inspector",CLIENT:"client"},qA={MASTER:"master",SUBSIDIARY:"subsidiary"};function Zj({isOpen:e,onClose:t,onSuccess:r,parentOrganizations:s}){var T,D,R,I,L,$,W;const{user:n}=da(),i=n,[l,d]=_.useState(!1),[u,h]=_.useState(!1),[m,p]=_.useState("idle"),[x,b]=_.useState("basic"),[y,v]=_.useState([]),[w,N]=_.useState(!1),[S,j]=_.useState({name:"",type:"company",description:"",contact_email:"",contact_phone:"",address:"",parent_organization_id:"",subscription_plan:"basic",max_users:50,max_subsidiaries:0,cnpj:"",razao_social:"",nome_fantasia:"",cnae_principal:"",cnae_descricao:"",natureza_juridica:"",data_abertura:"",capital_social:"",porte_empresa:"",situacao_cadastral:"",numero_funcionarios:"",setor_industria:"",subsetor_industria:"",certificacoes_seguranca:"",data_ultima_auditoria:"",nivel_risco:"medio",contato_seguranca_nome:"",contato_seguranca_email:"",contato_seguranca_telefone:"",historico_incidentes:"",observacoes_compliance:"",website:"",faturamento_anual:"",logo_url:""}),k=async()=>{if(!S.cnpj.trim()){alert("Digite um CNPJ para buscar");return}h(!0),p("idle");try{const P=S.cnpj.replace(/[.\-/\s]/g,""),U=await fetch(`/api/cnpj/${P}`);if(U.ok){const K=await U.json();if(K&&K.success&&K.data){const G=K.data;j(Q=>({...Q,name:G.nome_fantasia||G.nome||G.razao_social||Q.name,razao_social:G.razao_social||"",nome_fantasia:G.nome_fantasia||"",cnae_principal:G.cnae_principal||"",cnae_descricao:G.cnae_descricao||"",natureza_juridica:G.natureza_juridica||"",data_abertura:G.data_abertura||"",capital_social:G.capital_social?G.capital_social.toString():"",porte_empresa:G.porte_empresa||"",situacao_cadastral:G.situacao_cadastral||"",address:G.address||Q.address,contact_email:G.contact_email||Q.contact_email,contact_phone:G.contact_phone||Q.contact_phone,website:G.website||Q.website}))}else throw new Error("Dados da empresa no encontrados na resposta");p("success")}else{const K=await U.json();alert(K.error||"Erro ao buscar CNPJ"),p("error")}}catch(P){console.error("CNPJ lookup error:",P);const U=P instanceof Error?P.message:"Erro ao buscar CNPJ. Verifique sua conexo.";alert(U),p("error")}finally{h(!1)}},A=async P=>{P.preventDefault(),d(!0);try{const U={...S};U.parent_organization_id===""&&(U.parent_organization_id=void 0);const K=await fetch("/api/organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(K.ok)console.log("Organizao criada com sucesso, iniciando refresh..."),j({name:"",type:"company",description:"",contact_email:"",contact_phone:"",address:"",parent_organization_id:"",subscription_plan:"basic",max_users:50,max_subsidiaries:0,cnpj:"",razao_social:"",nome_fantasia:"",cnae_principal:"",cnae_descricao:"",natureza_juridica:"",data_abertura:"",capital_social:"",porte_empresa:"",situacao_cadastral:"",numero_funcionarios:"",setor_industria:"",subsetor_industria:"",certificacoes_seguranca:"",data_ultima_auditoria:"",nivel_risco:"medio",contato_seguranca_nome:"",contato_seguranca_email:"",contato_seguranca_telefone:"",historico_incidentes:"",observacoes_compliance:"",website:"",faturamento_anual:"",logo_url:""}),p("idle"),b("basic"),console.log("Chamando onSuccess para refresh..."),r(),setTimeout(()=>{t(),alert("Organizao criada com sucesso!")},500);else{const G=await K.json();throw new Error(G.error||"Erro ao criar organizao")}}catch(U){console.error("Error creating organization:",U),alert(U instanceof Error?U.message:"Erro ao criar organizao. Tente novamente.")}finally{d(!1)}};_.useEffect(()=>{(async()=>{if(e){N(!0);try{const U=await fetch("/api/organizations");if(U.ok){const K=await U.json();console.log("Organizaes carregadas para seleo pai:",K),v(K.organizations||[])}else console.error("Erro ao carregar organizaes para seleo pai")}catch(U){console.error("Erro ao carregar organizaes:",U)}finally{N(!1)}}})()},[e]);const O=()=>{var U,K;const P=y.length>0?y:s;return((U=i==null?void 0:i.profile)==null?void 0:U.role)===Hr.SYSTEM_ADMIN?P.filter(G=>G.organization_level!==qA.SUBSIDIARY):((K=i==null?void 0:i.profile)==null?void 0:K.role)===Hr.ORG_ADMIN?P.filter(G=>{var Q;return G.id===((Q=i.profile)==null?void 0:Q.managed_organization_id)}):P||[]};return e?a.jsx(WP,{isOpen:e,onClose:t,title:"Nova Organizao",description:((T=i==null?void 0:i.profile)==null?void 0:T.role)===Hr.SYSTEM_ADMIN?"Criar uma nova empresa cliente ou subsidiria":"Criar uma nova subsidiria",maxWidth:"max-w-6xl",className:"max-h-[95vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(lt,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-heading text-xl font-bold text-slate-900",children:"Nova Organizao"}),a.jsx("p",{className:"text-sm text-slate-600",children:((D=i==null?void 0:i.profile)==null?void 0:D.role)===Hr.SYSTEM_ADMIN?"Criar uma nova empresa cliente ou subsidiria":"Criar uma nova subsidiria"})]})]}),a.jsx("button",{onClick:t,className:"text-slate-500 hover:text-slate-700",children:a.jsx(ct,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"border-b border-slate-200 mb-6",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsxs("button",{onClick:()=>b("basic"),className:`py-2 px-1 border-b-2 font-medium text-sm ${x==="basic"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[a.jsx(jr,{className:"w-4 h-4 inline mr-2"}),"Dados Bsicos"]}),a.jsxs("button",{onClick:()=>b("company"),className:`py-2 px-1 border-b-2 font-medium text-sm ${x==="company"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[a.jsx(lt,{className:"w-4 h-4 inline mr-2"}),"Informaes Empresariais"]}),a.jsxs("button",{onClick:()=>b("safety"),className:`py-2 px-1 border-b-2 font-medium text-sm ${x==="safety"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[a.jsx(Gt,{className:"w-4 h-4 inline mr-2"}),"Segurana & Compliance"]}),((R=i==null?void 0:i.profile)==null?void 0:R.role)===Hr.SYSTEM_ADMIN&&a.jsxs("button",{onClick:()=>b("subscription"),className:`py-2 px-1 border-b-2 font-medium text-sm ${x==="subscription"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[a.jsx(Nv,{className:"w-4 h-4 inline mr-2"}),"Assinatura"]})]})}),a.jsxs("form",{onSubmit:A,className:"space-y-6",children:[x==="basic"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[a.jsxs("h3",{className:"font-medium text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(_a,{className:"w-5 h-5 text-blue-600"}),"Busca Automtica por CNPJ"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"text",value:S.cnpj,onChange:P=>j({...S,cnpj:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite o CNPJ (apenas nmeros ou com formatao)",maxLength:18})}),a.jsx("button",{type:"button",onClick:k,disabled:u||!S.cnpj.trim(),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?a.jsx(It,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(_a,{className:"w-4 h-4 mr-2"}),"Buscar"]})})]}),m==="success"&&a.jsxs("div",{className:"mt-3 flex items-center text-green-700 text-sm",children:[a.jsx(aa,{className:"w-4 h-4 mr-2"}),"Dados da empresa carregados com sucesso!"]}),m==="error"&&a.jsxs("div",{className:"mt-3 flex items-center text-red-700 text-sm",children:[a.jsx(tr,{className:"w-4 h-4 mr-2"}),"No foi possvel carregar os dados. Verifique o CNPJ ou preencha manualmente."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome da Organizao *"}),a.jsx("input",{type:"text",value:S.name,onChange:P=>j({...S,name:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Empresa ABC Ltda",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo *"}),a.jsxs("select",{value:S.type,onChange:P=>j({...S,type:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"company",children:"Empresa"}),a.jsx("option",{value:"consultancy",children:"Consultoria"}),a.jsx("option",{value:"client",children:"Cliente"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{value:S.description,onChange:P=>j({...S,description:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descrio opcional da organizao..."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email de Contato"}),a.jsx("input",{type:"email",value:S.contact_email,onChange:P=>j({...S,contact_email:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"contato@empresa.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone de Contato"}),a.jsx("input",{type:"tel",value:S.contact_phone,onChange:P=>j({...S,contact_phone:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 9999-9999"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Website"}),a.jsx("input",{type:"url",value:S.website,onChange:P=>j({...S,website:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://www.empresa.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Endereo"}),a.jsx("input",{type:"text",value:S.address,onChange:P=>j({...S,address:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Endereo completo da organizao"})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[a.jsxs("h3",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[a.jsx(Nv,{className:"w-4 h-4 text-yellow-600"}),"Estrutura Hierrquica"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Organizao Pai"}),a.jsxs("select",{value:S.parent_organization_id,onChange:P=>j({...S,parent_organization_id:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:w,children:[a.jsx("option",{value:"",children:w?"Carregando organizaes...":((I=i==null?void 0:i.profile)==null?void 0:I.role)===Hr.SYSTEM_ADMIN?"Nenhuma (Empresa Cliente Independente)":"Selecione a organizao pai"}),O().map(P=>a.jsxs("option",{value:P.id,children:[P.name," (",P.organization_level===qA.MASTER?"Master":"Empresa",")"]},P.id))]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:w?"Carregando organizaes disponveis...":((L=i==null?void 0:i.profile)==null?void 0:L.role)===Hr.SYSTEM_ADMIN?"Deixe vazio para criar uma empresa cliente independente":"Selecione sua organizao como pai para criar uma subsidiria"}),y.length===0&&!w&&a.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"Nenhuma organizao disponvel encontrada. Verifique suas permisses."}),y.length>0&&a.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[y.length," organizao(es) disponvel(eis)"]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:[a.jsx(vs,{className:"inline h-4 w-4 mr-1"}),"Logo da Organizao"]}),a.jsxs("div",{className:"flex items-start gap-4",children:[S.logo_url?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:S.logo_url,alt:"Logo",className:"w-24 h-24 object-contain border border-slate-200 rounded-lg bg-white p-1"}),a.jsx("button",{type:"button",onClick:()=>j({...S,logo_url:""}),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Remover logo",children:a.jsx(rr,{className:"w-3 h-3"})})]}):a.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-slate-300 rounded-lg flex items-center justify-center bg-white",children:a.jsx(vs,{className:"w-8 h-8 text-slate-300"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"flex items-center justify-center px-4 py-2 bg-white border border-slate-300 rounded-lg cursor-pointer hover:bg-slate-50 transition-colors",children:[a.jsx(Pi,{className:"w-4 h-4 mr-2 text-slate-600"}),a.jsx("span",{className:"text-sm text-slate-600",children:"Escolher imagem"}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:P=>{var K;const U=(K=P.target.files)==null?void 0:K[0];if(U){const G=new FileReader;G.onload=Q=>{var H;const le=(H=Q.target)==null?void 0:H.result;j({...S,logo_url:le})},G.readAsDataURL(U)}}})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"PNG, JPG ou SVG. Mx 2MB. A logo aparecer nos relatrios de inspeo."})]})]})]})]}),x==="company"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Razo Social"}),a.jsx("input",{type:"text",value:S.razao_social,onChange:P=>j({...S,razao_social:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-slate-50",placeholder:"Razo social da empresa",readOnly:m==="success"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Fantasia"}),a.jsx("input",{type:"text",value:S.nome_fantasia,onChange:P=>j({...S,nome_fantasia:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-slate-50",placeholder:"Nome fantasia",readOnly:m==="success"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"CNAE Principal"}),a.jsx("input",{type:"text",value:S.cnae_principal,onChange:P=>j({...S,cnae_principal:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-slate-50",placeholder:"Cdigo CNAE",readOnly:m==="success"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Porte da Empresa"}),a.jsxs("select",{value:S.porte_empresa,onChange:P=>j({...S,porte_empresa:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione o porte"}),a.jsx("option",{value:"MEI",children:"MEI"}),a.jsx("option",{value:"ME",children:"Microempresa"}),a.jsx("option",{value:"EPP",children:"Empresa de Pequeno Porte"}),a.jsx("option",{value:"MEDIA",children:"Mdia Empresa"}),a.jsx("option",{value:"GRANDE",children:"Grande Empresa"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio CNAE"}),a.jsx("textarea",{value:S.cnae_descricao,onChange:P=>j({...S,cnae_descricao:P.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-slate-50",placeholder:"Descrio da atividade principal",readOnly:m==="success"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx(Dt,{className:"w-4 h-4 inline mr-1"}),"Nmero de Funcionrios"]}),a.jsx("input",{type:"number",value:S.numero_funcionarios,onChange:P=>j({...S,numero_funcionarios:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: 50",min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Data de Abertura"}),a.jsx("input",{type:"date",value:S.data_abertura,onChange:P=>j({...S,data_abertura:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-slate-50",readOnly:m==="success"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx(Zs,{className:"w-4 h-4 inline mr-1"}),"Faturamento Anual (R$)"]}),a.jsx("input",{type:"number",value:S.faturamento_anual,onChange:P=>j({...S,faturamento_anual:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: 1000000",min:"0",step:"0.01"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Setor da Indstria"}),a.jsxs("select",{value:S.setor_industria,onChange:P=>j({...S,setor_industria:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione o setor"}),a.jsx("option",{value:"Construo Civil",children:"Construo Civil"}),a.jsx("option",{value:"Indstria",children:"Indstria"}),a.jsx("option",{value:"Petrleo e Gs",children:"Petrleo e Gs"}),a.jsx("option",{value:"Minerao",children:"Minerao"}),a.jsx("option",{value:"Qumica",children:"Qumica"}),a.jsx("option",{value:"Metalrgica",children:"Metalrgica"}),a.jsx("option",{value:"Alimentcia",children:"Alimentcia"}),a.jsx("option",{value:"Txtil",children:"Txtil"}),a.jsx("option",{value:"Logstica",children:"Logstica"}),a.jsx("option",{value:"Sade",children:"Sade"}),a.jsx("option",{value:"Educao",children:"Educao"}),a.jsx("option",{value:"Tecnologia",children:"Tecnologia"}),a.jsx("option",{value:"Servios",children:"Servios"}),a.jsx("option",{value:"Outros",children:"Outros"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Subsetor"}),a.jsx("input",{type:"text",value:S.subsetor_industria,onChange:P=>j({...S,subsetor_industria:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Construo Pesada, Offshore, etc."})]})]})]}),x==="safety"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx(Gt,{className:"w-4 h-4 inline mr-1"}),"Nvel de Risco"]}),a.jsxs("select",{value:S.nivel_risco,onChange:P=>j({...S,nivel_risco:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"baixo",children:"Baixo"}),a.jsx("option",{value:"medio",children:"Mdio"}),a.jsx("option",{value:"alto",children:"Alto"}),a.jsx("option",{value:"critico",children:"Crtico"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Baseado no setor, atividades e histrico de incidentes"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Data da ltima Auditoria de SST"}),a.jsx("input",{type:"date",value:S.data_ultima_auditoria,onChange:P=>j({...S,data_ultima_auditoria:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Certificaes de Segurana"}),a.jsx("textarea",{value:S.certificacoes_seguranca,onChange:P=>j({...S,certificacoes_seguranca:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: ISO 45001, OHSAS 18001, ISO 14001, etc."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Responsvel pela Segurana"}),a.jsx("input",{type:"text",value:S.contato_seguranca_nome,onChange:P=>j({...S,contato_seguranca_nome:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do responsvel"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email do Responsvel"}),a.jsx("input",{type:"email",value:S.contato_seguranca_email,onChange:P=>j({...S,contato_seguranca_email:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"seguranca@empresa.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone do Responsvel"}),a.jsx("input",{type:"tel",value:S.contato_seguranca_telefone,onChange:P=>j({...S,contato_seguranca_telefone:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 9999-9999"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Histrico de Incidentes Relevantes"}),a.jsx("textarea",{value:S.historico_incidentes,onChange:P=>j({...S,historico_incidentes:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Resumo de incidentes graves ou estatsticas relevantes..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Observaes de Compliance"}),a.jsx("textarea",{value:S.observacoes_compliance,onChange:P=>j({...S,observacoes_compliance:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Informaes sobre conformidade regulatria, pendncias, etc."})]})]}),x==="subscription"&&(($=i==null?void 0:i.profile)==null?void 0:$.role)===Hr.SYSTEM_ADMIN&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 space-y-6",children:[a.jsxs("h3",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[a.jsx(Js,{className:"w-4 h-4 text-blue-600"}),"Configuraes de Assinatura"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Plano"}),a.jsxs("select",{value:S.subscription_plan,onChange:P=>j({...S,subscription_plan:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"basic",children:"Bsico"}),a.jsx("option",{value:"pro",children:"Profissional"}),a.jsx("option",{value:"enterprise",children:"Enterprise"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mx. Usurios"}),a.jsx("input",{type:"number",min:"1",max:"1000",value:S.max_users,onChange:P=>j({...S,max_users:parseInt(P.target.value)||50}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Mx. Subsidirias"}),a.jsx("input",{type:"number",min:"0",max:"100",value:S.max_subsidiaries,onChange:P=>j({...S,max_subsidiaries:parseInt(P.target.value)||0}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[x!=="basic"&&a.jsx("button",{type:"button",onClick:()=>{const P=["basic","company","safety","subscription"],U=P.indexOf(x);U>0&&b(P[U-1])},className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Anterior"}),x!==(((W=i==null?void 0:i.profile)==null?void 0:W.role)===Hr.SYSTEM_ADMIN?"subscription":"safety")&&a.jsx("button",{type:"button",onClick:()=>{var K;const P=((K=i==null?void 0:i.profile)==null?void 0:K.role)===Hr.SYSTEM_ADMIN?["basic","company","safety","subscription"]:["basic","company","safety"],U=P.indexOf(x);U<P.length-1&&b(P[U+1])},className:"px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Prximo"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",disabled:l,children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:l,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"w-4 h-4 mr-2 animate-spin"}),"Criando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),"Criar Organizao"]})})]})]})]})]})}):null}function gae({isOpen:e,onClose:t,onSelect:r,folders:s,templates:n}){const[i,l]=_.useState(null),[d,u]=_.useState(""),[h,m]=_.useState([]);_.useEffect(()=>{if(!i){m([]);return}m((w=>{const N=(A,O)=>{for(const T of A){if(T.id===O)return T;if(T.children){const D=N(T.children,O);if(D)return D}}return null},S=N(s,w);if(!S)return[];const j=[S];let k=S;for(;k.parent_id;){const A=N(s,k.parent_id);if(A)j.unshift(A),k=A;else break}return j})(i))},[i,s]);const p=()=>{if(!i)return s.filter(N=>!N.parent_id);const v=(N,S)=>{for(const j of N){if(j.id===S)return j;if(j.children){const k=v(j.children,S);if(k)return k}}return null},w=v(s,i);return(w==null?void 0:w.children)||[]},x=()=>n.filter(v=>{const w=v.folder_id===i,N=!d||v.name.toLowerCase().includes(d.toLowerCase())||v.category&&v.category.toLowerCase().includes(d.toLowerCase());return w&&N}),b=p(),y=x();return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"p-4 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Selecionar Template de Checklist"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Navegue pelas pastas para encontrar o template desejado"})]}),a.jsx("button",{onClick:t,className:"p-2 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(ct,{className:"w-5 h-5"})})]}),h.length>0&&a.jsxs("nav",{className:"flex items-center gap-2 text-sm text-slate-600 px-4 py-2 bg-slate-50 border-b border-slate-200",children:[a.jsx("button",{onClick:()=>l(null),className:"hover:underline",children:"Raiz"}),h.map(v=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zo,{className:"w-3 h-3"}),a.jsx("button",{onClick:()=>l(v.id),className:"hover:underline",children:v.name})]},v.id))]}),a.jsx("div",{className:"p-4 border-b border-slate-200",children:a.jsxs("div",{className:"relative",children:[a.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Buscar templates...",value:d,onChange:v=>u(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:b.length===0&&y.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-500",children:[a.jsx(bs,{className:"w-12 h-12 mb-2"}),a.jsx("p",{children:"Nenhum template ou pasta encontrado"})]}):a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[b.map(v=>a.jsx("div",{onClick:()=>l(v.id),className:"bg-white border border-slate-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md cursor-pointer transition-all group",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-lg group-hover:bg-blue-100",children:a.jsx(bs,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-slate-900 truncate",children:v.name}),a.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[(v.subfolder_count||0)+(v.template_count||0)," itens"]})]}),a.jsx(zo,{className:"w-4 h-4 text-slate-400 group-hover:text-blue-600"})]})},v.id)),y.map(v=>a.jsx("div",{onClick:()=>r(v),className:"bg-white border border-slate-200 rounded-lg p-4 hover:border-green-300 hover:shadow-md cursor-pointer transition-all group",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"p-2 bg-slate-50 text-slate-600 rounded-lg group-hover:bg-green-50 group-hover:text-green-600",children:a.jsx(jr,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-medium text-slate-900 line-clamp-2",children:v.name}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:v.category})]})]})},v.id))]})}),a.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:[b.length," pasta(s)  ",y.length," template(s)"]}),a.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 transition-colors",children:"Cancelar"})]})})]})}):null}const FA=[{id:1,title:"Informaes Bsicas",description:"Ttulo e descrio",icon:a.jsx(ki,{className:"w-5 h-5"})},{id:2,title:"Localizao",description:"Empresa e endereo",icon:a.jsx(lt,{className:"w-5 h-5"})},{id:3,title:"Equipe",description:"Responsveis e data",icon:a.jsx(Dt,{className:"w-5 h-5"})},{id:4,title:"Configurao",description:"Template e IA",icon:a.jsx(Js,{className:"w-5 h-5"})}];function xae(){var ee,Z;const e=na(),{user:t}=da(),r=t,[s]=ju(),[n,i]=_.useState(!1),[l,d]=_.useState(1),[u,h]=_.useState([]),[m,p]=_.useState([]),[x,b]=_.useState([]),[y,v]=_.useState(!1),[w,N]=_.useState(!1),[S,j]=_.useState(!1),[k,A]=_.useState({}),[O,T]=_.useState(!1),[D]=_.useState(s.get("org")?parseInt(s.get("org")):((ee=r==null?void 0:r.profile)==null?void 0:ee.organization_id)||null),[R,I]=_.useState({title:"",description:"",location:"",company_name:"",cep:"",address:"",latitude:null,longitude:null,inspector_name:((Z=r==null?void 0:r.profile)==null?void 0:Z.name)||"",inspector_email:(r==null?void 0:r.email)||"",responsible_name:"",responsible_email:"",priority:"media",scheduled_date:"",template_id:"",action_plan_type:"5w2h",ai_assistant_id:"",compliance_enabled:!0});_.useEffect(()=>{$(),W(),L()},[]),_.useEffect(()=>{const re={};re[1]=!!R.title.trim(),re[2]=!!(R.company_name.trim()&&R.location.trim()),re[3]=!!R.inspector_name.trim(),re[4]=!0,A(re)},[R]);const L=async()=>{try{const re=await Fe("/api/ai-assistants");if(re.ok){const J=await re.json();b(J.assistants||[])}else b([])}catch(re){console.error("Erro ao carregar assistentes de IA:",re),b([])}},$=async()=>{try{const re=await Fe("/api/checklist/checklist-templates");if(re.ok){const F=((await re.json()).templates||[]).filter(de=>!de.is_category_folder&&de.name&&de.category);h(F)}else h([])}catch(re){console.error("Erro ao carregar templates:",re),h([])}},W=async()=>{try{const re=await Fe("/api/checklist/tree");if(re.ok){const J=await re.json();p(J.folders||[])}}catch(re){console.error("Erro ao carregar pastas:",re)}},P=re=>{I(J=>({...J,template_id:String(re.id)})),j(!1)},U=()=>{const re=R.template_id;return u.find(J=>String(J.id)===re)};_.useEffect(()=>{if(l===4){T(!0);const re=setTimeout(()=>T(!1),1e3);return()=>clearTimeout(re)}},[l]);const K=async re=>{if(re.preventDefault(),!O){i(!0);try{const J={...R,organization_id:D};console.log("[NewInspection] Submitting data:",J);const F=await Fe("/api/inspections",{method:"POST",body:JSON.stringify(J)});if(console.log("[NewInspection] Response status:",F.status),F.ok){const de=await F.json();console.log("[NewInspection] Created inspection:",de),de.id?e(`/inspections/${de.id}`):(console.error("[NewInspection] Created but ID is missing:",de),alert("Inspeo criada, mas houve um erro ao redirecionar. Verifique na lista."),e("/inspections"))}else{const de=await F.json().catch(()=>({}));throw new Error(de.message||de.error||"Erro ao criar inspeo")}}catch(J){console.error("Erro:",J),alert(`Erro ao criar inspeo: ${J instanceof Error?J.message:"Tente novamente."}`)}finally{i(!1)}}},G=re=>{const{name:J,value:F}=re.target;I(de=>({...de,[J]:F}))},Q=async re=>{const J=re.target.value.replace(/\D/g,"");if(I(F=>({...F,cep:J})),J.length===8)try{const F=await Fe(`/api/cep/${J}`);if(F.ok){const de=await F.json();I(_e=>({..._e,address:de.address}))}}catch(F){console.error("Erro ao buscar CEP:",F)}},le=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(re=>{I(J=>({...J,latitude:re.coords.latitude,longitude:re.coords.longitude}))},re=>{console.error("Erro ao obter localizao:",re),alert("Erro ao obter localizao GPS")}):alert("Geolocalizao no  suportada neste navegador")},H=()=>{l<4&&d(re=>re+1)},V=()=>{l>1&&d(re=>re-1)},B=k[l],ne=()=>a.jsx("div",{className:"mb-8",children:a.jsxs("div",{className:"relative flex items-start justify-between",children:[a.jsx("div",{className:"absolute top-6 left-6 right-6 h-1 bg-slate-200 rounded-full"}),a.jsx("div",{className:"absolute top-6 left-6 h-1 bg-green-500 rounded-full transition-all duration-500",style:{width:`${(l-1)/(FA.length-1)*100}%`,maxWidth:"calc(100% - 48px)"}}),FA.map(re=>a.jsxs("div",{className:"flex flex-col items-center z-10",style:{width:"25%"},children:[a.jsx("button",{type:"button",onClick:()=>(k[re.id]||re.id<l)&&d(re.id),disabled:!k[re.id]&&re.id>l,className:`flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all duration-300 bg-white ${l===re.id?"border-blue-500 text-blue-600 shadow-lg shadow-blue-500/30 ring-4 ring-blue-100":l>re.id||k[re.id]?"bg-green-500 border-green-500 text-white":"border-slate-300 text-slate-400"} ${k[re.id]||re.id<l?"cursor-pointer hover:scale-105":"cursor-not-allowed"}`,children:l>re.id?a.jsx(aa,{className:"w-6 h-6"}):re.icon}),a.jsxs("div",{className:"mt-3 text-center",children:[a.jsx("p",{className:`text-sm font-medium ${l===re.id?"text-blue-600":"text-slate-600"}`,children:re.title}),a.jsx("p",{className:"text-xs text-slate-400 hidden md:block",children:re.description})]})]},re.id))]})}),ie=()=>{var re;switch(l){case 1:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl text-white shadow-lg",children:a.jsx(ki,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Informaes Bsicas"}),a.jsx("p",{className:"text-slate-500",children:"Defina o ttulo e descrio da inspeo"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"title",className:"block text-sm font-semibold text-slate-700 mb-2",children:["Ttulo da Inspeo ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",id:"title",name:"title",required:!0,value:R.title,onChange:G,className:`w-full px-4 py-3 border-2 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 ${R.title?"border-green-300 bg-green-50/30":"border-slate-200"}`,placeholder:"Ex: Inspeo de Equipamentos de Proteo"}),a.jsx(UA,{label:"Sugestes de Ttulos",apiEndpoint:"/api/autosuggest/inspection-titles",onTagSelect:J=>I(F=>({...F,title:J})),maxTags:5})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"description",className:"block text-sm font-semibold text-slate-700 mb-2",children:["Descrio ",a.jsx("span",{className:"text-slate-400 font-normal",children:"(opcional)"})]}),a.jsx("textarea",{id:"description",name:"description",rows:4,value:R.description,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all duration-200 resize-none",placeholder:"Descreva os objetivos e escopo da inspeo..."}),a.jsx(UA,{label:"Sugestes de Descries",apiEndpoint:"/api/autosuggest/inspection-descriptions",onTagSelect:J=>I(F=>({...F,description:J})),maxTags:4})]})]})]});case 2:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl text-white shadow-lg",children:a.jsx(lt,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Localizao"}),a.jsx("p",{className:"text-slate-500",children:"Informaes da empresa e endereo"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(Bl,{label:"Nome da Empresa",name:"company_name",value:R.company_name,onChange:J=>I(F=>({...F,company_name:J})),placeholder:"Ex: ABC Indstria Ltda",required:!0,apiEndpoint:"/api/autosuggest/companies",onAddNew:()=>N(!0),addNewText:"Nova Empresa"})}),a.jsx(Bl,{label:"Local / Setor",name:"location",value:R.location,onChange:J=>I(F=>({...F,location:J})),placeholder:"Ex: Galpo A - Setor de Produo",required:!0,apiEndpoint:"/api/autosuggest/locations"}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cep",className:"block text-sm font-semibold text-slate-700 mb-2",children:"CEP"}),a.jsx("input",{type:"text",id:"cep",name:"cep",value:R.cep,onChange:Q,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all",placeholder:"00000-000",maxLength:8})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{htmlFor:"address",className:"block text-sm font-semibold text-slate-700",children:"Endereo Completo"}),a.jsxs("button",{type:"button",onClick:le,className:"flex items-center px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 border border-blue-200 rounded-lg hover:bg-blue-100 transition-all duration-200",children:[a.jsx(Ky,{className:"w-4 h-4 mr-2"}),"Capturar GPS"]})]}),a.jsx("input",{type:"text",id:"address",name:"address",value:R.address,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all",placeholder:"Endereo ser preenchido automaticamente pelo CEP"}),R.latitude&&R.longitude&&a.jsxs("div",{className:"flex items-center gap-3 mt-3 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:[a.jsx("div",{className:"p-2 bg-green-500 rounded-lg text-white",children:a.jsx(Na,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-800",children:"GPS Capturado com Sucesso"}),a.jsxs("p",{className:"text-xs text-green-600",children:[R.latitude.toFixed(6),", ",R.longitude.toFixed(6)]})]}),a.jsx(aa,{className:"w-5 h-5 text-green-500 ml-auto"})]})]})]})]});case 3:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl text-white shadow-lg",children:a.jsx(Dt,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Equipe e Agendamento"}),a.jsx("p",{className:"text-slate-500",children:"Responsveis e cronograma"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Bl,{label:"Nome do Tcnico / Inspetor",name:"inspector_name",value:R.inspector_name,onChange:(J,F)=>I(de=>({...de,inspector_name:J,inspector_email:F||de.inspector_email})),placeholder:"Nome completo do responsvel",required:!0,apiEndpoint:"/api/autosuggest/inspectors",onAddNew:()=>v(!0),addNewText:"Novo Inspetor",showEmail:!0}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"inspector_email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email do Tcnico"}),a.jsx("input",{type:"email",id:"inspector_email",name:"inspector_email",value:R.inspector_email,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all",placeholder:"email@exemplo.com"})]}),a.jsx(Bl,{label:"Responsvel da Empresa",name:"responsible_name",value:R.responsible_name,onChange:(J,F)=>I(de=>({...de,responsible_name:J,responsible_email:F||de.responsible_email})),placeholder:"Nome do responsvel tcnico",apiEndpoint:"/api/autosuggest/responsibles",showEmail:!0}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"responsible_email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email do Responsvel"}),a.jsx("input",{type:"email",id:"responsible_email",name:"responsible_email",value:R.responsible_email,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all",placeholder:"responsavel@empresa.com"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"scheduled_date",className:"block text-sm font-semibold text-slate-700 mb-2",children:[a.jsx(Gr,{className:"w-4 h-4 inline mr-1"}),"Data Agendada"]}),a.jsx("input",{type:"date",id:"scheduled_date",name:"scheduled_date",value:R.scheduled_date,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all"})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"priority",className:"block text-sm font-semibold text-slate-700 mb-2",children:[a.jsx(Nt,{className:"w-4 h-4 inline mr-1"}),"Prioridade"]}),a.jsxs("select",{id:"priority",name:"priority",value:R.priority,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all",children:[a.jsx("option",{value:"baixa",children:" Baixa"}),a.jsx("option",{value:"media",children:" Mdia"}),a.jsx("option",{value:"alta",children:" Alta"}),a.jsx("option",{value:"critica",children:" Crtica"})]})]})]})]});case 4:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl text-white shadow-lg",children:a.jsx(Js,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Configurao Final"}),a.jsx("p",{className:"text-slate-500",children:"Template, IA e tipo de plano"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{htmlFor:"ai_assistant_id",className:"block text-sm font-semibold text-slate-700 mb-2",children:[a.jsx(Po,{className:"w-4 h-4 inline mr-1 text-purple-500"}),"Assistente de IA Especializado"]}),a.jsxs("select",{id:"ai_assistant_id",name:"ai_assistant_id",value:R.ai_assistant_id,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-purple-100 focus:border-purple-500 transition-all",children:[a.jsx("option",{value:"",children:"Assistente Geral de Segurana do Trabalho"}),x.map(J=>a.jsxs("option",{value:J.id,children:[J.name," - ",J.specialization]},J.id))]}),R.ai_assistant_id&&x.find(J=>J.id==R.ai_assistant_id)&&a.jsxs("div",{className:"mt-3 p-4 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Oi,{className:"w-5 h-5 text-purple-600"}),a.jsx("span",{className:"font-medium text-purple-900",children:"Especialista Selecionado"})]}),a.jsx("p",{className:"text-purple-700 text-sm mt-1",children:(re=x.find(J=>J.id==R.ai_assistant_id))==null?void 0:re.description})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:[a.jsx(To,{className:"w-4 h-4 inline mr-1"}),"Template de Checklist"]}),a.jsxs("button",{type:"button",onClick:()=>j(!0),className:"w-full px-4 py-3 border-2 border-dashed border-slate-300 rounded-xl hover:border-blue-400 hover:bg-blue-50/50 transition-all text-left flex items-center justify-between group",children:[a.jsx("span",{className:R.template_id?"text-slate-900 font-medium":"text-slate-500",children:U()?U().name:"Selecionar Template..."}),a.jsx(To,{className:"w-5 h-5 text-slate-400 group-hover:text-blue-500 transition-colors"})]}),R.template_id&&a.jsx("div",{className:"mt-3 p-4 bg-gradient-to-r from-blue-50 to-cyan-50 border border-blue-200 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(To,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"font-medium text-blue-900",children:"Template Selecionado"})]}),a.jsx("button",{type:"button",onClick:()=>I(J=>({...J,template_id:""})),className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Remover"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"action_plan_type",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Tipo de Plano de Ao"}),a.jsxs("select",{id:"action_plan_type",name:"action_plan_type",value:R.action_plan_type,onChange:G,className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:ring-4 focus:ring-blue-100 focus:border-blue-500 transition-all",children:[a.jsx("option",{value:"5w2h",children:"5W2H (Completo)"}),a.jsx("option",{value:"simple",children:"Simples"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"5W2H: O qu, Por qu, Onde, Quando, Quem, Como, Quanto"})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("label",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-emerald-50 to-green-50 border-2 border-emerald-200 rounded-xl cursor-pointer hover:border-emerald-400 transition-all",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-emerald-500 rounded-lg text-white",children:a.jsx(aa,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-emerald-900 block",children:"Habilitar Anlise de Conformidade"}),a.jsx("span",{className:"text-sm text-emerald-700",children:"Permite avaliar cada item como Conforme, No Conforme ou N/A"})]})]}),a.jsx("input",{type:"checkbox",checked:R.compliance_enabled,onChange:J=>I(F=>({...F,compliance_enabled:J.target.checked})),className:"w-6 h-6 text-emerald-600 border-2 border-emerald-300 rounded-md focus:ring-emerald-500 cursor-pointer"})]})})]}),a.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-br from-slate-50 to-slate-100 border border-slate-200 rounded-2xl",children:[a.jsxs("h4",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(aa,{className:"w-5 h-5 text-green-500"}),"Resumo da Inspeo"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Ttulo"}),a.jsx("p",{className:"font-medium text-slate-900",children:R.title||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Empresa"}),a.jsx("p",{className:"font-medium text-slate-900",children:R.company_name||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Local"}),a.jsx("p",{className:"font-medium text-slate-900",children:R.location||"-"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Tcnico"}),a.jsx("p",{className:"font-medium text-slate-900",children:R.inspector_name||"-"})]})]})]})]});default:return null}};return a.jsx(Je,{children:a.jsxs("div",{className:"max-w-3xl mx-auto",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[a.jsx("button",{onClick:()=>e("/inspections"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-xl transition-all duration-200",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 bg-clip-text text-transparent",children:"Nova Inspeo"}),a.jsx("p",{className:"text-slate-500 mt-1",children:"Crie uma nova inspeo de segurana do trabalho"})]})]}),a.jsx(ne,{}),a.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden",children:a.jsxs("form",{onSubmit:re=>re.preventDefault(),children:[a.jsx("div",{className:"p-8",children:ie()}),a.jsxs("div",{className:"px-8 py-6 bg-slate-50 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{type:"button",onClick:l===1?()=>e("/inspections"):V,className:"flex items-center px-5 py-2.5 text-slate-600 border border-slate-300 rounded-xl hover:bg-white transition-all duration-200",children:[a.jsx(xs,{className:"w-4 h-4 mr-2"}),l===1?"Cancelar":"Voltar"]}),l<4?a.jsxs("button",{type:"button",onClick:H,disabled:!B,className:`flex items-center px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${B?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:from-blue-600 hover:to-indigo-700 shadow-lg shadow-blue-500/25":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:["Prximo",a.jsx(_n,{className:"w-4 h-4 ml-2"})]}):a.jsx("button",{type:"button",disabled:n||!B||O,onClick:K,className:`flex items-center px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${!n&&B&&!O?"bg-gradient-to-r from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-lg shadow-green-500/25":"bg-slate-200 text-slate-400 cursor-not-allowed"}`,children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Criando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Criar Inspeo"]})})]})]})}),a.jsx(YP,{isOpen:y,onClose:()=>v(!1),onUserCreated:re=>I(J=>({...J,inspector_name:re.name,inspector_email:re.email})),organizationId:D||void 0}),a.jsx(Zj,{isOpen:w,onClose:()=>N(!1),onSuccess:()=>{},parentOrganizations:[]}),a.jsx(gae,{isOpen:S,onClose:()=>j(!1),onSelect:P,folders:m,templates:u})]})})}function bae(){const e=na(),{id:t}=$i(),[r,s]=_.useState(!1),[n,i]=_.useState(!0),[l,d]=_.useState(null),[u,h]=_.useState([]),[m,p]=_.useState(!1),[x,b]=_.useState(!1),[y,v]=_.useState({title:"",description:"",location:"",company_name:"",cep:"",address:"",latitude:null,longitude:null,inspector_name:"",inspector_email:"",responsible_name:"",responsible_email:"",priority:"media",scheduled_date:"",template_id:"",action_plan_type:"5w2h",status:"pendente",ai_assistant_id:""});_.useEffect(()=>{t&&N(),w()},[t]);const w=async()=>{try{const O=await fetch("/api/ai-assistants");if(O.ok){const T=await O.json();h(T.assistants||[])}else console.error("Erro na resposta da API de assistentes:",O.status,O.statusText),h([])}catch(O){console.error("Erro ao carregar assistentes de IA:",O),h([])}},N=async()=>{try{i(!0);const O=await fetch(`/api/inspections/${t}`);if(O.ok){const D=(await O.json()).inspection;v({title:D.title||"",description:D.description||"",location:D.location||"",company_name:D.company_name||"",cep:D.cep||"",address:D.address||"",latitude:D.latitude,longitude:D.longitude,inspector_name:D.inspector_name||"",inspector_email:D.inspector_email||"",responsible_name:D.responsible_name||"",responsible_email:D.responsible_email||"",priority:D.priority||"media",scheduled_date:D.scheduled_date||"",template_id:"",action_plan_type:D.action_plan_type||"5w2h",status:D.status||"pendente",ai_assistant_id:D.ai_assistant_id||""}),d(D.organization_id)}else throw new Error("Falha ao carregar inspeo")}catch(O){console.error("Erro ao carregar inspeo:",O),alert(`Erro ao carregar inspeo: ${O instanceof Error?O.message:"Tente novamente."}`),e("/inspections")}finally{i(!1)}},S=async O=>{O.preventDefault(),s(!0);try{const{template_id:T,...D}=y,R={...D,organization_id:l},I=await fetch(`/api/inspections/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(R)});if(I.ok)e(`/inspections/${t}`);else{const L=await I.json().catch(()=>({}));throw console.error("API Error:",I.status,L),new Error(L.error||"Erro ao atualizar inspeo")}}catch(T){console.error("Erro:",T),alert(`Erro ao atualizar inspeo: ${T instanceof Error?T.message:"Tente novamente."}`)}finally{s(!1)}},j=O=>{const{name:T,value:D}=O.target;v(R=>({...R,[T]:D}))},k=async O=>{const T=O.target.value.replace(/\D/g,"");if(v(D=>({...D,cep:T})),T.length===8)try{const D=await fetch(`/api/cep/${T}`);if(D.ok){const R=await D.json();v(I=>({...I,address:R.address}))}}catch(D){console.error("Erro ao buscar CEP:",D)}},A=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(O=>{v(T=>({...T,latitude:O.coords.latitude,longitude:O.coords.longitude}))},O=>{console.error("Erro ao obter localizao:",O),alert("Erro ao obter localizao GPS")}):alert("Geolocalizao no  suportada neste navegador")};return n?a.jsx(Je,{children:a.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),a.jsx("span",{className:"ml-3 text-slate-600",children:"Carregando inspeo..."})]})})}):a.jsx(Je,{children:a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e(`/inspections/${t}`),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors duration-200",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:"Editar Inspeo"}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Atualize os dados da inspeo de segurana do trabalho"})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:a.jsxs("form",{onSubmit:S,className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:" Informaes Gerais"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Dados bsicos da inspeo"})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-slate-700 mb-2",children:"Ttulo da Inspeo *"}),a.jsx("input",{type:"text",id:"title",name:"title",required:!0,value:y.title,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Inspeo de Equipamentos de Proteo"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{id:"description",name:"description",rows:3,value:y.description,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva os objetivos e escopo da inspeo..."})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:" Organizao e Empresa"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Informaes da empresa inspecionada"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Organizao"}),a.jsx(Eu,{selectedOrgId:l,onOrganizationChange:d,showAllOption:!1})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"company_name",className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome da Empresa *"}),a.jsx("input",{type:"text",id:"company_name",name:"company_name",required:!0,value:y.company_name,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: ABC Indstria Ltda"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:" Status, Configuraes e IA"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Status atual, configuraes da inspeo e assistente de IA"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"ai_assistant_id",className:"block text-sm font-medium text-slate-700 mb-2",children:" Assistente de IA Especializado"}),a.jsxs("select",{id:"ai_assistant_id",name:"ai_assistant_id",value:y.ai_assistant_id,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Assistente Geral de Segurana do Trabalho"}),u.map(O=>a.jsxs("option",{value:O.id,children:[O.name," - ",O.specialization]},O.id))]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Escolha um especialista para que as anlises de IA sejam mais precisas"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-slate-700 mb-2",children:"Status da Inspeo"}),a.jsxs("select",{id:"status",name:"status",value:y.status,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"pendente",children:"Pendente"}),a.jsx("option",{value:"em_andamento",children:"Em Andamento"}),a.jsx("option",{value:"concluida",children:"Concluda"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"priority",className:"block text-sm font-medium text-slate-700 mb-2",children:"Prioridade"}),a.jsxs("select",{id:"priority",name:"priority",value:y.priority,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"baixa",children:"Baixa"}),a.jsx("option",{value:"media",children:"Mdia"}),a.jsx("option",{value:"alta",children:"Alta"}),a.jsx("option",{value:"critica",children:"Crtica"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:" Localizao"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Local e endereo da inspeo"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-slate-700 mb-2",children:"Local *"}),a.jsx("input",{type:"text",id:"location",name:"location",required:!0,value:y.location,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Galpo A - Setor de Produo"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cep",className:"block text-sm font-medium text-slate-700 mb-2",children:"CEP"}),a.jsx("input",{type:"text",id:"cep",name:"cep",value:y.cep,onChange:k,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"00000-000",maxLength:8})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-slate-700",children:"Endereo Completo"}),a.jsxs("button",{type:"button",onClick:A,className:"flex items-center px-3 py-1 text-sm text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors",children:[a.jsx(Ky,{className:"w-4 h-4 mr-1"}),"Usar GPS"]})]}),a.jsx("input",{type:"text",id:"address",name:"address",value:y.address,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Endereo ser preenchido automaticamente pelo CEP ou digite manualmente"}),y.latitude&&y.longitude&&a.jsxs("div",{className:"flex items-center gap-2 mt-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx(Na,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Localizao GPS:"}),a.jsxs("span",{className:"text-sm text-green-600",children:[y.latitude.toFixed(6),", ",y.longitude.toFixed(6)]})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:" Responsveis e Agendamento"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Tcnico responsvel e cronograma"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx(Bl,{label:"Nome do Tcnico",name:"inspector_name",value:y.inspector_name,onChange:(O,T)=>{v(D=>({...D,inspector_name:O,inspector_email:T||D.inspector_email}))},placeholder:"Nome completo do responsvel",required:!0,apiEndpoint:"/api/autosuggest/inspectors",onAddNew:()=>p(!0),addNewText:"Novo Inspetor",showEmail:!0}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"inspector_email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email do Tcnico"}),a.jsx("input",{type:"email",id:"inspector_email",name:"inspector_email",value:y.inspector_email,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"email@exemplo.com"})]}),a.jsx(Bl,{label:"Nome do Responsvel da Empresa",name:"responsible_name",value:y.responsible_name,onChange:(O,T)=>{v(D=>({...D,responsible_name:O,responsible_email:T||D.responsible_email}))},placeholder:"Nome do responsvel tcnico da empresa",apiEndpoint:"/api/autosuggest/responsibles",showEmail:!0}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{htmlFor:"responsible_email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email do Responsvel da Empresa"}),a.jsx("input",{type:"email",id:"responsible_email",name:"responsible_email",value:y.responsible_email,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"responsavel@empresa.com"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"scheduled_date",className:"block text-sm font-medium text-slate-700 mb-2",children:"Data Agendada"}),a.jsx("input",{type:"date",id:"scheduled_date",name:"scheduled_date",value:y.scheduled_date,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"action_plan_type",className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Plano de Ao"}),a.jsxs("select",{id:"action_plan_type",name:"action_plan_type",value:y.action_plan_type,onChange:j,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"5w2h",children:"5W2H (Completo)"}),a.jsx("option",{value:"simple",children:"Simples"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Escolha entre plano 5W2H completo ou formato simples"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:" Informaes do Template"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Template de checklist utilizado na criao"})]}),a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(To,{className:"w-5 h-5 text-amber-600"}),a.jsx("span",{className:"font-medium text-amber-800",children:"Template no pode ser alterado"})]}),a.jsx("p",{className:"text-sm text-amber-700",children:"O template de checklist  definido apenas na criao da inspeo. Para usar um template diferente, crie uma nova inspeo. Voc pode adicionar itens manuais na pgina de detalhes da inspeo."})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-slate-200",children:[a.jsx("button",{type:"button",onClick:()=>e(`/inspections/${t}`),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors duration-200",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:r,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200",children:[r?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Ka,{className:"w-4 h-4 mr-2"}),r?"Salvando...":"Salvar Alteraes"]})]})]})}),a.jsx(YP,{isOpen:m,onClose:()=>p(!1),onUserCreated:O=>{v(T=>({...T,inspector_name:O.name,inspector_email:O.email}))},organizationId:l||void 0}),a.jsx(Zj,{isOpen:x,onClose:()=>b(!1),onSuccess:()=>{},parentOrganizations:[]})]})})}function vae(e,t){if(t==null||t==="")return null;if(e.field_type==="boolean")return t===!0?"conforme":"nao_conforme";if(e.field_type==="rating"){const r=Number(t);return r>=4?"conforme":r<=2?"nao_conforme":null}if(e.field_type==="select"||e.field_type==="radio"){const r=String(t).toLowerCase();if(["sim","yes","ok","conforme","adequado","atende"].includes(r))return"conforme";if(["no","nao","no","no conforme","inadequado","no atende"].includes(r))return"nao_conforme";if(["n/a","na","no aplicvel","no se aplica"].includes(r))return"na"}if(e.field_type==="number"&&"validation_rules"in e&&e.validation_rules)try{const r=typeof e.validation_rules=="string"?JSON.parse(e.validation_rules):e.validation_rules,s=Number(t);if(r&&typeof r=="object"){const n=r;if(n.min!==void 0&&s<n.min||n.max!==void 0&&s>n.max)return"nao_conforme";if(n.min!==void 0||n.max!==void 0)return"conforme"}}catch{}return null}function yae({inspectionId:e,onMediaUploaded:t}){const[r,s]=_.useState(!1),[n,i]=_.useState(null),[l,d]=_.useState(0),u=_.useRef(null),h=_.useRef([]),m=_.useRef(null),p=_.useCallback(async(y,v,w)=>{var N,S;if(!e)return null;s(!0);try{const j=new FormData;j.append("file",y),j.append("inspection_id",String(e)),j.append("inspection_item_id",String(v)),j.append("media_type",w);const k=await Fe("/api/media/upload",{method:"POST",body:j,headers:{}});if(k.ok){const A=await k.json(),O={id:((N=A.media)==null?void 0:N.id)||A.id,file_url:((S=A.media)==null?void 0:S.file_url)||A.file_url,media_type:w,file_name:y.name};return t&&t(O),O}else{const A=await k.json().catch(()=>({}));return console.error("Upload failed:",A),alert(A.error||"Erro ao fazer upload"),null}}catch(j){return console.error("Upload error:",j),alert("Erro de conexo ao fazer upload"),null}finally{s(!1)}},[e,t]),x=_.useCallback(async()=>{try{const y=await navigator.mediaDevices.getUserMedia({audio:!0}),v=new MediaRecorder(y,{mimeType:"audio/webm"});u.current=v,h.current=[],v.ondataavailable=w=>{w.data.size>0&&h.current.push(w.data)},v.start(1e3),i("audio"),d(0),m.current=setInterval(()=>{d(w=>w+1)},1e3)}catch(y){console.error("Failed to start recording:",y),alert("No foi possvel acessar o microfone. Verifique as permisses.")}},[]),b=_.useCallback(()=>new Promise(y=>{if(!u.current||u.current.state==="inactive"){y(null);return}u.current.onstop=()=>{var w;const v=new Blob(h.current,{type:"audio/webm"});(w=u.current)==null||w.stream.getTracks().forEach(N=>N.stop()),m.current&&(clearInterval(m.current),m.current=null),i(null),d(0),y(v)},u.current.stop()}),[]);return{uploadFile:p,startAudioRecording:x,stopRecording:b,uploading:r,recording:n,recordingTime:l}}function wae({items:e,renderItem:t,onFinalize:r,isSaving:s=!1,emptyMessage:n="Nenhum item encontrado."}){return!e||e.length===0?a.jsx("div",{className:"p-8 text-center text-slate-500",children:n}):a.jsxs("div",{className:"w-full pb-12",children:[a.jsx("div",{className:"divide-y divide-slate-100 border-b border-slate-100",children:e.map((i,l)=>a.jsx("div",{className:"w-full bg-white",children:t(i,l)},l))}),a.jsxs("div",{className:"mt-8 px-4 md:px-0 max-w-2xl mx-auto",children:[a.jsx("button",{onClick:r,disabled:s,className:`\r
                        w-full py-4 rounded-xl\r
                        bg-blue-600 text-white font-semibold text-lg\r
                        shadow-lg shadow-blue-600/20 hover:bg-blue-700\r
                        active:scale-[0.98] transition-all\r
                        flex items-center justify-center gap-2\r
                        disabled:opacity-70 disabled:cursor-not-allowed\r
                    `,children:s?a.jsx("span",{className:"animate-pulse",children:"Finalizando..."}):a.jsxs(a.Fragment,{children:[a.jsx(Ct,{size:24}),"Finalizar Inspeo"]})}),a.jsx("p",{className:"text-center text-xs text-slate-400 mt-3",children:"Revise todos os itens antes de finalizar."})]})]})}function jae({item:e,media:t,complianceStatus:r,onComplianceChange:s,onCommentChange:n,onMediaUpload:i,onMediaDelete:l,onAiAnalysisRequest:d,onAiActionPlanRequest:u,onManualActionSave:h,isAiAnalyzing:m=!1,isCreatingAction:p=!1,isRecording:x=!1,recordingTime:b=0,index:y,children:v}){const[w,N]=_.useState(!1),[S,j]=_.useState(!1),[k,A]=_.useState("manual"),[O,T]=_.useState([]),[D,R]=_.useState(null),[I,L]=_.useState(!1),[$,W]=_.useState(!1),[P,U]=_.useState({title:"",priority:"media",what_description:""}),K=_.useRef({}),G=_.useRef(null),Q=()=>{G.current&&(G.current.style.height="auto",G.current.style.height=G.current.scrollHeight+"px")};_.useEffect(()=>Q(),[e.comment]),_.useEffect(()=>{const F=()=>{L(!1),W(!1)};return document.addEventListener("click",F),()=>document.removeEventListener("click",F)},[]);const le=F=>{T(de=>de.includes(F)?de.filter(_e=>_e!==F):[...de,F])},H=()=>{P.title.trim()&&h&&(h(P),U({title:"",priority:"media",what_description:""}),j(!1))},V=F=>{const de=K.current[F];de&&(D===F?(de.pause(),R(null)):(Object.values(K.current).forEach(_e=>_e==null?void 0:_e.pause()),de.play(),R(F)))},B=F=>{D===F&&R(null)},ne=()=>{w||j(!1),N(!w)},ie=()=>{S||N(!1),j(!S)},ee=t.filter(F=>F.media_type==="image"),Z=t.filter(F=>F.media_type==="audio"),re=t.filter(F=>F.media_type==="document"||F.media_type==="file"),J=F=>F.id&&F.id>0&&F.id<1e12;return a.jsxs("div",{className:"py-3 px-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{className:"mb-2",children:[e.category&&a.jsx("span",{className:"text-[9px] font-medium text-slate-400 uppercase tracking-wide",children:e.category}),a.jsxs("h3",{className:"text-sm font-medium text-slate-800 leading-snug",children:[y!==void 0&&a.jsxs("span",{className:"text-slate-400 mr-1",children:[y+1,"."]}),e.description]})]}),a.jsx("div",{className:"mb-2",children:v}),s&&!["date","time","boolean","checkbox"].includes(e.field_type||"")&&a.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[a.jsxs("span",{className:"text-xs text-slate-500",children:["Avaliao",["text","textarea","file"].includes(e.field_type||"")?" (manual)":"",":"]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>s("compliant"),className:`px-2 py-0.5 text-xs rounded-md border transition-all ${r==="compliant"?"bg-green-100 border-green-400 text-green-700 font-medium":"border-slate-200 text-slate-500 hover:border-green-300 hover:text-green-600"}`,children:" Conforme"}),a.jsx("button",{type:"button",onClick:()=>s("non_compliant"),className:`px-2 py-0.5 text-xs rounded-md border transition-all ${r==="non_compliant"?"bg-red-100 border-red-400 text-red-700 font-medium":"border-slate-200 text-slate-500 hover:border-red-300 hover:text-red-600"}`,children:" No Conforme"}),a.jsx("button",{type:"button",onClick:()=>s("not_applicable"),className:`px-2 py-0.5 text-xs rounded-md border transition-all ${r==="not_applicable"?"bg-slate-100 border-slate-400 text-slate-700 font-medium":"border-slate-200 text-slate-500 hover:border-slate-300"}`,children:"N/A"})]})]}),a.jsx("textarea",{ref:G,value:e.comment||"",onChange:F=>{n(F.target.value),Q()},placeholder:"Observao...",rows:1,className:"w-full py-1 text-slate-600 text-xs placeholder:text-slate-400 border-none focus:ring-0 resize-none bg-transparent"}),t.length>0&&a.jsxs("div",{className:"mb-2 space-y-1",children:[ee.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:ee.map(F=>a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:`w-10 h-10 rounded border cursor-pointer overflow-hidden
                                            ${O.includes(F.id)?"border-slate-600 ring-1 ring-slate-400":"border-slate-200"}`,onClick:()=>F.id&&le(F.id),children:[a.jsx("img",{src:F.file_url,className:"w-full h-full object-cover",alt:""}),O.includes(F.id)&&a.jsx("div",{className:"absolute inset-0 bg-slate-900/30 flex items-center justify-center",children:a.jsx(aa,{size:12,className:"text-white"})})]}),l&&J(F)&&a.jsx("button",{onClick:de=>{de.stopPropagation(),F.id&&l(F.id)},className:"absolute -top-1 -right-1 w-4 h-4 bg-slate-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(ct,{size:10})})]},F.id))}),Z.length>0&&a.jsx("div",{className:"space-y-1",children:Z.map(F=>a.jsxs("div",{className:`flex items-center gap-2 p-1.5 rounded border text-xs
                                    ${O.includes(F.id)?"bg-slate-100 border-slate-300":"bg-slate-50 border-slate-200"}`,children:[a.jsx("button",{onClick:()=>F.id&&V(F.id),className:"w-6 h-6 rounded-full bg-slate-600 text-white flex items-center justify-center",children:D===F.id?a.jsx(rO,{size:10}):a.jsx(Fl,{size:10,className:"ml-0.5"})}),a.jsx("audio",{ref:de=>{F.id&&(K.current[F.id]=de)},src:F.file_url,onEnded:()=>F.id&&B(F.id),className:"hidden"}),a.jsx("span",{className:"flex-1 truncate text-slate-600",children:F.file_name||"udio"}),a.jsx("button",{onClick:()=>F.id&&le(F.id),className:`px-1.5 py-0.5 rounded text-[10px] ${O.includes(F.id)?"bg-slate-600 text-white":"bg-slate-200 text-slate-600"}`,children:O.includes(F.id)?"":"Sel"}),l&&J(F)&&a.jsx("button",{onClick:()=>F.id&&l(F.id),className:"text-slate-400 hover:text-red-500",children:a.jsx(rr,{size:12})})]},F.id))}),re.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1",children:re.map(F=>a.jsxs("div",{className:`group flex items-center gap-1 px-1.5 py-1 rounded border text-xs cursor-pointer
                                    ${O.includes(F.id)?"bg-slate-100 border-slate-300":"bg-slate-50 border-slate-200"}`,onClick:()=>F.id&&le(F.id),children:[a.jsx(jr,{size:12,className:"text-slate-400"}),a.jsx("span",{className:"text-slate-600 max-w-[80px] truncate",children:F.file_name||"Doc"}),O.includes(F.id)&&a.jsx(aa,{size:10,className:"text-slate-600"}),l&&J(F)&&a.jsx("button",{onClick:de=>{de.stopPropagation(),F.id&&l(F.id)},className:"text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100",children:a.jsx(ct,{size:10})})]},F.id))})]}),a.jsxs("div",{className:"flex items-center justify-between pt-1.5 border-t border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-0.5",children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:F=>{F.stopPropagation(),L(!I),W(!1)},className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",children:a.jsx(Yl,{size:16})}),I&&a.jsxs("div",{className:"absolute top-full left-0 mt-0.5 bg-white border border-slate-200 rounded shadow-lg py-0.5 z-20 min-w-[120px]",children:[a.jsxs("button",{onClick:()=>{i("image","camera"),L(!1)},className:"w-full flex items-center gap-1.5 px-2 py-1.5 text-xs text-slate-700 hover:bg-slate-50",children:[a.jsx(Yl,{size:12})," Cmera"]}),a.jsxs("button",{onClick:()=>{i("image","upload"),L(!1)},className:"w-full flex items-center gap-1.5 px-2 py-1.5 text-xs text-slate-700 hover:bg-slate-50",children:[a.jsx(vs,{size:12})," Upload"]})]})]}),a.jsx("div",{className:"relative",children:x?a.jsxs("button",{onClick:()=>i("audio","camera"),className:"flex items-center gap-1 px-2 py-1 rounded bg-red-500 text-white text-xs",children:[a.jsx(C9,{size:10}),a.jsxs("span",{children:[Math.floor(b/60),":",String(b%60).padStart(2,"0")]})]}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:F=>{F.stopPropagation(),W(!$),L(!1)},className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",children:a.jsx(ru,{size:16})}),$&&a.jsxs("div",{className:"absolute top-full left-0 mt-0.5 bg-white border border-slate-200 rounded shadow-lg py-0.5 z-20 min-w-[120px]",children:[a.jsxs("button",{onClick:()=>{i("audio","camera"),W(!1)},className:"w-full flex items-center gap-1.5 px-2 py-1.5 text-xs text-slate-700 hover:bg-slate-50",children:[a.jsx(ru,{size:12})," Gravar"]}),a.jsxs("button",{onClick:()=>{i("audio","upload"),W(!1)},className:"w-full flex items-center gap-1.5 px-2 py-1.5 text-xs text-slate-700 hover:bg-slate-50",children:[a.jsx(X7,{size:12})," Upload"]})]})]})}),a.jsx("button",{onClick:()=>i("file"),className:"p-1.5 text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded",children:a.jsx(WL,{size:16})})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("button",{onClick:ie,className:`flex items-center gap-1 px-2 py-1 rounded text-xs ${S?"bg-slate-200 text-slate-700":"text-slate-500 hover:bg-slate-100"}`,children:[a.jsx(ec,{size:12}),a.jsx("span",{className:"hidden sm:inline",children:"Ao"})]}),a.jsxs("button",{onClick:ne,className:`flex items-center gap-1 px-2 py-1 rounded text-xs ${w?"bg-slate-700 text-white":"text-slate-500 hover:bg-slate-100"}`,children:[a.jsx(Po,{size:12}),a.jsx("span",{children:"IA"}),O.length>0&&a.jsx("span",{className:"ml-0.5 px-1 py-0.5 bg-slate-500 text-white rounded text-[9px]",children:O.length})]})]})]}),S&&a.jsxs("div",{className:"mt-2 p-2 bg-slate-50 rounded border border-slate-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5",children:[a.jsx("span",{className:"text-xs font-medium text-slate-700",children:"Nova Ao"}),a.jsx("button",{onClick:()=>j(!1),className:"text-slate-400 hover:text-slate-600",children:a.jsx(ct,{size:12})})]}),a.jsxs("div",{className:"flex gap-1 mb-2",children:[a.jsxs("button",{onClick:()=>A("manual"),className:`flex-1 py-1 rounded text-xs ${k==="manual"?"bg-slate-700 text-white":"bg-white text-slate-600 border border-slate-200"}`,children:[a.jsx(jr,{size:10,className:"inline mr-0.5"})," Manual"]}),a.jsxs("button",{onClick:()=>A("ai"),className:`flex-1 py-1 rounded text-xs ${k==="ai"?"bg-slate-700 text-white":"bg-white text-slate-600 border border-slate-200"}`,children:[a.jsx(OS,{size:10,className:"inline mr-0.5"})," 5W2H IA"]})]}),k==="manual"?a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("input",{type:"text",value:P.title,onChange:F=>U(de=>({...de,title:F.target.value})),placeholder:"O que fazer?",className:"w-full px-2 py-1 bg-white border border-slate-200 rounded text-xs"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("select",{value:P.priority,onChange:F=>U(de=>({...de,priority:F.target.value})),className:"flex-1 px-2 py-1 bg-white border border-slate-200 rounded text-xs",children:[a.jsx("option",{value:"baixa",children:"Baixa"}),a.jsx("option",{value:"media",children:"Mdia"}),a.jsx("option",{value:"alta",children:"Alta"})]}),a.jsx("button",{onClick:H,disabled:!P.title.trim(),className:"px-2 py-1 bg-slate-700 text-white text-xs rounded disabled:opacity-50",children:"Salvar"})]})]}):a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:O.length>0?`${O.length} mdia(s) selecionada(s)`:"Selecione mdias acima"}),a.jsxs("button",{onClick:()=>u(O),disabled:p,className:"w-full py-1.5 bg-slate-700 text-white text-xs rounded disabled:opacity-50 flex items-center justify-center gap-1",children:[p?a.jsx(DS,{size:12,className:"animate-spin"}):a.jsx(OS,{size:12}),p?"Gerando...":"Gerar 5W2H"]})]})]}),w&&a.jsxs("div",{className:"mt-2 p-2 bg-slate-50 rounded border border-slate-200",children:[a.jsxs("span",{className:"text-xs font-medium text-slate-700 flex items-center gap-1 mb-1.5",children:[a.jsx(Po,{size:10})," Anlise IA"]}),m?a.jsxs("div",{className:"flex items-center gap-1 py-2 text-xs text-slate-600",children:[a.jsx(DS,{size:12,className:"animate-spin"})," Analisando..."]}):e.aiAnalysis?a.jsx("div",{className:"bg-white rounded p-1.5 text-xs text-slate-700 whitespace-pre-line border border-slate-100",children:e.aiAnalysis}):a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-1",children:O.length>0?`${O.length} mdia(s) selecionada(s)`:"Clique nas mdias para selecionar"}),a.jsxs("button",{onClick:()=>d(O),disabled:O.length===0,className:"w-full py-1.5 bg-slate-700 text-white text-xs rounded disabled:opacity-50 flex items-center justify-center gap-1",children:[a.jsx(Po,{size:12})," Analisar"]})]})]})]})}function Nae({isOpen:e,onClose:t,onCapture:r}){const s=_.useRef(null),n=_.useRef(null),[i,l]=_.useState(null),[d,u]=_.useState(!1),[h,m]=_.useState(!1),[p,x]=_.useState("environment");_.useEffect(()=>(e?b():y(),()=>y()),[e,p]);const b=async()=>{m(!0),u(!1);try{i&&i.getTracks().forEach(S=>S.stop());const N=await navigator.mediaDevices.getUserMedia({video:{facingMode:p,width:{ideal:1920},height:{ideal:1080}},audio:!1});l(N),s.current&&(s.current.srcObject=N)}catch(N){console.error("Camera access error:",N),u(!0)}finally{m(!1)}},y=()=>{i&&(i.getTracks().forEach(N=>N.stop()),l(null))},v=()=>{if(s.current&&n.current){const N=s.current,S=n.current,j=S.getContext("2d");j&&(S.width=N.videoWidth,S.height=N.videoHeight,j.drawImage(N,0,0,S.width,S.height),S.toBlob(k=>{k&&(r(k),t())},"image/jpeg",.85))}},w=()=>{x(N=>N==="environment"?"user":"environment")};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90",children:a.jsxs("div",{className:"relative w-full h-full max-w-lg mx-auto flex flex-col items-center justify-center p-4",children:[a.jsx("button",{onClick:t,className:"absolute top-6 right-6 p-2 rounded-full bg-black/50 text-white z-50",children:a.jsx(ct,{size:24})}),a.jsxs("div",{className:"relative w-full aspect-[3/4] max-h-[70vh] bg-black rounded-lg overflow-hidden ring-1 ring-white/20 shadow-2xl",children:[d?a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-white/50 p-4 text-center",children:[a.jsx(Yl,{size:48,className:"mb-4 opacity-50"}),a.jsx("p",{children:"Sem acesso  cmera. Verifique as permisses do navegador."})]}):a.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),h&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50",children:a.jsx("div",{className:"w-8 h-8 hover:animate-spin rounded-full border-2 border-white border-t-transparent"})}),a.jsx("canvas",{ref:n,className:"hidden"})]}),a.jsxs("div",{className:"flex items-center justify-between w-full mt-8 px-8",children:[a.jsx("button",{onClick:w,className:"p-3 rounded-full bg-white/10 text-white hover:bg-white/20 transition-all",children:a.jsx($o,{size:24})}),a.jsx("button",{onClick:v,disabled:h||d,className:"w-16 h-16 rounded-full border-4 border-white flex items-center justify-center hover:scale-105 active:scale-95 transition-all disabled:opacity-50",children:a.jsx("div",{className:"w-12 h-12 rounded-full bg-white"})}),a.jsx("button",{className:"p-3 opacity-0 pointer-events-none",children:a.jsx(ec,{size:24})})]})]})}):null}function Qj({fields:e,onSubmit:t,initialValues:r={},onAutoSave:s,inspectionId:n,showComplianceSelector:i=!0}){const[l,d]=_.useState(r),[u,h]=_.useState({}),[m,p]=_.useState({}),[x,b]=_.useState({}),[y,v]=_.useState({}),[w,N]=_.useState({}),[S,j]=_.useState(!1),k=_.useRef(null),A=_.useRef(null),O=_.useRef("image"),T=(ee,Z)=>{const re=e.find(J=>J.id===ee);d(J=>{const F={...J,[ee]:Z};if(re&&re.compliance_enabled!==!1&&re.compliance_mode!=="manual"){const de=vae(re,Z);if(de)return p(_e=>{const se={..._e,[ee]:de};return s&&s(F,u,se),se}),F}return s&&s(F,u,m),F})},D=(ee,Z)=>{h(re=>{const J={...re,[ee]:Z};return s&&s(l,J,m),J})},R=(ee,Z)=>{p(re=>{const J={...re,[ee]:Z};return s&&s(l,u,J),J})},{uploadFile:I,startAudioRecording:L,stopRecording:$,recording:W,recordingTime:P}=yae({inspectionId:n||0,onMediaUploaded:ee=>{const Z=A.current;Z&&b(re=>({...re,[Z]:[...re[Z]||[],ee]}))}}),U=async(ee,Z,re)=>{A.current=ee,O.current=Z,Z==="image"?re==="camera"?j(!0):k.current&&(k.current.accept="image/*",k.current.removeAttribute("capture"),k.current.click()):Z==="audio"?re==="camera"?W==="audio"?$():(A.current=ee,await L()):k.current&&(k.current.accept="audio/*",k.current.removeAttribute("capture"),k.current.click()):Z==="file"?k.current&&(k.current.accept=".pdf,.doc,.docx,.xls,.xlsx,.txt",k.current.removeAttribute("capture"),k.current.click()):Z==="video"&&k.current&&(k.current.accept="video/*",k.current.removeAttribute("capture"),k.current.click())},K=async ee=>{const Z=ee.target.files,re=A.current;if(Z&&Z.length>0&&re){const J=Z[0],F=O.current;await I(J,re,F)}k.current&&(k.current.value="")},G=async(ee,Z)=>{try{const re=await Fe(`/api/media/${Z}`,{method:"DELETE"});if(re.ok)b(J=>({...J,[ee]:(J[ee]||[]).filter(F=>F.id!==Z)}));else{const J=await re.json().catch(()=>({}));alert(J.error||"Erro ao excluir mdia")}}catch(re){console.error("Delete media error:",re),alert("Erro ao excluir mdia")}},Q=async(ee,Z=[])=>{var re;if(ee){v(J=>({...J,[ee]:!0}));try{const J=x[ee]||[],de=(Z.length>0?J.filter(se=>se.id&&Z.includes(se.id)):J).map(se=>({file_url:se.file_url,media_type:se.media_type,file_name:se.file_name})),_e=await Fe(`/api/inspection-items/${ee}/pre-analysis`,{method:"POST",body:JSON.stringify({inspection_id:n,field_name:((re=e.find(se=>se.id===ee))==null?void 0:re.field_name)||"",response_value:l[ee]||"",media_data:de})});if(_e.ok){const se=await _e.json();N(Te=>({...Te,[ee]:se.pre_analysis||se.analysis||"Anlise concluda."}))}else console.error("AI Analysis failed",_e.statusText),alert("Erro ao gerar anlise IA. Tente novamente.")}catch(J){console.error("AI Error",J),alert("Erro de conexo ao gerar anlise.")}finally{v(J=>({...J,[ee]:!1}))}}},[le,H]=_.useState({}),V=async(ee,Z=[])=>{var re,J;if(ee){H(F=>({...F,[ee]:!0}));try{const F=x[ee]||[],_e=(Z.length>0?F.filter(Te=>Te.id&&Z.includes(Te.id)):F).map(Te=>({file_url:Te.file_url,media_type:Te.media_type,file_name:Te.file_name})),se=await Fe(`/api/inspection-items/${ee}/create-action`,{method:"POST",body:JSON.stringify({inspection_id:n,field_name:((re=e.find(Te=>Te.id===ee))==null?void 0:re.field_name)||"",response_value:l[ee]||"",pre_analysis:w[ee]||null,media_data:_e})});if(se.ok){const Te=await se.json();alert(` Plano de Ao 5W2H criado com sucesso! ID: ${((J=Te.action_item)==null?void 0:J.id)||"N/A"}`)}else{const Te=await se.json().catch(()=>({}));console.error("AI Action Plan failed",Te),alert(Te.error||"Erro ao gerar plano 5W2H. Tente novamente.")}}catch(F){console.error("AI Error",F),alert("Erro de conexo ao gerar plano.")}finally{H(F=>({...F,[ee]:!1}))}}},B=async(ee,Z)=>{if(n)try{const re=await Fe(`/api/inspections/${n}/action-items`,{method:"POST",body:JSON.stringify({inspection_id:n,inspection_item_id:ee,title:Z.title,what_description:Z.what_description||"",priority:Z.priority,status:"pending",is_ai_generated:!1})});if(re.ok)alert(" Ao manual criada com sucesso!");else{const J=await re.json().catch(()=>({}));alert(J.error||"Erro ao criar ao manual.")}}catch(re){console.error("Manual Action Error",re),alert("Erro de conexo.")}},ne=ee=>{const Z=l[ee.id],re=J=>T(ee.id,J);switch(ee.field_type){case"boolean":return a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>re(!0),className:`flex-1 py-3 rounded-lg border text-sm font-semibold transition-all ${Z===!0?"bg-green-600 text-white border-green-600 shadow-md transform scale-[1.02]":"bg-white text-slate-500 border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:"Conforme"}),a.jsx("button",{onClick:()=>re(!1),className:`flex-1 py-3 rounded-lg border text-sm font-semibold transition-all ${Z===!1?"bg-red-50 text-red-600 border-red-200 shadow-sm transform scale-[1.02]":"bg-white text-slate-500 border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:"No Conforme"})]});case"text":return a.jsx("input",{type:"text",value:Z||"",onChange:J=>re(J.target.value),className:"w-full border-b border-slate-200 py-3 text-slate-800 placeholder:text-slate-400 focus:border-blue-600 focus:outline-none bg-transparent transition-colors",placeholder:"Digite a resposta..."});case"textarea":return a.jsx("textarea",{value:Z||"",onChange:J=>{re(J.target.value),J.target.style.height="auto",J.target.style.height=J.target.scrollHeight+"px"},rows:1,className:"w-full border-b border-slate-200 py-3 text-slate-800 placeholder:text-slate-400 focus:border-blue-600 focus:outline-none bg-transparent transition-colors resize-none overflow-hidden",placeholder:"Digite a resposta detalhada..."});case"select":case"radio":{let J=["Opo 1","Opo 2"];if(ee.options)try{const F=JSON.parse(ee.options);Array.isArray(F)?J=F:J=ee.options.split("|").map(de=>de.trim())}catch{J=ee.options.split("|").map(F=>F.trim())}return a.jsx("div",{className:"flex flex-wrap gap-2",children:J.map(F=>a.jsx("button",{onClick:()=>re(F),className:`px-4 py-2 rounded-full text-xs font-medium border transition-all ${Z===F?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:F},F))})}case"multiselect":case"checkbox":{let J=["Opo A","Opo B"];try{if(ee.options)try{const _e=JSON.parse(ee.options);Array.isArray(_e)?J=_e:J=ee.options.split("|").map(se=>se.trim())}catch{J=ee.options.split("|").map(_e=>_e.trim())}}catch(_e){console.error("Error parsing options",_e)}const F=Array.isArray(Z)?Z:typeof Z=="string"?Z.split(","):[],de=_e=>{const se=F.includes(_e)?F.filter(Te=>Te!==_e):[...F,_e];re(se)};return a.jsx("div",{className:"flex flex-wrap gap-2",children:J.map(_e=>{const se=F.includes(_e);return a.jsxs("button",{onClick:()=>de(_e),className:`px-4 py-2 rounded-full text-xs font-medium border transition-all flex items-center gap-1 ${se?"bg-indigo-600 text-white border-indigo-600 shadow-sm":"bg-slate-50 text-slate-600 border-slate-200 hover:bg-slate-100"}`,children:[se&&a.jsx(aa,{size:12}),_e]},_e)})})}case"date":return a.jsxs("div",{className:"relative",children:[a.jsx(Gr,{className:"absolute left-0 top-3 text-slate-400 w-5 h-5"}),a.jsx("input",{type:"date",value:Z||"",onChange:J=>re(J.target.value),className:"w-full border-b border-slate-200 py-3 pl-8 text-slate-800 focus:border-blue-600 focus:outline-none bg-transparent"})]});case"time":return a.jsxs("div",{className:"relative",children:[a.jsx(wr,{className:"absolute left-0 top-3 text-slate-400 w-5 h-5"}),a.jsx("input",{type:"time",value:Z||"",onChange:J=>re(J.target.value),className:"w-full border-b border-slate-200 py-3 pl-8 text-slate-800 focus:border-blue-600 focus:outline-none bg-transparent"})]});case"number":return a.jsxs("div",{className:"relative",children:[a.jsx(pL,{className:"absolute left-0 top-3 text-slate-400 w-5 h-5"}),a.jsx("input",{type:"number",value:Z||"",onChange:J=>re(J.target.value),placeholder:"0.00",className:"w-full border-b border-slate-200 py-3 pl-8 text-slate-800 focus:border-blue-600 focus:outline-none bg-transparent"})]});case"rating":return a.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(J=>a.jsx("button",{onClick:()=>re(J),className:"p-1 hover:scale-110 transition-transform focus:outline-none",children:a.jsx(rp,{size:24,className:`${(Number(Z)||0)>=J?"fill-yellow-400 text-yellow-400":"text-slate-300"}`})},J))});case"file":return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-600 rounded-lg border border-slate-200 hover:bg-slate-200 transition-colors",onClick:()=>{alert("Upload de arquivo de resposta (Simulao)"),re("arquivo_simulado.pdf")},children:[a.jsx(Pi,{size:16}),Z?"Substituir Arquivo":"Carregar Arquivo"]}),Z&&a.jsx("span",{className:"text-sm text-blue-600 underline truncate max-w-[200px]",children:Z})]});default:return a.jsxs("div",{className:"text-xs text-red-400 bg-red-50 p-2 rounded",children:["Tipo no suportado: ",ee.field_type]})}},ie=()=>{const ee=Object.keys(l).map(Z=>{const re=Number(Z),J=e.find(F=>F.id===re);return J?{field_id:re,field_name:J.field_name,field_type:J.field_type,value:l[re],comment:u[re],compliance_status:m[re]||"unanswered"}:null}).filter(Z=>Z!==null);t(ee)};return a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"file",ref:k,className:"hidden",onChange:K}),a.jsx(wae,{items:e,onFinalize:ie,renderItem:(ee,Z)=>{if(!ee.id)return null;const re={id:ee.id,description:ee.field_name,category:"Geral",response:l[ee.id],comment:u[ee.id],aiAnalysis:w[ee.id]};return a.jsx(jae,{item:{...re,field_type:ee.field_type},media:x[ee.id]||[],complianceEnabled:ee.compliance_enabled!==!1,complianceMode:ee.compliance_mode||"auto",complianceStatus:m[ee.id],onComplianceChange:i?J=>R(ee.id,J):void 0,onCommentChange:J=>D(ee.id,J),onMediaUpload:(J,F)=>U(ee.id,J,F),onMediaDelete:J=>G(ee.id,J),onAiAnalysisRequest:J=>Q(ee.id,J),onAiActionPlanRequest:J=>V(ee.id,J),onManualActionSave:J=>B(ee.id,J),isAiAnalyzing:y[ee.id],isCreatingAction:le[ee.id],isRecording:W==="audio"&&A.current===ee.id,recordingTime:P,index:Z,children:ne(ee)},ee.id)}}),a.jsx(Nae,{isOpen:S,onClose:()=>j(!1),onCapture:ee=>{const Z=A.current;if(Z){const re=new File([ee],`camera-${Date.now()}.jpg`,{type:"image/jpeg"});I(re,Z,"image")}}})]})}function _ae({media:e,currentIndex:t,isOpen:r,onClose:s}){const[n,i]=_.useState(1),[l,d]=_.useState({x:0,y:0}),[u,h]=_.useState(!1),[m,p]=_.useState({x:0,y:0});if(!r||!e.length)return null;const x=e[t],b=t>0,y=t<e.length-1,v=()=>{i(1),d({x:0,y:0})},w=()=>{if(b){v();const R=new CustomEvent("mediaNavigate",{detail:{direction:"previous"}});window.dispatchEvent(R)}},N=()=>{if(y){v();const R=new CustomEvent("mediaNavigate",{detail:{direction:"next"}});window.dispatchEvent(R)}},S=()=>{i(R=>Math.min(R+.25,3))},j=()=>{i(R=>Math.max(R-.25,.5))},k=R=>{n>1&&(h(!0),p({x:R.clientX-l.x,y:R.clientY-l.y}))},A=R=>{u&&n>1&&d({x:R.clientX-m.x,y:R.clientY-m.y})},O=()=>{h(!1)},T=R=>{try{const I=document.createElement("a");I.href=R.file_url,I.download=R.file_name,document.body.appendChild(I),I.click(),document.body.removeChild(I)}catch(I){console.error("Erro ao baixar mdia:",I)}},D=R=>{if(R===0)return"0 Bytes";const I=1024,L=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(R)/Math.log(I));return parseFloat((R/Math.pow(I,$)).toFixed(2))+" "+L[$]};return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center",role:"dialog","aria-labelledby":"media-viewer-title","aria-describedby":"media-viewer-description",children:[a.jsx("div",{className:"absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/50 to-transparent p-4",children:a.jsxs("div",{className:"flex items-center justify-between text-white",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("h3",{id:"media-viewer-title",className:"text-lg font-semibold",children:x.file_name}),a.jsxs("span",{id:"media-viewer-description",className:"text-sm opacity-75",children:[t+1," de ",e.length]}),x.file_size&&a.jsx("span",{className:"text-sm opacity-75",children:D(x.file_size)})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[x.media_type==="image"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:j,disabled:n<=.5,className:"p-2 hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(tB,{className:"w-5 h-5"})}),a.jsxs("span",{className:"text-sm min-w-[4rem] text-center",children:[Math.round(n*100),"%"]}),a.jsx("button",{onClick:S,disabled:n>=3,className:"p-2 hover:bg-white/20 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(aB,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:()=>T(x),className:"p-2 hover:bg-white/20 rounded-lg transition-colors",title:"Baixar mdia",children:a.jsx(Fa,{className:"w-5 h-5"})}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ct,{className:"w-6 h-6"})})]})]})}),b&&a.jsx("button",{onClick:w,className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 p-3 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors",children:a.jsx(w7,{className:"w-6 h-6"})}),y&&a.jsx("button",{onClick:N,className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 p-3 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors",children:a.jsx(zo,{className:"w-6 h-6"})}),a.jsxs("div",{className:"w-full h-full flex items-center justify-center cursor-move",onMouseDown:k,onMouseMove:A,onMouseUp:O,onMouseLeave:O,children:[x.media_type==="image"&&a.jsx("img",{src:x.file_url,alt:x.file_name,className:"max-w-none max-h-none object-contain select-none",style:{transform:`scale(${n}) translate(${l.x/n}px, ${l.y/n}px)`,transition:u?"none":"transform 0.2s ease",cursor:n>1?u?"grabbing":"grab":"default"},draggable:!1}),x.media_type==="video"&&a.jsx("video",{src:x.file_url,controls:!0,className:"max-w-full max-h-full",style:{maxWidth:"90vw",maxHeight:"90vh"}}),x.media_type==="audio"&&a.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2V3z"})})}),a.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:x.file_name}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Arquivo de udio"})]}),a.jsx("audio",{src:x.file_url,controls:!0,className:"w-full",style:{background:"transparent"}})]}),x.media_type==="document"&&a.jsxs("div",{className:"bg-slate-800 rounded-lg p-8 max-w-md w-full mx-4 text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-500 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"})})}),a.jsx("h3",{className:"text-white text-lg font-semibold mb-2",children:x.file_name}),a.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Documento"}),a.jsx("button",{onClick:()=>T(x),className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Baixar Documento"})]})]}),a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white/70 text-sm",children:"Use as setas   para navegar"})]})}function Af(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Wb={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var HA;function Sae(){return HA||(HA=1,(function(e,t){(function(r){e.exports=r()})(function(){return(function r(s,n,i){function l(h,m){if(!n[h]){if(!s[h]){var p=typeof Af=="function"&&Af;if(!m&&p)return p(h,!0);if(d)return d(h,!0);var x=new Error("Cannot find module '"+h+"'");throw x.code="MODULE_NOT_FOUND",x}var b=n[h]={exports:{}};s[h][0].call(b.exports,function(y){var v=s[h][1][y];return l(v||y)},b,b.exports,r,s,n,i)}return n[h].exports}for(var d=typeof Af=="function"&&Af,u=0;u<i.length;u++)l(i[u]);return l})({1:[function(r,s,n){var i=r("./utils"),l=r("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(u){for(var h,m,p,x,b,y,v,w=[],N=0,S=u.length,j=S,k=i.getTypeOf(u)!=="string";N<u.length;)j=S-N,p=k?(h=u[N++],m=N<S?u[N++]:0,N<S?u[N++]:0):(h=u.charCodeAt(N++),m=N<S?u.charCodeAt(N++):0,N<S?u.charCodeAt(N++):0),x=h>>2,b=(3&h)<<4|m>>4,y=1<j?(15&m)<<2|p>>6:64,v=2<j?63&p:64,w.push(d.charAt(x)+d.charAt(b)+d.charAt(y)+d.charAt(v));return w.join("")},n.decode=function(u){var h,m,p,x,b,y,v=0,w=0,N="data:";if(u.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var S,j=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===d.charAt(64)&&j--,u.charAt(u.length-2)===d.charAt(64)&&j--,j%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=l.uint8array?new Uint8Array(0|j):new Array(0|j);v<u.length;)h=d.indexOf(u.charAt(v++))<<2|(x=d.indexOf(u.charAt(v++)))>>4,m=(15&x)<<4|(b=d.indexOf(u.charAt(v++)))>>2,p=(3&b)<<6|(y=d.indexOf(u.charAt(v++))),S[w++]=h,b!==64&&(S[w++]=m),y!==64&&(S[w++]=p);return S}},{"./support":30,"./utils":32}],2:[function(r,s,n){var i=r("./external"),l=r("./stream/DataWorker"),d=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function h(m,p,x,b,y){this.compressedSize=m,this.uncompressedSize=p,this.crc32=x,this.compression=b,this.compressedContent=y}h.prototype={getContentWorker:function(){var m=new l(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),p=this;return m.on("end",function(){if(this.streamInfo.data_length!==p.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),m},getCompressedWorker:function(){return new l(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(m,p,x){return m.pipe(new d).pipe(new u("uncompressedSize")).pipe(p.compressWorker(x)).pipe(new u("compressedSize")).withStreamInfo("compression",p)},s.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,s,n){var i=r("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,s,n){var i=r("./utils"),l=(function(){for(var d,u=[],h=0;h<256;h++){d=h;for(var m=0;m<8;m++)d=1&d?3988292384^d>>>1:d>>>1;u[h]=d}return u})();s.exports=function(d,u){return d!==void 0&&d.length?i.getTypeOf(d)!=="string"?(function(h,m,p,x){var b=l,y=x+p;h^=-1;for(var v=x;v<y;v++)h=h>>>8^b[255&(h^m[v])];return-1^h})(0|u,d,d.length,0):(function(h,m,p,x){var b=l,y=x+p;h^=-1;for(var v=x;v<y;v++)h=h>>>8^b[255&(h^m.charCodeAt(v))];return-1^h})(0|u,d,d.length,0):0}},{"./utils":32}],5:[function(r,s,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(r,s,n){var i=null;i=typeof Promise<"u"?Promise:r("lie"),s.exports={Promise:i}},{lie:37}],7:[function(r,s,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=r("pako"),d=r("./utils"),u=r("./stream/GenericWorker"),h=i?"uint8array":"array";function m(p,x){u.call(this,"FlateWorker/"+p),this._pako=null,this._pakoAction=p,this._pakoOptions=x,this.meta={}}n.magic="\b\0",d.inherits(m,u),m.prototype.processChunk=function(p){this.meta=p.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(h,p.data),!1)},m.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},m.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},m.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var p=this;this._pako.onData=function(x){p.push({data:x,meta:p.meta})}},n.compressWorker=function(p){return new m("Deflate",p)},n.uncompressWorker=function(){return new m("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,s,n){function i(b,y){var v,w="";for(v=0;v<y;v++)w+=String.fromCharCode(255&b),b>>>=8;return w}function l(b,y,v,w,N,S){var j,k,A=b.file,O=b.compression,T=S!==h.utf8encode,D=d.transformTo("string",S(A.name)),R=d.transformTo("string",h.utf8encode(A.name)),I=A.comment,L=d.transformTo("string",S(I)),$=d.transformTo("string",h.utf8encode(I)),W=R.length!==A.name.length,P=$.length!==I.length,U="",K="",G="",Q=A.dir,le=A.date,H={crc32:0,compressedSize:0,uncompressedSize:0};y&&!v||(H.crc32=b.crc32,H.compressedSize=b.compressedSize,H.uncompressedSize=b.uncompressedSize);var V=0;y&&(V|=8),T||!W&&!P||(V|=2048);var B=0,ne=0;Q&&(B|=16),N==="UNIX"?(ne=798,B|=(function(ee,Z){var re=ee;return ee||(re=Z?16893:33204),(65535&re)<<16})(A.unixPermissions,Q)):(ne=20,B|=(function(ee){return 63&(ee||0)})(A.dosPermissions)),j=le.getUTCHours(),j<<=6,j|=le.getUTCMinutes(),j<<=5,j|=le.getUTCSeconds()/2,k=le.getUTCFullYear()-1980,k<<=4,k|=le.getUTCMonth()+1,k<<=5,k|=le.getUTCDate(),W&&(K=i(1,1)+i(m(D),4)+R,U+="up"+i(K.length,2)+K),P&&(G=i(1,1)+i(m(L),4)+$,U+="uc"+i(G.length,2)+G);var ie="";return ie+=`
\0`,ie+=i(V,2),ie+=O.magic,ie+=i(j,2),ie+=i(k,2),ie+=i(H.crc32,4),ie+=i(H.compressedSize,4),ie+=i(H.uncompressedSize,4),ie+=i(D.length,2),ie+=i(U.length,2),{fileRecord:p.LOCAL_FILE_HEADER+ie+D+U,dirRecord:p.CENTRAL_FILE_HEADER+i(ne,2)+ie+i(L.length,2)+"\0\0\0\0"+i(B,4)+i(w,4)+D+U+L}}var d=r("../utils"),u=r("../stream/GenericWorker"),h=r("../utf8"),m=r("../crc32"),p=r("../signature");function x(b,y,v,w){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=y,this.zipPlatform=v,this.encodeFileName=w,this.streamFiles=b,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(x,u),x.prototype.push=function(b){var y=b.meta.percent||0,v=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(b):(this.bytesWritten+=b.data.length,u.prototype.push.call(this,{data:b.data,meta:{currentFile:this.currentFile,percent:v?(y+100*(v-w-1))/v:100}}))},x.prototype.openedSource=function(b){this.currentSourceOffset=this.bytesWritten,this.currentFile=b.file.name;var y=this.streamFiles&&!b.file.dir;if(y){var v=l(b,y,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},x.prototype.closedSource=function(b){this.accumulate=!1;var y=this.streamFiles&&!b.file.dir,v=l(b,y,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),y)this.push({data:(function(w){return p.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)})(b),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},x.prototype.flush=function(){for(var b=this.bytesWritten,y=0;y<this.dirRecords.length;y++)this.push({data:this.dirRecords[y],meta:{percent:100}});var v=this.bytesWritten-b,w=(function(N,S,j,k,A){var O=d.transformTo("string",A(k));return p.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(N,2)+i(N,2)+i(S,4)+i(j,4)+i(O.length,2)+O})(this.dirRecords.length,v,b,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},x.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},x.prototype.registerPrevious=function(b){this._sources.push(b);var y=this;return b.on("data",function(v){y.processChunk(v)}),b.on("end",function(){y.closedSource(y.previous.streamInfo),y._sources.length?y.prepareNextSource():y.end()}),b.on("error",function(v){y.error(v)}),this},x.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},x.prototype.error=function(b){var y=this._sources;if(!u.prototype.error.call(this,b))return!1;for(var v=0;v<y.length;v++)try{y[v].error(b)}catch{}return!0},x.prototype.lock=function(){u.prototype.lock.call(this);for(var b=this._sources,y=0;y<b.length;y++)b[y].lock()},s.exports=x},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,s,n){var i=r("../compressions"),l=r("./ZipFileWorker");n.generateWorker=function(d,u,h){var m=new l(u.streamFiles,h,u.platform,u.encodeFileName),p=0;try{d.forEach(function(x,b){p++;var y=(function(S,j){var k=S||j,A=i[k];if(!A)throw new Error(k+" is not a valid compression method !");return A})(b.options.compression,u.compression),v=b.options.compressionOptions||u.compressionOptions||{},w=b.dir,N=b.date;b._compressWorker(y,v).withStreamInfo("file",{name:x,dir:w,date:N,comment:b.comment||"",unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions}).pipe(m)}),m.entriesCount=p}catch(x){m.error(x)}return m}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,s,n){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new i;for(var d in this)typeof this[d]!="function"&&(l[d]=this[d]);return l}}(i.prototype=r("./object")).loadAsync=r("./load"),i.support=r("./support"),i.defaults=r("./defaults"),i.version="3.10.1",i.loadAsync=function(l,d){return new i().loadAsync(l,d)},i.external=r("./external"),s.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,s,n){var i=r("./utils"),l=r("./external"),d=r("./utf8"),u=r("./zipEntries"),h=r("./stream/Crc32Probe"),m=r("./nodejsUtils");function p(x){return new l.Promise(function(b,y){var v=x.decompressed.getContentWorker().pipe(new h);v.on("error",function(w){y(w)}).on("end",function(){v.streamInfo.crc32!==x.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):b()}).resume()})}s.exports=function(x,b){var y=this;return b=i.extend(b||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),m.isNode&&m.isStream(x)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",x,!0,b.optimizedBinaryString,b.base64).then(function(v){var w=new u(b);return w.load(v),w}).then(function(v){var w=[l.Promise.resolve(v)],N=v.files;if(b.checkCRC32)for(var S=0;S<N.length;S++)w.push(p(N[S]));return l.Promise.all(w)}).then(function(v){for(var w=v.shift(),N=w.files,S=0;S<N.length;S++){var j=N[S],k=j.fileNameStr,A=i.resolve(j.fileNameStr);y.file(A,j.decompressed,{binary:!0,optimizedBinaryString:!0,date:j.date,dir:j.dir,comment:j.fileCommentStr.length?j.fileCommentStr:null,unixPermissions:j.unixPermissions,dosPermissions:j.dosPermissions,createFolders:b.createFolders}),j.dir||(y.file(A).unsafeOriginalName=k)}return w.zipComment.length&&(y.comment=w.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,s,n){var i=r("../utils"),l=r("../stream/GenericWorker");function d(u,h){l.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(h)}i.inherits(d,l),d.prototype._bindStream=function(u){var h=this;(this._stream=u).pause(),u.on("data",function(m){h.push({data:m,meta:{percent:0}})}).on("error",function(m){h.isPaused?this.generatedError=m:h.error(m)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},d.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},s.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,s,n){var i=r("readable-stream").Readable;function l(d,u,h){i.call(this,u),this._helper=d;var m=this;d.on("data",function(p,x){m.push(p)||m._helper.pause(),h&&h(x)}).on("error",function(p){m.emit("error",p)}).on("end",function(){m.push(null)})}r("../utils").inherits(l,i),l.prototype._read=function(){this._helper.resume()},s.exports=l},{"../utils":32,"readable-stream":16}],14:[function(r,s,n){s.exports={isNode:typeof Buffer<"u",newBufferFrom:function(i,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(i,l);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Buffer(i,l)},allocBuffer:function(i){if(Buffer.alloc)return Buffer.alloc(i);var l=new Buffer(i);return l.fill(0),l},isBuffer:function(i){return Buffer.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(r,s,n){function i(A,O,T){var D,R=d.getTypeOf(O),I=d.extend(T||{},m);I.date=I.date||new Date,I.compression!==null&&(I.compression=I.compression.toUpperCase()),typeof I.unixPermissions=="string"&&(I.unixPermissions=parseInt(I.unixPermissions,8)),I.unixPermissions&&16384&I.unixPermissions&&(I.dir=!0),I.dosPermissions&&16&I.dosPermissions&&(I.dir=!0),I.dir&&(A=N(A)),I.createFolders&&(D=w(A))&&S.call(this,D,!0);var L=R==="string"&&I.binary===!1&&I.base64===!1;T&&T.binary!==void 0||(I.binary=!L),(O instanceof p&&O.uncompressedSize===0||I.dir||!O||O.length===0)&&(I.base64=!1,I.binary=!0,O="",I.compression="STORE",R="string");var $=null;$=O instanceof p||O instanceof u?O:y.isNode&&y.isStream(O)?new v(A,O):d.prepareContent(A,O,I.binary,I.optimizedBinaryString,I.base64);var W=new x(A,$,I);this.files[A]=W}var l=r("./utf8"),d=r("./utils"),u=r("./stream/GenericWorker"),h=r("./stream/StreamHelper"),m=r("./defaults"),p=r("./compressedObject"),x=r("./zipObject"),b=r("./generate"),y=r("./nodejsUtils"),v=r("./nodejs/NodejsStreamInputAdapter"),w=function(A){A.slice(-1)==="/"&&(A=A.substring(0,A.length-1));var O=A.lastIndexOf("/");return 0<O?A.substring(0,O):""},N=function(A){return A.slice(-1)!=="/"&&(A+="/"),A},S=function(A,O){return O=O!==void 0?O:m.createFolders,A=N(A),this.files[A]||i.call(this,A,null,{dir:!0,createFolders:O}),this.files[A]};function j(A){return Object.prototype.toString.call(A)==="[object RegExp]"}var k={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(A){var O,T,D;for(O in this.files)D=this.files[O],(T=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&A(T,D)},filter:function(A){var O=[];return this.forEach(function(T,D){A(T,D)&&O.push(D)}),O},file:function(A,O,T){if(arguments.length!==1)return A=this.root+A,i.call(this,A,O,T),this;if(j(A)){var D=A;return this.filter(function(I,L){return!L.dir&&D.test(I)})}var R=this.files[this.root+A];return R&&!R.dir?R:null},folder:function(A){if(!A)return this;if(j(A))return this.filter(function(R,I){return I.dir&&A.test(R)});var O=this.root+A,T=S.call(this,O),D=this.clone();return D.root=T.name,D},remove:function(A){A=this.root+A;var O=this.files[A];if(O||(A.slice(-1)!=="/"&&(A+="/"),O=this.files[A]),O&&!O.dir)delete this.files[A];else for(var T=this.filter(function(R,I){return I.name.slice(0,A.length)===A}),D=0;D<T.length;D++)delete this.files[T[D].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(A){var O,T={};try{if((T=d.extend(A||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=T.type.toLowerCase(),T.compression=T.compression.toUpperCase(),T.type==="binarystring"&&(T.type="string"),!T.type)throw new Error("No output type specified.");d.checkSupport(T.type),T.platform!=="darwin"&&T.platform!=="freebsd"&&T.platform!=="linux"&&T.platform!=="sunos"||(T.platform="UNIX"),T.platform==="win32"&&(T.platform="DOS");var D=T.comment||this.comment||"";O=b.generateWorker(this,T,D)}catch(R){(O=new u("error")).error(R)}return new h(O,T.type||"string",T.mimeType)},generateAsync:function(A,O){return this.generateInternalStream(A).accumulate(O)},generateNodeStream:function(A,O){return(A=A||{}).type||(A.type="nodebuffer"),this.generateInternalStream(A).toNodejsStream(O)}};s.exports=k},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,s,n){s.exports=r("stream")},{stream:void 0}],17:[function(r,s,n){var i=r("./DataReader");function l(d){i.call(this,d);for(var u=0;u<this.data.length;u++)d[u]=255&d[u]}r("../utils").inherits(l,i),l.prototype.byteAt=function(d){return this.data[this.zero+d]},l.prototype.lastIndexOfSignature=function(d){for(var u=d.charCodeAt(0),h=d.charCodeAt(1),m=d.charCodeAt(2),p=d.charCodeAt(3),x=this.length-4;0<=x;--x)if(this.data[x]===u&&this.data[x+1]===h&&this.data[x+2]===m&&this.data[x+3]===p)return x-this.zero;return-1},l.prototype.readAndCheckSignature=function(d){var u=d.charCodeAt(0),h=d.charCodeAt(1),m=d.charCodeAt(2),p=d.charCodeAt(3),x=this.readData(4);return u===x[0]&&h===x[1]&&m===x[2]&&p===x[3]},l.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},s.exports=l},{"../utils":32,"./DataReader":18}],18:[function(r,s,n){var i=r("../utils");function l(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var u,h=0;for(this.checkOffset(d),u=this.index+d-1;u>=this.index;u--)h=(h<<8)+this.byteAt(u);return this.index+=d,h},readString:function(d){return i.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},s.exports=l},{"../utils":32}],19:[function(r,s,n){var i=r("./Uint8ArrayReader");function l(d){i.call(this,d)}r("../utils").inherits(l,i),l.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},s.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,s,n){var i=r("./DataReader");function l(d){i.call(this,d)}r("../utils").inherits(l,i),l.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},l.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},l.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},l.prototype.readData=function(d){this.checkOffset(d);var u=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},s.exports=l},{"../utils":32,"./DataReader":18}],21:[function(r,s,n){var i=r("./ArrayReader");function l(d){i.call(this,d)}r("../utils").inherits(l,i),l.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,u},s.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(r,s,n){var i=r("../utils"),l=r("../support"),d=r("./ArrayReader"),u=r("./StringReader"),h=r("./NodeBufferReader"),m=r("./Uint8ArrayReader");s.exports=function(p){var x=i.getTypeOf(p);return i.checkSupport(x),x!=="string"||l.uint8array?x==="nodebuffer"?new h(p):l.uint8array?new m(i.transformTo("uint8array",p)):new d(i.transformTo("array",p)):new u(p)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,s,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,s,n){var i=r("./GenericWorker"),l=r("../utils");function d(u){i.call(this,"ConvertWorker to "+u),this.destType=u}l.inherits(d,i),d.prototype.processChunk=function(u){this.push({data:l.transformTo(this.destType,u.data),meta:u.meta})},s.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(r,s,n){var i=r("./GenericWorker"),l=r("../crc32");function d(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(d,i),d.prototype.processChunk=function(u){this.streamInfo.crc32=l(u.data,this.streamInfo.crc32||0),this.push(u)},s.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,s,n){var i=r("../utils"),l=r("./GenericWorker");function d(u){l.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}i.inherits(d,l),d.prototype.processChunk=function(u){if(u){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+u.data.length}l.prototype.processChunk.call(this,u)},s.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(r,s,n){var i=r("../utils"),l=r("./GenericWorker");function d(u){l.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(m){h.dataIsReady=!0,h.data=m,h.max=m&&m.length||0,h.type=i.getTypeOf(m),h.isPaused||h._tickAndRepeat()},function(m){h.error(m)})}i.inherits(d,l),d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,h);break;case"uint8array":u=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":u=this.data.slice(this.index,h)}return this.index=h,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},s.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(r,s,n){function i(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,d){return this._listeners[l].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,d){if(this._listeners[l])for(var u=0;u<this._listeners[l].length;u++)this._listeners[l][u].call(this,d)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var d=this;return l.on("data",function(u){d.processChunk(u)}),l.on("end",function(){d.end()}),l.on("error",function(u){d.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,d){return this.extraStreamInfo[l]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},s.exports=i},{}],29:[function(r,s,n){var i=r("../utils"),l=r("./ConvertWorker"),d=r("./GenericWorker"),u=r("../base64"),h=r("../support"),m=r("../external"),p=null;if(h.nodestream)try{p=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function x(y,v){return new m.Promise(function(w,N){var S=[],j=y._internalType,k=y._outputType,A=y._mimeType;y.on("data",function(O,T){S.push(O),v&&v(T)}).on("error",function(O){S=[],N(O)}).on("end",function(){try{var O=(function(T,D,R){switch(T){case"blob":return i.newBlob(i.transformTo("arraybuffer",D),R);case"base64":return u.encode(D);default:return i.transformTo(T,D)}})(k,(function(T,D){var R,I=0,L=null,$=0;for(R=0;R<D.length;R++)$+=D[R].length;switch(T){case"string":return D.join("");case"array":return Array.prototype.concat.apply([],D);case"uint8array":for(L=new Uint8Array($),R=0;R<D.length;R++)L.set(D[R],I),I+=D[R].length;return L;case"nodebuffer":return Buffer.concat(D);default:throw new Error("concat : unsupported type '"+T+"'")}})(j,S),A);w(O)}catch(T){N(T)}S=[]}).resume()})}function b(y,v,w){var N=v;switch(v){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=v,this._mimeType=w,i.checkSupport(N),this._worker=y.pipe(new l(N)),y.lock()}catch(S){this._worker=new d("error"),this._worker.error(S)}}b.prototype={accumulate:function(y){return x(this,y)},on:function(y,v){var w=this;return y==="data"?this._worker.on(y,function(N){v.call(w,N.data,N.meta)}):this._worker.on(y,function(){i.delay(v,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(y){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new p(this,{objectMode:this._outputType!=="nodebuffer"},y)}},s.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,s,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var i=new ArrayBuffer(0);try{n.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(i),n.blob=l.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!r("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(r,s,n){for(var i=r("./utils"),l=r("./support"),d=r("./nodejsUtils"),u=r("./stream/GenericWorker"),h=new Array(256),m=0;m<256;m++)h[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;h[254]=h[254]=1;function p(){u.call(this,"utf-8 decode"),this.leftOver=null}function x(){u.call(this,"utf-8 encode")}n.utf8encode=function(b){return l.nodebuffer?d.newBufferFrom(b,"utf-8"):(function(y){var v,w,N,S,j,k=y.length,A=0;for(S=0;S<k;S++)(64512&(w=y.charCodeAt(S)))==55296&&S+1<k&&(64512&(N=y.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(N-56320),S++),A+=w<128?1:w<2048?2:w<65536?3:4;for(v=l.uint8array?new Uint8Array(A):new Array(A),S=j=0;j<A;S++)(64512&(w=y.charCodeAt(S)))==55296&&S+1<k&&(64512&(N=y.charCodeAt(S+1)))==56320&&(w=65536+(w-55296<<10)+(N-56320),S++),w<128?v[j++]=w:(w<2048?v[j++]=192|w>>>6:(w<65536?v[j++]=224|w>>>12:(v[j++]=240|w>>>18,v[j++]=128|w>>>12&63),v[j++]=128|w>>>6&63),v[j++]=128|63&w);return v})(b)},n.utf8decode=function(b){return l.nodebuffer?i.transformTo("nodebuffer",b).toString("utf-8"):(function(y){var v,w,N,S,j=y.length,k=new Array(2*j);for(v=w=0;v<j;)if((N=y[v++])<128)k[w++]=N;else if(4<(S=h[N]))k[w++]=65533,v+=S-1;else{for(N&=S===2?31:S===3?15:7;1<S&&v<j;)N=N<<6|63&y[v++],S--;1<S?k[w++]=65533:N<65536?k[w++]=N:(N-=65536,k[w++]=55296|N>>10&1023,k[w++]=56320|1023&N)}return k.length!==w&&(k.subarray?k=k.subarray(0,w):k.length=w),i.applyFromCharCode(k)})(b=i.transformTo(l.uint8array?"uint8array":"array",b))},i.inherits(p,u),p.prototype.processChunk=function(b){var y=i.transformTo(l.uint8array?"uint8array":"array",b.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var v=y;(y=new Uint8Array(v.length+this.leftOver.length)).set(this.leftOver,0),y.set(v,this.leftOver.length)}else y=this.leftOver.concat(y);this.leftOver=null}var w=(function(S,j){var k;for((j=j||S.length)>S.length&&(j=S.length),k=j-1;0<=k&&(192&S[k])==128;)k--;return k<0||k===0?j:k+h[S[k]]>j?k:j})(y),N=y;w!==y.length&&(l.uint8array?(N=y.subarray(0,w),this.leftOver=y.subarray(w,y.length)):(N=y.slice(0,w),this.leftOver=y.slice(w,y.length))),this.push({data:n.utf8decode(N),meta:b.meta})},p.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=p,i.inherits(x,u),x.prototype.processChunk=function(b){this.push({data:n.utf8encode(b.data),meta:b.meta})},n.Utf8EncodeWorker=x},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,s,n){var i=r("./support"),l=r("./base64"),d=r("./nodejsUtils"),u=r("./external");function h(v){return v}function m(v,w){for(var N=0;N<v.length;++N)w[N]=255&v.charCodeAt(N);return w}r("setimmediate"),n.newBlob=function(v,w){n.checkSupport("blob");try{return new Blob([v],{type:w})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(v),N.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var p={stringifyByChunk:function(v,w,N){var S=[],j=0,k=v.length;if(k<=N)return String.fromCharCode.apply(null,v);for(;j<k;)w==="array"||w==="nodebuffer"?S.push(String.fromCharCode.apply(null,v.slice(j,Math.min(j+N,k)))):S.push(String.fromCharCode.apply(null,v.subarray(j,Math.min(j+N,k)))),j+=N;return S.join("")},stringifyByChar:function(v){for(var w="",N=0;N<v.length;N++)w+=String.fromCharCode(v[N]);return w},applyCanBeUsed:{uint8array:(function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}})()}};function x(v){var w=65536,N=n.getTypeOf(v),S=!0;if(N==="uint8array"?S=p.applyCanBeUsed.uint8array:N==="nodebuffer"&&(S=p.applyCanBeUsed.nodebuffer),S)for(;1<w;)try{return p.stringifyByChunk(v,N,w)}catch{w=Math.floor(w/2)}return p.stringifyByChar(v)}function b(v,w){for(var N=0;N<v.length;N++)w[N]=v[N];return w}n.applyFromCharCode=x;var y={};y.string={string:h,array:function(v){return m(v,new Array(v.length))},arraybuffer:function(v){return y.string.uint8array(v).buffer},uint8array:function(v){return m(v,new Uint8Array(v.length))},nodebuffer:function(v){return m(v,d.allocBuffer(v.length))}},y.array={string:x,array:h,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return d.newBufferFrom(v)}},y.arraybuffer={string:function(v){return x(new Uint8Array(v))},array:function(v){return b(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:h,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return d.newBufferFrom(new Uint8Array(v))}},y.uint8array={string:x,array:function(v){return b(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:h,nodebuffer:function(v){return d.newBufferFrom(v)}},y.nodebuffer={string:x,array:function(v){return b(v,new Array(v.length))},arraybuffer:function(v){return y.nodebuffer.uint8array(v).buffer},uint8array:function(v){return b(v,new Uint8Array(v.length))},nodebuffer:h},n.transformTo=function(v,w){if(w=w||"",!v)return w;n.checkSupport(v);var N=n.getTypeOf(w);return y[N][v](w)},n.resolve=function(v){for(var w=v.split("/"),N=[],S=0;S<w.length;S++){var j=w[S];j==="."||j===""&&S!==0&&S!==w.length-1||(j===".."?N.pop():N.push(j))}return N.join("/")},n.getTypeOf=function(v){return typeof v=="string"?"string":Object.prototype.toString.call(v)==="[object Array]"?"array":i.nodebuffer&&d.isBuffer(v)?"nodebuffer":i.uint8array&&v instanceof Uint8Array?"uint8array":i.arraybuffer&&v instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(v){if(!i[v.toLowerCase()])throw new Error(v+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(v){var w,N,S="";for(N=0;N<(v||"").length;N++)S+="\\x"+((w=v.charCodeAt(N))<16?"0":"")+w.toString(16).toUpperCase();return S},n.delay=function(v,w,N){setImmediate(function(){v.apply(N||null,w||[])})},n.inherits=function(v,w){function N(){}N.prototype=w.prototype,v.prototype=new N},n.extend=function(){var v,w,N={};for(v=0;v<arguments.length;v++)for(w in arguments[v])Object.prototype.hasOwnProperty.call(arguments[v],w)&&N[w]===void 0&&(N[w]=arguments[v][w]);return N},n.prepareContent=function(v,w,N,S,j){return u.Promise.resolve(w).then(function(k){return i.blob&&(k instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(k))!==-1)&&typeof FileReader<"u"?new u.Promise(function(A,O){var T=new FileReader;T.onload=function(D){A(D.target.result)},T.onerror=function(D){O(D.target.error)},T.readAsArrayBuffer(k)}):k}).then(function(k){var A=n.getTypeOf(k);return A?(A==="arraybuffer"?k=n.transformTo("uint8array",k):A==="string"&&(j?k=l.decode(k):N&&S!==!0&&(k=(function(O){return m(O,i.uint8array?new Uint8Array(O.length):new Array(O.length))})(k))),k):u.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,s,n){var i=r("./reader/readerFor"),l=r("./utils"),d=r("./signature"),u=r("./zipEntry"),h=r("./support");function m(p){this.files=[],this.loadOptions=p}m.prototype={checkSignature:function(p){if(!this.reader.readAndCheckSignature(p)){this.reader.index-=4;var x=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(x)+", expected "+l.pretty(p)+")")}},isSignature:function(p,x){var b=this.reader.index;this.reader.setIndex(p);var y=this.reader.readString(4)===x;return this.reader.setIndex(b),y},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var p=this.reader.readData(this.zipCommentLength),x=h.uint8array?"uint8array":"array",b=l.transformTo(x,p);this.zipComment=this.loadOptions.decodeFileName(b)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var p,x,b,y=this.zip64EndOfCentralSize-44;0<y;)p=this.reader.readInt(2),x=this.reader.readInt(4),b=this.reader.readData(x),this.zip64ExtensibleData[p]={id:p,length:x,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var p,x;for(p=0;p<this.files.length;p++)x=this.files[p],this.reader.setIndex(x.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),x.readLocalPart(this.reader),x.handleUTF8(),x.processAttributes()},readCentralDir:function(){var p;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(p=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(p);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var p=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(p<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(p);var x=p;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(p=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(p),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var b=this.centralDirOffset+this.centralDirSize;this.zip64&&(b+=20,b+=12+this.zip64EndOfCentralSize);var y=x-b;if(0<y)this.isSignature(x,d.CENTRAL_FILE_HEADER)||(this.reader.zero=y);else if(y<0)throw new Error("Corrupted zip: missing "+Math.abs(y)+" bytes.")},prepareReader:function(p){this.reader=i(p)},load:function(p){this.prepareReader(p),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},s.exports=m},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,s,n){var i=r("./reader/readerFor"),l=r("./utils"),d=r("./compressedObject"),u=r("./crc32"),h=r("./utf8"),m=r("./compressions"),p=r("./support");function x(b,y){this.options=b,this.loadOptions=y}x.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(b){var y,v;if(b.skip(22),this.fileNameLength=b.readInt(2),v=b.readInt(2),this.fileName=b.readData(this.fileNameLength),b.skip(v),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((y=(function(w){for(var N in m)if(Object.prototype.hasOwnProperty.call(m,N)&&m[N].magic===w)return m[N];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,y,b.readData(this.compressedSize))},readCentralPart:function(b){this.versionMadeBy=b.readInt(2),b.skip(2),this.bitFlag=b.readInt(2),this.compressionMethod=b.readString(2),this.date=b.readDate(),this.crc32=b.readInt(4),this.compressedSize=b.readInt(4),this.uncompressedSize=b.readInt(4);var y=b.readInt(2);if(this.extraFieldsLength=b.readInt(2),this.fileCommentLength=b.readInt(2),this.diskNumberStart=b.readInt(2),this.internalFileAttributes=b.readInt(2),this.externalFileAttributes=b.readInt(4),this.localHeaderOffset=b.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");b.skip(y),this.readExtraFields(b),this.parseZIP64ExtraField(b),this.fileComment=b.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var b=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),b==0&&(this.dosPermissions=63&this.externalFileAttributes),b==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var b=i(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=b.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=b.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=b.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=b.readInt(4))}},readExtraFields:function(b){var y,v,w,N=b.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});b.index+4<N;)y=b.readInt(2),v=b.readInt(2),w=b.readData(v),this.extraFields[y]={id:y,length:v,value:w};b.setIndex(N)},handleUTF8:function(){var b=p.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var y=this.findExtraFieldUnicodePath();if(y!==null)this.fileNameStr=y;else{var v=l.transformTo(b,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(v)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var N=l.transformTo(b,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var b=this.extraFields[28789];if(b){var y=i(b.value);return y.readInt(1)!==1||u(this.fileName)!==y.readInt(4)?null:h.utf8decode(y.readData(b.length-5))}return null},findExtraFieldUnicodeComment:function(){var b=this.extraFields[25461];if(b){var y=i(b.value);return y.readInt(1)!==1||u(this.fileComment)!==y.readInt(4)?null:h.utf8decode(y.readData(b.length-5))}return null}},s.exports=x},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,s,n){function i(y,v,w){this.name=y,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=v,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var l=r("./stream/StreamHelper"),d=r("./stream/DataWorker"),u=r("./utf8"),h=r("./compressedObject"),m=r("./stream/GenericWorker");i.prototype={internalStream:function(y){var v=null,w="string";try{if(!y)throw new Error("No output type specified.");var N=(w=y.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),v=this._decompressWorker();var S=!this._dataBinary;S&&!N&&(v=v.pipe(new u.Utf8EncodeWorker)),!S&&N&&(v=v.pipe(new u.Utf8DecodeWorker))}catch(j){(v=new m("error")).error(j)}return new l(v,w,"")},async:function(y,v){return this.internalStream(y).accumulate(v)},nodeStream:function(y,v){return this.internalStream(y||"nodebuffer").toNodejsStream(v)},_compressWorker:function(y,v){if(this._data instanceof h&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new u.Utf8EncodeWorker)),h.createWorkerFrom(w,y,v)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof m?this._data:new d(this._data)}};for(var p=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],x=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},b=0;b<p.length;b++)i.prototype[p[b]]=x;s.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,s,n){(function(i){var l,d,u=i.MutationObserver||i.WebKitMutationObserver;if(u){var h=0,m=new u(y),p=i.document.createTextNode("");m.observe(p,{characterData:!0}),l=function(){p.data=h=++h%2}}else if(i.setImmediate||i.MessageChannel===void 0)l="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var v=i.document.createElement("script");v.onreadystatechange=function(){y(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},i.document.documentElement.appendChild(v)}:function(){setTimeout(y,0)};else{var x=new i.MessageChannel;x.port1.onmessage=y,l=function(){x.port2.postMessage(0)}}var b=[];function y(){var v,w;d=!0;for(var N=b.length;N;){for(w=b,b=[],v=-1;++v<N;)w[v]();N=b.length}d=!1}s.exports=function(v){b.push(v)!==1||d||l()}}).call(this,typeof tf<"u"?tf:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,s,n){var i=r("immediate");function l(){}var d={},u=["REJECTED"],h=["FULFILLED"],m=["PENDING"];function p(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,N!==l&&v(this,N)}function x(N,S,j){this.promise=N,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof j=="function"&&(this.onRejected=j,this.callRejected=this.otherCallRejected)}function b(N,S,j){i(function(){var k;try{k=S(j)}catch(A){return d.reject(N,A)}k===N?d.reject(N,new TypeError("Cannot resolve promise with itself")):d.resolve(N,k)})}function y(N){var S=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof S=="function")return function(){S.apply(N,arguments)}}function v(N,S){var j=!1;function k(T){j||(j=!0,d.reject(N,T))}function A(T){j||(j=!0,d.resolve(N,T))}var O=w(function(){S(A,k)});O.status==="error"&&k(O.value)}function w(N,S){var j={};try{j.value=N(S),j.status="success"}catch(k){j.status="error",j.value=k}return j}(s.exports=p).prototype.finally=function(N){if(typeof N!="function")return this;var S=this.constructor;return this.then(function(j){return S.resolve(N()).then(function(){return j})},function(j){return S.resolve(N()).then(function(){throw j})})},p.prototype.catch=function(N){return this.then(null,N)},p.prototype.then=function(N,S){if(typeof N!="function"&&this.state===h||typeof S!="function"&&this.state===u)return this;var j=new this.constructor(l);return this.state!==m?b(j,this.state===h?N:S,this.outcome):this.queue.push(new x(j,N,S)),j},x.prototype.callFulfilled=function(N){d.resolve(this.promise,N)},x.prototype.otherCallFulfilled=function(N){b(this.promise,this.onFulfilled,N)},x.prototype.callRejected=function(N){d.reject(this.promise,N)},x.prototype.otherCallRejected=function(N){b(this.promise,this.onRejected,N)},d.resolve=function(N,S){var j=w(y,S);if(j.status==="error")return d.reject(N,j.value);var k=j.value;if(k)v(N,k);else{N.state=h,N.outcome=S;for(var A=-1,O=N.queue.length;++A<O;)N.queue[A].callFulfilled(S)}return N},d.reject=function(N,S){N.state=u,N.outcome=S;for(var j=-1,k=N.queue.length;++j<k;)N.queue[j].callRejected(S);return N},p.resolve=function(N){return N instanceof this?N:d.resolve(new this(l),N)},p.reject=function(N){var S=new this(l);return d.reject(S,N)},p.all=function(N){var S=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=N.length,k=!1;if(!j)return this.resolve([]);for(var A=new Array(j),O=0,T=-1,D=new this(l);++T<j;)R(N[T],T);return D;function R(I,L){S.resolve(I).then(function($){A[L]=$,++O!==j||k||(k=!0,d.resolve(D,A))},function($){k||(k=!0,d.reject(D,$))})}},p.race=function(N){var S=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var j=N.length,k=!1;if(!j)return this.resolve([]);for(var A=-1,O=new this(l);++A<j;)T=N[A],S.resolve(T).then(function(D){k||(k=!0,d.resolve(O,D))},function(D){k||(k=!0,d.reject(O,D))});var T;return O}},{immediate:36}],38:[function(r,s,n){var i={};(0,r("./lib/utils/common").assign)(i,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),s.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,s,n){var i=r("./zlib/deflate"),l=r("./utils/common"),d=r("./utils/strings"),u=r("./zlib/messages"),h=r("./zlib/zstream"),m=Object.prototype.toString,p=0,x=-1,b=0,y=8;function v(N){if(!(this instanceof v))return new v(N);this.options=l.assign({level:x,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},N||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var j=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(j!==p)throw new Error(u[j]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var k;if(k=typeof S.dictionary=="string"?d.string2buf(S.dictionary):m.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(j=i.deflateSetDictionary(this.strm,k))!==p)throw new Error(u[j]);this._dict_set=!0}}function w(N,S){var j=new v(S);if(j.push(N,!0),j.err)throw j.msg||u[j.err];return j.result}v.prototype.push=function(N,S){var j,k,A=this.strm,O=this.options.chunkSize;if(this.ended)return!1;k=S===~~S?S:S===!0?4:0,typeof N=="string"?A.input=d.string2buf(N):m.call(N)==="[object ArrayBuffer]"?A.input=new Uint8Array(N):A.input=N,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new l.Buf8(O),A.next_out=0,A.avail_out=O),(j=i.deflate(A,k))!==1&&j!==p)return this.onEnd(j),!(this.ended=!0);A.avail_out!==0&&(A.avail_in!==0||k!==4&&k!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(l.shrinkBuf(A.output,A.next_out))):this.onData(l.shrinkBuf(A.output,A.next_out)))}while((0<A.avail_in||A.avail_out===0)&&j!==1);return k===4?(j=i.deflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===p):k!==2||(this.onEnd(p),!(A.avail_out=0))},v.prototype.onData=function(N){this.chunks.push(N)},v.prototype.onEnd=function(N){N===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},n.Deflate=v,n.deflate=w,n.deflateRaw=function(N,S){return(S=S||{}).raw=!0,w(N,S)},n.gzip=function(N,S){return(S=S||{}).gzip=!0,w(N,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,s,n){var i=r("./zlib/inflate"),l=r("./utils/common"),d=r("./utils/strings"),u=r("./zlib/constants"),h=r("./zlib/messages"),m=r("./zlib/zstream"),p=r("./zlib/gzheader"),x=Object.prototype.toString;function b(v){if(!(this instanceof b))return new b(v);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},v||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||v&&v.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var N=i.inflateInit2(this.strm,w.windowBits);if(N!==u.Z_OK)throw new Error(h[N]);this.header=new p,i.inflateGetHeader(this.strm,this.header)}function y(v,w){var N=new b(w);if(N.push(v,!0),N.err)throw N.msg||h[N.err];return N.result}b.prototype.push=function(v,w){var N,S,j,k,A,O,T=this.strm,D=this.options.chunkSize,R=this.options.dictionary,I=!1;if(this.ended)return!1;S=w===~~w?w:w===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof v=="string"?T.input=d.binstring2buf(v):x.call(v)==="[object ArrayBuffer]"?T.input=new Uint8Array(v):T.input=v,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new l.Buf8(D),T.next_out=0,T.avail_out=D),(N=i.inflate(T,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&R&&(O=typeof R=="string"?d.string2buf(R):x.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,N=i.inflateSetDictionary(this.strm,O)),N===u.Z_BUF_ERROR&&I===!0&&(N=u.Z_OK,I=!1),N!==u.Z_STREAM_END&&N!==u.Z_OK)return this.onEnd(N),!(this.ended=!0);T.next_out&&(T.avail_out!==0&&N!==u.Z_STREAM_END&&(T.avail_in!==0||S!==u.Z_FINISH&&S!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(j=d.utf8border(T.output,T.next_out),k=T.next_out-j,A=d.buf2string(T.output,j),T.next_out=k,T.avail_out=D-k,k&&l.arraySet(T.output,T.output,j,k,0),this.onData(A)):this.onData(l.shrinkBuf(T.output,T.next_out)))),T.avail_in===0&&T.avail_out===0&&(I=!0)}while((0<T.avail_in||T.avail_out===0)&&N!==u.Z_STREAM_END);return N===u.Z_STREAM_END&&(S=u.Z_FINISH),S===u.Z_FINISH?(N=i.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===u.Z_OK):S!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(T.avail_out=0))},b.prototype.onData=function(v){this.chunks.push(v)},b.prototype.onEnd=function(v){v===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},n.Inflate=b,n.inflate=y,n.inflateRaw=function(v,w){return(w=w||{}).raw=!0,y(v,w)},n.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,s,n){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(u){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var m=h.shift();if(m){if(typeof m!="object")throw new TypeError(m+"must be non-object");for(var p in m)m.hasOwnProperty(p)&&(u[p]=m[p])}}return u},n.shrinkBuf=function(u,h){return u.length===h?u:u.subarray?u.subarray(0,h):(u.length=h,u)};var l={arraySet:function(u,h,m,p,x){if(h.subarray&&u.subarray)u.set(h.subarray(m,m+p),x);else for(var b=0;b<p;b++)u[x+b]=h[m+b]},flattenChunks:function(u){var h,m,p,x,b,y;for(h=p=0,m=u.length;h<m;h++)p+=u[h].length;for(y=new Uint8Array(p),h=x=0,m=u.length;h<m;h++)b=u[h],y.set(b,x),x+=b.length;return y}},d={arraySet:function(u,h,m,p,x){for(var b=0;b<p;b++)u[x+b]=h[m+b]},flattenChunks:function(u){return[].concat.apply([],u)}};n.setTyped=function(u){u?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,l)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,d))},n.setTyped(i)},{}],42:[function(r,s,n){var i=r("./common"),l=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var u=new i.Buf8(256),h=0;h<256;h++)u[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function m(p,x){if(x<65537&&(p.subarray&&d||!p.subarray&&l))return String.fromCharCode.apply(null,i.shrinkBuf(p,x));for(var b="",y=0;y<x;y++)b+=String.fromCharCode(p[y]);return b}u[254]=u[254]=1,n.string2buf=function(p){var x,b,y,v,w,N=p.length,S=0;for(v=0;v<N;v++)(64512&(b=p.charCodeAt(v)))==55296&&v+1<N&&(64512&(y=p.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),S+=b<128?1:b<2048?2:b<65536?3:4;for(x=new i.Buf8(S),v=w=0;w<S;v++)(64512&(b=p.charCodeAt(v)))==55296&&v+1<N&&(64512&(y=p.charCodeAt(v+1)))==56320&&(b=65536+(b-55296<<10)+(y-56320),v++),b<128?x[w++]=b:(b<2048?x[w++]=192|b>>>6:(b<65536?x[w++]=224|b>>>12:(x[w++]=240|b>>>18,x[w++]=128|b>>>12&63),x[w++]=128|b>>>6&63),x[w++]=128|63&b);return x},n.buf2binstring=function(p){return m(p,p.length)},n.binstring2buf=function(p){for(var x=new i.Buf8(p.length),b=0,y=x.length;b<y;b++)x[b]=p.charCodeAt(b);return x},n.buf2string=function(p,x){var b,y,v,w,N=x||p.length,S=new Array(2*N);for(b=y=0;b<N;)if((v=p[b++])<128)S[y++]=v;else if(4<(w=u[v]))S[y++]=65533,b+=w-1;else{for(v&=w===2?31:w===3?15:7;1<w&&b<N;)v=v<<6|63&p[b++],w--;1<w?S[y++]=65533:v<65536?S[y++]=v:(v-=65536,S[y++]=55296|v>>10&1023,S[y++]=56320|1023&v)}return m(S,y)},n.utf8border=function(p,x){var b;for((x=x||p.length)>p.length&&(x=p.length),b=x-1;0<=b&&(192&p[b])==128;)b--;return b<0||b===0?x:b+u[p[b]]>x?b:x}},{"./common":41}],43:[function(r,s,n){s.exports=function(i,l,d,u){for(var h=65535&i|0,m=i>>>16&65535|0,p=0;d!==0;){for(d-=p=2e3<d?2e3:d;m=m+(h=h+l[u++]|0)|0,--p;);h%=65521,m%=65521}return h|m<<16|0}},{}],44:[function(r,s,n){s.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,s,n){var i=(function(){for(var l,d=[],u=0;u<256;u++){l=u;for(var h=0;h<8;h++)l=1&l?3988292384^l>>>1:l>>>1;d[u]=l}return d})();s.exports=function(l,d,u,h){var m=i,p=h+u;l^=-1;for(var x=h;x<p;x++)l=l>>>8^m[255&(l^d[x])];return-1^l}},{}],46:[function(r,s,n){var i,l=r("../utils/common"),d=r("./trees"),u=r("./adler32"),h=r("./crc32"),m=r("./messages"),p=0,x=4,b=0,y=-2,v=-1,w=4,N=2,S=8,j=9,k=286,A=30,O=19,T=2*k+1,D=15,R=3,I=258,L=I+R+1,$=42,W=113,P=1,U=2,K=3,G=4;function Q(M,xe){return M.msg=m[xe],xe}function le(M){return(M<<1)-(4<M?9:0)}function H(M){for(var xe=M.length;0<=--xe;)M[xe]=0}function V(M){var xe=M.state,pe=xe.pending;pe>M.avail_out&&(pe=M.avail_out),pe!==0&&(l.arraySet(M.output,xe.pending_buf,xe.pending_out,pe,M.next_out),M.next_out+=pe,xe.pending_out+=pe,M.total_out+=pe,M.avail_out-=pe,xe.pending-=pe,xe.pending===0&&(xe.pending_out=0))}function B(M,xe){d._tr_flush_block(M,0<=M.block_start?M.block_start:-1,M.strstart-M.block_start,xe),M.block_start=M.strstart,V(M.strm)}function ne(M,xe){M.pending_buf[M.pending++]=xe}function ie(M,xe){M.pending_buf[M.pending++]=xe>>>8&255,M.pending_buf[M.pending++]=255&xe}function ee(M,xe){var pe,X,Y=M.max_chain_length,ue=M.strstart,Ee=M.prev_length,te=M.nice_match,oe=M.strstart>M.w_size-L?M.strstart-(M.w_size-L):0,be=M.window,ke=M.w_mask,we=M.prev,Pe=M.strstart+I,Ge=be[ue+Ee-1],Re=be[ue+Ee];M.prev_length>=M.good_match&&(Y>>=2),te>M.lookahead&&(te=M.lookahead);do if(be[(pe=xe)+Ee]===Re&&be[pe+Ee-1]===Ge&&be[pe]===be[ue]&&be[++pe]===be[ue+1]){ue+=2,pe++;do;while(be[++ue]===be[++pe]&&be[++ue]===be[++pe]&&be[++ue]===be[++pe]&&be[++ue]===be[++pe]&&be[++ue]===be[++pe]&&be[++ue]===be[++pe]&&be[++ue]===be[++pe]&&be[++ue]===be[++pe]&&ue<Pe);if(X=I-(Pe-ue),ue=Pe-I,Ee<X){if(M.match_start=xe,te<=(Ee=X))break;Ge=be[ue+Ee-1],Re=be[ue+Ee]}}while((xe=we[xe&ke])>oe&&--Y!=0);return Ee<=M.lookahead?Ee:M.lookahead}function Z(M){var xe,pe,X,Y,ue,Ee,te,oe,be,ke,we=M.w_size;do{if(Y=M.window_size-M.lookahead-M.strstart,M.strstart>=we+(we-L)){for(l.arraySet(M.window,M.window,we,we,0),M.match_start-=we,M.strstart-=we,M.block_start-=we,xe=pe=M.hash_size;X=M.head[--xe],M.head[xe]=we<=X?X-we:0,--pe;);for(xe=pe=we;X=M.prev[--xe],M.prev[xe]=we<=X?X-we:0,--pe;);Y+=we}if(M.strm.avail_in===0)break;if(Ee=M.strm,te=M.window,oe=M.strstart+M.lookahead,be=Y,ke=void 0,ke=Ee.avail_in,be<ke&&(ke=be),pe=ke===0?0:(Ee.avail_in-=ke,l.arraySet(te,Ee.input,Ee.next_in,ke,oe),Ee.state.wrap===1?Ee.adler=u(Ee.adler,te,ke,oe):Ee.state.wrap===2&&(Ee.adler=h(Ee.adler,te,ke,oe)),Ee.next_in+=ke,Ee.total_in+=ke,ke),M.lookahead+=pe,M.lookahead+M.insert>=R)for(ue=M.strstart-M.insert,M.ins_h=M.window[ue],M.ins_h=(M.ins_h<<M.hash_shift^M.window[ue+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[ue+R-1])&M.hash_mask,M.prev[ue&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=ue,ue++,M.insert--,!(M.lookahead+M.insert<R)););}while(M.lookahead<L&&M.strm.avail_in!==0)}function re(M,xe){for(var pe,X;;){if(M.lookahead<L){if(Z(M),M.lookahead<L&&xe===p)return P;if(M.lookahead===0)break}if(pe=0,M.lookahead>=R&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+R-1])&M.hash_mask,pe=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),pe!==0&&M.strstart-pe<=M.w_size-L&&(M.match_length=ee(M,pe)),M.match_length>=R)if(X=d._tr_tally(M,M.strstart-M.match_start,M.match_length-R),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=R){for(M.match_length--;M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+R-1])&M.hash_mask,pe=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart,--M.match_length!=0;);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else X=d._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(X&&(B(M,!1),M.strm.avail_out===0))return P}return M.insert=M.strstart<R-1?M.strstart:R-1,xe===x?(B(M,!0),M.strm.avail_out===0?K:G):M.last_lit&&(B(M,!1),M.strm.avail_out===0)?P:U}function J(M,xe){for(var pe,X,Y;;){if(M.lookahead<L){if(Z(M),M.lookahead<L&&xe===p)return P;if(M.lookahead===0)break}if(pe=0,M.lookahead>=R&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+R-1])&M.hash_mask,pe=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=R-1,pe!==0&&M.prev_length<M.max_lazy_match&&M.strstart-pe<=M.w_size-L&&(M.match_length=ee(M,pe),M.match_length<=5&&(M.strategy===1||M.match_length===R&&4096<M.strstart-M.match_start)&&(M.match_length=R-1)),M.prev_length>=R&&M.match_length<=M.prev_length){for(Y=M.strstart+M.lookahead-R,X=d._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-R),M.lookahead-=M.prev_length-1,M.prev_length-=2;++M.strstart<=Y&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+R-1])&M.hash_mask,pe=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),--M.prev_length!=0;);if(M.match_available=0,M.match_length=R-1,M.strstart++,X&&(B(M,!1),M.strm.avail_out===0))return P}else if(M.match_available){if((X=d._tr_tally(M,0,M.window[M.strstart-1]))&&B(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return P}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(X=d._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<R-1?M.strstart:R-1,xe===x?(B(M,!0),M.strm.avail_out===0?K:G):M.last_lit&&(B(M,!1),M.strm.avail_out===0)?P:U}function F(M,xe,pe,X,Y){this.good_length=M,this.max_lazy=xe,this.nice_length=pe,this.max_chain=X,this.func=Y}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*T),this.dyn_dtree=new l.Buf16(2*(2*A+1)),this.bl_tree=new l.Buf16(2*(2*O+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(D+1),this.heap=new l.Buf16(2*k+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*k+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _e(M){var xe;return M&&M.state?(M.total_in=M.total_out=0,M.data_type=N,(xe=M.state).pending=0,xe.pending_out=0,xe.wrap<0&&(xe.wrap=-xe.wrap),xe.status=xe.wrap?$:W,M.adler=xe.wrap===2?0:1,xe.last_flush=p,d._tr_init(xe),b):Q(M,y)}function se(M){var xe=_e(M);return xe===b&&(function(pe){pe.window_size=2*pe.w_size,H(pe.head),pe.max_lazy_match=i[pe.level].max_lazy,pe.good_match=i[pe.level].good_length,pe.nice_match=i[pe.level].nice_length,pe.max_chain_length=i[pe.level].max_chain,pe.strstart=0,pe.block_start=0,pe.lookahead=0,pe.insert=0,pe.match_length=pe.prev_length=R-1,pe.match_available=0,pe.ins_h=0})(M.state),xe}function Te(M,xe,pe,X,Y,ue){if(!M)return y;var Ee=1;if(xe===v&&(xe=6),X<0?(Ee=0,X=-X):15<X&&(Ee=2,X-=16),Y<1||j<Y||pe!==S||X<8||15<X||xe<0||9<xe||ue<0||w<ue)return Q(M,y);X===8&&(X=9);var te=new de;return(M.state=te).strm=M,te.wrap=Ee,te.gzhead=null,te.w_bits=X,te.w_size=1<<te.w_bits,te.w_mask=te.w_size-1,te.hash_bits=Y+7,te.hash_size=1<<te.hash_bits,te.hash_mask=te.hash_size-1,te.hash_shift=~~((te.hash_bits+R-1)/R),te.window=new l.Buf8(2*te.w_size),te.head=new l.Buf16(te.hash_size),te.prev=new l.Buf16(te.w_size),te.lit_bufsize=1<<Y+6,te.pending_buf_size=4*te.lit_bufsize,te.pending_buf=new l.Buf8(te.pending_buf_size),te.d_buf=1*te.lit_bufsize,te.l_buf=3*te.lit_bufsize,te.level=xe,te.strategy=ue,te.method=pe,se(M)}i=[new F(0,0,0,0,function(M,xe){var pe=65535;for(pe>M.pending_buf_size-5&&(pe=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Z(M),M.lookahead===0&&xe===p)return P;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var X=M.block_start+pe;if((M.strstart===0||M.strstart>=X)&&(M.lookahead=M.strstart-X,M.strstart=X,B(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-L&&(B(M,!1),M.strm.avail_out===0))return P}return M.insert=0,xe===x?(B(M,!0),M.strm.avail_out===0?K:G):(M.strstart>M.block_start&&(B(M,!1),M.strm.avail_out),P)}),new F(4,4,8,4,re),new F(4,5,16,8,re),new F(4,6,32,32,re),new F(4,4,16,16,J),new F(8,16,32,32,J),new F(8,16,128,128,J),new F(8,32,128,256,J),new F(32,128,258,1024,J),new F(32,258,258,4096,J)],n.deflateInit=function(M,xe){return Te(M,xe,S,15,8,0)},n.deflateInit2=Te,n.deflateReset=se,n.deflateResetKeep=_e,n.deflateSetHeader=function(M,xe){return M&&M.state?M.state.wrap!==2?y:(M.state.gzhead=xe,b):y},n.deflate=function(M,xe){var pe,X,Y,ue;if(!M||!M.state||5<xe||xe<0)return M?Q(M,y):y;if(X=M.state,!M.output||!M.input&&M.avail_in!==0||X.status===666&&xe!==x)return Q(M,M.avail_out===0?-5:y);if(X.strm=M,pe=X.last_flush,X.last_flush=xe,X.status===$)if(X.wrap===2)M.adler=0,ne(X,31),ne(X,139),ne(X,8),X.gzhead?(ne(X,(X.gzhead.text?1:0)+(X.gzhead.hcrc?2:0)+(X.gzhead.extra?4:0)+(X.gzhead.name?8:0)+(X.gzhead.comment?16:0)),ne(X,255&X.gzhead.time),ne(X,X.gzhead.time>>8&255),ne(X,X.gzhead.time>>16&255),ne(X,X.gzhead.time>>24&255),ne(X,X.level===9?2:2<=X.strategy||X.level<2?4:0),ne(X,255&X.gzhead.os),X.gzhead.extra&&X.gzhead.extra.length&&(ne(X,255&X.gzhead.extra.length),ne(X,X.gzhead.extra.length>>8&255)),X.gzhead.hcrc&&(M.adler=h(M.adler,X.pending_buf,X.pending,0)),X.gzindex=0,X.status=69):(ne(X,0),ne(X,0),ne(X,0),ne(X,0),ne(X,0),ne(X,X.level===9?2:2<=X.strategy||X.level<2?4:0),ne(X,3),X.status=W);else{var Ee=S+(X.w_bits-8<<4)<<8;Ee|=(2<=X.strategy||X.level<2?0:X.level<6?1:X.level===6?2:3)<<6,X.strstart!==0&&(Ee|=32),Ee+=31-Ee%31,X.status=W,ie(X,Ee),X.strstart!==0&&(ie(X,M.adler>>>16),ie(X,65535&M.adler)),M.adler=1}if(X.status===69)if(X.gzhead.extra){for(Y=X.pending;X.gzindex<(65535&X.gzhead.extra.length)&&(X.pending!==X.pending_buf_size||(X.gzhead.hcrc&&X.pending>Y&&(M.adler=h(M.adler,X.pending_buf,X.pending-Y,Y)),V(M),Y=X.pending,X.pending!==X.pending_buf_size));)ne(X,255&X.gzhead.extra[X.gzindex]),X.gzindex++;X.gzhead.hcrc&&X.pending>Y&&(M.adler=h(M.adler,X.pending_buf,X.pending-Y,Y)),X.gzindex===X.gzhead.extra.length&&(X.gzindex=0,X.status=73)}else X.status=73;if(X.status===73)if(X.gzhead.name){Y=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>Y&&(M.adler=h(M.adler,X.pending_buf,X.pending-Y,Y)),V(M),Y=X.pending,X.pending===X.pending_buf_size)){ue=1;break}ue=X.gzindex<X.gzhead.name.length?255&X.gzhead.name.charCodeAt(X.gzindex++):0,ne(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>Y&&(M.adler=h(M.adler,X.pending_buf,X.pending-Y,Y)),ue===0&&(X.gzindex=0,X.status=91)}else X.status=91;if(X.status===91)if(X.gzhead.comment){Y=X.pending;do{if(X.pending===X.pending_buf_size&&(X.gzhead.hcrc&&X.pending>Y&&(M.adler=h(M.adler,X.pending_buf,X.pending-Y,Y)),V(M),Y=X.pending,X.pending===X.pending_buf_size)){ue=1;break}ue=X.gzindex<X.gzhead.comment.length?255&X.gzhead.comment.charCodeAt(X.gzindex++):0,ne(X,ue)}while(ue!==0);X.gzhead.hcrc&&X.pending>Y&&(M.adler=h(M.adler,X.pending_buf,X.pending-Y,Y)),ue===0&&(X.status=103)}else X.status=103;if(X.status===103&&(X.gzhead.hcrc?(X.pending+2>X.pending_buf_size&&V(M),X.pending+2<=X.pending_buf_size&&(ne(X,255&M.adler),ne(X,M.adler>>8&255),M.adler=0,X.status=W)):X.status=W),X.pending!==0){if(V(M),M.avail_out===0)return X.last_flush=-1,b}else if(M.avail_in===0&&le(xe)<=le(pe)&&xe!==x)return Q(M,-5);if(X.status===666&&M.avail_in!==0)return Q(M,-5);if(M.avail_in!==0||X.lookahead!==0||xe!==p&&X.status!==666){var te=X.strategy===2?(function(oe,be){for(var ke;;){if(oe.lookahead===0&&(Z(oe),oe.lookahead===0)){if(be===p)return P;break}if(oe.match_length=0,ke=d._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,ke&&(B(oe,!1),oe.strm.avail_out===0))return P}return oe.insert=0,be===x?(B(oe,!0),oe.strm.avail_out===0?K:G):oe.last_lit&&(B(oe,!1),oe.strm.avail_out===0)?P:U})(X,xe):X.strategy===3?(function(oe,be){for(var ke,we,Pe,Ge,Re=oe.window;;){if(oe.lookahead<=I){if(Z(oe),oe.lookahead<=I&&be===p)return P;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=R&&0<oe.strstart&&(we=Re[Pe=oe.strstart-1])===Re[++Pe]&&we===Re[++Pe]&&we===Re[++Pe]){Ge=oe.strstart+I;do;while(we===Re[++Pe]&&we===Re[++Pe]&&we===Re[++Pe]&&we===Re[++Pe]&&we===Re[++Pe]&&we===Re[++Pe]&&we===Re[++Pe]&&we===Re[++Pe]&&Pe<Ge);oe.match_length=I-(Ge-Pe),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=R?(ke=d._tr_tally(oe,1,oe.match_length-R),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(ke=d._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),ke&&(B(oe,!1),oe.strm.avail_out===0))return P}return oe.insert=0,be===x?(B(oe,!0),oe.strm.avail_out===0?K:G):oe.last_lit&&(B(oe,!1),oe.strm.avail_out===0)?P:U})(X,xe):i[X.level].func(X,xe);if(te!==K&&te!==G||(X.status=666),te===P||te===K)return M.avail_out===0&&(X.last_flush=-1),b;if(te===U&&(xe===1?d._tr_align(X):xe!==5&&(d._tr_stored_block(X,0,0,!1),xe===3&&(H(X.head),X.lookahead===0&&(X.strstart=0,X.block_start=0,X.insert=0))),V(M),M.avail_out===0))return X.last_flush=-1,b}return xe!==x?b:X.wrap<=0?1:(X.wrap===2?(ne(X,255&M.adler),ne(X,M.adler>>8&255),ne(X,M.adler>>16&255),ne(X,M.adler>>24&255),ne(X,255&M.total_in),ne(X,M.total_in>>8&255),ne(X,M.total_in>>16&255),ne(X,M.total_in>>24&255)):(ie(X,M.adler>>>16),ie(X,65535&M.adler)),V(M),0<X.wrap&&(X.wrap=-X.wrap),X.pending!==0?b:1)},n.deflateEnd=function(M){var xe;return M&&M.state?(xe=M.state.status)!==$&&xe!==69&&xe!==73&&xe!==91&&xe!==103&&xe!==W&&xe!==666?Q(M,y):(M.state=null,xe===W?Q(M,-3):b):y},n.deflateSetDictionary=function(M,xe){var pe,X,Y,ue,Ee,te,oe,be,ke=xe.length;if(!M||!M.state||(ue=(pe=M.state).wrap)===2||ue===1&&pe.status!==$||pe.lookahead)return y;for(ue===1&&(M.adler=u(M.adler,xe,ke,0)),pe.wrap=0,ke>=pe.w_size&&(ue===0&&(H(pe.head),pe.strstart=0,pe.block_start=0,pe.insert=0),be=new l.Buf8(pe.w_size),l.arraySet(be,xe,ke-pe.w_size,pe.w_size,0),xe=be,ke=pe.w_size),Ee=M.avail_in,te=M.next_in,oe=M.input,M.avail_in=ke,M.next_in=0,M.input=xe,Z(pe);pe.lookahead>=R;){for(X=pe.strstart,Y=pe.lookahead-(R-1);pe.ins_h=(pe.ins_h<<pe.hash_shift^pe.window[X+R-1])&pe.hash_mask,pe.prev[X&pe.w_mask]=pe.head[pe.ins_h],pe.head[pe.ins_h]=X,X++,--Y;);pe.strstart=X,pe.lookahead=R-1,Z(pe)}return pe.strstart+=pe.lookahead,pe.block_start=pe.strstart,pe.insert=pe.lookahead,pe.lookahead=0,pe.match_length=pe.prev_length=R-1,pe.match_available=0,M.next_in=te,M.input=oe,M.avail_in=Ee,pe.wrap=ue,b},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,s,n){s.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,s,n){s.exports=function(i,l){var d,u,h,m,p,x,b,y,v,w,N,S,j,k,A,O,T,D,R,I,L,$,W,P,U;d=i.state,u=i.next_in,P=i.input,h=u+(i.avail_in-5),m=i.next_out,U=i.output,p=m-(l-i.avail_out),x=m+(i.avail_out-257),b=d.dmax,y=d.wsize,v=d.whave,w=d.wnext,N=d.window,S=d.hold,j=d.bits,k=d.lencode,A=d.distcode,O=(1<<d.lenbits)-1,T=(1<<d.distbits)-1;e:do{j<15&&(S+=P[u++]<<j,j+=8,S+=P[u++]<<j,j+=8),D=k[S&O];t:for(;;){if(S>>>=R=D>>>24,j-=R,(R=D>>>16&255)===0)U[m++]=65535&D;else{if(!(16&R)){if((64&R)==0){D=k[(65535&D)+(S&(1<<R)-1)];continue t}if(32&R){d.mode=12;break e}i.msg="invalid literal/length code",d.mode=30;break e}I=65535&D,(R&=15)&&(j<R&&(S+=P[u++]<<j,j+=8),I+=S&(1<<R)-1,S>>>=R,j-=R),j<15&&(S+=P[u++]<<j,j+=8,S+=P[u++]<<j,j+=8),D=A[S&T];r:for(;;){if(S>>>=R=D>>>24,j-=R,!(16&(R=D>>>16&255))){if((64&R)==0){D=A[(65535&D)+(S&(1<<R)-1)];continue r}i.msg="invalid distance code",d.mode=30;break e}if(L=65535&D,j<(R&=15)&&(S+=P[u++]<<j,(j+=8)<R&&(S+=P[u++]<<j,j+=8)),b<(L+=S&(1<<R)-1)){i.msg="invalid distance too far back",d.mode=30;break e}if(S>>>=R,j-=R,(R=m-p)<L){if(v<(R=L-R)&&d.sane){i.msg="invalid distance too far back",d.mode=30;break e}if(W=N,($=0)===w){if($+=y-R,R<I){for(I-=R;U[m++]=N[$++],--R;);$=m-L,W=U}}else if(w<R){if($+=y+w-R,(R-=w)<I){for(I-=R;U[m++]=N[$++],--R;);if($=0,w<I){for(I-=R=w;U[m++]=N[$++],--R;);$=m-L,W=U}}}else if($+=w-R,R<I){for(I-=R;U[m++]=N[$++],--R;);$=m-L,W=U}for(;2<I;)U[m++]=W[$++],U[m++]=W[$++],U[m++]=W[$++],I-=3;I&&(U[m++]=W[$++],1<I&&(U[m++]=W[$++]))}else{for($=m-L;U[m++]=U[$++],U[m++]=U[$++],U[m++]=U[$++],2<(I-=3););I&&(U[m++]=U[$++],1<I&&(U[m++]=U[$++]))}break}}break}}while(u<h&&m<x);u-=I=j>>3,S&=(1<<(j-=I<<3))-1,i.next_in=u,i.next_out=m,i.avail_in=u<h?h-u+5:5-(u-h),i.avail_out=m<x?x-m+257:257-(m-x),d.hold=S,d.bits=j}},{}],49:[function(r,s,n){var i=r("../utils/common"),l=r("./adler32"),d=r("./crc32"),u=r("./inffast"),h=r("./inftrees"),m=1,p=2,x=0,b=-2,y=1,v=852,w=592;function N($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function j($){var W;return $&&$.state?(W=$.state,$.total_in=$.total_out=W.total=0,$.msg="",W.wrap&&($.adler=1&W.wrap),W.mode=y,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new i.Buf32(v),W.distcode=W.distdyn=new i.Buf32(w),W.sane=1,W.back=-1,x):b}function k($){var W;return $&&$.state?((W=$.state).wsize=0,W.whave=0,W.wnext=0,j($)):b}function A($,W){var P,U;return $&&$.state?(U=$.state,W<0?(P=0,W=-W):(P=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?b:(U.window!==null&&U.wbits!==W&&(U.window=null),U.wrap=P,U.wbits=W,k($))):b}function O($,W){var P,U;return $?(U=new S,($.state=U).window=null,(P=A($,W))!==x&&($.state=null),P):b}var T,D,R=!0;function I($){if(R){var W;for(T=new i.Buf32(512),D=new i.Buf32(32),W=0;W<144;)$.lens[W++]=8;for(;W<256;)$.lens[W++]=9;for(;W<280;)$.lens[W++]=7;for(;W<288;)$.lens[W++]=8;for(h(m,$.lens,0,288,T,0,$.work,{bits:9}),W=0;W<32;)$.lens[W++]=5;h(p,$.lens,0,32,D,0,$.work,{bits:5}),R=!1}$.lencode=T,$.lenbits=9,$.distcode=D,$.distbits=5}function L($,W,P,U){var K,G=$.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new i.Buf8(G.wsize)),U>=G.wsize?(i.arraySet(G.window,W,P-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(U<(K=G.wsize-G.wnext)&&(K=U),i.arraySet(G.window,W,P-U,K,G.wnext),(U-=K)?(i.arraySet(G.window,W,P-U,U,0),G.wnext=U,G.whave=G.wsize):(G.wnext+=K,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=K))),0}n.inflateReset=k,n.inflateReset2=A,n.inflateResetKeep=j,n.inflateInit=function($){return O($,15)},n.inflateInit2=O,n.inflate=function($,W){var P,U,K,G,Q,le,H,V,B,ne,ie,ee,Z,re,J,F,de,_e,se,Te,M,xe,pe,X,Y=0,ue=new i.Buf8(4),Ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return b;(P=$.state).mode===12&&(P.mode=13),Q=$.next_out,K=$.output,H=$.avail_out,G=$.next_in,U=$.input,le=$.avail_in,V=P.hold,B=P.bits,ne=le,ie=H,xe=x;e:for(;;)switch(P.mode){case y:if(P.wrap===0){P.mode=13;break}for(;B<16;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(2&P.wrap&&V===35615){ue[P.check=0]=255&V,ue[1]=V>>>8&255,P.check=d(P.check,ue,2,0),B=V=0,P.mode=2;break}if(P.flags=0,P.head&&(P.head.done=!1),!(1&P.wrap)||(((255&V)<<8)+(V>>8))%31){$.msg="incorrect header check",P.mode=30;break}if((15&V)!=8){$.msg="unknown compression method",P.mode=30;break}if(B-=4,M=8+(15&(V>>>=4)),P.wbits===0)P.wbits=M;else if(M>P.wbits){$.msg="invalid window size",P.mode=30;break}P.dmax=1<<M,$.adler=P.check=1,P.mode=512&V?10:12,B=V=0;break;case 2:for(;B<16;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(P.flags=V,(255&P.flags)!=8){$.msg="unknown compression method",P.mode=30;break}if(57344&P.flags){$.msg="unknown header flags set",P.mode=30;break}P.head&&(P.head.text=V>>8&1),512&P.flags&&(ue[0]=255&V,ue[1]=V>>>8&255,P.check=d(P.check,ue,2,0)),B=V=0,P.mode=3;case 3:for(;B<32;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}P.head&&(P.head.time=V),512&P.flags&&(ue[0]=255&V,ue[1]=V>>>8&255,ue[2]=V>>>16&255,ue[3]=V>>>24&255,P.check=d(P.check,ue,4,0)),B=V=0,P.mode=4;case 4:for(;B<16;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}P.head&&(P.head.xflags=255&V,P.head.os=V>>8),512&P.flags&&(ue[0]=255&V,ue[1]=V>>>8&255,P.check=d(P.check,ue,2,0)),B=V=0,P.mode=5;case 5:if(1024&P.flags){for(;B<16;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}P.length=V,P.head&&(P.head.extra_len=V),512&P.flags&&(ue[0]=255&V,ue[1]=V>>>8&255,P.check=d(P.check,ue,2,0)),B=V=0}else P.head&&(P.head.extra=null);P.mode=6;case 6:if(1024&P.flags&&(le<(ee=P.length)&&(ee=le),ee&&(P.head&&(M=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),i.arraySet(P.head.extra,U,G,ee,M)),512&P.flags&&(P.check=d(P.check,U,ee,G)),le-=ee,G+=ee,P.length-=ee),P.length))break e;P.length=0,P.mode=7;case 7:if(2048&P.flags){if(le===0)break e;for(ee=0;M=U[G+ee++],P.head&&M&&P.length<65536&&(P.head.name+=String.fromCharCode(M)),M&&ee<le;);if(512&P.flags&&(P.check=d(P.check,U,ee,G)),le-=ee,G+=ee,M)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=8;case 8:if(4096&P.flags){if(le===0)break e;for(ee=0;M=U[G+ee++],P.head&&M&&P.length<65536&&(P.head.comment+=String.fromCharCode(M)),M&&ee<le;);if(512&P.flags&&(P.check=d(P.check,U,ee,G)),le-=ee,G+=ee,M)break e}else P.head&&(P.head.comment=null);P.mode=9;case 9:if(512&P.flags){for(;B<16;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(V!==(65535&P.check)){$.msg="header crc mismatch",P.mode=30;break}B=V=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),$.adler=P.check=0,P.mode=12;break;case 10:for(;B<32;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}$.adler=P.check=N(V),B=V=0,P.mode=11;case 11:if(P.havedict===0)return $.next_out=Q,$.avail_out=H,$.next_in=G,$.avail_in=le,P.hold=V,P.bits=B,2;$.adler=P.check=1,P.mode=12;case 12:if(W===5||W===6)break e;case 13:if(P.last){V>>>=7&B,B-=7&B,P.mode=27;break}for(;B<3;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}switch(P.last=1&V,B-=1,3&(V>>>=1)){case 0:P.mode=14;break;case 1:if(I(P),P.mode=20,W!==6)break;V>>>=2,B-=2;break e;case 2:P.mode=17;break;case 3:$.msg="invalid block type",P.mode=30}V>>>=2,B-=2;break;case 14:for(V>>>=7&B,B-=7&B;B<32;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if((65535&V)!=(V>>>16^65535)){$.msg="invalid stored block lengths",P.mode=30;break}if(P.length=65535&V,B=V=0,P.mode=15,W===6)break e;case 15:P.mode=16;case 16:if(ee=P.length){if(le<ee&&(ee=le),H<ee&&(ee=H),ee===0)break e;i.arraySet(K,U,G,ee,Q),le-=ee,G+=ee,H-=ee,Q+=ee,P.length-=ee;break}P.mode=12;break;case 17:for(;B<14;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(P.nlen=257+(31&V),V>>>=5,B-=5,P.ndist=1+(31&V),V>>>=5,B-=5,P.ncode=4+(15&V),V>>>=4,B-=4,286<P.nlen||30<P.ndist){$.msg="too many length or distance symbols",P.mode=30;break}P.have=0,P.mode=18;case 18:for(;P.have<P.ncode;){for(;B<3;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}P.lens[Ee[P.have++]]=7&V,V>>>=3,B-=3}for(;P.have<19;)P.lens[Ee[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,pe={bits:P.lenbits},xe=h(0,P.lens,0,19,P.lencode,0,P.work,pe),P.lenbits=pe.bits,xe){$.msg="invalid code lengths set",P.mode=30;break}P.have=0,P.mode=19;case 19:for(;P.have<P.nlen+P.ndist;){for(;F=(Y=P.lencode[V&(1<<P.lenbits)-1])>>>16&255,de=65535&Y,!((J=Y>>>24)<=B);){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(de<16)V>>>=J,B-=J,P.lens[P.have++]=de;else{if(de===16){for(X=J+2;B<X;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(V>>>=J,B-=J,P.have===0){$.msg="invalid bit length repeat",P.mode=30;break}M=P.lens[P.have-1],ee=3+(3&V),V>>>=2,B-=2}else if(de===17){for(X=J+3;B<X;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}B-=J,M=0,ee=3+(7&(V>>>=J)),V>>>=3,B-=3}else{for(X=J+7;B<X;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}B-=J,M=0,ee=11+(127&(V>>>=J)),V>>>=7,B-=7}if(P.have+ee>P.nlen+P.ndist){$.msg="invalid bit length repeat",P.mode=30;break}for(;ee--;)P.lens[P.have++]=M}}if(P.mode===30)break;if(P.lens[256]===0){$.msg="invalid code -- missing end-of-block",P.mode=30;break}if(P.lenbits=9,pe={bits:P.lenbits},xe=h(m,P.lens,0,P.nlen,P.lencode,0,P.work,pe),P.lenbits=pe.bits,xe){$.msg="invalid literal/lengths set",P.mode=30;break}if(P.distbits=6,P.distcode=P.distdyn,pe={bits:P.distbits},xe=h(p,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,pe),P.distbits=pe.bits,xe){$.msg="invalid distances set",P.mode=30;break}if(P.mode=20,W===6)break e;case 20:P.mode=21;case 21:if(6<=le&&258<=H){$.next_out=Q,$.avail_out=H,$.next_in=G,$.avail_in=le,P.hold=V,P.bits=B,u($,ie),Q=$.next_out,K=$.output,H=$.avail_out,G=$.next_in,U=$.input,le=$.avail_in,V=P.hold,B=P.bits,P.mode===12&&(P.back=-1);break}for(P.back=0;F=(Y=P.lencode[V&(1<<P.lenbits)-1])>>>16&255,de=65535&Y,!((J=Y>>>24)<=B);){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(F&&(240&F)==0){for(_e=J,se=F,Te=de;F=(Y=P.lencode[Te+((V&(1<<_e+se)-1)>>_e)])>>>16&255,de=65535&Y,!(_e+(J=Y>>>24)<=B);){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}V>>>=_e,B-=_e,P.back+=_e}if(V>>>=J,B-=J,P.back+=J,P.length=de,F===0){P.mode=26;break}if(32&F){P.back=-1,P.mode=12;break}if(64&F){$.msg="invalid literal/length code",P.mode=30;break}P.extra=15&F,P.mode=22;case 22:if(P.extra){for(X=P.extra;B<X;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}P.length+=V&(1<<P.extra)-1,V>>>=P.extra,B-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=23;case 23:for(;F=(Y=P.distcode[V&(1<<P.distbits)-1])>>>16&255,de=65535&Y,!((J=Y>>>24)<=B);){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if((240&F)==0){for(_e=J,se=F,Te=de;F=(Y=P.distcode[Te+((V&(1<<_e+se)-1)>>_e)])>>>16&255,de=65535&Y,!(_e+(J=Y>>>24)<=B);){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}V>>>=_e,B-=_e,P.back+=_e}if(V>>>=J,B-=J,P.back+=J,64&F){$.msg="invalid distance code",P.mode=30;break}P.offset=de,P.extra=15&F,P.mode=24;case 24:if(P.extra){for(X=P.extra;B<X;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}P.offset+=V&(1<<P.extra)-1,V>>>=P.extra,B-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){$.msg="invalid distance too far back",P.mode=30;break}P.mode=25;case 25:if(H===0)break e;if(ee=ie-H,P.offset>ee){if((ee=P.offset-ee)>P.whave&&P.sane){$.msg="invalid distance too far back",P.mode=30;break}Z=ee>P.wnext?(ee-=P.wnext,P.wsize-ee):P.wnext-ee,ee>P.length&&(ee=P.length),re=P.window}else re=K,Z=Q-P.offset,ee=P.length;for(H<ee&&(ee=H),H-=ee,P.length-=ee;K[Q++]=re[Z++],--ee;);P.length===0&&(P.mode=21);break;case 26:if(H===0)break e;K[Q++]=P.length,H--,P.mode=21;break;case 27:if(P.wrap){for(;B<32;){if(le===0)break e;le--,V|=U[G++]<<B,B+=8}if(ie-=H,$.total_out+=ie,P.total+=ie,ie&&($.adler=P.check=P.flags?d(P.check,K,ie,Q-ie):l(P.check,K,ie,Q-ie)),ie=H,(P.flags?V:N(V))!==P.check){$.msg="incorrect data check",P.mode=30;break}B=V=0}P.mode=28;case 28:if(P.wrap&&P.flags){for(;B<32;){if(le===0)break e;le--,V+=U[G++]<<B,B+=8}if(V!==(4294967295&P.total)){$.msg="incorrect length check",P.mode=30;break}B=V=0}P.mode=29;case 29:xe=1;break e;case 30:xe=-3;break e;case 31:return-4;case 32:default:return b}return $.next_out=Q,$.avail_out=H,$.next_in=G,$.avail_in=le,P.hold=V,P.bits=B,(P.wsize||ie!==$.avail_out&&P.mode<30&&(P.mode<27||W!==4))&&L($,$.output,$.next_out,ie-$.avail_out)?(P.mode=31,-4):(ne-=$.avail_in,ie-=$.avail_out,$.total_in+=ne,$.total_out+=ie,P.total+=ie,P.wrap&&ie&&($.adler=P.check=P.flags?d(P.check,K,ie,$.next_out-ie):l(P.check,K,ie,$.next_out-ie)),$.data_type=P.bits+(P.last?64:0)+(P.mode===12?128:0)+(P.mode===20||P.mode===15?256:0),(ne==0&&ie===0||W===4)&&xe===x&&(xe=-5),xe)},n.inflateEnd=function($){if(!$||!$.state)return b;var W=$.state;return W.window&&(W.window=null),$.state=null,x},n.inflateGetHeader=function($,W){var P;return $&&$.state?(2&(P=$.state).wrap)==0?b:((P.head=W).done=!1,x):b},n.inflateSetDictionary=function($,W){var P,U=W.length;return $&&$.state?(P=$.state).wrap!==0&&P.mode!==11?b:P.mode===11&&l(1,W,U,0)!==P.check?-3:L($,W,U,U)?(P.mode=31,-4):(P.havedict=1,x):b},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,s,n){var i=r("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];s.exports=function(m,p,x,b,y,v,w,N){var S,j,k,A,O,T,D,R,I,L=N.bits,$=0,W=0,P=0,U=0,K=0,G=0,Q=0,le=0,H=0,V=0,B=null,ne=0,ie=new i.Buf16(16),ee=new i.Buf16(16),Z=null,re=0;for($=0;$<=15;$++)ie[$]=0;for(W=0;W<b;W++)ie[p[x+W]]++;for(K=L,U=15;1<=U&&ie[U]===0;U--);if(U<K&&(K=U),U===0)return y[v++]=20971520,y[v++]=20971520,N.bits=1,0;for(P=1;P<U&&ie[P]===0;P++);for(K<P&&(K=P),$=le=1;$<=15;$++)if(le<<=1,(le-=ie[$])<0)return-1;if(0<le&&(m===0||U!==1))return-1;for(ee[1]=0,$=1;$<15;$++)ee[$+1]=ee[$]+ie[$];for(W=0;W<b;W++)p[x+W]!==0&&(w[ee[p[x+W]]++]=W);if(T=m===0?(B=Z=w,19):m===1?(B=l,ne-=257,Z=d,re-=257,256):(B=u,Z=h,-1),$=P,O=v,Q=W=V=0,k=-1,A=(H=1<<(G=K))-1,m===1&&852<H||m===2&&592<H)return 1;for(;;){for(D=$-Q,I=w[W]<T?(R=0,w[W]):w[W]>T?(R=Z[re+w[W]],B[ne+w[W]]):(R=96,0),S=1<<$-Q,P=j=1<<G;y[O+(V>>Q)+(j-=S)]=D<<24|R<<16|I|0,j!==0;);for(S=1<<$-1;V&S;)S>>=1;if(S!==0?(V&=S-1,V+=S):V=0,W++,--ie[$]==0){if($===U)break;$=p[x+w[W]]}if(K<$&&(V&A)!==k){for(Q===0&&(Q=K),O+=P,le=1<<(G=$-Q);G+Q<U&&!((le-=ie[G+Q])<=0);)G++,le<<=1;if(H+=1<<G,m===1&&852<H||m===2&&592<H)return 1;y[k=V&A]=K<<24|G<<16|O-v|0}}return V!==0&&(y[O+V]=$-Q<<24|64<<16|0),N.bits=K,0}},{"../utils/common":41}],51:[function(r,s,n){s.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,s,n){var i=r("../utils/common"),l=0,d=1;function u(Y){for(var ue=Y.length;0<=--ue;)Y[ue]=0}var h=0,m=29,p=256,x=p+1+m,b=30,y=19,v=2*x+1,w=15,N=16,S=7,j=256,k=16,A=17,O=18,T=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(2*(x+2));u(L);var $=new Array(2*b);u($);var W=new Array(512);u(W);var P=new Array(256);u(P);var U=new Array(m);u(U);var K,G,Q,le=new Array(b);function H(Y,ue,Ee,te,oe){this.static_tree=Y,this.extra_bits=ue,this.extra_base=Ee,this.elems=te,this.max_length=oe,this.has_stree=Y&&Y.length}function V(Y,ue){this.dyn_tree=Y,this.max_code=0,this.stat_desc=ue}function B(Y){return Y<256?W[Y]:W[256+(Y>>>7)]}function ne(Y,ue){Y.pending_buf[Y.pending++]=255&ue,Y.pending_buf[Y.pending++]=ue>>>8&255}function ie(Y,ue,Ee){Y.bi_valid>N-Ee?(Y.bi_buf|=ue<<Y.bi_valid&65535,ne(Y,Y.bi_buf),Y.bi_buf=ue>>N-Y.bi_valid,Y.bi_valid+=Ee-N):(Y.bi_buf|=ue<<Y.bi_valid&65535,Y.bi_valid+=Ee)}function ee(Y,ue,Ee){ie(Y,Ee[2*ue],Ee[2*ue+1])}function Z(Y,ue){for(var Ee=0;Ee|=1&Y,Y>>>=1,Ee<<=1,0<--ue;);return Ee>>>1}function re(Y,ue,Ee){var te,oe,be=new Array(w+1),ke=0;for(te=1;te<=w;te++)be[te]=ke=ke+Ee[te-1]<<1;for(oe=0;oe<=ue;oe++){var we=Y[2*oe+1];we!==0&&(Y[2*oe]=Z(be[we]++,we))}}function J(Y){var ue;for(ue=0;ue<x;ue++)Y.dyn_ltree[2*ue]=0;for(ue=0;ue<b;ue++)Y.dyn_dtree[2*ue]=0;for(ue=0;ue<y;ue++)Y.bl_tree[2*ue]=0;Y.dyn_ltree[2*j]=1,Y.opt_len=Y.static_len=0,Y.last_lit=Y.matches=0}function F(Y){8<Y.bi_valid?ne(Y,Y.bi_buf):0<Y.bi_valid&&(Y.pending_buf[Y.pending++]=Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0}function de(Y,ue,Ee,te){var oe=2*ue,be=2*Ee;return Y[oe]<Y[be]||Y[oe]===Y[be]&&te[ue]<=te[Ee]}function _e(Y,ue,Ee){for(var te=Y.heap[Ee],oe=Ee<<1;oe<=Y.heap_len&&(oe<Y.heap_len&&de(ue,Y.heap[oe+1],Y.heap[oe],Y.depth)&&oe++,!de(ue,te,Y.heap[oe],Y.depth));)Y.heap[Ee]=Y.heap[oe],Ee=oe,oe<<=1;Y.heap[Ee]=te}function se(Y,ue,Ee){var te,oe,be,ke,we=0;if(Y.last_lit!==0)for(;te=Y.pending_buf[Y.d_buf+2*we]<<8|Y.pending_buf[Y.d_buf+2*we+1],oe=Y.pending_buf[Y.l_buf+we],we++,te===0?ee(Y,oe,ue):(ee(Y,(be=P[oe])+p+1,ue),(ke=T[be])!==0&&ie(Y,oe-=U[be],ke),ee(Y,be=B(--te),Ee),(ke=D[be])!==0&&ie(Y,te-=le[be],ke)),we<Y.last_lit;);ee(Y,j,ue)}function Te(Y,ue){var Ee,te,oe,be=ue.dyn_tree,ke=ue.stat_desc.static_tree,we=ue.stat_desc.has_stree,Pe=ue.stat_desc.elems,Ge=-1;for(Y.heap_len=0,Y.heap_max=v,Ee=0;Ee<Pe;Ee++)be[2*Ee]!==0?(Y.heap[++Y.heap_len]=Ge=Ee,Y.depth[Ee]=0):be[2*Ee+1]=0;for(;Y.heap_len<2;)be[2*(oe=Y.heap[++Y.heap_len]=Ge<2?++Ge:0)]=1,Y.depth[oe]=0,Y.opt_len--,we&&(Y.static_len-=ke[2*oe+1]);for(ue.max_code=Ge,Ee=Y.heap_len>>1;1<=Ee;Ee--)_e(Y,be,Ee);for(oe=Pe;Ee=Y.heap[1],Y.heap[1]=Y.heap[Y.heap_len--],_e(Y,be,1),te=Y.heap[1],Y.heap[--Y.heap_max]=Ee,Y.heap[--Y.heap_max]=te,be[2*oe]=be[2*Ee]+be[2*te],Y.depth[oe]=(Y.depth[Ee]>=Y.depth[te]?Y.depth[Ee]:Y.depth[te])+1,be[2*Ee+1]=be[2*te+1]=oe,Y.heap[1]=oe++,_e(Y,be,1),2<=Y.heap_len;);Y.heap[--Y.heap_max]=Y.heap[1],(function(Re,Qe){var gt,he,Oe,Me,Ye,Cr,dt=Qe.dyn_tree,Wt=Qe.max_code,nr=Qe.stat_desc.static_tree,ha=Qe.stat_desc.has_stree,Hi=Qe.stat_desc.extra_bits,rn=Qe.stat_desc.extra_base,_t=Qe.stat_desc.max_length,At=0;for(Me=0;Me<=w;Me++)Re.bl_count[Me]=0;for(dt[2*Re.heap[Re.heap_max]+1]=0,gt=Re.heap_max+1;gt<v;gt++)_t<(Me=dt[2*dt[2*(he=Re.heap[gt])+1]+1]+1)&&(Me=_t,At++),dt[2*he+1]=Me,Wt<he||(Re.bl_count[Me]++,Ye=0,rn<=he&&(Ye=Hi[he-rn]),Cr=dt[2*he],Re.opt_len+=Cr*(Me+Ye),ha&&(Re.static_len+=Cr*(nr[2*he+1]+Ye)));if(At!==0){do{for(Me=_t-1;Re.bl_count[Me]===0;)Me--;Re.bl_count[Me]--,Re.bl_count[Me+1]+=2,Re.bl_count[_t]--,At-=2}while(0<At);for(Me=_t;Me!==0;Me--)for(he=Re.bl_count[Me];he!==0;)Wt<(Oe=Re.heap[--gt])||(dt[2*Oe+1]!==Me&&(Re.opt_len+=(Me-dt[2*Oe+1])*dt[2*Oe],dt[2*Oe+1]=Me),he--)}})(Y,ue),re(be,Ge,Y.bl_count)}function M(Y,ue,Ee){var te,oe,be=-1,ke=ue[1],we=0,Pe=7,Ge=4;for(ke===0&&(Pe=138,Ge=3),ue[2*(Ee+1)+1]=65535,te=0;te<=Ee;te++)oe=ke,ke=ue[2*(te+1)+1],++we<Pe&&oe===ke||(we<Ge?Y.bl_tree[2*oe]+=we:oe!==0?(oe!==be&&Y.bl_tree[2*oe]++,Y.bl_tree[2*k]++):we<=10?Y.bl_tree[2*A]++:Y.bl_tree[2*O]++,be=oe,Ge=(we=0)===ke?(Pe=138,3):oe===ke?(Pe=6,3):(Pe=7,4))}function xe(Y,ue,Ee){var te,oe,be=-1,ke=ue[1],we=0,Pe=7,Ge=4;for(ke===0&&(Pe=138,Ge=3),te=0;te<=Ee;te++)if(oe=ke,ke=ue[2*(te+1)+1],!(++we<Pe&&oe===ke)){if(we<Ge)for(;ee(Y,oe,Y.bl_tree),--we!=0;);else oe!==0?(oe!==be&&(ee(Y,oe,Y.bl_tree),we--),ee(Y,k,Y.bl_tree),ie(Y,we-3,2)):we<=10?(ee(Y,A,Y.bl_tree),ie(Y,we-3,3)):(ee(Y,O,Y.bl_tree),ie(Y,we-11,7));be=oe,Ge=(we=0)===ke?(Pe=138,3):oe===ke?(Pe=6,3):(Pe=7,4)}}u(le);var pe=!1;function X(Y,ue,Ee,te){ie(Y,(h<<1)+(te?1:0),3),(function(oe,be,ke,we){F(oe),ne(oe,ke),ne(oe,~ke),i.arraySet(oe.pending_buf,oe.window,be,ke,oe.pending),oe.pending+=ke})(Y,ue,Ee)}n._tr_init=function(Y){pe||((function(){var ue,Ee,te,oe,be,ke=new Array(w+1);for(oe=te=0;oe<m-1;oe++)for(U[oe]=te,ue=0;ue<1<<T[oe];ue++)P[te++]=oe;for(P[te-1]=oe,oe=be=0;oe<16;oe++)for(le[oe]=be,ue=0;ue<1<<D[oe];ue++)W[be++]=oe;for(be>>=7;oe<b;oe++)for(le[oe]=be<<7,ue=0;ue<1<<D[oe]-7;ue++)W[256+be++]=oe;for(Ee=0;Ee<=w;Ee++)ke[Ee]=0;for(ue=0;ue<=143;)L[2*ue+1]=8,ue++,ke[8]++;for(;ue<=255;)L[2*ue+1]=9,ue++,ke[9]++;for(;ue<=279;)L[2*ue+1]=7,ue++,ke[7]++;for(;ue<=287;)L[2*ue+1]=8,ue++,ke[8]++;for(re(L,x+1,ke),ue=0;ue<b;ue++)$[2*ue+1]=5,$[2*ue]=Z(ue,5);K=new H(L,T,p+1,x,w),G=new H($,D,0,b,w),Q=new H(new Array(0),R,0,y,S)})(),pe=!0),Y.l_desc=new V(Y.dyn_ltree,K),Y.d_desc=new V(Y.dyn_dtree,G),Y.bl_desc=new V(Y.bl_tree,Q),Y.bi_buf=0,Y.bi_valid=0,J(Y)},n._tr_stored_block=X,n._tr_flush_block=function(Y,ue,Ee,te){var oe,be,ke=0;0<Y.level?(Y.strm.data_type===2&&(Y.strm.data_type=(function(we){var Pe,Ge=4093624447;for(Pe=0;Pe<=31;Pe++,Ge>>>=1)if(1&Ge&&we.dyn_ltree[2*Pe]!==0)return l;if(we.dyn_ltree[18]!==0||we.dyn_ltree[20]!==0||we.dyn_ltree[26]!==0)return d;for(Pe=32;Pe<p;Pe++)if(we.dyn_ltree[2*Pe]!==0)return d;return l})(Y)),Te(Y,Y.l_desc),Te(Y,Y.d_desc),ke=(function(we){var Pe;for(M(we,we.dyn_ltree,we.l_desc.max_code),M(we,we.dyn_dtree,we.d_desc.max_code),Te(we,we.bl_desc),Pe=y-1;3<=Pe&&we.bl_tree[2*I[Pe]+1]===0;Pe--);return we.opt_len+=3*(Pe+1)+5+5+4,Pe})(Y),oe=Y.opt_len+3+7>>>3,(be=Y.static_len+3+7>>>3)<=oe&&(oe=be)):oe=be=Ee+5,Ee+4<=oe&&ue!==-1?X(Y,ue,Ee,te):Y.strategy===4||be===oe?(ie(Y,2+(te?1:0),3),se(Y,L,$)):(ie(Y,4+(te?1:0),3),(function(we,Pe,Ge,Re){var Qe;for(ie(we,Pe-257,5),ie(we,Ge-1,5),ie(we,Re-4,4),Qe=0;Qe<Re;Qe++)ie(we,we.bl_tree[2*I[Qe]+1],3);xe(we,we.dyn_ltree,Pe-1),xe(we,we.dyn_dtree,Ge-1)})(Y,Y.l_desc.max_code+1,Y.d_desc.max_code+1,ke+1),se(Y,Y.dyn_ltree,Y.dyn_dtree)),J(Y),te&&F(Y)},n._tr_tally=function(Y,ue,Ee){return Y.pending_buf[Y.d_buf+2*Y.last_lit]=ue>>>8&255,Y.pending_buf[Y.d_buf+2*Y.last_lit+1]=255&ue,Y.pending_buf[Y.l_buf+Y.last_lit]=255&Ee,Y.last_lit++,ue===0?Y.dyn_ltree[2*Ee]++:(Y.matches++,ue--,Y.dyn_ltree[2*(P[Ee]+p+1)]++,Y.dyn_dtree[2*B(ue)]++),Y.last_lit===Y.lit_bufsize-1},n._tr_align=function(Y){ie(Y,2,3),ee(Y,j,L),(function(ue){ue.bi_valid===16?(ne(ue,ue.bi_buf),ue.bi_buf=0,ue.bi_valid=0):8<=ue.bi_valid&&(ue.pending_buf[ue.pending++]=255&ue.bi_buf,ue.bi_buf>>=8,ue.bi_valid-=8)})(Y)}},{"../utils/common":41}],53:[function(r,s,n){s.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,s,n){(function(i){(function(l,d){if(!l.setImmediate){var u,h,m,p,x=1,b={},y=!1,v=l.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(l);w=w&&w.setTimeout?w:l,u={}.toString.call(l.process)==="[object process]"?function(k){process.nextTick(function(){S(k)})}:(function(){if(l.postMessage&&!l.importScripts){var k=!0,A=l.onmessage;return l.onmessage=function(){k=!1},l.postMessage("","*"),l.onmessage=A,k}})()?(p="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",j,!1):l.attachEvent("onmessage",j),function(k){l.postMessage(p+k,"*")}):l.MessageChannel?((m=new MessageChannel).port1.onmessage=function(k){S(k.data)},function(k){m.port2.postMessage(k)}):v&&"onreadystatechange"in v.createElement("script")?(h=v.documentElement,function(k){var A=v.createElement("script");A.onreadystatechange=function(){S(k),A.onreadystatechange=null,h.removeChild(A),A=null},h.appendChild(A)}):function(k){setTimeout(S,0,k)},w.setImmediate=function(k){typeof k!="function"&&(k=new Function(""+k));for(var A=new Array(arguments.length-1),O=0;O<A.length;O++)A[O]=arguments[O+1];var T={callback:k,args:A};return b[x]=T,u(x),x++},w.clearImmediate=N}function N(k){delete b[k]}function S(k){if(y)setTimeout(S,0,k);else{var A=b[k];if(A){y=!0;try{(function(O){var T=O.callback,D=O.args;switch(D.length){case 0:T();break;case 1:T(D[0]);break;case 2:T(D[0],D[1]);break;case 3:T(D[0],D[1],D[2]);break;default:T.apply(d,D)}})(A)}finally{N(k),y=!1}}}}function j(k){k.source===l&&typeof k.data=="string"&&k.data.indexOf(p)===0&&S(+k.data.slice(p.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof tf<"u"?tf:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Wb)),Wb.exports}var Eae=Sae();const kae=js(Eae);function Cae({media:e,inspectionTitle:t}){const[r,s]=_.useState(!1),[n,i]=_.useState(0),l=y=>{switch(y){case"image":return a.jsx(vs,{className:"w-4 h-4"});case"video":return a.jsx(nO,{className:"w-4 h-4"});case"audio":return a.jsx(ru,{className:"w-4 h-4"});default:return a.jsx(jr,{className:"w-4 h-4"})}},d=y=>{try{const v=document.createElement("a");v.href=y.file_url,v.download=y.file_name,document.body.appendChild(v),v.click(),document.body.removeChild(v)}catch(v){console.error("Erro ao baixar mdia:",v)}},u=async()=>{if(e.length!==0){s(!0),i(0);try{const y=new kae,v=y.folder(`${t} - Midias`);if(!v)throw new Error("Erro ao criar pasta no arquivo ZIP");const w=(j,k)=>{const A=atob(j.split(",")[1]),O=new Array(A.length);for(let D=0;D<A.length;D++)O[D]=A.charCodeAt(D);const T=new Uint8Array(O);return new Blob([T],{type:k})};for(let j=0;j<e.length;j++){const k=e[j];try{if(k.file_url.startsWith("data:")){const A=w(k.file_url,k.mime_type||"application/octet-stream");v.file(k.file_name,A)}else{const O=await(await fetch(k.file_url)).blob();v.file(k.file_name,O)}}catch(A){console.error(`Erro ao processar mdia ${k.file_name}:`,A)}i((j+1)/e.length*100)}const N=await y.generateAsync({type:"blob"}),S=document.createElement("a");S.href=URL.createObjectURL(N),S.download=`${t} - Midias.zip`,document.body.appendChild(S),S.click(),document.body.removeChild(S),setTimeout(()=>{URL.revokeObjectURL(S.href)},1e3)}catch(y){console.error("Erro ao criar arquivo ZIP:",y),alert("Erro ao criar arquivo com todas as mdias. Tente novamente.")}finally{s(!1),i(0)}}},h=y=>{if(y===0)return"0 Bytes";const v=1024,w=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(y)/Math.log(v));return parseFloat((y/Math.pow(v,N)).toFixed(2))+" "+w[N]},m=()=>e.reduce((y,v)=>y+(v.file_size||0),0),p=()=>e.reduce((v,w)=>(v[w.media_type]=(v[w.media_type]||0)+1,v),{});if(e.length===0)return a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(PS,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Nenhuma mdia disponvel para download"})]});const x=p(),b=m();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[a.jsx(PS,{className:"w-5 h-5"}),"Resumo das Mdias"]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:e.length}),a.jsx("div",{className:"text-sm text-slate-600",children:"Total"})]}),x.image&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-blue-600",children:x.image}),a.jsx("div",{className:"text-sm text-slate-600",children:"Imagens"})]}),x.video&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-purple-600",children:x.video}),a.jsx("div",{className:"text-sm text-slate-600",children:"Vdeos"})]}),x.audio&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-600",children:x.audio}),a.jsx("div",{className:"text-sm text-slate-600",children:"udios"})]}),x.document&&a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-orange-600",children:x.document}),a.jsx("div",{className:"text-sm text-slate-600",children:"Documentos"})]})]}),b>0&&a.jsxs("div",{className:"text-center text-sm text-slate-600",children:["Tamanho total: ",a.jsx("span",{className:"font-semibold",children:h(b)})]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:a.jsx("button",{onClick:u,disabled:r,className:"flex-1 flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors font-medium",children:r?a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"w-5 h-5 animate-spin"}),"Preparando download... ",Math.round(n),"%"]}):a.jsxs(a.Fragment,{children:[a.jsx(Fa,{className:"w-5 h-5"}),"Baixar Todas as Mdias (.zip)"]})})}),r&&a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${n}%`}})}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-semibold text-slate-900",children:"Mdias Individuais"}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.map(y=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"flex-shrink-0 text-slate-500",children:l(y.media_type)}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"font-medium text-slate-900 truncate",title:y.file_name,children:y.file_name}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[a.jsx("span",{className:"capitalize",children:y.media_type}),y.file_size&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:""}),a.jsx("span",{children:h(y.file_size)})]})]})]})]}),a.jsx("button",{onClick:()=>d(y),className:"flex-shrink-0 p-2 text-slate-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Baixar arquivo",children:a.jsx(Fa,{className:"w-4 h-4"})})]},y.id))})]})]})}function Aae({inspectionId:e,inspectionItemId:t,onMediaUploaded:r,existingMedia:s=[],onMediaDeleted:n,inspectionTitle:i="Inspeo"}){const[l,d]=_.useState(!1),[u,h]=_.useState(!1),[m,p]=_.useState(!1),[x,b]=_.useState(null),[y,v]=_.useState(0),[w,N]=_.useState(!1),[S,j]=_.useState(0),[k,A]=_.useState(!1),O=_.useRef(null),T=_.useRef(null),D=_.useRef(null),R=_.useRef(null);_.useEffect(()=>{const Z=J=>{w&&(J.key==="ArrowLeft"&&S>0?j(F=>F-1):J.key==="ArrowRight"&&S<s.length-1?j(F=>F+1):J.key==="Escape"&&N(!1))},re=J=>{J.detail.direction==="previous"&&S>0?j(F=>F-1):J.detail.direction==="next"&&S<s.length-1&&j(F=>F+1)};return window.addEventListener("keydown",Z),window.addEventListener("mediaNavigate",re),()=>{window.removeEventListener("keydown",Z),window.removeEventListener("mediaNavigate",re)}},[w,S,s.length]);const I=async Z=>{if(!(!Z||Z.length===0))for(let re=0;re<Z.length;re++){const J=Z[re];await P(J)}},L={image:10,video:100,audio:20,document:50},$=(Z,re)=>{const J=L[re],F=Z.size/1024/1024;return F>J?(alert(`Arquivo muito grande! Limite para ${W(re)}: ${J}MB
Tamanho do arquivo: ${F.toFixed(2)}MB`),!1):!0},W=Z=>({image:" Imagens",video:" Vdeos",audio:" udios",document:" Documentos"})[Z]||Z,P=async Z=>{d(!0);try{const re=U(Z.type);if(!$(Z,re)){d(!1);return}const J=await new Promise((de,_e)=>{const se=new FileReader;se.onload=()=>de(se.result),se.onerror=_e,se.readAsDataURL(Z)}),F=await Fe(`/api/inspections/${e}/media/upload`,{method:"POST",body:JSON.stringify({inspection_id:e,inspection_item_id:t,media_type:re,file_name:Z.name,file_data:J,file_size:Z.size,mime_type:Z.type})});if(F.ok){const de=await F.json();console.log("[MediaUpload] Upload result:",de);const _e=de.media||de;r({id:_e.id,inspection_id:e,inspection_item_id:t,media_type:re,file_name:Z.name,file_url:_e.file_url,file_size:Z.size,mime_type:Z.type})}else{const de=await F.json();throw new Error(de.error||"Erro ao fazer upload")}}catch(re){console.error("Erro ao fazer upload:",re);const J=re instanceof Error?re.message:"Erro ao fazer upload do arquivo";alert(J)}finally{d(!1)}},U=Z=>Z.startsWith("image/")?"image":Z.startsWith("video/")?"video":Z.startsWith("audio/")?"audio":"document",K=async()=>{try{p(!0);const Z=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"environment"}});T.current&&(T.current.srcObject=Z,T.current.play())}catch(Z){console.error("Erro ao acessar cmera:",Z),alert("Erro ao acessar cmera. Verifique as permisses."),p(!1)}},G=async()=>{if(!T.current||!D.current)return;const Z=T.current,re=D.current,J=re.getContext("2d");J&&(re.width=Z.videoWidth,re.height=Z.videoHeight,J.drawImage(Z,0,0,re.width,re.height),re.toBlob(async F=>{if(!F)return;const de=new File([F],`foto-${Date.now()}.jpg`,{type:"image/jpeg"});await P(de),Z.srcObject.getTracks().forEach(se=>se.stop()),Z.srcObject=null,p(!1)},"image/jpeg",.9))},Q=()=>{if(T.current){const Z=T.current.srcObject;Z&&Z.getTracks().forEach(re=>re.stop()),T.current.srcObject=null}p(!1)},le=async()=>{try{console.log("[MediaUpload] Requesting microphone access...");const Z=await navigator.mediaDevices.getUserMedia({audio:!0});console.log("[MediaUpload] Microphone access granted");const re=new MediaRecorder(Z),J=[];re.ondataavailable=F=>{F.data.size>0&&(J.push(F.data),console.log("[MediaUpload] Audio chunk received:",F.data.size))},re.onstop=async()=>{if(console.log("[MediaUpload] Recorder stopped. Total chunks:",J.length),J.length===0){console.error("[MediaUpload] No audio chunks recorded"),alert("Erro: Nenhum udio gravado. Verifique seu microfone.");return}const F=new Blob(J,{type:"audio/webm"});console.log("[MediaUpload] Audio blob created, size:",F.size);const de=new File([F],`audio-${Date.now()}.webm`,{type:"audio/webm"});console.log("[MediaUpload] Uploading audio file..."),await P(de),Z.getTracks().forEach(_e=>_e.stop())},re.start(),console.log("[MediaUpload] Recorder started"),b(re),h(!0),v(0),R.current=setInterval(()=>{v(F=>F+1)},1e3)}catch(Z){console.error("Erro ao iniciar gravao:",Z),alert("Erro ao acessar microfone: "+(Z instanceof Error?Z.message:String(Z)))}},H=()=>{console.log("[MediaUpload] Stopping recording..."),x&&x.state!=="inactive"&&(x.requestData(),x.stop(),console.log("[MediaUpload] Stop signal sent to recorder")),R.current&&clearInterval(R.current),h(!1),b(null),v(0)},V=async Z=>{try{const re=await Fe(`/api/media/${e}/media/${Z}`,{method:"DELETE"});re.ok&&n?n(Z):re.ok||console.error("Delete failed with status:",re.status)}catch(re){console.error("Erro ao deletar mdia:",re)}},B=Z=>{const re=Math.floor(Z/60),J=Z%60;return`${re}:${J.toString().padStart(2,"0")}`},ne=Z=>{switch(Z){case"image":return a.jsx(vs,{className:"w-5 h-5"});case"video":return a.jsx(nO,{className:"w-5 h-5"});case"audio":return a.jsx(ru,{className:"w-5 h-5"});default:return a.jsx(jr,{className:"w-5 h-5"})}},ie=Z=>{j(Z),N(!0)},ee=()=>{N(!1)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("button",{type:"button",onClick:()=>{var Z;return(Z=O.current)==null?void 0:Z.click()},disabled:l||m,className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-50 transition-all text-sm font-medium shadow-sm",children:[a.jsx(Pi,{className:"w-4 h-4"}),"Arquivos"]}),a.jsxs("button",{type:"button",onClick:K,disabled:l||m||u,className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-50 transition-all text-sm font-medium shadow-sm",children:[a.jsx(Yl,{className:"w-4 h-4"}),"Cmera"]}),u?a.jsxs("button",{type:"button",onClick:H,className:"flex items-center gap-2 px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all text-sm font-medium shadow-sm animate-pulse",children:[a.jsx(rO,{className:"w-4 h-4"}),"Parar (",B(y),")"]}):a.jsxs("button",{type:"button",onClick:le,disabled:l||m,className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 hover:border-slate-400 disabled:opacity-50 transition-all text-sm font-medium shadow-sm",children:[a.jsx(ru,{className:"w-4 h-4"}),"Gravar"]}),l&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-slate-300 border-t-slate-600"}),a.jsx("span",{children:"Enviando..."})]})]}),s.length>0&&a.jsxs("span",{className:"text-sm text-slate-500",children:[s.length," ",s.length===1?"mdia":"mdias"]})]}),a.jsx("input",{ref:O,type:"file",multiple:!0,className:"hidden",accept:"image/*,audio/*,.pdf,.doc,.docx",onChange:Z=>I(Z.target.files)})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4",children:[a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Tirar Foto"}),a.jsx("p",{className:"text-sm text-slate-600",children:'Posicione a cmera e clique em "Capturar"'})]}),a.jsx("div",{className:"relative bg-black rounded-lg overflow-hidden",children:a.jsx("video",{ref:T,className:"w-full max-h-96 object-cover",autoPlay:!0,muted:!0,playsInline:!0})}),a.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[a.jsxs("button",{onClick:G,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Yl,{className:"w-4 h-4 mr-2"}),"Capturar"]}),a.jsx("button",{onClick:Q,className:"px-6 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"})]})]})}),a.jsx("canvas",{ref:D,className:"hidden"}),s.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"font-medium text-slate-900 flex items-center gap-2",children:[a.jsx(vs,{className:"w-6 h-6"}),"Gerenciar Mdias (",s.length,")"]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{onClick:()=>A(!k),className:"flex items-center px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[a.jsx(Fa,{className:"w-5 h-5 mr-2"}),"Gerenciar Downloads"]})})]}),k&&a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:a.jsx(Cae,{media:s,inspectionTitle:i})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map((Z,re)=>a.jsxs("div",{className:"relative bg-slate-50 rounded-lg p-3 border border-slate-200 group",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[ne(Z.media_type),a.jsx("span",{className:"text-xs font-medium",children:Z.media_type.toUpperCase()})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>ie(re),className:"p-1 text-blue-500 hover:bg-blue-50 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Visualizar em tamanho grande",children:a.jsx(Ds,{className:"w-4 h-4"})}),n&&a.jsx("button",{onClick:()=>V(Z.id),className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors",children:a.jsx(ct,{className:"w-4 h-4"})})]})]}),Z.media_type==="image"&&a.jsx("div",{className:"w-full h-24 rounded overflow-hidden cursor-pointer",onClick:()=>ie(re),children:a.jsx("img",{src:Z.file_url,alt:Z.file_name,className:"w-full h-full object-cover hover:scale-105 transition-transform"})}),Z.media_type==="video"&&a.jsx("video",{src:Z.file_url,className:"w-full h-24 object-cover rounded",controls:!0}),Z.media_type==="audio"&&a.jsx("div",{className:"h-24 flex items-center justify-center",children:a.jsx("audio",{src:Z.file_url,controls:!0,className:"w-full"})}),Z.media_type==="document"&&a.jsx("div",{className:"h-24 flex items-center justify-center bg-slate-100 rounded",children:a.jsx(jr,{className:"w-8 h-8 text-slate-400"})}),a.jsx("p",{className:"text-xs text-slate-600 mt-2 truncate",title:Z.file_name,children:Z.file_name}),Z.file_size&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(Z.file_size/1024/1024).toFixed(2)," MB"]})]},Z.id||`media-${re}`))})]}),a.jsx(_ae,{media:s,currentIndex:S,isOpen:w,onClose:ee})]})}function VA({onSignatureSaved:e,existingSignature:t,signerName:r,signerRole:s,signerEmail:n,readonly:i=!1}){const l=_.useRef(null),[d,u]=_.useState(!1),[h,m]=_.useState(!!t);_.useEffect(()=>{const N=l.current;if(!N)return;const S=N.getContext("2d");if(S&&(N.width=800,N.height=400,S.lineWidth=2,S.lineCap="round",S.strokeStyle="#1e293b",S.fillStyle="#ffffff",S.fillRect(0,0,N.width,N.height),t&&t.trim()!=="")){console.log(`Loading existing signature for ${r}:`,t.substring(0,50)+"...");const j=new Image;j.onload=()=>{try{S.drawImage(j,0,0,N.width,N.height),m(!0),console.log(`Successfully loaded signature for ${r}`)}catch(k){console.error(`Error drawing signature for ${r}:`,k)}},j.onerror=k=>{console.error(`Error loading signature image for ${r}:`,k)},j.src=t}},[t,r]);const p=N=>{const S=l.current;if(!S)return{x:0,y:0};const j=S.getBoundingClientRect(),k=S.width/j.width,A=S.height/j.height;if("touches"in N){const O=N.touches[0]||N.changedTouches[0];return{x:(O.clientX-j.left)*k,y:(O.clientY-j.top)*A}}else return{x:(N.clientX-j.left)*k,y:(N.clientY-j.top)*A}},x=N=>{if(i)return;N.preventDefault();const S=l.current;if(!S)return;const{x:j,y:k}=p(N),A=S.getContext("2d");A&&(u(!0),A.beginPath(),A.moveTo(j,k))},b=N=>{if(!d||i)return;N.preventDefault();const S=l.current;if(!S)return;const{x:j,y:k}=p(N),A=S.getContext("2d");A&&(A.lineTo(j,k),A.stroke(),m(!0))},y=N=>{N.preventDefault(),u(!1)},v=()=>{if(i)return;const N=l.current;if(!N)return;const S=N.getContext("2d");S&&(S.fillStyle="#ffffff",S.fillRect(0,0,N.width,N.height),m(!1))},w=()=>{const N=l.current;if(!(!N||!h))try{const S=N.toDataURL("image/png");console.log(`Saving signature for ${r}:`,S.substring(0,50)+"..."),e(S)}catch(S){console.error("Error generating signature:",S),alert("Erro ao salvar assinatura. Tente novamente.")}};return a.jsxs("div",{className:"bg-white border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"font-medium text-slate-900 mb-1",children:"Assinatura Digital"}),a.jsxs("div",{className:"text-sm text-slate-600",children:[a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Nome:"})," ",r]}),n&&a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Email:"})," ",n]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Cargo:"})," ",s]}),a.jsxs("p",{children:[a.jsx("span",{className:"font-medium",children:"Data:"})," ",new Date().toLocaleDateString("pt-BR")]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("canvas",{ref:l,className:"border-2 border-slate-300 rounded cursor-crosshair w-full h-48 sm:h-52",onMouseDown:x,onMouseMove:b,onMouseUp:y,onMouseLeave:y,onTouchStart:x,onTouchMove:b,onTouchEnd:y,onTouchCancel:y,style:{touchAction:"none",minHeight:"180px",maxHeight:"220px"}}),!i&&!h&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[a.jsx(JL,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm",children:"Assine aqui"})]})})]}),!i&&a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:gap-3 mt-4",children:[a.jsxs("button",{type:"button",onClick:v,className:"flex items-center justify-center px-3 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx(Wy,{className:"w-4 h-4 mr-2"}),"Limpar"]}),a.jsxs("button",{type:"button",onClick:w,disabled:!h,className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Salvar Assinatura"]})]})]})}function GA({signature:e,signerName:t,signerRole:r,title:s,showDate:n=!0}){const i=e&&e.trim()!=="",l=t||"(sem nome)";return a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 print:border-gray-400",children:[a.jsx("h3",{className:`font-medium mb-2 ${i?"text-slate-900":"text-slate-500"}`,children:s}),a.jsx("div",{className:`rounded p-3 mb-2 min-h-[80px] flex items-center justify-center ${i?"bg-slate-50 print:bg-gray-100":"bg-slate-100"}`,children:i?a.jsx("img",{src:e,alt:s,className:"max-h-16 max-w-full object-contain",style:{WebkitPrintColorAdjust:"exact",colorAdjust:"exact"},onError:d=>{console.error(`Error loading signature image for ${s}`);const u=d.target;u.style.display="none";const h=u.parentElement;h&&(h.innerHTML=`
                  <div class="flex items-center gap-2 text-red-500">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <span class="text-sm">Erro ao carregar assinatura</span>
                  </div>
                `)},onLoad:()=>{console.log(`${s} loaded successfully`)}}):a.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-400",children:[a.jsx(tm,{className:"w-6 h-6"}),a.jsx("span",{className:"text-sm italic",children:"Assinatura no disponvel"})]})}),a.jsxs("div",{className:`text-sm ${i?"text-slate-600":"text-slate-500"}`,children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Nome:"})," ",l]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cargo:"})," ",r]}),n&&a.jsxs("p",{children:[a.jsx("strong",{children:"Data:"})," ",new Date().toLocaleDateString("pt-BR")]})]})]})}function XP({inspection:e,items:t,templateItems:r=[],media:s,responses:n,signatures:i,isOpen:l,onClose:d,qrCodeDataUrl:u,shareLink:h,actionItems:m=[],organizationLogoUrl:p,parentOrganizationLogoUrl:x,organizationName:b="Organizao",parentOrganizationName:y="Organizao Matriz"}){const[v,w]=_.useState(!1),[N,S]=_.useState(!0),[j,k]=_.useState(!0),[A,O]=_.useState(!1),[T,D]=_.useState(p&&x?"both":p?"organization":x?"parent":"none"),{success:R,error:I}=Yy();if(!l)return null;const L=(U,K)=>{switch(K){case"boolean":const G=U===!0||U==="true";return!G&&!(U===!1||U==="false")?"No respondido":G?"Conforme ":"No Conforme ";case"rating":return U==null||U===""?"No respondido":`${U}/5 estrelas`;case"multiselect":return U==null||U===""?"No respondido":Array.isArray(U)?U.join(", "):String(U);default:return U==null||U===""?"No respondido":String(U)}},$={totalItems:0,compliantItems:0,nonCompliantItems:0,conformanceRate:0};t.forEach(U=>{U.is_compliant===!0?($.compliantItems++,$.totalItems++):U.is_compliant===!1&&($.nonCompliantItems++,$.totalItems++)}),r.forEach(U=>{try{const K=JSON.parse(U.field_responses),G=n[K.field_id];K.field_type==="boolean"?G===!0||G==="true"?($.compliantItems++,$.totalItems++):(G===!1||G==="false")&&($.nonCompliantItems++,$.totalItems++):G!=null&&G!==""&&($.compliantItems++,$.totalItems++)}catch(K){console.error("Error processing template item:",K)}}),$.conformanceRate=$.totalItems>0?Math.round($.compliantItems/$.totalItems*100):0;const W=()=>`<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Relatrio de Inspeo - ${e.title}</title>
  <style>
    @page {
      margin: 15mm;
      size: A4;
    }
    @media print {
      body { 
        margin: 0; 
        padding: 15mm;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .page-break { page-break-before: always; }
      .checklist-item { page-break-inside: avoid; }
      .signature-box { page-break-inside: avoid; }
      /* Ocultar header/footer padro do navegador */
      @page { margin-top: 10mm; margin-bottom: 10mm; }
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      line-height: 1.5; 
      color: #1f2937; 
      background: white;
      padding: 30px; 
      font-size: 12px;
    }
    .header { 
      text-align: center; 
      margin-bottom: 30px; 
      border-bottom: 1px solid #d1d5db; 
      padding-bottom: 20px;
    }
    .logos-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 30px;
      margin-bottom: 20px;
    }
    .logo { max-height: 60px; max-width: 150px; object-fit: contain; }
    .report-title {
      font-size: 11px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 8px;
    }
    h1 { 
      color: #111827; 
      font-size: 22px; 
      font-weight: 600; 
      margin-bottom: 4px;
    }
    h2 { 
      color: #374151; 
      font-size: 16px; 
      margin: 25px 0 12px 0; 
      padding-bottom: 6px;
      border-bottom: 1px solid #e5e7eb;
      font-weight: 600;
    }
    h3 { 
      color: #4b5563; 
      font-size: 14px; 
      margin: 15px 0 8px 0;
      font-weight: 600;
    }
    .meta-info { 
      font-size: 11px; 
      color: #9ca3af; 
      margin-top: 8px;
    }
    .info-grid { 
      display: table;
      width: 100%;
      margin: 15px 0;
      border: 1px solid #374151;
      border-collapse: collapse;
    }
    .info-row {
      display: table-row;
    }
    .info-item { 
      display: table-cell;
      padding: 8px 12px;
      border: 1px solid #d1d5db;
      vertical-align: top;
    }
    .info-label { 
      font-weight: 600; 
      color: #374151; 
      display: block;
      margin-bottom: 2px;
      font-size: 10px;
      text-transform: uppercase;
    }
    .info-value { color: #1f2937; font-size: 12px; }
    .stats-grid { 
      display: grid; 
      grid-template-columns: repeat(4, 1fr); 
      gap: 15px; 
      margin: 20px 0;
    }
    .stat-card { 
      background: #ffffff;
      border: 1px solid #e5e7eb;
      padding: 15px; 
      border-radius: 4px; 
      text-align: center;
    }
    .stat-card.compliant { border-left: 4px solid #10b981; }
    .stat-card.non-compliant { border-left: 4px solid #ef4444; }
    .stat-card.rate { border-left: 4px solid #1e40af; }
    .stat-number { font-size: 28px; font-weight: 700; color: #111827; margin-bottom: 4px; }
    .stat-label { font-size: 10px; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px; }
    .section-title {
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      margin: 25px 0 15px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid #e5e7eb;
    }
    .checklist-item { 
      background: white;
      border: 1px solid #e5e7eb; 
      border-radius: 4px; 
      padding: 15px; 
      margin: 10px 0;
      page-break-inside: avoid;
    }
    .item-header { 
      display: flex; 
      align-items: flex-start; 
      gap: 10px; 
      margin-bottom: 10px;
    }
    .item-number { 
      color: #6b7280; 
      font-weight: 600; 
      font-size: 12px;
      min-width: 25px;
    }
    .item-title { font-weight: 600; color: #111827; font-size: 14px; }
    .item-response { 
      background: #f9fafb; 
      padding: 10px; 
      border-radius: 4px; 
      margin: 8px 0;
      border-left: 3px solid #d1d5db;
    }
    .response-label { font-weight: 600; color: #6b7280; margin-bottom: 4px; font-size: 11px; text-transform: uppercase; }
    .conforme { color: #059669; font-weight: 600; }
    .nao-conforme { color: #dc2626; font-weight: 600; }
    .media-grid { 
      display: grid; 
      grid-template-columns: repeat(3, 1fr); 
      gap: 12px; 
      margin: 12px 0;
    }
    .media-item { 
      border: 1px solid #d1d5db; 
      border-radius: 6px; 
      overflow: hidden;
      background: white;
      break-inside: avoid;
    }
    .media-item img { 
      width: 100%; 
      height: 100px; 
      object-fit: contain; 
      background: #f9fafb;
      padding: 4px;
    }
    .media-info { padding: 6px 8px; background: #f9fafb; border-top: 1px solid #e5e7eb; }
    .media-filename { font-size: 9px; font-weight: 600; color: #374151; word-break: break-all; }
    .media-description { font-size: 8px; color: #6b7280; margin-top: 2px; }
    .signatures-section { 
      margin-top: 40px; 
      page-break-before: auto;
    }
    .signatures-grid { 
      display: grid; 
      grid-template-columns: repeat(2, 1fr); 
      gap: 30px; 
      margin-top: 20px;
    }
    .signature-box { 
      text-align: center; 
      padding: 15px;
      border: 1px solid #e5e7eb;
      border-radius: 4px;
    }
    .signature-preview { 
      height: 100px; 
      border: 1px solid #e5e7eb; 
      border-radius: 4px; 
      margin: 10px 0;
      background: #fafafa;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .signature-preview img { max-height: 80px; max-width: 100%; object-fit: contain; }
    .signature-line { 
      border-top: 1px solid #374151; 
      margin: 15px auto 8px auto; 
      width: 200px;
    }
    .signature-name { font-weight: 600; color: #111827; font-size: 13px; }
    .signature-role { font-size: 11px; color: #6b7280; }
    .footer { 
      margin-top: 40px; 
      padding-top: 15px; 
      border-top: 1px solid #e5e7eb;
      font-size: 10px; 
      color: #9ca3af;
      text-align: center;
    }
    .action-plan { 
      background: #fffbeb; 
      border: 1px solid #fcd34d; 
      border-radius: 4px; 
      padding: 12px; 
      margin: 10px 0;
    }
    .action-plan h4 { color: #92400e; margin-bottom: 8px; font-size: 13px; }
    .action-item { 
      background: white; 
      padding: 8px; 
      border-radius: 4px; 
      margin: 6px 0; 
      border-left: 3px solid #f59e0b;
    }
    .w5-grid { 
      display: grid; 
      grid-template-columns: repeat(2, 1fr); 
      gap: 8px; 
      margin-top: 6px;
    }
    .w5-item { margin-bottom: 6px; font-size: 12px; }
    .w5-label { font-weight: 600; color: #92400e; }
    .page-break { page-break-before: always; }
    .ai-analysis {
      background: #f0f9ff;
      border-left: 3px solid #1e40af;
      padding: 10px;
      margin: 8px 0;
      border-radius: 4px;
    }
    .ai-label { font-weight: 600; color: #1e40af; font-size: 11px; text-transform: uppercase; margin-bottom: 4px; }
    @media print {
      body { margin: 0; padding: 20px; }
      .page-break { page-break-before: always; }
      .checklist-item { page-break-inside: avoid; }
      .signature-box { page-break-inside: avoid; }
    }
  </style>
</head>
<body>
  <div class="header">
    ${(()=>{const U=[];return(T==="both"||T==="parent")&&x&&U.push(x),(T==="both"||T==="organization")&&p&&U.push(p),U.length===0?"":`
    <div class="logos-container">
      ${U.map(K=>`<img class="logo" src="${K}" alt="Logo" />`).join("")}
    </div>`})()}
    <div class="report-title">Relatrio de Inspeo Tcnica</div>
    <h1>${e.title}</h1>
    <div class="meta-info">
      Gerado em ${new Date().toLocaleDateString("pt-BR")} s ${new Date().toLocaleTimeString("pt-BR")}
    </div>
  </div>

  <table class="info-grid">
    <tr class="info-row">
      ${e.company_name?`
      <td class="info-item">
        <span class="info-label">Empresa</span>
        <span class="info-value">${e.company_name}</span>
      </td>`:'<td class="info-item"></td>'}
      <td class="info-item">
        <span class="info-label">Local</span>
        <span class="info-value">${e.location}</span>
      </td>
    </tr>
    <tr class="info-row">
      <td class="info-item">
        <span class="info-label">Inspetor</span>
        <span class="info-value">${e.inspector_name}</span>
      </td>
      ${e.responsible_name?`
      <td class="info-item">
        <span class="info-label">Responsvel</span>
        <span class="info-value">${e.responsible_name}</span>
      </td>`:'<td class="info-item"></td>'}
    </tr>
    <tr class="info-row">
      ${e.scheduled_date?`
      <td class="info-item">
        <span class="info-label">Data</span>
        <span class="info-value">${new Date(e.scheduled_date).toLocaleDateString("pt-BR")}</span>
      </td>`:'<td class="info-item"></td>'}
      ${e.responsible_email?`
      <td class="info-item">
        <span class="info-label">Email</span>
        <span class="info-value">${e.responsible_email}</span>
      </td>`:'<td class="info-item"></td>'}
    </tr>
    ${e.address||e.cep?`
    <tr class="info-row">
      ${e.address?`
      <td class="info-item">
        <span class="info-label">Endereo</span>
        <span class="info-value">${e.address}</span>
      </td>`:'<td class="info-item"></td>'}
      ${e.cep?`
      <td class="info-item">
        <span class="info-label">CEP</span>
        <span class="info-value">${e.cep}</span>
      </td>`:'<td class="info-item"></td>'}
    </tr>`:""}
  </table>

  <h2>Estatsticas da Inspeo</h2>
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-number">${$.totalItems}</div>
      <div class="stat-label">Total de Itens</div>
    </div>
    <div class="stat-card compliant">
      <div class="stat-number">${$.compliantItems}</div>
      <div class="stat-label">Conformes</div>
    </div>
    <div class="stat-card non-compliant">
      <div class="stat-number">${$.nonCompliantItems}</div>
      <div class="stat-label">No Conformes</div>
    </div>
    <div class="stat-card rate">
      <div class="stat-number">${$.conformanceRate}%</div>
      <div class="stat-label">Taxa de Conformidade</div>
    </div>
  </div>

  ${r.length>0?`
  <h2>Checklist Respondido</h2>
  ${r.map((U,K)=>{try{const G=JSON.parse(U.field_responses),Q=n[G.field_id],le=n[`comment_${G.field_id}`],H=s.filter(V=>V.inspection_item_id===U.id);return`
      <div class="checklist-item">
        <div class="item-header">
          <div class="item-number">${K+1}</div>
          <div class="item-title">${U.item_description}</div>
        </div>
        <div class="item-response">
          <div class="response-label">Resposta:</div>
          <div class="${Q===!0||Q==="true"?"conforme":Q===!1||Q==="false"?"nao-conforme":""}">${L(Q,G.field_type)}</div>
        </div>
        ${le?`
        <div class="item-response">
          <div class="response-label">Comentrio:</div>
          <div>${le}</div>
        </div>`:""}
        ${U.ai_pre_analysis?`
        <div class="ai-analysis">
          <div class="ai-label">Anlise IA:</div>
          <div>${U.ai_pre_analysis}</div>
        </div>`:""}
        ${A&&U.ai_action_plan?(()=>{var V;try{const B=JSON.parse(U.ai_action_plan);return(V=B==null?void 0:B.actions)!=null&&V.length?`
            <div class="action-plan">
              <h4>Plano de Ao (IA)</h4>
              ${B.summary?`<p style="margin-bottom: 10px;">${B.summary}</p>`:""}
              ${B.actions.map((ne,ie)=>`
                <div class="action-item">
                  <strong>Ao ${ie+1}:</strong> ${ne.item||ne.what}
                  <div class="w5-grid">
                    <div class="w5-item"><span class="w5-label">O que:</span> ${ne.what}</div>
                    <div class="w5-item"><span class="w5-label">Onde:</span> ${ne.where}</div>
                    <div class="w5-item"><span class="w5-label">Por que:</span> ${ne.why}</div>
                    <div class="w5-item"><span class="w5-label">Como:</span> ${ne.how}</div>
                    <div class="w5-item"><span class="w5-label">Quando:</span> ${ne.when}</div>
                    <div class="w5-item"><span class="w5-label">Quem:</span> ${ne.who}</div>
                    <div class="w5-item" style="grid-column: 1/-1;"><span class="w5-label">Quanto:</span> ${ne.how_much}</div>
                  </div>
                </div>
              `).join("")}
            </div>`:""}catch{return""}})():""}
        ${N&&H.length>0?`
        <div>
          <div class="response-label">Evidncias (${H.length}):</div>
          <div class="media-grid">
            ${H.map(V=>V.media_type==="image"&&V.file_url.startsWith("data:image/")?`
                <div class="media-item">
                  <img src="${V.file_url}" alt="${V.file_name}" />
                  <div class="media-info">
                    <div class="media-filename">${V.file_name}</div>
                    ${V.description?`<div class="media-description">${V.description}</div>`:""}
                  </div>
                </div>`:`
              <div class="media-item">
                <div class="media-info">
                  <div class="media-filename"> ${V.file_name}</div>
                  <div class="media-description">${V.media_type.toUpperCase()}</div>
                  ${V.description?`<div class="media-description">${V.description}</div>`:""}
                </div>
              </div>`).join("")}
          </div>
        </div>`:""}
      </div>`}catch{return""}}).join("")}`:""}

  ${t.length>0?`
  <h2>Itens Manuais</h2>
  ${t.map((U,K)=>{const G=s.filter(Q=>Q.inspection_item_id===U.id);return`
    <div class="checklist-item">
      <div class="item-header">
        <div class="item-number">${K+1}</div>
        <div>
          <div class="item-title">${U.item_description}</div>
          <div style="font-size: 12px; color: #6b7280; margin-top: 4px;"> ${U.category}</div>
        </div>
      </div>
      <div class="item-response">
        <div class="response-label">Status:</div>
        <div class="${U.is_compliant===!0?"conforme":U.is_compliant===!1?"nao-conforme":""}">
          ${U.is_compliant===!0?"Conforme ":U.is_compliant===!1?"No Conforme ":"No Avaliado"}
        </div>
      </div>
      ${U.observations?`
      <div class="item-response">
        <div class="response-label">Observaes:</div>
        <div>${U.observations}</div>
      </div>`:""}
      ${N&&G.length>0?`
      <div>
        <div class="response-label">Evidncias (${G.length}):</div>
        <div class="media-grid">
          ${G.map(Q=>Q.media_type==="image"&&Q.file_url.startsWith("data:image/")?`
              <div class="media-item">
                <img src="${Q.file_url}" alt="${Q.file_name}" />
                <div class="media-info">
                  <div class="media-filename">${Q.file_name}</div>
                  ${Q.description?`<div class="media-description">${Q.description}</div>`:""}
                </div>
              </div>`:`
            <div class="media-item">
              <div class="media-info">
                <div class="media-filename"> ${Q.file_name}</div>
                <div class="media-description">${Q.media_type.toUpperCase()}</div>
                ${Q.description?`<div class="media-description">${Q.description}</div>`:""}
              </div>
            </div>`).join("")}
        </div>
      </div>`:""}
    </div>`}).join("")}`:""}

  ${m.length>0?`
  <h2>Planos de Ao Executivos</h2>
  <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
    <p style="color: #1e40af; font-weight: 600; margin-bottom: 15px;">
      Total de ${m.length} ${m.length===1?"ao identificada":"aes identificadas"}
    </p>
    ${m.map((U,K)=>`
      <div class="checklist-item" style="margin-bottom: 20px;">
        <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 15px;">
          <h4 style="color: #111827; font-size: 16px; font-weight: 600;">${K+1}. ${U.title}</h4>
          <div style="display: flex; gap: 8px;">
            <span style="background: ${U.priority==="alta"||U.priority==="critica"?"#fef2f2; color: #991b1b":U.priority==="media"?"#fefce8; color: #92400e":"#f0fdf4; color: #166534"}; padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: 600;">
              ${U.priority||"mdia"}
            </span>
            <span style="background: ${U.status==="completed"?"#f0fdf4; color: #166534":U.status==="in_progress"?"#eff6ff; color: #1d4ed8":"#f3f4f6; color: #374151"}; padding: 4px 8px; border-radius: 12px; font-size: 11px; font-weight: 600;">
              ${U.status==="pending"?"Pendente":U.status==="in_progress"?"Em Progresso":U.status==="completed"?"Concludo":U.status}
            </span>
          </div>
        </div>
        
        ${U.is_ai_generated?`
        <div style="margin-bottom: 12px; display: flex; align-items: center; gap: 6px; color: #7c3aed; font-size: 11px;">
          <span>Gerado por Inteligncia Artificial</span>
        </div>`:""}
        
        <div class="w5-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 10px;">
          ${U.what_description?`
          <div style="background: #fef2f2; padding: 10px; border-radius: 6px; border-left: 3px solid #ef4444;">
            <div class="w5-label" style="font-weight: 600; color: #b91c1c; margin-bottom: 4px;">O que:</div>
            <div style="color: #7f1d1d; font-size: 13px;">${U.what_description}</div>
          </div>`:""}
          ${U.where_location?`
          <div style="background: #f0fdf4; padding: 10px; border-radius: 6px; border-left: 3px solid #22c55e;">
            <div class="w5-label" style="font-weight: 600; color: #15803d; margin-bottom: 4px;">Onde:</div>
            <div style="color: #14532d; font-size: 13px;">${U.where_location}</div>
          </div>`:""}
          ${U.why_reason?`
          <div style="background: #eff6ff; padding: 10px; border-radius: 6px; border-left: 3px solid #3b82f6;">
            <div class="w5-label" style="font-weight: 600; color: #1d4ed8; margin-bottom: 4px;">Por que:</div>
            <div style="color: #1e3a8a; font-size: 13px;">${U.why_reason}</div>
          </div>`:""}
          ${U.how_method?`
          <div style="background: #f0f9ff; padding: 10px; border-radius: 6px; border-left: 3px solid #6366f1;">
            <div class="w5-label" style="font-weight: 600; color: #4338ca; margin-bottom: 4px;">Como:</div>
            <div style="color: #312e81; font-size: 13px;">${U.how_method}</div>
          </div>`:""}
          ${U.who_responsible?`
          <div style="background: #faf5ff; padding: 10px; border-radius: 6px; border-left: 3px solid #a855f7;">
            <div class="w5-label" style="font-weight: 600; color: #7c2d12; margin-bottom: 4px;">Quem:</div>
            <div style="color: #581c87; font-size: 13px;">${U.who_responsible}</div>
          </div>`:""}
          ${U.when_deadline?`
          <div style="background: #fefce8; padding: 10px; border-radius: 6px; border-left: 3px solid #eab308;">
            <div class="w5-label" style="font-weight: 600; color: #92400e; margin-bottom: 4px;">Quando:</div>
            <div style="color: #78350f; font-size: 13px;">${new Date(U.when_deadline).toLocaleDateString("pt-BR")}</div>
          </div>`:""}
          ${U.how_much_cost?`
          <div style="grid-column: 1/-1; background: #fff7ed; padding: 10px; border-radius: 6px; border-left: 3px solid #f97316;">
            <div class="w5-label" style="font-weight: 600; color: #c2410c; margin-bottom: 4px;">Quanto:</div>
            <div style="color: #9a3412; font-size: 13px;">${U.how_much_cost}</div>
          </div>`:""}
        </div>
        
        ${U.assigned_to?`
        <div style="margin-top: 12px; padding: 8px; background: #f8fafc; border-radius: 4px; font-size: 11px;">
          <span style="font-weight: 600; color: #374151;">Atribudo a:</span>
          <span style="color: #111827; margin-left: 6px;">${U.assigned_to}</span>
        </div>`:""}
      </div>
    `).join("")}
  </div>`:""}

  ${j?`
  <div class="signatures-section page-break">
    <h2>Assinaturas Digitais</h2>
    <div class="signatures-grid">
      <div class="signature-box">
        <h3>Assinatura do Inspetor</h3>
        <div class="signature-preview">
          ${i.inspector?`<img src="${i.inspector}" alt="Assinatura do Inspetor" />`:'<div style="color: #9ca3af;">Assinatura no disponvel</div>'}
        </div>
        <div class="signature-line"></div>
        <div class="signature-name">${e.inspector_name}</div>
        <div class="signature-role">Inspetor Responsvel</div>
      </div>
      <div class="signature-box">
        <h3>Assinatura do Responsvel</h3>
        <div class="signature-preview">
          ${i.responsible?`<img src="${i.responsible}" alt="Assinatura do Responsvel" />`:'<div style="color: #9ca3af;">Assinatura no disponvel</div>'}
        </div>
        <div class="signature-line"></div>
        <div class="signature-name">${e.responsible_name||"Responsvel Tcnico"}</div>
        <div class="signature-role">Empresa</div>
      </div>
    </div>
  </div>`:""}

  ${u?`
  <div class="page-break" style="text-align: center; margin-top: 40px; padding: 30px; border-top: 3px solid #3b82f6; background: linear-gradient(135deg, #f0f9ff, #e0f2fe);">
    <h2 style="color: #1e40af; font-size: 24px; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 10px;">
      Acesse o Relatrio Digital
    </h2>
    
    <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 30px; align-items: center; max-width: 600px; margin: 0 auto;">
      <div style="text-align: center;">
        <div style="background: white; padding: 15px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); display: inline-block;">
          <img src="${u}" alt="QR Code do Relatrio" style="width: 150px; height: 150px; display: block;">
        </div>
        <p style="font-size: 12px; color: #1e40af; margin-top: 15px; font-weight: 600;">
          Escaneie com a cmera do celular
        </p>
      </div>
      
      <div style="text-align: left;">
        <h3 style="color: #1e40af; font-size: 16px; margin-bottom: 15px;">Recursos Digitais:</h3>
        <ul style="list-style: none; padding: 0; margin: 0; font-size: 12px; line-height: 1.8;">
          <li style="margin-bottom: 8px;"><strong>Evidncias Interativas:</strong> Visualize fotos, vdeos e udios</li>
          <li style="margin-bottom: 8px;"><strong>GPS Navegvel:</strong> Coordenadas clicveis para mapas</li>
          <li style="margin-bottom: 8px;"><strong>Anlises da IA:</strong> Planos de ao detalhados</li>
          <li style="margin-bottom: 8px;"><strong>Assinaturas Digitais:</strong> Verificao de autenticidade</li>
          <li style="margin-bottom: 8px;"><strong>Dashboard Dinmico:</strong> Estatsticas atualizadas</li>
        </ul>
        
        ${h?`
        <div style="margin-top: 20px; padding: 10px; background: white; border-radius: 8px; border: 1px solid #d1d5db;">
          <p style="font-size: 10px; color: #374151; margin: 0 0 5px 0;"><strong> Link direto:</strong></p>
          <p style="font-size: 9px; color: #6b7280; word-break: break-all; margin: 0;">${h}</p>
        </div>
        `:""}
      </div>
    </div>
  </div>
  `:""}

  <div class="footer">
    <p><strong>Relatrio gerado automaticamente pelo Sistema Compia</strong></p>
    <p>Este documento possui validade legal conforme legislao vigente</p>
    <p>Gerado em ${new Date().toLocaleDateString("pt-BR")} s ${new Date().toLocaleTimeString("pt-BR")}</p>
    ${e.latitude&&e.longitude?`
    <p style="margin-top: 10px;"><strong>Localizao GPS:</strong> 
      <a href="https://www.google.com/maps/search/?api=1&query=${e.latitude},${e.longitude}" target="_blank" style="color: #2563eb; text-decoration: underline;">
        ${e.latitude.toFixed(6)}, ${e.longitude.toFixed(6)}
      </a>
    </p>`:""}
    ${s.length>0?'<p style="margin-top: 10px;"><strong>Mdias completas:</strong> Disponveis na verso digital</p>':""}
  </div>
</body>
</html>`,P=async()=>{w(!0);try{R("Gerando PDF","Preparando o relatrio... Por favor, aguarde.");const U=W(),K=new Blob([U],{type:"text/html;charset=utf-8"}),G=URL.createObjectURL(K),Q=window.open(G,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes");if(!Q)throw URL.revokeObjectURL(G),new Error("No foi possvel abrir a janela de impresso. Verifique se o bloqueador de pop-ups est desativado.");if(Q.onerror=(le,H,V,B,ne)=>{throw console.error("Erro na janela de PDF:",{msg:le,url:H,lineNo:V,columnNo:B,error:ne}),URL.revokeObjectURL(G),new Error("Erro ao carregar contedo do PDF")},await new Promise((le,H)=>{let V=!1;Q.onload=()=>{V||(V=!0,le(!0))};const B=()=>{Q.document.readyState==="complete"&&!V&&(V=!0,le(!0))};setTimeout(B,500),setTimeout(B,1e3),setTimeout(()=>{V||(V=!0,le(!0))},3e3),setTimeout(()=>{V||(V=!0,H(new Error("Timeout ao carregar contedo do PDF")))},1e4)}),await new Promise(le=>setTimeout(le,1e3)),Q.focus(),Q.closed)throw new Error("A janela foi fechada prematuramente");try{Q.print()}catch(le){console.warn("Erro ao abrir dilogo de impresso:",le)}R("PDF Pronto","Relatrio aberto em nova janela! Use Ctrl+P (Windows) ou Cmd+P (Mac) para imprimir/salvar. Se a impresso no abriu automaticamente, use o menu do navegador."),d()}catch(U){console.error("Erro detalhado ao gerar PDF:",U);let K="Erro desconhecido ao gerar relatrio",G="Erro ao Gerar PDF";if(U instanceof Error){const Q=U.message.toLowerCase();K=U.message,Q.includes("pop-up")||Q.includes("janela")?(G="Bloqueador de Pop-ups",K="Desative o bloqueador de pop-ups do seu navegador e tente novamente."):Q.includes("timeout")?(G="Timeout",K="O PDF demorou muito para carregar. Tente novamente com menos imagens ou contedo."):Q.includes("fechada")&&(G="Janela Fechada",K="A janela do PDF foi fechada. Tente gerar o relatrio novamente.")}I(G,K)}finally{w(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Sv,{className:"w-6 h-6 text-blue-600"}),a.jsx("h2",{className:"font-heading text-2xl font-bold text-slate-900",children:"Gerar Relatrio PDF"})]}),a.jsx("button",{onClick:d,className:"text-slate-500 hover:text-slate-700 transition-colors",children:a.jsx(ct,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:e.title}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-blue-800",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Total de Itens:"})," ",$.totalItems]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Conformidade:"})," ",$.conformanceRate,"%"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Mdias:"})," ",s.length]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Status:"})," ",e.status==="concluida"?"Finalizada":"Em andamento"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-semibold text-slate-900",children:"Opes do Relatrio"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:N,onChange:U=>S(U.target.checked),className:"mt-1 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:"Incluir Evidncias Visuais"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Inclui todas as fotos, vdeos e udios anexados aos itens da inspeo."})]})]}),a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:j,onChange:U=>k(U.target.checked),className:"mt-1 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:"Incluir Assinaturas Digitais"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Inclui as assinaturas digitais do inspetor e responsvel tcnico."})]})]}),a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A,onChange:U=>O(U.target.checked),className:"mt-1 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:"Incluir Planos de Ao Detalhados"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Inclui todos os planos de ao 5W2H gerados pela IA com detalhes completos."})]})]})]}),(p||x)&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200",children:[a.jsxs("h4",{className:"font-medium text-slate-900 mb-3 flex items-center gap-2",children:[a.jsx(vs,{className:"w-4 h-4"}),"Logo no Relatrio"]}),a.jsxs("div",{className:"space-y-2",children:[x&&a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"logoPreference",value:"parent",checked:T==="parent",onChange:()=>D("parent"),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-slate-700",children:["Apenas logo da ",y]})]}),p&&a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"logoPreference",value:"organization",checked:T==="organization",onChange:()=>D("organization"),className:"text-blue-600 focus:ring-blue-500"}),a.jsxs("span",{className:"text-sm text-slate-700",children:["Apenas logo da ",b]})]}),p&&x&&a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"logoPreference",value:"both",checked:T==="both",onChange:()=>D("both"),className:"text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Ambos os logos"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",name:"logoPreference",value:"none",checked:T==="none",onChange:()=>D("none"),className:"text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Sem logo"})]})]})]})]}),a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-slate-900 mb-2",children:" Ser includo no PDF:"}),a.jsxs("ul",{className:"text-sm text-slate-700 space-y-1",children:[a.jsx("li",{children:" Informaes da inspeo e estatsticas"}),a.jsx("li",{children:" Todas as respostas do checklist"}),a.jsx("li",{children:" Anlises da IA (quando disponveis)"}),N&&a.jsx("li",{children:" Evidncias visuais (fotos, vdeos, udios)"}),A&&a.jsx("li",{children:" Planos de ao 5W2H detalhados"}),j&&a.jsx("li",{children:" Assinaturas digitais"}),a.jsx("li",{children:" Rodap com data/hora de gerao"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-slate-200",children:[a.jsx("button",{onClick:d,className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:P,disabled:v,className:"flex-1 flex items-center justify-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:v?a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"w-4 h-4 mr-2 animate-spin"}),"Gerando PDF..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Sv,{className:"w-4 h-4 mr-2"}),"Gerar Relatrio PDF"]})})]})]})]})})})}function Oae({inspection:e,items:t,templateItems:r=[],media:s,responses:n,signatures:i,actionItems:l=[]}){_.useEffect(()=>{(async()=>{var $;if(e!=null&&e.id)try{const W=await fetch(`/api/inspections/${e.id}/shares`);let P=null;if(W.ok){const K=($=(await W.json()).shares)==null?void 0:$.find(G=>G.is_active&&(!G.expires_at||new Date(G.expires_at)>new Date));P=K==null?void 0:K.share_token}if(!P){const U=await fetch(`/api/inspections/${e.id}/share`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({permission:"view",expires_at:new Date(Date.now()+31536e6).toISOString()})});U.ok&&(P=(await U.json()).share_token)}if(P){const U=`${window.location.origin}/shared/${P}`;S(U),w("")}}catch(W){console.error("Failed to generate QR code:",W)}})()},[e==null?void 0:e.id]);const[d,u]=_.useState(!1),[h,m]=_.useState(!1),[p,x]=_.useState(!1),[b,y]=_.useState(!1),[v,w]=_.useState(""),[N,S]=_.useState(""),j=(L,$)=>{if(L==null||L===""||Array.isArray(L)&&L.length===0)return a.jsx("span",{className:"text-slate-400 italic",children:"No respondido"});switch($){case"boolean":const W=L===!0||L==="true"||L===1||L==="1";return!W&&!(L===!1||L==="false"||L===0||L==="0")?a.jsx("span",{className:"text-slate-400 italic",children:"No respondido"}):a.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full ${W?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:W?a.jsxs(a.Fragment,{children:[a.jsx(Ct,{className:"w-4 h-4"}),"Conforme"]}):a.jsxs(a.Fragment,{children:[a.jsx(tr,{className:"w-4 h-4"}),"No Conforme"]})});case"rating":const U=Number(L);return isNaN(U)||U<1||U>5?a.jsx("span",{className:"text-slate-400 italic",children:"No respondido"}):a.jsxs("div",{className:"flex items-center gap-1",children:[[1,2,3,4,5].map(G=>a.jsx(rp,{className:`w-5 h-5 ${G<=U?"text-yellow-400 fill-current":"text-slate-300"}`},G)),a.jsxs("span",{className:"ml-2 text-sm font-medium text-slate-700",children:["(",U,"/5)"]})]});case"multiselect":let K=L;if(typeof L=="string")try{K=JSON.parse(L)}catch{K=L.split(",").map(G=>G.trim()).filter(G=>G)}return!Array.isArray(K)||K.length===0?a.jsx("span",{className:"text-slate-400 italic",children:"No respondido"}):a.jsx("div",{className:"flex flex-wrap gap-1",children:K.map((G,Q)=>a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded font-medium",children:String(G)},Q))});case"select":case"radio":return a.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-800 text-sm rounded font-medium",children:String(L)});case"number":return a.jsx("span",{className:"px-3 py-1 bg-blue-50 text-blue-800 text-sm rounded font-medium",children:String(L)});case"text":case"textarea":return a.jsx("div",{className:"bg-slate-50 p-3 rounded border border-slate-200",children:a.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap",children:String(L)})});default:return a.jsx("span",{className:"text-slate-700 text-sm",children:String(L)})}},k=L=>s.filter($=>$.inspection_item_id===L),A=L=>L.media_type==="image"&&L.file_url.startsWith("data:image/")?a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:L.file_url,alt:L.file_name,className:"w-full h-32 object-cover rounded-lg border border-slate-200"}),a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all rounded-lg flex items-center justify-center",children:a.jsx(Ds,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})}),a.jsxs("div",{className:"mt-2",children:[a.jsx("p",{className:"text-xs font-medium text-slate-700 truncate",children:L.file_name}),L.description&&a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:L.description})]})]},L.id):L.media_type==="audio"?a.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Y9,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:L.file_name})]}),a.jsxs("audio",{controls:!0,className:"w-full",children:[a.jsx("source",{src:L.file_url}),"Browser no suporta reproduo de udio."]}),L.description&&a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:L.description})]},L.id):L.media_type==="video"?a.jsxs("div",{className:"border border-slate-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Fl,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:L.file_name})]}),a.jsxs("video",{controls:!0,className:"w-full max-h-48 rounded",children:[a.jsx("source",{src:L.file_url}),"Browser no suporta reproduo de vdeo."]}),L.description&&a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:L.description})]},L.id):a.jsx("div",{className:"border border-slate-200 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"p-2 bg-slate-100 rounded",children:a.jsx(Nt,{className:"w-4 h-4 text-slate-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-slate-700",children:L.file_name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[L.media_type,"  ",L.file_size?`${Math.round(L.file_size/1024)}KB`:"Tamanho desconhecido"]}),L.description&&a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:L.description})]})]})},L.id),O={totalItems:0,compliantItems:0,nonCompliantItems:0,notApplicableItems:0,unansweredItems:0,conformanceRate:0};t.forEach(L=>{if(O.totalItems++,L.compliance_status)switch(L.compliance_status){case"compliant":O.compliantItems++;break;case"non_compliant":O.nonCompliantItems++;break;case"not_applicable":O.notApplicableItems++;break;case"unanswered":default:O.unansweredItems++;break}else L.is_compliant===!0?O.compliantItems++:L.is_compliant===!1?O.nonCompliantItems++:O.unansweredItems++}),r.forEach(L=>{O.totalItems++;try{const $=JSON.parse(L.field_responses);if(L.compliance_status)switch(L.compliance_status){case"compliant":O.compliantItems++;break;case"non_compliant":O.nonCompliantItems++;break;case"not_applicable":O.notApplicableItems++;break;case"unanswered":default:O.unansweredItems++;break}else{const W=n[$.field_id];if($.field_type==="boolean")W===!0||W==="true"?O.compliantItems++:W===!1||W==="false"?O.nonCompliantItems++:O.unansweredItems++;else if($.field_type==="rating")if(W!=null&&W!==""){const P=parseInt(W);P>=4?O.compliantItems++:P<=2||P===3?O.nonCompliantItems++:O.unansweredItems++}else O.unansweredItems++;else W!=null,O.unansweredItems++}}catch($){console.error("Error processing template item:",$),O.unansweredItems++}});const T=O.compliantItems+O.nonCompliantItems;O.conformanceRate=T>0?Math.round(O.compliantItems/T*100):0;const D=()=>{window.print(),m(!1)},R=()=>{const L=encodeURIComponent(`Relatrio de Inspeo - ${e.title}`),$=encodeURIComponent(`
Ol,

Segue o relatrio da inspeo realizada:

Ttulo: ${e.title}
Local: ${e.location}
Inspetor: ${e.inspector_name}
Data: ${e.scheduled_date?new Date(e.scheduled_date).toLocaleDateString("pt-BR"):"N/A"}

Estatsticas:
- Total de Itens: ${O.totalItems}
- Conformes: ${O.compliantItems}
- No Conformes: ${O.nonCompliantItems}
- Taxa de Conformidade: ${O.conformanceRate}%

Atenciosamente,
Sistema de Inspees Compia
    `),W=`mailto:?subject=${L}&body=${$}`;window.open(W,"_blank")},I=()=>{const $=`https://wa.me/?text=${encodeURIComponent(`
 *Relatrio de Inspeo*

*Ttulo:* ${e.title}
*Local:* ${e.location}
*Inspetor:* ${e.inspector_name}
*Data:* ${e.scheduled_date?new Date(e.scheduled_date).toLocaleDateString("pt-BR"):"N/A"}

 *Estatsticas:*
 Total de Itens: ${O.totalItems}
 Conformes: ${O.compliantItems} 
 No Conformes: ${O.nonCompliantItems} 
 Taxa de Conformidade: ${O.conformanceRate}%

_Relatrio gerado pelo Sistema Compia_
    `)}`;window.open($,"_blank")};return a.jsxs("div",{className:"space-y-8",children:[h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 print:hidden",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full mx-4 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"font-heading text-xl font-bold text-slate-900",children:"Opes de Impresso"}),a.jsx("button",{onClick:()=>m(!1),className:"text-slate-500 hover:text-slate-700",children:a.jsx(ct,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"border border-slate-200 rounded-lg p-4",children:a.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b,onChange:L=>y(L.target.checked),className:"mt-1 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:"Incluir Plano de Ao Completo"}),a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Inclui todos os detalhes dos itens de ao, anlises da IA e evidncias visuais no relatrio impresso."})]})]})}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Ser impresso:"})," Resumo da inspeo, estatsticas, respostas do checklist, assinaturas digitais",b&&", plano de ao completo com todas as evidncias"]})})]}),a.jsxs("div",{className:"flex items-center gap-3 mt-6",children:[a.jsxs("button",{onClick:D,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(RS,{className:"w-4 h-4 mr-2"}),"Imprimir Agora"]}),a.jsx("button",{onClick:()=>m(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"})]})]})}),a.jsxs("div",{className:"printable-content",children:[a.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 print:hidden",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:"Resumo da Inspeo"}),a.jsx("p",{className:"text-slate-600 mt-1",children:e.title})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[a.jsx(Sv,{className:"w-4 h-4 mr-2"}),"Gerar PDF"]}),a.jsxs("button",{onClick:()=>m(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(RS,{className:"w-4 h-4 mr-2"}),"Imprimir"]})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!d),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[a.jsx(Zl,{className:"w-4 h-4 mr-2"}),"Compartilhar"]}),d&&a.jsxs("div",{className:"absolute top-full mt-2 right-0 bg-white border border-slate-200 rounded-lg shadow-lg z-10 min-w-48",children:[a.jsxs("button",{onClick:()=>{R(),u(!1)},className:"flex items-center w-full px-4 py-3 text-slate-700 hover:bg-slate-50 transition-colors",children:[a.jsx(sa,{className:"w-4 h-4 mr-3"}),"Compartilhar por E-mail"]}),a.jsxs("button",{onClick:()=>{I(),u(!1)},className:"flex items-center w-full px-4 py-3 text-slate-700 hover:bg-slate-50 transition-colors border-t border-slate-100",children:[a.jsx(LL,{className:"w-4 h-4 mr-3"}),"Compartilhar por WhatsApp"]})]})]})]})]}),a.jsx("div",{className:"hidden print:block mb-8",children:a.jsxs("div",{className:"text-center border-b-2 border-blue-600 pb-4 mb-6",children:[a.jsx("h1",{className:"font-heading text-2xl font-bold text-slate-900 mb-2",children:"RELATRIO DE INSPEO TCNICA"}),a.jsx("p",{className:"text-lg text-slate-700",children:e.title}),a.jsxs("p",{className:"text-sm text-slate-500 mt-2",children:["Gerado em ",new Date().toLocaleDateString("pt-BR")," s ",new Date().toLocaleTimeString("pt-BR")]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 print:shadow-none print:border-gray-300",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Informaes da Inspeo"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.company_name&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(lt,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Empresa"}),a.jsx("p",{className:"font-medium text-slate-900",children:e.company_name})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Na,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Local"}),a.jsx("p",{className:"font-medium text-slate-900",children:e.location})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Wr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Inspetor"}),a.jsx("p",{className:"font-medium text-slate-900",children:e.inspector_name})]})]}),e.scheduled_date&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Data da Inspeo"}),a.jsx("p",{className:"font-medium text-slate-900",children:new Date(e.scheduled_date).toLocaleDateString("pt-BR")})]})]}),e.responsible_name&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Wr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Responsvel da Empresa"}),a.jsx("p",{className:"font-medium text-slate-900",children:e.responsible_name}),e.responsible_email&&a.jsx("p",{className:"text-xs text-slate-600",children:e.responsible_email})]})]}),e.cep&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Na,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"CEP"}),a.jsx("p",{className:"font-medium text-slate-900",children:e.cep})]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-4 rounded-xl shadow-sm print:bg-blue-100 print:text-blue-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-blue-100 print:text-blue-700 text-xs font-medium",children:"Total de Itens"}),a.jsx("p",{className:"text-2xl font-bold",children:O.totalItems})]}),a.jsx(Zs,{className:"w-6 h-6 text-blue-200 print:text-blue-600"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-4 rounded-xl shadow-sm print:bg-green-100 print:text-green-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-green-100 print:text-green-700 text-xs font-medium",children:"Conformes"}),a.jsx("p",{className:"text-2xl font-bold",children:O.compliantItems})]}),a.jsx(Ct,{className:"w-6 h-6 text-green-200 print:text-green-600"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 text-white p-4 rounded-xl shadow-sm print:bg-red-100 print:text-red-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-red-100 print:text-red-700 text-xs font-medium",children:"No Conformes"}),a.jsx("p",{className:"text-2xl font-bold",children:O.nonCompliantItems})]}),a.jsx(tr,{className:"w-6 h-6 text-red-200 print:text-red-600"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-gray-500 to-gray-600 text-white p-4 rounded-xl shadow-sm print:bg-gray-100 print:text-gray-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-100 print:text-gray-700 text-xs font-medium",children:"No Aplicvel"}),a.jsx("p",{className:"text-2xl font-bold",children:O.notApplicableItems})]}),a.jsx(T7,{className:"w-6 h-6 text-gray-200 print:text-gray-600"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white p-4 rounded-xl shadow-sm print:bg-yellow-100 print:text-yellow-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-100 print:text-yellow-700 text-xs font-medium",children:"No Respondido"}),a.jsx("p",{className:"text-2xl font-bold",children:O.unansweredItems})]}),a.jsx(A7,{className:"w-6 h-6 text-yellow-200 print:text-yellow-600"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white p-4 rounded-xl shadow-sm print:bg-purple-100 print:text-purple-900",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-purple-100 print:text-purple-700 text-xs font-medium",children:"Taxa Conformidade"}),a.jsxs("p",{className:"text-2xl font-bold",children:[O.conformanceRate,"%"]})]}),a.jsx(e9,{className:"w-6 h-6 text-purple-200 print:text-purple-600"})]})})]}),r.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 print:shadow-none print:border-gray-300",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Respostas do Checklist"}),a.jsx("div",{className:"space-y-4",children:r.map((L,$)=>{try{const W=JSON.parse(L.field_responses),P=k(L.id),U=n[W.field_id],K=n[`comment_${W.field_id}`];return a.jsx("div",{className:"border border-slate-200 rounded-lg p-4 space-y-4 print:border-gray-400 print:page-break-inside-avoid",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-7 h-7 bg-blue-100 text-blue-800 text-sm font-bold rounded-full flex-shrink-0",children:$+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-900 mb-2",children:L.item_description}),a.jsxs("div",{className:"bg-slate-50 p-3 rounded border border-slate-200",children:[a.jsx("h4",{className:"text-xs font-medium text-slate-600 uppercase tracking-wide mb-2",children:"Resposta"}),j(U,W.field_type)]}),K&&a.jsxs("div",{className:"mt-3 bg-blue-50 p-3 rounded border border-blue-200",children:[a.jsxs("h4",{className:"text-xs font-medium text-blue-700 uppercase tracking-wide mb-2 flex items-center gap-1",children:[a.jsx(UL,{className:"w-3 h-3"})," Observaes"]}),a.jsx("p",{className:"text-sm text-blue-900",children:K})]}),L.ai_pre_analysis&&a.jsxs("div",{className:"mt-3 bg-emerald-50 p-3 rounded border border-emerald-200",children:[a.jsxs("h4",{className:"text-xs font-medium text-emerald-700 uppercase tracking-wide mb-2 flex items-center gap-1",children:[a.jsx(Oi,{className:"w-3 h-3"})," Anlise IA"]}),a.jsx("p",{className:"text-sm text-emerald-900",children:L.ai_pre_analysis})]}),L.ai_action_plan&&(()=>{var G;try{const Q=typeof L.ai_action_plan=="string"?JSON.parse(L.ai_action_plan):L.ai_action_plan;return!Q||!((G=Q.actions)!=null&&G.length)&&!Q.what_description?null:a.jsxs("div",{className:"mt-3 bg-purple-50 p-3 rounded border border-purple-200",children:[a.jsxs("h4",{className:"text-xs font-medium text-purple-700 uppercase tracking-wide mb-2 flex items-center gap-1",children:[a.jsx(yr,{className:"w-3 h-3"})," Ao Recomendada"]}),Q.priority&&a.jsx("div",{className:"mb-2",children:a.jsxs("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${Q.priority==="alta"||Q.priority==="critica"?"bg-red-100 text-red-800":Q.priority==="media"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Prioridade: ",Q.priority]})}),Q.what_description&&a.jsxs("div",{className:"text-sm text-purple-900",children:[a.jsx("strong",{className:"text-purple-700",children:"Ao:"})," ",Q.what_description]}),Q.summary&&a.jsxs("div",{className:"text-sm text-purple-900 mt-1",children:[a.jsx("strong",{className:"text-purple-700",children:"Resumo:"})," ",Q.summary]})]})}catch(Q){return console.error("Error parsing action plan:",Q),null}})(),b&&P.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsxs("h4",{className:"text-xs font-medium text-slate-600 uppercase tracking-wide mb-2 flex items-center gap-1",children:[a.jsx(vs,{className:"w-3 h-3"})," Evidncias (",P.length,")"]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:[P.slice(0,3).map(G=>a.jsx("div",{className:"relative",children:A(G)},G.id)),P.length>3&&a.jsxs("div",{className:"bg-slate-100 rounded-lg p-2 flex items-center justify-center text-xs text-slate-600",children:["+",P.length-3," mais"]})]})]})]})]})},L.id)}catch(W){return console.error("Error rendering template item:",W),a.jsx("div",{className:"border border-red-200 rounded-lg p-4 bg-red-50",children:a.jsxs("p",{className:"text-sm text-red-800",children:["Erro ao carregar pergunta ",$+1]})},L.id)}})})]}),t.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 print:shadow-none print:border-gray-300",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Itens Manuais"}),a.jsx("div",{className:"space-y-6",children:t.map((L,$)=>{const W=k(L.id);return a.jsxs("div",{className:"border border-slate-300 rounded-lg p-6 space-y-4 print:border-gray-400 print:page-break-inside-avoid",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-100 text-blue-800 text-sm font-semibold rounded-full",children:$+1}),a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs rounded",children:L.category})]}),a.jsx("h3",{className:"font-medium text-slate-900 ml-9",children:L.item_description})]}),a.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${L.is_compliant===!0?"bg-green-100 text-green-800":L.is_compliant===!1?"bg-red-100 text-red-800":"bg-slate-100 text-slate-800"}`,children:[L.is_compliant===!0?a.jsx(Ct,{className:"w-3 h-3"}):L.is_compliant===!1?a.jsx(tr,{className:"w-3 h-3"}):null,L.is_compliant===!0?"Conforme":L.is_compliant===!1?"No Conforme":"No Avaliado"]})]}),L.observations&&a.jsxs("div",{className:"ml-9",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-1",children:"Observaes"}),a.jsx("p",{className:"text-sm text-slate-600 pl-4 border-l-2 border-slate-200",children:L.observations})]}),b&&W.length>0&&a.jsxs("div",{className:"ml-9",children:[a.jsxs("h4",{className:"text-sm font-medium text-slate-700 mb-3 flex items-center gap-2",children:[a.jsx(vs,{className:"w-4 h-4"}),"Evidncias (",W.length,")"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(P=>A(P))})]})]},L.id)})})]}),l.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 print:shadow-none print:border-gray-300 print:page-break-inside-avoid",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(yr,{className:"w-5 h-5 text-slate-600"}),a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Plano de Ao Consolidado"}),a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:[l.length," ",l.length===1?"ao":"aes"]})]}),a.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded border border-blue-200",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Resumo:"})," Este plano consolida todas as aes necessrias para correo das no conformidades identificadas na inspeo."]})}),a.jsx("div",{className:"space-y-3",children:l.map((L,$)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50 print:page-break-inside-avoid",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-blue-600 text-white text-sm font-bold rounded-full flex-shrink-0",children:$+1}),a.jsx("h4",{className:"font-semibold text-slate-900 text-base",children:L.title})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[L.is_ai_generated&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"IA"}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${L.priority==="alta"||L.priority==="critica"?"bg-red-100 text-red-800":L.priority==="media"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:L.priority||"mdia"})]})]}),a.jsxs("div",{className:"ml-9 space-y-2",children:[L.what_description&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-red-700",children:"O que fazer:"}),a.jsx("span",{className:"text-slate-700 ml-2",children:L.what_description})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 text-sm",children:[L.who_responsible&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-purple-700",children:"Responsvel:"}),a.jsx("span",{className:"text-slate-700 ml-2",children:L.who_responsible})]}),L.when_deadline&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-orange-700",children:"Prazo:"}),a.jsx("span",{className:"text-slate-700 ml-2",children:new Date(L.when_deadline).toLocaleDateString("pt-BR")})]}),L.where_location&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-green-700",children:"Local:"}),a.jsx("span",{className:"text-slate-700 ml-2",children:L.where_location})]}),L.how_much_cost&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-700",children:"Custo:"}),a.jsx("span",{className:"text-slate-700 ml-2",children:L.how_much_cost})]})]}),L.why_reason&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-indigo-700",children:"Justificativa:"}),a.jsx("span",{className:"text-slate-700 ml-2",children:L.why_reason})]}),L.how_method&&a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"font-medium text-cyan-700",children:"Como executar:"}),a.jsx("span",{className:"text-slate-700 ml-2",children:L.how_method})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs pt-2 border-t border-slate-300",children:[a.jsxs("span",{className:`px-2 py-1 rounded-full font-medium ${L.status==="completed"?"bg-green-100 text-green-800":L.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:["Status: ",L.status==="pending"?"Pendente":L.status==="in_progress"?"Em Progresso":L.status==="completed"?"Concludo":L.status]}),L.assigned_to&&a.jsxs("span",{className:"text-slate-600",children:["Atribudo a: ",a.jsx("strong",{children:L.assigned_to})]})]})]})]},L.id))}),a.jsx("div",{className:"mt-6 p-3 bg-gray-50 rounded border border-gray-200",children:a.jsxs("p",{className:"text-xs text-gray-600",children:[a.jsx("strong",{children:"Observao:"})," Este plano de ao deve ser executado conforme os prazos estabelecidos. O acompanhamento da execuo  responsabilidade do gestor de segurana da empresa."]})})]}),b&&s.filter(L=>!L.inspection_item_id).length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 print:shadow-none print:border-gray-300",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Mdias Gerais da Inspeo"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.filter(L=>!L.inspection_item_id).map(L=>A(L))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 print:shadow-none print:border-gray-300 print:page-break-before",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(tm,{className:"w-5 h-5 text-slate-600"}),a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Assinaturas Digitais"})]}),!1,i.inspector||i.responsible?a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(GA,{signature:i.inspector,signerName:e.inspector_name,signerRole:"Inspetor Responsvel",title:"Assinatura do Inspetor"}),a.jsx(GA,{signature:i.responsible,signerName:e.responsible_name||"Responsvel Tcnico",signerRole:"Empresa",title:"Assinatura do Responsvel da Empresa"})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tm,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhuma assinatura digital disponvel"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"As assinaturas sero exibidas aps a finalizao da inspeo"})]})]}),v&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-sm border border-blue-200 p-6 print:shadow-none print:border-gray-300 print:page-break-inside-avoid",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(aO,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Acesso Digital ao Relatrio"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-1 flex flex-col items-center justify-center space-y-4",children:[a.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-slate-200",children:a.jsx("img",{src:v,alt:"QR Code do Relatrio",className:"w-32 h-32"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm font-medium text-slate-700 mb-1",children:"Escaneie para acessar online"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Use a cmera do celular"})]})]}),a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[a.jsxs("h3",{className:"font-semibold text-slate-900 mb-3 flex items-center gap-2",children:[a.jsx(j9,{className:"w-4 h-4 text-blue-600"}),"Recursos do Relatrio Digital"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-slate-600",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Visualizao interativa de todas as evidncias"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"Coordenadas GPS clicveis para navegao"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),"Reproduo de udios e vdeos anexados"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}),"Anlises detalhadas da IA com planos de ao"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-red-500 rounded-full"}),"Assinaturas digitais verificveis"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200",children:[a.jsxs("h3",{className:"font-semibold text-slate-900 mb-2 flex items-center gap-2",children:[a.jsx(Su,{className:"w-4 h-4 text-green-600"}),"Link de Compartilhamento"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:N,readOnly:!0,className:"flex-1 text-xs bg-slate-50 border border-slate-200 rounded px-2 py-1 text-slate-600"}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText(N),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:"Copiar"})]})]})]})]})]}),a.jsxs("div",{className:"hidden print:block mt-8 pt-4 border-t border-gray-300 text-center text-xs text-gray-500",children:[v&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Acesse o Relatrio Digital"}),a.jsx("img",{src:v,alt:"QR Code do Relatrio",className:"w-24 h-24 mx-auto border border-gray-300 p-1 rounded"}),a.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"Escaneie este cdigo para acessar a verso digital completa"})]}),a.jsxs("p",{children:["Relatrio gerado automaticamente pelo Sistema IA SST Inspections em ",new Date().toLocaleDateString("pt-BR")," s ",new Date().toLocaleTimeString("pt-BR")]}),a.jsx("p",{className:"mt-1",children:"Este documento possui validade legal conforme legislao vigente"}),e.latitude&&e.longitude&&a.jsxs("p",{className:"mt-2 text-xs",children:[a.jsx("strong",{children:"Localizao GPS:"})," ",a.jsxs("a",{href:`https://www.google.com/maps/search/?api=1&query=${e.latitude},${e.longitude}`,className:"text-blue-600 underline",children:[e.latitude.toFixed(6),", ",e.longitude.toFixed(6)]})]})]}),a.jsx(XP,{inspection:e,items:t,templateItems:r,media:s,responses:n,signatures:i,isOpen:p,onClose:()=>x(!1),qrCodeDataUrl:v,shareLink:N,actionItems:l})]})]})}function Tae({inspectionId:e,inspectionTitle:t,isOpen:r,onClose:s}){const[n,i]=_.useState([]),[l,d]=_.useState(!1),[u,h]=_.useState(!1),[m,p]=_.useState(""),[x,b]=_.useState(""),[y,v]=_.useState(!1),[w,N]=_.useState({permission:"view",expires_in_days:30});_.useEffect(()=>{r&&S()},[r,e]);const S=async()=>{d(!0);try{const I=await fetch(`/api/inspections/${e}/shares`);if(I.ok){const L=await I.json();i(L.shares||[])}}catch(I){console.error("Error fetching shares:",I)}finally{d(!1)}},j=async()=>{h(!0);try{const I=await fetch(`/api/inspections/${e}/share`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(I.ok){const L=await I.json();p(L.qr_code),b(L.share_url),v(!0),await S()}else throw new Error("Erro ao criar compartilhamento")}catch(I){console.error("Error creating share:",I),alert("Erro ao criar compartilhamento. Tente novamente.")}finally{h(!1)}},k=async I=>{try{if((await fetch(`/api/inspection-shares/${I}`,{method:"DELETE"})).ok)await S(),alert("Compartilhamento removido com sucesso!");else throw new Error("Erro ao remover compartilhamento")}catch(L){console.error("Error deleting share:",L),alert("Erro ao remover compartilhamento. Tente novamente.")}},A=async I=>{try{await navigator.clipboard.writeText(I),alert("Link copiado para a rea de transferncia!")}catch(L){console.error("Error copying to clipboard:",L);const $=document.createElement("textarea");$.value=I,document.body.appendChild($),$.focus(),$.select(),document.execCommand("copy"),document.body.removeChild($),alert("Link copiado para a rea de transferncia!")}},O=()=>{if(!m)return;const I=document.createElement("a");I.download=`qr-code-${t.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.png`,I.href=m,I.click()},T=I=>I==="edit"?"Editar":"Visualizar",D=I=>I==="edit"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800",R=I=>I?new Date(I)<new Date:!1;return r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",style:{zIndex:9998},children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Zl,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-heading text-xl font-bold text-slate-900",children:"Compartilhar Inspeo"}),a.jsx("p",{className:"text-slate-600 text-sm",children:t})]})]}),a.jsx("button",{onClick:s,className:"text-slate-500 hover:text-slate-700",children:a.jsx(ct,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-slate-50 rounded-lg p-6",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-4",children:"Criar Novo Compartilhamento"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Permisso"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-slate-50",children:[a.jsx("input",{type:"radio",name:"permission",value:"view",checked:w.permission==="view",onChange:I=>N({...w,permission:I.target.value}),className:"mr-3"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ds,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"font-medium text-slate-900",children:"Visualizar"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Apenas visualizao"})]})]}),a.jsxs("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-slate-50",children:[a.jsx("input",{type:"radio",name:"permission",value:"edit",checked:w.permission==="edit",onChange:I=>N({...w,permission:I.target.value}),className:"mr-3"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ha,{className:"w-4 h-4 text-blue-600"}),a.jsx("span",{className:"font-medium text-slate-900",children:"Editar"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Pode editar respostas"})]})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Validade"}),a.jsxs("select",{value:w.expires_in_days,onChange:I=>N({...w,expires_in_days:parseInt(I.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:1,children:"1 dia"}),a.jsx("option",{value:7,children:"7 dias"}),a.jsx("option",{value:30,children:"30 dias"}),a.jsx("option",{value:90,children:"90 dias"}),a.jsx("option",{value:365,children:"1 ano"})]})]}),a.jsxs("button",{onClick:j,disabled:u,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[u?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(aO,{className:"w-4 h-4 mr-2"}),u?"Criando...":"Gerar Link e QR Code"]})]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"font-semibold text-slate-900",children:["Links Compartilhados (",n.length,")"]}),l?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):n.length===0?a.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-lg",children:[a.jsx(AL,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500",children:"Nenhum link compartilhado ainda"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Crie um novo compartilhamento para comear"})]}):a.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:n.map(I=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${D(I.permission)}`,children:[I.permission==="edit"?a.jsx(Ha,{className:"w-3 h-3 mr-1"}):a.jsx(Ds,{className:"w-3 h-3 mr-1"}),T(I.permission)]}),R(I.expires_at)&&a.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Expirado"})]}),a.jsx("button",{onClick:()=>k(I.id),className:"p-1 text-slate-400 hover:text-red-600 transition-colors",title:"Remover compartilhamento",children:a.jsx(rr,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"w-4 h-4"}),a.jsxs("span",{children:[I.access_count," acessos"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsxs("span",{children:["Criado em ",new Date(I.created_at).toLocaleDateString("pt-BR")]})]}),I.expires_at&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gr,{className:"w-4 h-4"}),a.jsxs("span",{children:["Expira em ",new Date(I.expires_at).toLocaleDateString("pt-BR")]})]})]}),a.jsx("div",{className:"mt-3 flex items-center gap-2",children:a.jsxs("button",{onClick:()=>A(`${window.location.origin}/shared/${I.share_token}`),className:"flex items-center px-3 py-2 text-sm bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[a.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Copiar Link"]})})]},I.id))})]})]})]})})}),y&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",style:{zIndex:9999},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"font-heading text-lg font-bold text-slate-900",children:"QR Code Gerado"}),a.jsx("button",{onClick:()=>v(!1),className:"text-slate-500 hover:text-slate-700",children:a.jsx(ct,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"inline-block p-4 bg-white border-2 border-slate-200 rounded-lg",children:a.jsx("img",{src:m,alt:"QR Code",className:"w-48 h-48"})}),a.jsx("div",{className:"p-3 bg-slate-50 rounded-lg",children:a.jsx("p",{className:"text-sm text-slate-600 break-all",children:x})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>A(x),className:"flex-1 flex items-center justify-center px-4 py-2 bg-slate-100 text-slate-700 rounded-lg hover:bg-slate-200 transition-colors",children:[a.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Copiar Link"]}),a.jsxs("button",{onClick:O,className:"flex-1 flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Baixar QR"]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-green-600",children:[a.jsx(Ct,{className:"w-4 h-4"}),a.jsx("span",{children:"Link criado com sucesso!"})]})]})]})})]}):null}function $d({size:e="md",text:t,overlay:r=!1}){const s=()=>{switch(e){case"sm":return"w-4 h-4";case"md":return"w-6 h-6";case"lg":return"w-8 h-8"}},n=a.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[a.jsx(It,{className:`animate-spin text-blue-600 ${s()}`}),t&&a.jsx("p",{className:"text-sm text-slate-600 font-medium",children:t})]});return r?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:n})}):n}function Pae(){const{id:e}=$i(),t=na(),{success:r,error:s,warning:n}=Yy(),[i,l]=_.useState(null),[d,u]=_.useState([]),[h,m]=_.useState([]),[p,x]=_.useState([]),[b,y]=_.useState(!0),[v,w]=_.useState(!1),[N,S]=_.useState(!1),[j,k]=_.useState(null),[A,O]=_.useState([]),[T,D]=_.useState(!1),[R,I]=_.useState(!1),[L,$]=_.useState(!1),[W,P]=_.useState(!1),[U,K]=_.useState({}),[G,Q]=_.useState({}),[le,H]=_.useState({category:"",item_description:"",is_compliant:null,observations:""}),[V,B]=_.useState(!1),[ne,ie]=_.useState({title:"",what_description:"",where_location:"",why_reason:"",how_method:"",who_responsible:"",when_deadline:"",how_much_cost:"",status:"pending",priority:"media"}),[ee,Z]=_.useState(!1);_.useEffect(()=>{e&&e!=="undefined"?re():(console.warn("[InspectionDetail] Invalid inspection ID:",e),y(!1),t("/inspections"))},[e]);const re=async()=>{try{const te=await Fe(`/api/inspections/${e}`);if(te.ok){const oe=await te.json();l(oe.inspection);const be=oe.items||[],ke=be.filter(Re=>!Re.template_id),we=be.filter(Re=>Re.template_id);if(console.log("[DEBUG_FE] All Items:",be.length,be),console.log("[DEBUG_FE] Manual Items:",ke.length),console.log("[DEBUG_FE] Template Items:",we.length),we.length>0&&(console.log("[DEBUG_FE] First Template Item:",we[0]),we[0].item_description&&console.log("[DEBUG_FE] First Item Description:",we[0].item_description)),u(ke),m(we),x(oe.media||[]),oe.inspection.action_plan)try{k(JSON.parse(oe.inspection.action_plan))}catch(Re){console.error("Error parsing action plan:",Re)}try{const Re=await Fe(`/api/inspections/${e}/action-items`);if(Re.ok){const Qe=await Re.json(),gt=Array.isArray(Qe)?Qe:Qe.action_items||[];O(gt),console.log(`[ACTION-ITEMS] Loaded ${gt.length} action items for inspection ${e}`)}}catch(Re){console.error("Error loading action items:",Re)}console.log("Loading signatures for inspection:",e);const Pe=await Fe(`/api/inspections/${e}/signatures?_t=${Date.now()}`);if(Pe.ok){const Re=await Pe.json();console.log("Signatures loaded from API:",{inspector:Re.inspector_signature?"Present":"Missing",responsible:Re.responsible_signature?"Present":"Missing",responsible_name:Re.responsible_name||"(sem nome)"}),K({inspector:Re.inspector_signature,responsible:Re.responsible_signature})}else console.error("Failed to load signatures:",Pe.status);const Ge=we.reduce((Re,Qe)=>{if(Qe.field_responses)try{const gt=JSON.parse(Qe.field_responses);let he=gt.response_value;if(he==null)switch(gt.field_type){case"boolean":he=null;break;case"multiselect":he=[];break;case"select":case"radio":he="";break;case"number":case"rating":he=null;break;case"text":case"textarea":he="";break;default:he=null}else if(gt.field_type==="boolean")typeof he=="string"?he=he.toLowerCase()==="true"||he==="1":typeof he=="number"&&(he=he===1);else if(gt.field_type==="multiselect")if(typeof he=="string")try{const Oe=JSON.parse(he);Array.isArray(Oe)?he=Oe:he=he.split(",").map(Me=>Me.trim()).filter(Me=>Me)}catch{he=he.split(",").map(Oe=>Oe.trim()).filter(Oe=>Oe)}else Array.isArray(he)||(he=[]);else if(gt.field_type==="number"||gt.field_type==="rating"){if(typeof he=="string"){const Oe=parseFloat(he);he=isNaN(Oe)?null:Oe}}else if(typeof he=="string"&&he!=="")try{const Oe=JSON.parse(he);(typeof Oe=="boolean"||typeof Oe=="number"||Array.isArray(Oe))&&(he=Oe)}catch{}Re[gt.field_id]=he,gt.comment&&(Re[`comment_${gt.field_id}`]=gt.comment)}catch(gt){console.error("[TEMPLATE-RESPONSE] Error parsing field response:",gt,"item:",Qe)}return Re},{});Q(Ge)}}catch(te){console.error("Erro ao carregar detalhes:",te)}finally{y(!1)}},J=async(te,oe=!1)=>{if(confirm("Tem certeza que deseja excluir este item? "+(oe?"Isso remover a pergunta do relatrio.":"")))try{if(!(await Fe(`/api/inspection-items/${te}`,{method:"DELETE"})).ok)throw new Error("Falha ao excluir item");u(ke=>ke.filter(we=>we.id!==te)),m(ke=>ke.filter(we=>we.id!==te)),Q(ke=>({...ke}))}catch(be){console.error("Error deleting item:",be),alert("Erro ao excluir item: "+(be instanceof Error?be.message:String(be)))}},F=async()=>{Z(!0);try{(await Fe(`/api/inspections/${e}/items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...le,inspection_id:parseInt(e)})})).ok?(H({category:"",item_description:"",is_compliant:null,observations:""}),w(!1),r("Item adicionado","Item foi adicionado com sucesso ao checklist"),re()):s("Erro ao adicionar item","No foi possvel adicionar o item. Tente novamente.")}catch(te){console.error("Erro ao adicionar item:",te),s("Erro ao adicionar item","Ocorreu um erro inesperado. Tente novamente.")}finally{Z(!1)}},de=async(te,oe)=>{try{const be=d.find(ke=>ke.id===te);if(!be)return;await Fe(`/api/inspection-items/${te}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...be,is_compliant:oe})}),re()}catch(be){console.error("Erro ao atualizar item:",be)}},_e=async te=>{Z(!0);try{const oe={};if(te.forEach(we=>{const Pe=h.find(Ge=>{try{return JSON.parse(Ge.field_responses).field_id===we.field_id}catch{return!1}});if(Pe!=null&&Pe.id)try{const Ge=JSON.parse(Pe.field_responses);Ge.response_value=we.value,oe[Pe.id]=Ge}catch(Ge){console.error("Error preparing field data:",Ge)}}),!(await Fe(`/api/inspections/${e}/template-responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:oe})})).ok)throw new Error("Erro ao salvar respostas");const ke=te.reduce((we,Pe)=>(we[Pe.field_id]=Pe.value,we),{});Q(we=>({...we,...ke})),r("Respostas salvas","Respostas do checklist foram salvas com sucesso!")}catch(oe){console.error("Erro ao salvar respostas:",oe),s("Erro ao salvar respostas","No foi possvel salvar as respostas. Tente novamente.")}finally{Z(!1)}},se=async(te,oe)=>{if(console.log(`Signature saved for ${te}:`,oe?`Data length: ${oe.length}`:"No signature data"),oe&&oe.length>0){K(be=>{const ke={...be,[te]:oe};return console.log("Updated signatures state:",{inspector:ke.inspector?"Present":"Missing",responsible:ke.responsible?"Present":"Missing"}),ke}),r("Assinatura salva",`Assinatura do ${te==="inspector"?"inspetor":"responsvel"} foi capturada com sucesso`);try{const be=await Fe(`/api/inspections/${e}/signatures`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inspector_signature:te==="inspector"?oe:U.inspector,responsible_signature:te==="responsible"?oe:U.responsible})});be.ok||console.error("Failed to save signature to database:",be.status)}catch(be){console.error("Error saving signature to database:",be)}}else s("Erro na assinatura","No foi possvel capturar a assinatura. Tente novamente.")},Te=async()=>{const te=U.inspector&&U.inspector.trim()!=="",oe=U.responsible&&U.responsible.trim()!=="";if(!te||!oe){const be=[];te||be.push("inspetor"),oe||be.push("responsvel"),n("Assinaturas obrigatrias",` necessrio ter a(s) assinatura(s) do(s) ${be.join(" e ")} para finalizar a inspeo. Por favor, desenhe as assinaturas nos campos correspondentes.`);return}Z(!0);try{console.log("Finalizing inspection with signatures:",{inspector:te?`Present (${U.inspector.length} chars)`:"Missing",responsible:oe?`Present (${U.responsible.length} chars)`:"Missing"});const be=await Fe(`/api/inspections/${e}/signatures`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inspector_signature:U.inspector,responsible_signature:U.responsible,responsible_name:i==null?void 0:i.responsible_name,responsible_email:i==null?void 0:i.responsible_email})});if(!be.ok){const we=await be.text();throw console.error("Failed to save signatures:",be.status,we),new Error("Erro ao salvar assinaturas")}const ke=await Fe(`/api/inspections/${e}/finalize`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inspector_signature:U.inspector,responsible_signature:U.responsible,responsible_name:i==null?void 0:i.responsible_name,responsible_email:i==null?void 0:i.responsible_email})});if(!ke.ok){const we=await ke.text();throw console.error("Failed to finalize inspection:",ke.status,we),new Error("Erro ao finalizar inspeo")}console.log("Inspection finalized successfully"),r("Inspeo finalizada","Inspeo foi finalizada com sucesso! As assinaturas foram salvas."),D(!1),I(!0);try{const we=await Fe(`/api/inspections/${e}/signatures?_t=${Date.now()}`);if(we.ok){const Pe=await we.json();K(Pe),console.log("Updated signatures after finalization:",Pe)}}catch(we){console.error("Failed to refresh signatures cache:",we)}await re()}catch(be){console.error("Erro ao finalizar inspeo:",be),s("Erro ao finalizar inspeo",be instanceof Error?be.message:"No foi possvel finalizar a inspeo. Tente novamente.")}finally{Z(!1)}},M=te=>{x(oe=>[te,...oe])},xe=te=>{x(oe=>oe.filter(be=>be.id!==te))},pe=async()=>{if(!ne.title.trim()){s("Ttulo obrigatrio","Por favor, informe o ttulo da ao");return}Z(!0);try{const te=await Fe(`/api/inspections/${e}/action-items`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...ne,inspection_id:parseInt(e)})});if(te.ok)ie({title:"",what_description:"",where_location:"",why_reason:"",how_method:"",who_responsible:"",when_deadline:"",how_much_cost:"",status:"pending",priority:"media"}),B(!1),r("Ao criada","Ao manual foi criada com sucesso!"),await re();else{const oe=await te.json();throw new Error(oe.error||"Erro ao criar ao")}}catch(te){console.error("Erro ao criar ao:",te),s("Erro ao criar ao",te instanceof Error?te.message:"No foi possvel criar a ao. Tente novamente.")}finally{Z(!1)}},X=async()=>{if(i){S(!0);try{const te=d.filter(ke=>ke.is_compliant===!1).map(ke=>`${ke.category}: ${ke.item_description}${ke.observations?` (${ke.observations})`:""}`);if(te.length===0){n("Anlise IA no disponvel","Nenhum item no conforme encontrado para anlise");return}const oe=p.map(ke=>ke.file_url),be=await Fe(`/api/inspections/${e}/ai-analysis`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inspection_id:parseInt(e),media_urls:oe,inspection_context:`Inspeo: ${i.title} - Local: ${i.location} - Empresa: ${i.company_name||"N/A"}`,non_compliant_items:te})});if(be.ok){const ke=await be.json();k(ke.action_plan),r("Plano de ao gerado","Anlise da IA foi concluda e plano de ao foi gerado!"),await re()}else throw new Error("Erro na anlise de IA")}catch(te){console.error("Erro ao gerar anlise:",te),s("Erro na anlise IA","No foi possvel gerar a anlise. Verifique se h itens no conformes.")}finally{S(!1)}}},Y=te=>{switch(te){case"pendente":return a.jsx(wr,{className:"w-5 h-5 text-yellow-500"});case"em_andamento":return a.jsx(Nt,{className:"w-5 h-5 text-blue-500"});case"concluida":return a.jsx(Ct,{className:"w-5 h-5 text-green-500"});case"cancelada":return a.jsx(tr,{className:"w-5 h-5 text-red-500"});default:return a.jsx(wr,{className:"w-5 h-5 text-gray-500"})}},ue=te=>{switch(te){case"pendente":return"Pendente";case"em_andamento":return"Em Andamento";case"concluida":return"Concluda";case"cancelada":return"Cancelada";default:return te}},Ee=te=>{switch(te){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-orange-100 text-orange-800";case"critica":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return b?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx($d,{size:"lg",text:"Carregando detalhes da inspeo..."})})}):i?R&&i.status==="concluida"?a.jsx(Je,{children:a.jsx(Oae,{inspection:i,items:d,templateItems:h,media:p,responses:G,signatures:U,actionItems:A})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>t("/inspections"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:i.title}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Detalhes da inspeo"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full ${Ee(i.priority)}`,children:i.priority.charAt(0).toUpperCase()+i.priority.slice(1)}),a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-50 rounded-lg",children:[Y(i.status),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:ue(i.status)})]}),i.status==="concluida"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>P(!0),className:"p-2 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Gerar PDF",children:a.jsx(jr,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>I(!0),className:"p-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver Resumo",children:a.jsx(Ds,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>$(!0),className:"p-2 text-slate-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Compartilhar",children:a.jsx(Zl,{className:"w-5 h-5"})})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>$(!0),className:"p-2 text-slate-600 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Compartilhar",children:a.jsx(Zl,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>D(!0),className:"flex items-center px-4 py-2 bg-slate-900 text-white font-medium rounded-lg hover:bg-slate-800 transition-all shadow-sm",children:[a.jsx(tm,{className:"w-4 h-4 mr-2"}),"Finalizar Inspeo"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-100 p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.company_name&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(lt,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Empresa"}),a.jsx("p",{className:"font-medium text-slate-900",children:i.company_name})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Na,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Local"}),a.jsx("p",{className:"font-medium text-slate-900",children:i.location}),i.address&&a.jsx("p",{className:"text-sm text-slate-500",children:i.address})]})]}),i.latitude&&i.longitude&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ky,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Coordenadas GPS"}),a.jsxs("p",{className:"font-medium text-slate-900 text-xs",children:[i.latitude.toFixed(6),", ",i.longitude.toFixed(6)]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Wr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Inspetor"}),a.jsx("p",{className:"font-medium text-slate-900",children:i.inspector_name}),i.inspector_email&&a.jsx("p",{className:"text-sm text-slate-500",children:i.inspector_email})]})]}),i.scheduled_date&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Data Agendada"}),a.jsx("p",{className:"font-medium text-slate-900",children:new Date(i.scheduled_date).toLocaleDateString("pt-BR")})]})]}),i.cep&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Na,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"CEP"}),a.jsx("p",{className:"font-medium text-slate-900",children:i.cep})]})]})]}),i.description&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[a.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Descrio"}),a.jsx("p",{className:"text-slate-700",children:i.description})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Checklist de Inspeo"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 w-full sm:w-auto",children:[a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs(vt,{to:`/inspections/${e}/action-plan`,className:"flex-1 sm:flex-none flex items-center justify-center px-4 py-2 bg-white text-purple-700 border border-purple-200 text-sm font-medium rounded-lg hover:bg-purple-50 transition-colors shadow-sm",title:"Visualizar todas as aes geradas ou criadas manualmente",children:[a.jsx(yr,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Ver Plano de Ao"}),a.jsx("span",{className:"sm:hidden",children:"Ao"})]}),a.jsxs("button",{onClick:X,disabled:N||ee,className:"flex-1 sm:flex-none flex items-center justify-center px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-sm font-medium rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-sm",title:"Gera anlise automtica (5W2H) para todos os itens no conformes",children:[N?a.jsx($d,{size:"sm"}):a.jsx(Po,{className:"w-4 h-4 mr-2"}),N?"Analisando...":a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"hidden sm:inline",children:"Gerar Anlises (IA)"}),a.jsx("span",{className:"sm:hidden",children:"IA"})]})]})]}),a.jsx("div",{className:"h-6 w-px bg-slate-200 hidden sm:block"}),a.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:()=>B(!0),className:"flex-1 sm:flex-none flex items-center justify-center px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors shadow-sm",title:"Criar uma ao manual",children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"hidden sm:inline",children:"Nova Ao"}),a.jsx("span",{className:"sm:hidden",children:"Ao"})]}),a.jsxs("button",{onClick:()=>w(!0),className:"flex-1 sm:flex-none flex items-center justify-center px-3 py-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 text-sm font-medium rounded-lg transition-colors",title:"Adicionar Item ao Checklist",children:[a.jsx(Kr,{className:"w-4 h-4 mr-2 sm:mr-0"}),a.jsx("span",{className:"sm:hidden",children:"Add Item"})]})]})]})]}),V&&a.jsxs("div",{className:"mb-6 p-4 bg-orange-50 rounded-lg border border-orange-200",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Nova Ao Manual"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ttulo da Ao *"}),a.jsx("input",{type:"text",required:!0,value:ne.title,onChange:te=>ie({...ne,title:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Ex: Instalar equipamento de proteo"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-red-600",children:"O que?"})," (Descrio)"]}),a.jsx("textarea",{value:ne.what_description,onChange:te=>ie({...ne,what_description:te.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"O que precisa ser feito..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-green-600",children:"Onde?"})," (Local)"]}),a.jsx("input",{type:"text",value:ne.where_location,onChange:te=>ie({...ne,where_location:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Local especfico..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-blue-600",children:"Por que?"})," (Justificativa)"]}),a.jsx("textarea",{value:ne.why_reason,onChange:te=>ie({...ne,why_reason:te.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Justificativa da ao..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-indigo-600",children:"Como?"})," (Mtodo)"]}),a.jsx("textarea",{value:ne.how_method,onChange:te=>ie({...ne,how_method:te.target.value}),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Como ser executado..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-purple-600",children:"Quem?"})," (Responsvel)"]}),a.jsx("input",{type:"text",value:ne.who_responsible,onChange:te=>ie({...ne,who_responsible:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Responsvel pela execuo..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-yellow-600",children:"Quando?"})," (Prazo)"]}),a.jsx("input",{type:"date",value:ne.when_deadline,onChange:te=>ie({...ne,when_deadline:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Prioridade"}),a.jsxs("select",{value:ne.priority,onChange:te=>ie({...ne,priority:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[a.jsx("option",{value:"baixa",children:"Baixa"}),a.jsx("option",{value:"media",children:"Mdia"}),a.jsx("option",{value:"alta",children:"Alta"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-orange-600",children:"Quanto?"})," (Custo estimado)"]}),a.jsx("input",{type:"text",value:ne.how_much_cost,onChange:te=>ie({...ne,how_much_cost:te.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Estimativa de custo..."})]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[a.jsx("button",{onClick:pe,disabled:!ne.title||ee,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ee?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($d,{size:"sm"}),"Criando..."]}):"Criar Ao"}),a.jsx("button",{onClick:()=>B(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancelar"})]})]}),v&&a.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Categoria (ex: EPIs, Equipamentos)",value:le.category,onChange:te=>H({...le,category:te.target.value}),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("input",{type:"text",placeholder:"Descrio do item",value:le.item_description,onChange:te=>H({...le,item_description:te.target.value}),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("textarea",{placeholder:"Observaes (opcional)",value:le.observations,onChange:te=>H({...le,observations:te.target.value}),className:"w-full mt-4 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:2}),a.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[a.jsx("button",{onClick:F,disabled:!le.category||!le.item_description||ee,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ee?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx($d,{size:"sm"}),"Adicionando..."]}):"Adicionar"}),a.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50",children:"Cancelar"})]})]}),h.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Checklist do Template"}),a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 mb-4",children:a.jsx(Qj,{fields:h.map((te,oe)=>{const be=JSON.parse(te.field_responses);return{id:be.field_id,field_name:te.item_description||be.field_name,field_type:be.field_type,is_required:be.is_required||!1,options:be.options||null,order_index:oe,template_id:te.template_id,compliance_enabled:be.compliance_enabled??!0,compliance_mode:be.compliance_mode??"auto",compliance_config:be.compliance_config}}),onSubmit:_e,initialValues:G,readonly:!1,inspectionId:parseInt(e),inspectionItems:h,showComplianceSelector:(i==null?void 0:i.compliance_enabled)!==!1,onAutoSave:async(te,oe)=>{if(!ee)try{const be={};if(Object.entries(te).forEach(([we,Pe])=>{const Ge=h.find(Re=>{try{return JSON.parse(Re.field_responses).field_id===parseInt(we)}catch{return!1}});if(Ge!=null&&Ge.id){const Re=oe[parseInt(we)]||"";try{const Qe=JSON.parse(Ge.field_responses);Qe.response_value=Pe,Qe.comment=Re,be[Ge.id]=Qe}catch(Qe){console.error("[AUTO-SAVE] Error updating field data:",Qe)}}}),Object.keys(be).length===0)return;const ke=await fetch(`/api/inspections/${e}/template-responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:be})});if(ke.ok)Q(we=>({...we,...te}));else{console.error("[AUTO-SAVE] Failed to save responses:",ke.status);const we=await ke.text();console.error("[AUTO-SAVE] Error details:",we)}}catch(be){console.error("[AUTO-SAVE] Error during auto-save:",be)}}})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900",children:"Itens Manuais"}),d.length===0&&h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Nt,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhum item de checklist adicionado"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Adicione itens para comear a inspeo"})]}):d.length===0?a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-slate-500 text-sm",children:"Nenhum item manual adicionado"})}):d.map(te=>a.jsxs("div",{className:"flex items-start gap-4 p-4 border border-slate-200 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs rounded",children:te.category})}),a.jsx("p",{className:"font-medium text-slate-900 mb-1",children:te.item_description}),te.observations&&a.jsx("p",{className:"text-sm text-slate-600",children:te.observations})]}),a.jsx("div",{className:"flex items-center gap-2",children:te.is_compliant===null?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>de(te.id,!0),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Marcar como conforme",children:a.jsx(Ba,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>de(te.id,!1),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Marcar como no conforme",children:a.jsx(ct,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>te.id&&J(te.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir item",children:a.jsx(rr,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg ${te.is_compliant?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[te.is_compliant?a.jsx(Ct,{className:"w-4 h-4"}):a.jsx(tr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:te.is_compliant?"Conforme":"No Conforme"})]})})]},te.id))]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(vs,{className:"w-5 h-5 text-slate-600"}),a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Mdias da Inspeo"})]}),a.jsx(Aae,{inspectionId:parseInt(e),onMediaUploaded:M,existingMedia:p,onMediaDeleted:xe,inspectionTitle:i.title})]}),A.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(yr,{className:"w-5 h-5 text-slate-600"}),a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Itens de Ao"}),a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:[A.length," ",A.length===1?"item":"itens"]})]}),a.jsx("div",{className:"space-y-4",children:A.map((te,oe)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("h4",{className:"font-medium text-slate-900",children:[oe+1,". ",te.title]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${te.priority==="alta"||te.priority==="critica"?"bg-red-100 text-red-800":te.priority==="media"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:te.priority}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${te.status==="completed"?"bg-green-100 text-green-800":te.status==="in_progress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:te.status==="pending"?"Pendente":te.status==="in_progress"?"Em Progresso":te.status==="completed"?"Concludo":te.status})]})]}),te.is_ai_generated&&a.jsxs("div",{className:"mb-3 flex items-center gap-1 text-xs text-purple-600",children:[a.jsx(Oi,{className:"w-3 h-3"}),a.jsx("span",{children:"Gerado por IA"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[te.what_description&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-red-600",children:"O que:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:te.what_description})]}),te.where_location&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-green-600",children:"Onde:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:te.where_location})]}),te.why_reason&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-blue-600",children:"Por que:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:te.why_reason})]}),te.how_method&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-indigo-600",children:"Como:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:te.how_method})]}),te.who_responsible&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-purple-600",children:"Quem:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:te.who_responsible})]}),te.when_deadline&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-yellow-600",children:"Quando:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:new Date(te.when_deadline).toLocaleDateString("pt-BR")})]}),te.how_much_cost&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("span",{className:"font-medium text-orange-600",children:"Quanto:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:te.how_much_cost})]})]})]},te.id))})]}),j&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(jr,{className:"w-5 h-5 text-slate-600"}),a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Plano de Ao 5W2H"}),a.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${j.priority_level==="alta"?"bg-red-100 text-red-800":j.priority_level==="media"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:["Prioridade ",j.priority_level]})]}),j.summary&&a.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Resumo Executivo"}),a.jsx("p",{className:"text-blue-800 text-sm",children:j.summary}),j.estimated_completion&&a.jsxs("p",{className:"text-blue-700 text-sm mt-2",children:[a.jsx("strong",{children:"Concluso Estimada:"})," ",j.estimated_completion]})]}),a.jsx("div",{className:"space-y-4",children:j.actions&&j.actions.map((te,oe)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-medium text-slate-900 mb-3",children:[oe+1,". ",te.item]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-red-600",children:"O que (What):"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:te.what})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Por que (Why):"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:te.why})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-green-600",children:"Onde (Where):"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:te.where})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-yellow-600",children:"Quando (When):"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:te.when})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-purple-600",children:"Quem (Who):"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:te.who})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:"Como (How):"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:te.how})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Quanto (How Much):"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:te.how_much})]})]})]},oe))})]}),T&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-[95vh] overflow-y-auto",children:a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[a.jsx("h2",{className:"font-heading text-xl sm:text-2xl font-bold text-slate-900",children:"Finalizar Inspeo"}),a.jsx("button",{onClick:()=>D(!1),className:"text-slate-500 hover:text-slate-700 p-1",children:a.jsx(ct,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),a.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[!1,a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6",children:[a.jsx(VA,{onSignatureSaved:te=>se("inspector",te),existingSignature:U.inspector,signerName:i.inspector_name,signerRole:"Inspetor Responsvel"}),a.jsx(VA,{onSignatureSaved:te=>se("responsible",te),existingSignature:U.responsible,signerName:i.responsible_name||"Responsvel Tcnico",signerRole:"Empresa"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center justify-end gap-3 sm:gap-4 pt-4 sm:pt-6 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors order-2 sm:order-1",children:"Cancelar"}),a.jsx("button",{onClick:Te,disabled:!U.inspector||!U.responsible||ee,className:"flex items-center justify-center px-6 py-3 sm:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors order-1 sm:order-2",children:ee?a.jsxs(a.Fragment,{children:[a.jsx($d,{size:"sm"}),a.jsx("span",{className:"ml-2",children:"Finalizando..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(To,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Finalizar Inspeo"})]})})]})]})]})})}),a.jsx(Tae,{inspectionId:parseInt(e),inspectionTitle:i.title,isOpen:L,onClose:()=>$(!1)}),a.jsx(XP,{inspection:i,items:d,templateItems:h,media:p,responses:G,signatures:U,isOpen:W,onClose:()=>P(!1),actionItems:A,organizationLogoUrl:void 0,parentOrganizationLogoUrl:void 0,organizationName:i.company_name||"Organizao",parentOrganizationName:"Matriz"})]})}):a.jsx(Je,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(tr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Inspeo no encontrada"}),a.jsx(vt,{to:"/inspections",className:"text-blue-600 hover:underline",children:"Voltar para inspees"})]})})}function Rae(){const[e,t]=_.useState({total:0,pending:0,inProgress:0,completed:0}),[r,s]=_.useState(!0);return _.useEffect(()=>{fetch("/api/dashboard/stats").then(n=>n.json()).then(n=>{t(n),s(!1)}).catch(n=>{console.error("Erro ao carregar estatsticas:",n),s(!1)})},[]),r?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-2xl font-bold text-slate-900",children:"Relatrios"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Anlise e mtricas das inspees de segurana"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{className:"flex items-center px-3 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm",children:[a.jsx(tp,{className:"w-4 h-4 mr-1"}),"Filtros"]}),a.jsxs("button",{className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[a.jsx(Fa,{className:"w-4 h-4 mr-1"}),"Exportar"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx(hr,{title:"Total de Inspees",value:e.total,icon:tu,color:"blue",trend:{value:"12% vs ms anterior",isPositive:!0}}),a.jsx(hr,{title:"Pendentes",value:e.pending,icon:Nt,color:"yellow"}),a.jsx(hr,{title:"Em Andamento",value:e.inProgress,icon:Zs,color:"blue"}),a.jsx(hr,{title:"Concludas",value:e.completed,icon:Ct,color:"green",trend:{value:"8% vs ms anterior",isPositive:!0}})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Inspees por Ms"}),a.jsx(Gr,{className:"w-5 h-5 text-slate-400"})]}),a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(tu,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{children:"Grfico de inspees mensais"}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Em desenvolvimento"})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Distribuio por Status"}),a.jsx(Zs,{className:"w-5 h-5 text-slate-400"})]}),a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-32 h-32 bg-gradient-to-r from-blue-100 to-green-100 rounded-full mx-auto mb-4 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl font-bold text-slate-700",children:e.total})}),a.jsx("p",{children:"Total de inspees"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-4 h-4 bg-yellow-400 rounded mx-auto mb-1"}),a.jsxs("span",{children:["Pendentes: ",e.pending]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-4 h-4 bg-blue-400 rounded mx-auto mb-1"}),a.jsxs("span",{children:["Em Andamento: ",e.inProgress]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-4 h-4 bg-green-400 rounded mx-auto mb-1"}),a.jsxs("span",{children:["Concludas: ",e.completed]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-4 h-4 bg-red-400 rounded mx-auto mb-1"}),a.jsx("span",{children:"Canceladas: 0"})]})]})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Mtricas de Performance"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[a.jsxs("div",{className:"text-3xl font-bold text-blue-700 mb-2",children:[e.total>0?Math.round(e.completed/e.total*100):0,"%"]}),a.jsx("p",{className:"text-blue-600 font-medium",children:"Taxa de Concluso"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[a.jsxs("div",{className:"text-3xl font-bold text-green-700 mb-2",children:[e.total>0?Math.round((e.completed+e.inProgress)/e.total*100):0,"%"]}),a.jsx("p",{className:"text-green-600 font-medium",children:"Taxa de Produtividade"})]}),a.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg",children:[a.jsxs("div",{className:"text-3xl font-bold text-orange-700 mb-2",children:[e.total>0?Math.round(e.pending/e.total*100):0,"%"]}),a.jsx("p",{className:"text-orange-600 font-medium",children:"Itens Pendentes"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-xl p-6 text-white",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold mb-2",children:"Relatrios Detalhados"}),a.jsx("p",{className:"text-slate-300 mb-4",children:"Gere relatrios personalizados para anlise aprofundada das inspees"}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{className:"px-4 py-2 bg-white text-slate-800 rounded-lg hover:bg-slate-100 transition-colors",children:"Relatrio Mensal"}),a.jsx("button",{className:"px-4 py-2 bg-white/20 border border-white/30 text-white rounded-lg hover:bg-white/30 transition-colors",children:"Relatrio de Conformidade"}),a.jsx("button",{className:"px-4 py-2 bg-white/20 border border-white/30 text-white rounded-lg hover:bg-white/30 transition-colors",children:"Relatrio por Inspetor"})]})]})]})})}function Dae(){const[e,t]=_.useState({companyName:"Compia",adminEmail:"admin@exemplo.com",notificationsEnabled:!0,emailAlerts:!0,autoBackup:!0,reminderDays:7}),[r,s]=_.useState(!1),n=async()=>{s(!0),await new Promise(l=>setTimeout(l,1e3)),s(!1),alert("Configuraes salvas com sucesso!")},i=(l,d)=>{t(u=>({...u,[l]:d}))};return a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"font-heading text-2xl font-bold text-slate-900",children:"Configuraes"}),a.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Gerencie as configuraes do sistema e preferncias"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 h-fit",children:a.jsxs("nav",{className:"space-y-2",children:[a.jsxs("a",{href:"#general",className:"flex items-center px-3 py-2 bg-blue-50 text-blue-700 rounded-lg",children:[a.jsx(Js,{className:"w-4 h-4 mr-3"}),"Geral"]}),a.jsxs("a",{href:"#users",className:"flex items-center px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg",children:[a.jsx(Wr,{className:"w-4 h-4 mr-3"}),"Usurios"]}),a.jsxs("a",{href:"#notifications",className:"flex items-center px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg",children:[a.jsx(Vd,{className:"w-4 h-4 mr-3"}),"Notificaes"]}),a.jsxs("a",{href:"#security",className:"flex items-center px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg",children:[a.jsx(Gt,{className:"w-4 h-4 mr-3"}),"Segurana"]}),a.jsxs("a",{href:"#backup",className:"flex items-center px-3 py-2 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg",children:[a.jsx(Si,{className:"w-4 h-4 mr-3"}),"Backup"]})]})}),a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{id:"general",className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Configuraes Gerais"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome da Empresa"}),a.jsx("input",{type:"text",value:e.companyName,onChange:l=>i("companyName",l.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email do Administrador"}),a.jsx("input",{type:"email",value:e.adminEmail,onChange:l=>i("adminEmail",l.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Lembrete de Inspees (dias)"}),a.jsxs("select",{value:e.reminderDays,onChange:l=>i("reminderDays",parseInt(l.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:1,children:"1 dia"}),a.jsx("option",{value:3,children:"3 dias"}),a.jsx("option",{value:7,children:"7 dias"}),a.jsx("option",{value:14,children:"14 dias"})]})]})]})]}),a.jsxs("div",{id:"notifications",className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Notificaes"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vd,{className:"w-5 h-5 text-slate-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-900",children:"Notificaes do Sistema"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Receber notificaes sobre eventos importantes"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.notificationsEnabled,onChange:l=>i("notificationsEnabled",l.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(sa,{className:"w-5 h-5 text-slate-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-900",children:"Alertas por Email"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Enviar alertas importantes por email"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.emailAlerts,onChange:l=>i("emailAlerts",l.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]}),a.jsxs("div",{id:"backup",className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Backup e Segurana"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Si,{className:"w-5 h-5 text-slate-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-900",children:"Backup Automtico"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Fazer backup automtico dos dados diariamente"})]})]}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:e.autoBackup,onChange:l=>i("autoBackup",l.target.checked),className:"sr-only peer"}),a.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),a.jsx("div",{className:"pt-4 border-t border-slate-200",children:a.jsxs("button",{className:"flex items-center px-4 py-2 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors",children:[a.jsx($o,{className:"w-4 h-4 mr-2"}),"Fazer Backup Agora"]})})]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-6",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Informaes do Sistema"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-500",children:"Verso:"}),a.jsx("span",{className:"ml-2 text-slate-700",children:"1.0.0"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-500",children:"ltima Atualizao:"}),a.jsx("span",{className:"ml-2 text-slate-700",children:"28/07/2025"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-500",children:"Banco de Dados:"}),a.jsx("span",{className:"ml-2 text-slate-700",children:"SQLite (Cloudflare D1)"})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-500",children:"Status:"}),a.jsx("span",{className:"ml-2 text-green-600",children:"Operacional"})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:n,disabled:r,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Ka,{className:"w-4 h-4 mr-2"}),r?"Salvando...":"Salvar Configuraes"]})})]})]})]})})}const Yb=[{name:"folder",icon:bs,label:"Pasta"},{name:"shield",icon:Gt,label:"Segurana"},{name:"book-open",icon:l7,label:"Normas"},{name:"settings",icon:Js,label:"Equipamentos"},{name:"leaf",icon:eO,label:"Meio Ambiente"},{name:"award",icon:Fy,label:"Qualidade"},{name:"cog",icon:L7,label:"Mquinas"},{name:"hard-hat",icon:Q4,label:"Construo"},{name:"mountain",icon:HL,label:"Altura"},{name:"shield-check",icon:Ev,label:"EPIs"},{name:"user-check",icon:sO,label:"Ergonomia"},{name:"file-text",icon:jr,label:"Documentos"}],Mae=["#EF4444","#F59E0B","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#EC4899","#64748B","#059669","#DC2626","#7C3AED"];function Iae({isOpen:e,onClose:t,onSave:r,parentFolder:s,loading:n=!1}){const[i,l]=_.useState({name:"",description:"",category:"",folder_icon:"folder",folder_color:"#3B82F6",is_public:!1,parent_category_id:(s==null?void 0:s.id)||null}),d=h=>{h.preventDefault(),i.name.trim()&&r({...i,category:i.category||i.name})},u=()=>{l({name:"",description:"",category:"",folder_icon:"folder",folder_color:"#3B82F6",is_public:!1,parent_category_id:(s==null?void 0:s.id)||null})};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",role:"dialog","aria-labelledby":"category-modal-title","aria-describedby":"category-modal-description",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${i.folder_color}20`},children:a.jsx("div",{style:{color:i.folder_color},children:(()=>{const h=Yb.find(p=>p.name===i.folder_icon),m=h?h.icon:bs;return a.jsx(m,{className:"w-6 h-6"})})()})}),a.jsxs("div",{children:[a.jsx("h3",{id:"category-modal-title",className:"text-lg font-semibold text-slate-900",children:s?`Nova Subcategoria em ${s.name}`:"Nova Categoria Principal"}),a.jsx("p",{id:"category-modal-description",className:"text-sm text-slate-600",children:"Organize seus templates em pastas hierrquicas"})]})]}),a.jsx("button",{onClick:()=>{t(),u()},className:"text-slate-400 hover:text-slate-600",children:a.jsx(ct,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome da Categoria *"}),a.jsx("input",{type:"text",required:!0,value:i.name,onChange:h=>l({...i,name:h.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: NR-12, Equipamentos de Proteo, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{rows:3,value:i.description,onChange:h=>l({...i,description:h.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva o tipo de templates que esta categoria ir conter..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"cone da Categoria"}),a.jsx("div",{className:"grid grid-cols-6 gap-3",children:Yb.map(h=>{const m=h.icon;return a.jsx("button",{type:"button",onClick:()=>l({...i,folder_icon:h.name}),className:`p-3 rounded-lg border-2 transition-colors ${i.folder_icon===h.name?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,title:h.label,children:a.jsx(m,{className:"w-5 h-5",style:{color:i.folder_icon===h.name?i.folder_color:"#64748b"}})},h.name)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Cor da Categoria"}),a.jsx("div",{className:"grid grid-cols-6 gap-3",children:Mae.map(h=>a.jsx("button",{type:"button",onClick:()=>l({...i,folder_color:h}),className:`w-10 h-10 rounded-lg border-2 transition-all ${i.folder_color===h?"border-slate-900 scale-110":"border-slate-200 hover:scale-105"}`,style:{backgroundColor:h}},h))})]}),a.jsx("div",{children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:i.is_public,onChange:h=>l({...i,is_public:h.target.checked}),className:"mr-2 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Tornar esta categoria pblica (outros usurios podero ver)"})]})}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:"Preview da Categoria"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${i.folder_color}20`},children:a.jsx("div",{style:{color:i.folder_color},children:(()=>{const h=Yb.find(p=>p.name===i.folder_icon),m=h?h.icon:bs;return a.jsx(m,{className:"w-5 h-5"})})()})}),a.jsxs("div",{children:[a.jsx("h5",{className:"font-medium text-slate-900",children:i.name||"Nome da Categoria"}),i.description&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:i.description})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[a.jsx("button",{type:"button",onClick:()=>{t(),u()},className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:n||!i.name.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[n?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):a.jsx(Ka,{className:"w-4 h-4"}),n?"Criando...":"Criar Categoria"]})]})]})]})}):null}const zae=(e,t)=>{const r=new Array(e.length+t.length);for(let s=0;s<e.length;s++)r[s]=e[s];for(let s=0;s<t.length;s++)r[e.length+s]=t[s];return r},$ae=(e,t)=>({classGroupId:e,validator:t}),JP=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),qm="-",KA=[],Lae="arbitrary..",Bae=e=>{const t=qae(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return Uae(l);const d=l.split(qm),u=d[0]===""&&d.length>1?1:0;return ZP(d,u,t)},getConflictingClassGroupIds:(l,d)=>{if(d){const u=s[l],h=r[l];return u?h?zae(h,u):u:h||KA}return r[l]||KA}}},ZP=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const n=e[t],i=r.nextPart.get(n);if(i){const h=ZP(e,t+1,i);if(h)return h}const l=r.validators;if(l===null)return;const d=t===0?e.join(qm):e.slice(t).join(qm),u=l.length;for(let h=0;h<u;h++){const m=l[h];if(m.validator(d))return m.classGroupId}},Uae=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),s=t.slice(0,r);return s?Lae+s:void 0})(),qae=e=>{const{theme:t,classGroups:r}=e;return Fae(r,t)},Fae=(e,t)=>{const r=JP();for(const s in e){const n=e[s];e1(n,r,s,t)}return r},e1=(e,t,r,s)=>{const n=e.length;for(let i=0;i<n;i++){const l=e[i];Hae(l,t,r,s)}},Hae=(e,t,r,s)=>{if(typeof e=="string"){Vae(e,t,r);return}if(typeof e=="function"){Gae(e,t,r,s);return}Kae(e,t,r,s)},Vae=(e,t,r)=>{const s=e===""?t:QP(t,e);s.classGroupId=r},Gae=(e,t,r,s)=>{if(Wae(e)){e1(e(s),t,r,s);return}t.validators===null&&(t.validators=[]),t.validators.push($ae(r,e))},Kae=(e,t,r,s)=>{const n=Object.entries(e),i=n.length;for(let l=0;l<i;l++){const[d,u]=n[l];e1(u,QP(t,d),r,s)}},QP=(e,t)=>{let r=e;const s=t.split(qm),n=s.length;for(let i=0;i<n;i++){const l=s[i];let d=r.nextPart.get(l);d||(d=JP(),r.nextPart.set(l,d)),r=d}return r},Wae=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,Yae=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),s=Object.create(null);const n=(i,l)=>{r[i]=l,t++,t>e&&(t=0,s=r,r=Object.create(null))};return{get(i){let l=r[i];if(l!==void 0)return l;if((l=s[i])!==void 0)return n(i,l),l},set(i,l){i in r?r[i]=l:n(i,l)}}},jy="!",WA=":",Xae=[],YA=(e,t,r,s,n)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:s,isExternal:n}),Jae=e=>{const{prefix:t,experimentalParseClassName:r}=e;let s=n=>{const i=[];let l=0,d=0,u=0,h;const m=n.length;for(let v=0;v<m;v++){const w=n[v];if(l===0&&d===0){if(w===WA){i.push(n.slice(u,v)),u=v+1;continue}if(w==="/"){h=v;continue}}w==="["?l++:w==="]"?l--:w==="("?d++:w===")"&&d--}const p=i.length===0?n:n.slice(u);let x=p,b=!1;p.endsWith(jy)?(x=p.slice(0,-1),b=!0):p.startsWith(jy)&&(x=p.slice(1),b=!0);const y=h&&h>u?h-u:void 0;return YA(i,b,x,y)};if(t){const n=t+WA,i=s;s=l=>l.startsWith(n)?i(l.slice(n.length)):YA(Xae,!1,l,void 0,!0)}if(r){const n=s;s=i=>r({className:i,parseClassName:n})}return s},Zae=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,s)=>{t.set(r,1e6+s)}),r=>{const s=[];let n=[];for(let i=0;i<r.length;i++){const l=r[i],d=l[0]==="[",u=t.has(l);d||u?(n.length>0&&(n.sort(),s.push(...n),n=[]),s.push(l)):n.push(l)}return n.length>0&&(n.sort(),s.push(...n)),s}},Qae=e=>({cache:Yae(e.cacheSize),parseClassName:Jae(e),sortModifiers:Zae(e),...Bae(e)}),ese=/\s+/,tse=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:n,sortModifiers:i}=t,l=[],d=e.trim().split(ese);let u="";for(let h=d.length-1;h>=0;h-=1){const m=d[h],{isExternal:p,modifiers:x,hasImportantModifier:b,baseClassName:y,maybePostfixModifierPosition:v}=r(m);if(p){u=m+(u.length>0?" "+u:u);continue}let w=!!v,N=s(w?y.substring(0,v):y);if(!N){if(!w){u=m+(u.length>0?" "+u:u);continue}if(N=s(y),!N){u=m+(u.length>0?" "+u:u);continue}w=!1}const S=x.length===0?"":x.length===1?x[0]:i(x).join(":"),j=b?S+jy:S,k=j+N;if(l.indexOf(k)>-1)continue;l.push(k);const A=n(N,w);for(let O=0;O<A.length;++O){const T=A[O];l.push(j+T)}u=m+(u.length>0?" "+u:u)}return u},rse=(...e)=>{let t=0,r,s,n="";for(;t<e.length;)(r=e[t++])&&(s=eR(r))&&(n&&(n+=" "),n+=s);return n},eR=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=eR(e[s]))&&(r&&(r+=" "),r+=t);return r},ase=(e,...t)=>{let r,s,n,i;const l=u=>{const h=t.reduce((m,p)=>p(m),e());return r=Qae(h),s=r.cache.get,n=r.cache.set,i=d,d(u)},d=u=>{const h=s(u);if(h)return h;const m=tse(u,r);return n(u,m),m};return i=l,(...u)=>i(rse(...u))},sse=[],br=e=>{const t=r=>r[e]||sse;return t.isThemeGetter=!0,t},tR=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rR=/^\((?:(\w[\w-]*):)?(.+)\)$/i,nse=/^\d+\/\d+$/,ise=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ose=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,lse=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,cse=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,dse=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dl=e=>nse.test(e),tt=e=>!!e&&!Number.isNaN(Number(e)),vi=e=>!!e&&Number.isInteger(Number(e)),Xb=e=>e.endsWith("%")&&tt(e.slice(0,-1)),Nn=e=>ise.test(e),use=()=>!0,hse=e=>ose.test(e)&&!lse.test(e),aR=()=>!1,fse=e=>cse.test(e),mse=e=>dse.test(e),pse=e=>!Le(e)&&!Be(e),gse=e=>kc(e,iR,aR),Le=e=>tR.test(e),po=e=>kc(e,oR,hse),Jb=e=>kc(e,wse,tt),XA=e=>kc(e,sR,aR),xse=e=>kc(e,nR,mse),Of=e=>kc(e,lR,fse),Be=e=>rR.test(e),Ld=e=>Cc(e,oR),bse=e=>Cc(e,jse),JA=e=>Cc(e,sR),vse=e=>Cc(e,iR),yse=e=>Cc(e,nR),Tf=e=>Cc(e,lR,!0),kc=(e,t,r)=>{const s=tR.exec(e);return s?s[1]?t(s[1]):r(s[2]):!1},Cc=(e,t,r=!1)=>{const s=rR.exec(e);return s?s[1]?t(s[1]):r:!1},sR=e=>e==="position"||e==="percentage",nR=e=>e==="image"||e==="url",iR=e=>e==="length"||e==="size"||e==="bg-size",oR=e=>e==="length",wse=e=>e==="number",jse=e=>e==="family-name",lR=e=>e==="shadow",Nse=()=>{const e=br("color"),t=br("font"),r=br("text"),s=br("font-weight"),n=br("tracking"),i=br("leading"),l=br("breakpoint"),d=br("container"),u=br("spacing"),h=br("radius"),m=br("shadow"),p=br("inset-shadow"),x=br("text-shadow"),b=br("drop-shadow"),y=br("blur"),v=br("perspective"),w=br("aspect"),N=br("ease"),S=br("animate"),j=()=>["auto","avoid","all","avoid-page","page","left","right","column"],k=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...k(),Be,Le],O=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],D=()=>[Be,Le,u],R=()=>[Dl,"full","auto",...D()],I=()=>[vi,"none","subgrid",Be,Le],L=()=>["auto",{span:["full",vi,Be,Le]},vi,Be,Le],$=()=>[vi,"auto",Be,Le],W=()=>["auto","min","max","fr",Be,Le],P=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],U=()=>["start","end","center","stretch","center-safe","end-safe"],K=()=>["auto",...D()],G=()=>[Dl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],Q=()=>[e,Be,Le],le=()=>[...k(),JA,XA,{position:[Be,Le]}],H=()=>["no-repeat",{repeat:["","x","y","space","round"]}],V=()=>["auto","cover","contain",vse,gse,{size:[Be,Le]}],B=()=>[Xb,Ld,po],ne=()=>["","none","full",h,Be,Le],ie=()=>["",tt,Ld,po],ee=()=>["solid","dashed","dotted","double"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],re=()=>[tt,Xb,JA,XA],J=()=>["","none",y,Be,Le],F=()=>["none",tt,Be,Le],de=()=>["none",tt,Be,Le],_e=()=>[tt,Be,Le],se=()=>[Dl,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Nn],breakpoint:[Nn],color:[use],container:[Nn],"drop-shadow":[Nn],ease:["in","out","in-out"],font:[pse],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Nn],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Nn],shadow:[Nn],spacing:["px",tt],text:[Nn],"text-shadow":[Nn],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Dl,Le,Be,w]}],container:["container"],columns:[{columns:[tt,Le,Be,d]}],"break-after":[{"break-after":j()}],"break-before":[{"break-before":j()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:R()}],"inset-x":[{"inset-x":R()}],"inset-y":[{"inset-y":R()}],start:[{start:R()}],end:[{end:R()}],top:[{top:R()}],right:[{right:R()}],bottom:[{bottom:R()}],left:[{left:R()}],visibility:["visible","invisible","collapse"],z:[{z:[vi,"auto",Be,Le]}],basis:[{basis:[Dl,"full","auto",d,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,Dl,"auto","initial","none",Le]}],grow:[{grow:["",tt,Be,Le]}],shrink:[{shrink:["",tt,Be,Le]}],order:[{order:[vi,"first","last","none",Be,Le]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:L()}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:L()}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...P(),"normal"]}],"justify-items":[{"justify-items":[...U(),"normal"]}],"justify-self":[{"justify-self":["auto",...U()]}],"align-content":[{content:["normal",...P()]}],"align-items":[{items:[...U(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...U(),{baseline:["","last"]}]}],"place-content":[{"place-content":P()}],"place-items":[{"place-items":[...U(),"baseline"]}],"place-self":[{"place-self":["auto",...U()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:K()}],mx:[{mx:K()}],my:[{my:K()}],ms:[{ms:K()}],me:[{me:K()}],mt:[{mt:K()}],mr:[{mr:K()}],mb:[{mb:K()}],ml:[{ml:K()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:G()}],w:[{w:[d,"screen",...G()]}],"min-w":[{"min-w":[d,"screen","none",...G()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[l]},...G()]}],h:[{h:["screen","lh",...G()]}],"min-h":[{"min-h":["screen","lh","none",...G()]}],"max-h":[{"max-h":["screen","lh",...G()]}],"font-size":[{text:["base",r,Ld,po]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Be,Jb]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Xb,Le]}],"font-family":[{font:[bse,Le,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[n,Be,Le]}],"line-clamp":[{"line-clamp":[tt,"none",Be,Jb]}],leading:[{leading:[i,...D()]}],"list-image":[{"list-image":["none",Be,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Be,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ee(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",Be,po]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[tt,"auto",Be,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Be,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Be,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:le()}],"bg-repeat":[{bg:H()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},vi,Be,Le],radial:["",Be,Le],conic:[vi,Be,Le]},yse,xse]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:B()}],"gradient-via-pos":[{via:B()}],"gradient-to-pos":[{to:B()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ee(),"hidden","none"]}],"divide-style":[{divide:[...ee(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...ee(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,Be,Le]}],"outline-w":[{outline:["",tt,Ld,po]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",m,Tf,Of]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",p,Tf,Of]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[tt,po]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",x,Tf,Of]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[tt,Be,Le]}],"mix-blend":[{"mix-blend":[...Z(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Z()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":re()}],"mask-image-linear-to-pos":[{"mask-linear-to":re()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":re()}],"mask-image-t-to-pos":[{"mask-t-to":re()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":re()}],"mask-image-r-to-pos":[{"mask-r-to":re()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":re()}],"mask-image-b-to-pos":[{"mask-b-to":re()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":re()}],"mask-image-l-to-pos":[{"mask-l-to":re()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":re()}],"mask-image-x-to-pos":[{"mask-x-to":re()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":re()}],"mask-image-y-to-pos":[{"mask-y-to":re()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[Be,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":re()}],"mask-image-radial-to-pos":[{"mask-radial-to":re()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":k()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":re()}],"mask-image-conic-to-pos":[{"mask-conic-to":re()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:le()}],"mask-repeat":[{mask:H()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Be,Le]}],filter:[{filter:["","none",Be,Le]}],blur:[{blur:J()}],brightness:[{brightness:[tt,Be,Le]}],contrast:[{contrast:[tt,Be,Le]}],"drop-shadow":[{"drop-shadow":["","none",b,Tf,Of]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",tt,Be,Le]}],"hue-rotate":[{"hue-rotate":[tt,Be,Le]}],invert:[{invert:["",tt,Be,Le]}],saturate:[{saturate:[tt,Be,Le]}],sepia:[{sepia:["",tt,Be,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Be,Le]}],"backdrop-blur":[{"backdrop-blur":J()}],"backdrop-brightness":[{"backdrop-brightness":[tt,Be,Le]}],"backdrop-contrast":[{"backdrop-contrast":[tt,Be,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,Be,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,Be,Le]}],"backdrop-invert":[{"backdrop-invert":["",tt,Be,Le]}],"backdrop-opacity":[{"backdrop-opacity":[tt,Be,Le]}],"backdrop-saturate":[{"backdrop-saturate":[tt,Be,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,Be,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Be,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",Be,Le]}],ease:[{ease:["linear","initial",N,Be,Le]}],delay:[{delay:[tt,Be,Le]}],animate:[{animate:["none",S,Be,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[v,Be,Le]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:F()}],"rotate-x":[{"rotate-x":F()}],"rotate-y":[{"rotate-y":F()}],"rotate-z":[{"rotate-z":F()}],scale:[{scale:de()}],"scale-x":[{"scale-x":de()}],"scale-y":[{"scale-y":de()}],"scale-z":[{"scale-z":de()}],"scale-3d":["scale-3d"],skew:[{skew:_e()}],"skew-x":[{"skew-x":_e()}],"skew-y":[{"skew-y":_e()}],transform:[{transform:[Be,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:se()}],"translate-x":[{"translate-x":se()}],"translate-y":[{"translate-y":se()}],"translate-z":[{"translate-z":se()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Be,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Be,Le]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[tt,Ld,po,Jb]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},_se=ase(Nse);function Ys(...e){return _se(ht(e))}function Sse({currentFolderId:e,onSelectFolder:t,className:r}){const[s,n]=_.useState([]),[i,l]=_.useState(new Set),[d,u]=_.useState(!0);_.useEffect(()=>{h()},[]);const h=async()=>{try{const x=await fetch("/api/checklist/tree");if(x.ok){const b=await x.json();n(b.tree||[])}}catch(x){console.error("Error fetching folder tree:",x)}finally{u(!1)}},m=(x,b)=>{b.stopPropagation();const y=new Set(i);y.has(x)?y.delete(x):y.add(x),l(y)},p=(x,b=0)=>{const y=i.has(x.id),v=e===x.id,w=x.children&&x.children.length>0;return a.jsxs("div",{children:[a.jsxs("div",{className:Ys("flex items-center gap-2 px-3 py-2 text-sm rounded-lg cursor-pointer transition-colors select-none",v?"bg-blue-50 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900",b>0&&"ml-4"),onClick:()=>t(x.id),children:[a.jsx("button",{onClick:N=>m(x.id,N),className:Ys("p-0.5 rounded hover:bg-slate-200 transition-colors",!w&&"invisible"),children:y?a.jsx(qo,{className:"w-3 h-3"}):a.jsx(zo,{className:"w-3 h-3"})}),a.jsx("div",{style:{color:x.color},children:y||v?a.jsx(Uf,{className:"w-4 h-4"}):a.jsx(bs,{className:"w-4 h-4"})}),a.jsx("span",{className:"truncate flex-1",children:x.name}),a.jsx("span",{className:"text-xs text-slate-400",children:(x.subfolder_count||0)+(x.template_count||0)})]}),y&&w&&a.jsx("div",{className:"border-l border-slate-100 ml-[21px]",children:x.children.map(N=>p(N,b+1))})]},x.id)};return d?a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsx("div",{className:"h-8 bg-slate-100 rounded animate-pulse"}),a.jsx("div",{className:"h-8 bg-slate-100 rounded animate-pulse ml-4"}),a.jsx("div",{className:"h-8 bg-slate-100 rounded animate-pulse ml-4"})]}):a.jsxs("div",{className:Ys("py-2",r),children:[a.jsxs("div",{className:Ys("flex items-center gap-2 px-3 py-2 text-sm rounded-lg cursor-pointer transition-colors mb-1",e===null?"bg-blue-50 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-50 hover:text-slate-900"),onClick:()=>t(null),children:[a.jsx("div",{className:"w-4 flex justify-center",children:a.jsx(bs,{className:"w-4 h-4"})}),a.jsx("span",{children:"Todos os Checklists"})]}),s.map(x=>p(x))]})}function Ese({isOpen:e,onClose:t,onMove:r,title:s,loading:n=!1,currentFolderId:i}){const[l,d]=_.useState([]),[u,h]=_.useState(null),[m,p]=_.useState(!0);_.useEffect(()=>{e&&(x(),h(i||null))},[e]);const x=async()=>{try{p(!0);const b=await fetch("/api/checklist/tree");if(b.ok){const y=await b.json(),v=[],w=(N,S=0)=>{N.forEach(j=>{v.push({id:j.id,name:j.name,parent_id:j.parent_id,depth:S}),j.children&&w(j.children,S+1)})};w(y.tree||[]),d(v)}}catch(b){console.error("Error fetching folders:",b)}finally{p(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden flex flex-col max-h-[80vh]",children:[a.jsx("div",{className:"p-4 border-b border-slate-100",children:a.jsx("h3",{className:"font-heading font-semibold text-slate-900",children:s})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:m?a.jsx("div",{className:"flex justify-center p-4",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"space-y-1",children:[a.jsxs("button",{onClick:()=>h(null),className:Ys("w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",u===null?"bg-blue-50 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-50"),children:[a.jsx(bs,{className:"w-4 h-4"}),a.jsx("span",{children:"Raiz (Sem pasta)"}),u===null&&a.jsx(Ba,{className:"w-4 h-4 ml-auto"})]}),l.map(b=>a.jsxs("button",{onClick:()=>h(b.id),className:Ys("w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",u===b.id?"bg-blue-50 text-blue-700 font-medium":"text-slate-600 hover:bg-slate-50"),style:{paddingLeft:`${(b.depth+1)*12+12}px`},children:[a.jsx(bs,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate",children:b.name}),u===b.id&&a.jsx(Ba,{className:"w-4 h-4 ml-auto"})]},b.id))]})}),a.jsxs("div",{className:"p-4 border-t border-slate-100 bg-slate-50 flex justify-end gap-2",children:[a.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 transition-colors",disabled:n,children:"Cancelar"}),a.jsxs("button",{onClick:()=>r(u),disabled:n||m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:[n&&a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}),"Mover"]})]})]})}):null}function kse({isOpen:e,onClose:t,onConfirm:r,title:s,message:n,confirmText:i="Confirmar",cancelText:l="Cancelar",variant:d="danger",loading:u=!1}){return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in duration-200",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:`p-3 rounded-full ${d==="danger"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}`,children:a.jsx(Nt,{className:"w-6 h-6"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:s})]}),a.jsx("p",{className:"text-slate-600 mb-6 leading-relaxed",children:n}),a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:t,disabled:u,className:"px-4 py-2 text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors font-medium disabled:opacity-50",children:l}),a.jsxs("button",{onClick:r,disabled:u,className:`px-4 py-2 text-white rounded-lg transition-colors font-medium shadow-sm flex items-center ${d==="danger"?"bg-red-600 hover:bg-red-700":"bg-yellow-600 hover:bg-yellow-700"} disabled:opacity-50`,children:[u&&a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),i]})]})]})})}):null}function ZA({items:e,triggerClassName:t}){const[r,s]=_.useState(!1),n=_.useRef(null);return _.useEffect(()=>{const i=l=>{n.current&&!n.current.contains(l.target)&&s(!1)};return r&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[r]),a.jsxs("div",{className:"relative",ref:n,children:[a.jsx("button",{onClick:i=>{i.stopPropagation(),s(!r)},className:Ys("p-1 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition-colors",t),children:a.jsx(Z4,{className:"w-4 h-4"})}),r&&a.jsx("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-1 z-50 animate-in fade-in zoom-in-95 duration-100",children:e.map((i,l)=>a.jsxs("button",{onClick:d=>{d.stopPropagation(),i.onClick(d),s(!1)},disabled:i.disabled,className:Ys("w-full text-left px-4 py-2 text-sm flex items-center gap-2 hover:bg-slate-50 transition-colors",i.className,i.disabled&&"opacity-50 cursor-not-allowed"),children:[i.icon&&a.jsx("span",{className:"w-4 h-4",children:i.icon}),i.label]},l))})]})}function Cse({isOpen:e,onClose:t,templateId:r,templateName:s,currentVisibility:n,currentSharedWith:i=[],onSave:l}){const[d,u]=_.useState(n),[h,m]=_.useState(i),[p,x]=_.useState([]),[b,y]=_.useState(!1),[v,w]=_.useState(!1);_.useEffect(()=>{e&&(u(n),m(i),N())},[e,n,i]);const N=async()=>{y(!0);try{const k=await Fe("/api/organizations");if(k.ok){const A=await k.json();x(A.organizations||[])}}catch(k){console.error("Error fetching organizations:",k)}finally{y(!1)}},S=async()=>{w(!0);try{const k=await Fe(`/api/checklist/checklist-templates/${r}/share`,{method:"PUT",body:JSON.stringify({visibility:d,shared_with:d==="shared"?h:[]})});if(k.ok)l(),t();else{const A=await k.json();alert(`Erro ao salvar: ${A.error||"Erro desconhecido"}`)}}catch(k){console.error("Error saving share settings:",k),alert("Erro ao salvar configuraes de compartilhamento")}finally{w(!1)}},j=k=>{m(A=>A.includes(k)?A.filter(O=>O!==k):[...A,k])};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4 overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Compartilhar Checklist"}),a.jsx("p",{className:"text-sm text-blue-100 truncate",children:s})]}),a.jsx("button",{onClick:t,className:"p-1 text-white/80 hover:text-white hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ct,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>u("private"),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 transition-all ${d==="private"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300"}`,children:[a.jsx("div",{className:`p-2 rounded-lg ${d==="private"?"bg-blue-100":"bg-slate-100"}`,children:a.jsx(Jl,{className:`w-5 h-5 ${d==="private"?"text-blue-600":"text-slate-500"}`})}),a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("div",{className:"font-medium text-slate-900",children:"Privado"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Apenas sua organizao"})]}),d==="private"&&a.jsx(Ba,{className:"w-5 h-5 text-blue-600"})]}),a.jsxs("button",{onClick:()=>u("shared"),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 transition-all ${d==="shared"?"border-purple-500 bg-purple-50":"border-slate-200 hover:border-slate-300"}`,children:[a.jsx("div",{className:`p-2 rounded-lg ${d==="shared"?"bg-purple-100":"bg-slate-100"}`,children:a.jsx(Dt,{className:`w-5 h-5 ${d==="shared"?"text-purple-600":"text-slate-500"}`})}),a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("div",{className:"font-medium text-slate-900",children:"Compartilhado"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Selecionar organizaes"})]}),d==="shared"&&a.jsx(Ba,{className:"w-5 h-5 text-purple-600"})]}),a.jsxs("button",{onClick:()=>u("public"),className:`w-full flex items-center gap-4 p-4 rounded-xl border-2 transition-all ${d==="public"?"border-green-500 bg-green-50":"border-slate-200 hover:border-slate-300"}`,children:[a.jsx("div",{className:`p-2 rounded-lg ${d==="public"?"bg-green-100":"bg-slate-100"}`,children:a.jsx(Su,{className:`w-5 h-5 ${d==="public"?"text-green-600":"text-slate-500"}`})}),a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("div",{className:"font-medium text-slate-900",children:"Pblico"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Todas as organizaes"})]}),d==="public"&&a.jsx(Ba,{className:"w-5 h-5 text-green-600"})]})]}),d==="shared"&&a.jsxs("div",{className:"border-t border-slate-200 pt-4 mt-4",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3",children:"Selecionar Organizaes"}),b?a.jsx("div",{className:"flex items-center justify-center py-4",children:a.jsx(It,{className:"w-6 h-6 animate-spin text-slate-400"})}):p.length===0?a.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Nenhuma organizao disponvel"}):a.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2",children:p.map(k=>a.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:h.includes(k.id),onChange:()=>j(k.id),className:"w-4 h-4 text-purple-600 rounded border-slate-300 focus:ring-purple-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:k.name})]},k.id))})]})]}),a.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200 flex gap-3",children:[a.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:S,disabled:v,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"w-4 h-4 animate-spin"}),"Salvando..."]}):"Salvar"})]})]})}):null}function t1({template:e,fields:t,onSave:r,onCancel:s,loading:n,title:i,folders:l,selectedFolderId:d}){var O;const[u,h]=_.useState(e),[m,p]=_.useState(t),[x,b]=_.useState(null),y=d||null,v=(T,D=0)=>T.reduce((R,I)=>(R.push({...I,depth:D}),I.children&&R.push(...v(I.children,D+1)),R),[]),w=[{value:"text",label:"Texto Curto"},{value:"textarea",label:"Texto Longo"},{value:"select",label:"Lista Suspensa"},{value:"multiselect",label:"Mltipla Escolha"},{value:"radio",label:"Escolha nica"},{value:"checkbox",label:"Caixa de Seleo"},{value:"boolean",label:"Conforme/No Conforme"},{value:"number",label:"Nmero"},{value:"date",label:"Data"},{value:"time",label:"Hora"},{value:"rating",label:"Avaliao (1-5)"},{value:"file",label:"Upload de Arquivo/Foto"}],N=()=>{const T={field_name:"Nova pergunta",field_type:"text",is_required:!1,options:"",order_index:m.length};p([...m,T]),b(m.length)},S=T=>{const D=m.filter((R,I)=>I!==T);D.forEach((R,I)=>{R.order_index=I}),p(D),b(null)},j=(T,D)=>{const R=[...m];R[T]={...R[T],...D},p(R)},k=T=>["select","multiselect","radio"].includes(T),A=()=>{r(u,m,y)};return a.jsxs("div",{className:"flex flex-col h-[calc(100vh-80px)] -m-6 bg-slate-50/50",children:[a.jsxs("div",{className:"sticky top-0 z-20 bg-white/80 backdrop-blur-md border-b border-slate-200 px-6 py-3 flex items-center justify-between shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:s,className:"p-2 -ml-2 hover:bg-slate-100 rounded-full transition-colors text-slate-500 hover:text-slate-700",title:"Fechar",children:a.jsx(ct,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("h2",{className:"font-heading text-base font-semibold text-slate-900 leading-tight",children:i}),y&&l&&a.jsxs("div",{className:"flex items-center gap-1 text-[10px] uppercase tracking-wider text-slate-500 font-medium",children:[a.jsx(bs,{className:"w-3 h-3"}),a.jsx("span",{children:((O=v(l).find(T=>T.id===y))==null?void 0:O.name)||"Pasta Desconhecida"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:s,className:"px-3 py-1.5 text-slate-600 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors font-medium text-xs md:text-sm",children:"Cancelar"}),a.jsxs("button",{type:"button",onClick:A,disabled:n,className:"flex items-center px-4 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium text-xs md:text-sm shadow-sm",children:[n?a.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-2"}):a.jsx(Ka,{className:"w-3 h-3 md:w-4 md:h-4 mr-1.5"}),n?"Salvando...":"Salvar Checklist"]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 custom-scrollbar",children:a.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-slate-200/60",children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-400 uppercase tracking-wider mb-1",children:"Nome do Template"}),a.jsx("input",{type:"text",required:!0,value:u.name||"",onChange:T=>h({...u,name:T.target.value}),className:"w-full text-xl md:text-2xl font-bold text-slate-900 border-0 border-b border-transparent hover:border-slate-200 focus:border-blue-500 focus:ring-0 px-0 py-1 transition-all placeholder-slate-300 bg-transparent",placeholder:"Digite o nome do checklist..."}),a.jsx("input",{type:"text",value:u.description||"",onChange:T=>h({...u,description:T.target.value}),className:"w-full text-sm text-slate-500 border-0 border-b border-transparent hover:border-slate-200 focus:border-blue-500 focus:ring-0 px-0 py-1 mt-2 transition-all placeholder-slate-400 bg-transparent",placeholder:"Adicionar uma breve descrio (opcional)..."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("h3",{className:"font-heading text-sm font-semibold text-slate-900 uppercase tracking-wider",children:"Perguntas"}),a.jsxs("span",{className:"text-xs text-slate-500 bg-slate-100 px-2 py-0.5 rounded-full font-medium",children:[m.length," total"]})]}),a.jsxs("button",{type:"button",onClick:N,className:"flex items-center px-3 py-1.5 bg-white border border-blue-200 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors shadow-sm text-xs font-medium",children:[a.jsx(Kr,{className:"w-3 h-3 mr-1.5"}),"Adicionar"]})]}),a.jsxs("div",{className:"space-y-3 pb-12",children:[m.map((T,D)=>{var R;return a.jsx("div",{className:`group bg-white border border-slate-200 rounded-lg transition-all duration-200 ${x===D?"ring-2 ring-blue-500 border-transparent shadow-lg z-10 relative":"hover:border-blue-300 hover:shadow-sm"}`,children:x===D?a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-3",children:[a.jsxs("span",{className:"flex items-center text-xs font-bold text-blue-700 bg-blue-50 px-2 py-1 rounded",children:[a.jsx(Ha,{className:"w-3 h-3 mr-1"}),"Editando Item ",D+1]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>S(D),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",children:a.jsx(rr,{className:"w-4 h-4"})}),a.jsx("div",{className:"h-4 w-px bg-slate-200 mx-1"}),a.jsxs("button",{onClick:()=>b(null),className:"flex items-center px-3 py-1 bg-green-600 text-white hover:bg-green-700 rounded text-xs font-medium transition-colors shadow-sm",title:"Concluir",children:[a.jsx(Ct,{className:"w-3 h-3 mr-1"}),"OK"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[a.jsxs("div",{className:"md:col-span-8",children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Pergunta / Item"}),a.jsx("input",{type:"text",value:T.field_name,onChange:I=>j(D,{field_name:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Digite a pergunta...",autoFocus:!0})]}),a.jsxs("div",{className:"md:col-span-4",children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Tipo de Resposta"}),a.jsxs("div",{className:"relative",children:[a.jsx("select",{value:T.field_type,onChange:I=>j(D,{field_type:I.target.value}),className:"w-full pl-3 pr-8 py-2 border border-slate-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm appearance-none bg-white font-medium text-slate-700",children:w.map(I=>a.jsx("option",{value:I.value,children:I.label},I.value))}),a.jsx("div",{className:"absolute right-2.5 top-1/2 transform -translate-y-1/2 pointer-events-none text-slate-400",children:a.jsx(U9,{className:"w-3 h-3"})})]})]}),k(T.field_type)&&a.jsxs("div",{className:"md:col-span-12",children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:"Opes (separadas por vrgula)"}),a.jsx("input",{type:"text",value:T.options||"",onChange:I=>j(D,{options:I.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-slate-50",placeholder:"Opo 1, Opo 2, Opo 3"})]}),a.jsx("div",{className:"md:col-span-12 pt-1",children:a.jsxs("label",{className:"inline-flex items-center cursor-pointer select-none group/toggle",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:T.is_required,onChange:I=>j(D,{is_required:I.target.checked}),className:"sr-only peer"}),a.jsx("div",{className:"w-9 h-5 bg-slate-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]}),a.jsx("span",{className:"ml-2 text-sm font-medium text-slate-600 group-hover/toggle:text-slate-900 transition-colors",children:"Resposta Obrigatria"})]})})]})]}):a.jsxs("div",{className:"flex items-start gap-3 p-4 select-none",children:[a.jsx("div",{className:"flex-shrink-0 cursor-move text-slate-300 hover:text-slate-500 transition-colors p-1 -ml-1",children:a.jsx(Xl,{className:"w-4 h-4"})}),a.jsx("div",{className:"flex-shrink-0 w-6 h-6 flex items-center justify-center bg-slate-100 text-slate-600 rounded text-xs font-bold mt-0.5 font-mono",children:D+1}),a.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsx("h4",{className:"font-medium text-slate-900 text-sm leading-snug break-words",children:T.field_name}),a.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity bg-white shadow-sm border border-slate-100 rounded-lg p-0.5 absolute right-4 top-3 md:relative md:right-auto md:top-auto md:shadow-none md:border-0 md:bg-transparent",children:[a.jsx("button",{onClick:()=>b(D),className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Editar",children:a.jsx(Ha,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:()=>{const I={...T,order_index:m.length};p([...m,I])},className:"p-1.5 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Duplicar",children:a.jsx(Ti,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:()=>S(D),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Excluir",disabled:m.length===1,children:a.jsx(rr,{className:"w-3.5 h-3.5"})})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] uppercase font-bold tracking-wide bg-slate-100 text-slate-500 border border-slate-200",children:(R=w.find(I=>I.value===T.field_type))==null?void 0:R.label}),T.is_required&&a.jsxs("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] uppercase font-bold tracking-wide bg-red-50 text-red-600 border border-red-100",children:[a.jsx(rp,{className:"w-2.5 h-2.5 mr-1 fill-current"}),"Obrigatrio"]})]}),T.options&&a.jsx("div",{className:"mt-2 pl-2 border-l-2 border-slate-100",children:a.jsxs("p",{className:"text-xs text-slate-500 truncate max-w-lg",children:[a.jsx("span",{className:"font-semibold",children:"Opes:"})," ",T.options]})})]})]})},D)}),m.length===0&&a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl bg-slate-50/50",children:[a.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center mx-auto mb-3 shadow-sm",children:a.jsx(Kr,{className:"w-6 h-6 text-slate-400"})}),a.jsx("p",{className:"text-slate-500 font-medium text-sm",children:"Nenhum campo definido"}),a.jsx("button",{onClick:N,className:"mt-2 text-blue-600 hover:text-blue-700 text-sm font-medium hover:underline",children:"Adicionar sua primeira pergunta"})]})]})]})]})})]})}function Ase(){const[e,t]=ju(),r=na(),s=e.get("folder_id"),[n,i]=_.useState([]),[l,d]=_.useState([]),[u,h]=_.useState(!0),[m,p]=_.useState(""),[x,b]=_.useState("grid"),[y,v]=_.useState(!1),[w,N]=_.useState(!1),[S,j]=_.useState(!1),[k,A]=_.useState([]),[O,T]=_.useState(!1),[D,R]=_.useState(null),[I,L]=_.useState([]),[$,W]=_.useState(!1),[P,U]=_.useState([]);_.useEffect(()=>{(async()=>{if(!s){A([]);return}try{const Oe=await fetch(`/api/checklist/folders/${s}/path`);if(Oe.ok){const Me=await Oe.json();A(Me.path||[])}}catch(Oe){console.error("Error fetching breadcrumb:",Oe)}})()},[s]);const[K,G]=_.useState(!1),[Q,le]=_.useState(null),[H,V]=_.useState(!1),[B,ne]=_.useState({isOpen:!1,id:null,name:""}),[ie,ee]=_.useState(!1),[Z,re]=_.useState({isOpen:!1,templateId:0,templateName:"",visibility:"private",sharedWith:[]}),[J,F]=_.useState(!1);_.useEffect(()=>{de()},[s]);const de=async()=>{try{h(!0);const he=await fetch(`/api/checklist/folders?parent_id=${s||"null"}`);if(he.ok){const Ye=await he.json();d(Ye.folders||[])}const Oe=s?`/api/checklist/checklist-templates?folder_id=${s}`:"/api/checklist/checklist-templates?folder_id=null",Me=await fetch(Oe);if(Me.ok){const Ye=await Me.json();i(Ye.templates||[])}}catch(he){console.error("Erro ao carregar dados:",he)}finally{h(!1)}},_e=he=>{t(he?{folder_id:he}:{})},se=he=>{ne({isOpen:!0,id:he.id,name:he.name})},Te=async()=>{if(B.id){ee(!0);try{const he=await fetch(`/api/checklist/checklist-templates/${B.id}`,{method:"DELETE"});if(he.ok)await de(),ne({isOpen:!1,id:null,name:""});else{const Oe=await he.json();alert(`Erro ao excluir: ${Oe.error||"Erro desconhecido"}`)}}catch(he){console.error("Erro ao excluir template:",he),alert("Erro ao excluir template")}finally{ee(!1)}}},M=async he=>{try{(await fetch(`/api/checklist/checklist-templates/${he.id}/duplicate`,{method:"POST"})).ok&&de()}catch(Oe){console.error("Erro ao duplicar template:",Oe)}},xe=async he=>{if(Q){V(!0);try{let Oe="",Me={};Q.type==="folder"?(Oe=`/api/checklist/folders/${Q.id}`,Me={parent_id:he}):(Oe=`/api/checklist/folders/${he||"null"}/move-items`,Me={templateIds:[Q.id]});const Ye=Q.type==="folder"?"PATCH":"POST",Cr=await fetch(Oe,{method:Ye,headers:{"Content-Type":"application/json"},body:JSON.stringify(Me)});if(!Cr.ok){const dt=await Cr.json();throw new Error(dt.error||"Falha ao mover item")}await de(),G(!1),le(null)}catch(Oe){console.error("Erro ao mover item:",Oe),alert(`Erro ao mover item: ${Oe instanceof Error?Oe.message:"Erro desconhecido"}`)}finally{V(!1)}}},pe=(he,Oe,Me,Ye)=>{he.dataTransfer.setData("application/json",JSON.stringify({type:Oe,id:Me,name:Ye})),he.dataTransfer.effectAllowed="move"},X=he=>{he.preventDefault(),he.dataTransfer.dropEffect="move",he.currentTarget.classList.add("bg-blue-50","border-blue-300")},Y=he=>{he.currentTarget.classList.remove("bg-blue-50","border-blue-300")},ue=async(he,Oe)=>{he.preventDefault(),he.currentTarget.classList.remove("bg-blue-50","border-blue-300");try{const Me=JSON.parse(he.dataTransfer.getData("application/json"));if(Me.id.toString()===Oe.toString())return;await Ee(Me,Oe)}catch(Me){console.error("Invalid drop data",Me)}},Ee=async(he,Oe)=>{V(!0);try{let Me="",Ye={};he.type==="folder"?(Me=`/api/checklist/folders/${he.id}`,Ye={parent_id:Oe}):(Me=`/api/checklist/folders/${Oe||"null"}/move-items`,Ye={templateIds:[he.id]});const Cr=he.type==="folder"?"PATCH":"POST",dt=await fetch(Me,{method:Cr,headers:{"Content-Type":"application/json"},body:JSON.stringify(Ye)});if(!dt.ok){const Wt=await dt.json();throw new Error(Wt.error||"Falha ao mover item")}await de()}catch(Me){console.error("Erro ao mover item:",Me),alert(`Erro ao mover item: ${Me instanceof Error?Me.message:"Erro desconhecido"}`)}finally{V(!1)}},te=(he,Oe,Me,Ye)=>{he.stopPropagation(),le({type:Oe,id:Me,name:Ye}),G(!0)},oe=async()=>{v(!0);try{const he=await Promise.all(n.filter(nr=>!nr.is_category_folder).map(async nr=>{const Hi=await(await fetch(`/api/checklist/checklist-templates/${nr.id}`)).json();return{...nr,fields:Hi.fields}})),Oe=[];he.forEach(nr=>{nr.fields&&nr.fields.length>0&&nr.fields.forEach(ha=>{Oe.push({template_nome:nr.name,template_categoria:nr.category,template_descricao:nr.description||"",campo_nome:ha.field_name,campo_tipo:ha.field_type,obrigatorio:ha.is_required?"Sim":"No",opcoes:ha.options||"",ordem:ha.order_index})})});const Ye=["template_nome,template_categoria,template_descricao,campo_nome,campo_tipo,obrigatorio,opcoes,ordem",...Oe.map(nr=>Object.values(nr).map(ha=>`"${ha}"`).join(","))].join(`
`),Cr=new Blob([Ye],{type:"text/csv;charset=utf-8;"}),dt=document.createElement("a"),Wt=URL.createObjectURL(Cr);dt.setAttribute("href",Wt),dt.setAttribute("download",`templates_checklist_${new Date().toISOString().split("T")[0]}.csv`),dt.style.visibility="hidden",document.body.appendChild(dt),dt.click(),document.body.removeChild(dt)}catch(he){console.error("Erro ao exportar templates:",he),alert("Erro ao exportar dados. Tente novamente.")}finally{v(!1)}},be=async he=>{j(!0);try{const Oe={name:he.name,description:he.description,parent_id:s,color:he.folder_color||"#3B82F6",icon:he.folder_icon||"folder"},Me=await fetch("/api/checklist/folders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Oe)});if(Me.ok)await de(),N(!1);else{const Ye=await Me.json();throw new Error(Ye.error||"Failed to create folder")}}catch(Oe){console.error("Erro ao criar pasta:",Oe),alert(`Erro ao criar pasta: ${Oe instanceof Error?Oe.message:"Erro desconhecido"}`)}finally{j(!1)}},ke=he=>{t({folder_id:he.id})},we=async he=>{W(!0),T(!0);try{const Oe=await fetch(`/api/checklist/checklist-templates/${he.id}`);if(Oe.ok){const Ye=await Oe.json();R(Ye.template),L(Ye.fields||[])}const Me=await fetch("/api/checklist/tree");if(Me.ok){const Ye=await Me.json();U(Ye.tree||[])}}catch(Oe){console.error("Error loading template details:",Oe)}finally{W(!1)}},Pe=async(he,Oe,Me)=>{if(he.id){W(!0);try{const Ye=await fetch(`/api/checklist/checklist-templates/${he.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...he,folder_id:Me})});if(Ye.ok)await de(),T(!1);else{const Cr=await Ye.json();alert(`Erro ao salvar: ${Cr.error||"Erro desconhecido"}`)}}catch(Ye){console.error("Error saving template:",Ye),alert("Erro ao salvar template")}finally{W(!1)}}},Ge=()=>l.filter(he=>{var Oe;return he.name.toLowerCase().includes(m.toLowerCase())||((Oe=he.description)==null?void 0:Oe.toLowerCase().includes(m.toLowerCase()))}),Re=()=>n.filter(he=>{var Oe;return he.name.toLowerCase().includes(m.toLowerCase())||((Oe=he.description)==null?void 0:Oe.toLowerCase().includes(m.toLowerCase()))||he.category.toLowerCase().includes(m.toLowerCase())}),Qe=Ge(),gt=Re();return a.jsxs(Je,{children:[a.jsxs("div",{className:"flex h-[calc(100vh-64px)] -m-6 overflow-hidden",children:[a.jsxs("div",{className:"w-64 bg-white border-r border-slate-200 flex flex-col hidden md:flex",children:[a.jsx("div",{className:"p-4 border-b border-slate-200",children:a.jsxs("h2",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(Uf,{className:"w-5 h-5 text-blue-600"}),"Explorador"]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:a.jsx(Sse,{currentFolderId:s,onSelectFolder:_e})})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0 bg-slate-50",children:[k.length>0&&a.jsxs("nav",{className:"flex items-center gap-2 text-sm text-slate-600 px-4 py-2 bg-slate-50 border-b border-slate-200",children:[a.jsx(vt,{to:"/checklists",className:"hover:underline",children:"Raiz"}),k.map(he=>a.jsxs(ut.Fragment,{children:[a.jsx(zo,{className:"w-3 h-3"}),a.jsx("button",{onClick:()=>_e(he.id),className:"hover:underline",children:he.name})]},he.id))]}),a.jsx("div",{className:"bg-white border-b border-slate-200 p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[a.jsxs("div",{className:"relative flex-1 min-w-0 md:max-w-md",children:[a.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Buscar nesta pasta...",value:m,onChange:he=>p(he.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center bg-slate-100 rounded-lg p-1 border border-slate-200",children:[a.jsx("button",{onClick:()=>b("grid"),className:Ys("p-1.5 rounded-md transition-colors",x==="grid"?"bg-white shadow-sm text-blue-600":"text-slate-500 hover:text-slate-900"),title:"Visualizao em Grade",children:a.jsx(NL,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>b("list"),className:Ys("p-1.5 rounded-md transition-colors",x==="list"?"bg-white shadow-sm text-blue-600":"text-slate-500 hover:text-slate-900"),title:"Visualizao em Lista",children:a.jsx(Gy,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:oe,disabled:y,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors",title:"Exportar CSV",children:y?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-slate-600"}):a.jsx(Fa,{className:"w-4 h-4"})}),a.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors text-sm font-medium whitespace-nowrap",children:[a.jsx(iL,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden md:inline",children:"Nova Pasta"})]}),a.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium whitespace-nowrap",children:[a.jsx(Kr,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden md:inline",children:"Novo Checklist"})]})]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):Qe.length===0&&gt.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-slate-500",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mb-4",children:a.jsx(Uf,{className:"w-8 h-8 text-slate-400"})}),a.jsx("p",{className:"text-lg font-medium text-slate-900",children:"Esta pasta est vazia"}),a.jsx("p",{className:"text-sm mt-1",children:"Crie uma nova pasta ou template para comear"})]}):x==="grid"?a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-5",children:[Qe.map(he=>a.jsxs("div",{draggable:!0,onDragStart:Oe=>pe(Oe,"folder",he.id,he.name),onDragOver:X,onDragLeave:Y,onDrop:Oe=>ue(Oe,he.id),className:"bg-white rounded-xl shadow-sm border border-slate-200 p-5 hover:shadow-md transition-all cursor-pointer group relative min-w-0",onClick:()=>ke(he),children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-blue-50 text-blue-600 group-hover:bg-blue-100 transition-colors",children:a.jsx(bs,{className:"w-6 h-6"})}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsx(ZA,{items:[{label:"Abrir",icon:a.jsx(Uf,{className:"w-4 h-4"}),onClick:()=>ke(he)},{label:"Mover",icon:a.jsx(ff,{className:"w-4 h-4"}),onClick:Oe=>te(Oe,"folder",he.id,he.name)}]})})]}),a.jsx("h3",{className:"font-medium text-slate-900 truncate mb-1",title:he.name,children:he.name}),a.jsxs("p",{className:"text-sm text-slate-500",children:[(he.subfolder_count||0)+(he.template_count||0)," itens"]})]},he.id)),gt.map(he=>a.jsxs("div",{draggable:!0,onDragStart:Oe=>pe(Oe,"template",he.id,he.name),className:"bg-white rounded-xl shadow-sm border border-slate-200 p-5 hover:shadow-md transition-all flex flex-col relative min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsx("div",{className:"p-2 rounded-lg bg-slate-50 text-slate-600",children:a.jsx(jr,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[he.is_public?a.jsx("div",{title:"Pblico",children:a.jsx(Dt,{className:"w-3 h-3 text-green-500"})}):a.jsx("div",{title:"Privado",children:a.jsx(Jl,{className:"w-3 h-3 text-slate-400"})}),a.jsx(ZA,{items:[{label:"Visualizar",icon:a.jsx(Ds,{className:"w-4 h-4"}),onClick:()=>we(he)},{label:"Editar",icon:a.jsx(Ha,{className:"w-4 h-4"}),onClick:()=>r(`/checklists/${he.id}/edit`)},{label:"Duplicar",icon:a.jsx(Ti,{className:"w-4 h-4"}),onClick:()=>M(he)},{label:"Mover",icon:a.jsx(ff,{className:"w-4 h-4"}),onClick:Oe=>te(Oe,"template",he.id,he.name)},{label:"Compartilhar",icon:a.jsx(Zl,{className:"w-4 h-4"}),onClick:()=>re({isOpen:!0,templateId:he.id,templateName:he.name,visibility:he.visibility||"private",sharedWith:he.shared_with?JSON.parse(he.shared_with):[]})},{label:"Excluir",icon:a.jsx(rr,{className:"w-4 h-4 text-red-500"}),className:"text-red-600 hover:bg-red-50",onClick:()=>se(he)}]})]})]}),a.jsx("h3",{className:"font-medium text-slate-900 truncate mb-2",title:he.name,children:he.name}),a.jsx("div",{className:"flex items-center gap-2 mt-auto pt-3 border-t border-slate-100",children:a.jsx("button",{onClick:()=>we(he),className:"flex-1 text-center px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Visualizar"})})]},he.id))]}):a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:a.jsxs("table",{className:"w-full text-left text-sm",children:[a.jsx("thead",{className:"bg-slate-50 border-b border-slate-200 text-slate-600 font-medium",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 w-8"}),a.jsx("th",{className:"px-4 py-3",children:"Nome"}),a.jsx("th",{className:"px-4 py-3",children:"Tipo"}),a.jsx("th",{className:"px-4 py-3",children:"Criado em"}),a.jsx("th",{className:"px-4 py-3 text-right",children:"Aes"})]})}),a.jsxs("tbody",{className:"divide-y divide-slate-100",children:[Qe.map(he=>a.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer group",onClick:()=>ke(he),children:[a.jsx("td",{className:"px-4 py-3 text-slate-400",children:a.jsx(bs,{className:"w-5 h-5 text-blue-500 fill-blue-100"})}),a.jsx("td",{className:"px-4 py-3 font-medium text-slate-900",children:he.name}),a.jsx("td",{className:"px-4 py-3 text-slate-500",children:"Pasta"}),a.jsx("td",{className:"px-4 py-3 text-slate-500",children:new Date(he.created_at).toLocaleDateString("pt-BR")}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:Oe=>te(Oe,"folder",he.id,he.name),className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded",title:"Mover",children:a.jsx(ff,{className:"w-4 h-4"})}),a.jsx(zo,{className:"w-4 h-4 text-slate-300"})]})})]},he.id)),gt.map(he=>a.jsxs("tr",{className:"hover:bg-slate-50 group",children:[a.jsx("td",{className:"px-4 py-3 text-slate-400",children:a.jsx(jr,{className:"w-5 h-5"})}),a.jsxs("td",{className:"px-4 py-3",children:[a.jsx("div",{className:"font-medium text-slate-900",children:he.name}),he.description&&a.jsx("div",{className:"text-xs text-slate-500 truncate max-w-xs",children:he.description})]}),a.jsx("td",{className:"px-4 py-3 text-slate-500",children:"Template"}),a.jsx("td",{className:"px-4 py-3 text-slate-500",children:new Date(he.created_at).toLocaleDateString("pt-BR")}),a.jsx("td",{className:"px-4 py-3 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>we(he),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Visualizar",children:a.jsx(Ds,{className:"w-4 h-4"})}),a.jsx(vt,{to:`/checklists/${he.id}/edit`,className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded",title:"Editar",children:a.jsx(Ha,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Oe=>te(Oe,"template",he.id,he.name),className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded",title:"Mover",children:a.jsx(ff,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),M(he)},className:"p-1.5 text-slate-600 hover:bg-slate-100 rounded",title:"Duplicar",children:a.jsx(Ti,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),se(he)},className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Excluir",children:a.jsx(rr,{className:"w-4 h-4"})})]})})]},he.id))]})]})})})]})]}),a.jsx(Iae,{isOpen:w,onClose:()=>N(!1),onSave:be,parentFolder:l.find(he=>he.id===s),loading:S}),a.jsx(Ese,{isOpen:K,onClose:()=>G(!1),onMove:xe,title:`Mover ${(Q==null?void 0:Q.type)==="folder"?"Pasta":"Template"}: ${Q==null?void 0:Q.name}`,loading:H,currentFolderId:s}),O&&D&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl h-[90vh] overflow-hidden flex flex-col",children:a.jsx(t1,{template:D,fields:I,onSave:Pe,onCancel:()=>T(!1),loading:$,title:"Visualizar Template",folders:P})})}),a.jsx(kse,{isOpen:B.isOpen,onClose:()=>ne({...B,isOpen:!1}),onConfirm:Te,title:"Excluir Checklist",message:`Tem certeza que deseja excluir o checklist "${B.name}"? Esta ao no pode ser desfeita.`,confirmText:"Excluir",variant:"danger",loading:ie}),a.jsx(Cse,{isOpen:Z.isOpen,onClose:()=>re({...Z,isOpen:!1}),templateId:Z.templateId,templateName:Z.templateName,currentVisibility:Z.visibility,currentSharedWith:Z.sharedWith,onSave:()=>de()}),J&&a.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/50 backdrop-blur-sm",onClick:()=>F(!1),children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md m-4 overflow-hidden",onClick:he=>he.stopPropagation(),children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4 flex items-center justify-between",children:[a.jsx("h3",{className:"text-xl font-bold text-white",children:"Criar Novo Checklist"}),a.jsx("button",{type:"button",onClick:()=>F(!1),className:"p-1 text-white/80 hover:text-white hover:bg-white/20 rounded-lg transition-colors",children:a.jsx(ct,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-4 space-y-2",children:[a.jsxs("button",{type:"button",onClick:()=>{F(!1);const he=s?`/checklists/import?folder_id=${s}`:"/checklists/import";r(he)},className:"w-full flex items-center gap-4 p-4 rounded-xl hover:bg-green-50 transition-all border-2 border-transparent hover:border-green-200 group",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-green-100 group-hover:bg-green-200 transition-colors",children:a.jsx(Pi,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("div",{className:"font-semibold text-slate-900 text-lg",children:"Importar/Colar CSV"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Upload de arquivo ou colar dados"})]})]}),a.jsxs("button",{type:"button",onClick:()=>{F(!1);const he=s?`/checklists/ai-generate?folder_id=${s}`:"/checklists/ai-generate";r(he)},className:"w-full flex items-center gap-4 p-4 rounded-xl hover:bg-purple-50 transition-all border-2 border-transparent hover:border-purple-200 group",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-purple-100 group-hover:bg-purple-200 transition-colors",children:a.jsx(Oi,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("div",{className:"font-semibold text-slate-900 text-lg",children:"Gerar com IA"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Criao inteligente e automatizada"})]})]}),a.jsxs("button",{type:"button",onClick:()=>{F(!1);const he=s?`/checklists/new?folder_id=${s}`:"/checklists/new";r(he)},className:"w-full flex items-center gap-4 p-4 rounded-xl hover:bg-blue-50 transition-all border-2 border-transparent hover:border-blue-200 group",children:[a.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-blue-100 group-hover:bg-blue-200 transition-colors",children:a.jsx(eL,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"text-left flex-1",children:[a.jsx("div",{className:"font-semibold text-slate-900 text-lg",children:"Manual"}),a.jsx("div",{className:"text-sm text-slate-500",children:"Criar do zero passo a passo"})]})]})]}),a.jsx("div",{className:"px-6 py-4 bg-slate-50 border-t border-slate-200",children:a.jsx("button",{type:"button",onClick:()=>F(!1),className:"w-full px-4 py-2 text-sm font-medium text-slate-600 hover:text-slate-800 transition-colors",children:"Cancelar"})})]})})]})}function zi({label:e,name:t,value:r,onChange:s,placeholder:n,required:i=!1,type:l,className:d=""}){const[u,h]=_.useState(!1),[m,p]=_.useState([]),x=_.useRef(null),b=_.useRef(null),w=l==="name"?[{value:"Checklist de EPIs",category:"Segurana",description:"Verificao de equipamentos de proteo individual"},{value:"Inspeo de Segurana no Trabalho",category:"Segurana",description:"Avaliao geral das condies de segurana"},{value:"Checklist de Equipamentos de Emergncia",category:"Segurana",description:"Verificao de extintores, sadas de emergncia, etc."},{value:"Inspeo de CIPA",category:"Segurana",description:"Verificao das atividades da Comisso Interna de Preveno de Acidentes"},{value:"Checklist de Segurana em Mquinas",category:"Segurana",description:"Verificao de dispositivos de segurana em mquinas"},{value:"Inspeo de Sinalizao de Segurana",category:"Segurana",description:"Verificao da sinalizao de segurana do trabalho"},{value:"Checklist de Protees Coletivas",category:"Segurana",description:"Verificao de equipamentos de proteo coletiva"},{value:"Inspeo de Brigada de Incndio",category:"Segurana",description:"Avaliao da prontido da brigada de incndio"},{value:"Checklist de Investigao de Acidentes",category:"Segurana",description:"Procedimentos para investigao de acidentes de trabalho"},{value:"Inspeo de Segurana Patrimonial",category:"Segurana",description:"Verificao de sistemas de segurana patrimonial"},{value:"Checklist de Higiene e Limpeza",category:"Higiene",description:"Avaliao das condies de higiene do ambiente"},{value:"Inspeo de Higiene Alimentar",category:"Higiene",description:"Verificao das condies de higiene em cozinhas e refeitrios"},{value:"Checklist de Sanitrios e Vestirios",category:"Higiene",description:"Verificao das condies de sanitrios e vestirios"},{value:"Inspeo de Higiene Industrial",category:"Higiene",description:"Avaliao de riscos qumicos, fsicos e biolgicos"},{value:"Checklist de Controle de Pragas",category:"Higiene",description:"Verificao do controle de pragas e vetores"},{value:"Inspeo de Qualidade do Ar",category:"Higiene",description:"Monitoramento da qualidade do ar interno"},{value:"Checklist de Gesto Ambiental",category:"Meio Ambiente",description:"Avaliao do sistema de gesto ambiental"},{value:"Inspeo de Resduos Slidos",category:"Meio Ambiente",description:"Verificao do gerenciamento de resduos"},{value:"Checklist de Efluentes Lquidos",category:"Meio Ambiente",description:"Monitoramento de efluentes e guas residurias"},{value:"Inspeo de Emisses Atmosfricas",category:"Meio Ambiente",description:"Verificao do controle de emisses gasosas"},{value:"Checklist de Licenciamento Ambiental",category:"Meio Ambiente",description:"Verificao da conformidade com licenas ambientais"},{value:"Inspeo de reas de Preservao",category:"Meio Ambiente",description:"Verificao de reas de preservao permanente"},{value:"Checklist de Sustentabilidade",category:"Meio Ambiente",description:"Avaliao de prticas sustentveis"},{value:"Inspeo de Recursos Hdricos",category:"Meio Ambiente",description:"Monitoramento do uso de recursos hdricos"},{value:"Checklist de Clima Organizacional",category:"Psicossocial",description:"Avaliao do clima e ambiente de trabalho"},{value:"Inspeo de Ergonomia Cognitiva",category:"Psicossocial",description:"Verificao da carga mental de trabalho"},{value:"Checklist de Preveno ao Assdio",category:"Psicossocial",description:"Verificao de medidas preventivas contra assdio"},{value:"Inspeo de Bem-Estar no Trabalho",category:"Psicossocial",description:"Avaliao do bem-estar dos colaboradores"},{value:"Checklist de Gesto do Estresse",category:"Psicossocial",description:"Verificao de fatores de estresse ocupacional"},{value:"Inspeo de Comunicao Interna",category:"Psicossocial",description:"Avaliao da comunicao organizacional"},{value:"Checklist de Motivao e Engajamento",category:"Psicossocial",description:"Verificao de fatores motivacionais"},{value:"Checklist 5S - Seiri (Utilizao)",category:"5S",description:"Verificao da organizao e descarte de itens desnecessrios"},{value:"Checklist 5S - Seiton (Organizao)",category:"5S",description:"Verificao da arrumao e ordenao dos itens"},{value:"Checklist 5S - Seiso (Limpeza)",category:"5S",description:"Verificao da limpeza do ambiente de trabalho"},{value:"Checklist 5S - Seiketsu (Padronizao)",category:"5S",description:"Verificao da padronizao dos processos"},{value:"Checklist 5S - Shitsuke (Disciplina)",category:"5S",description:"Verificao da manuteno da disciplina e melhoria"},{value:"Inspeo de Organizao Geral",category:"Organizao",description:"Avaliao geral da organizao do trabalho"},{value:"Checklist de Layout do Trabalho",category:"Organizao",description:"Verificao do layout e fluxo de trabalho"},{value:"Inspeo de Produtividade",category:"Organizao",description:"Avaliao dos indicadores de produtividade"},{value:"Checklist de Treinamento Admissional",category:"Treinamento",description:"Verificao do treinamento de integrao"},{value:"Inspeo de Capacitao Tcnica",category:"Treinamento",description:"Avaliao de treinamentos tcnicos especficos"},{value:"Checklist de Treinamento em Segurana",category:"Treinamento",description:"Verificao de treinamentos de segurana do trabalho"},{value:"Prova de Treinamento NR-10",category:"Treinamento",description:"Avaliao de conhecimento em segurana eltrica"},{value:"Prova de Treinamento NR-33",category:"Treinamento",description:"Avaliao de conhecimento em espaos confinados"},{value:"Prova de Treinamento NR-35",category:"Treinamento",description:"Avaliao de conhecimento em trabalho em altura"},{value:"Checklist de Reciclagem",category:"Treinamento",description:"Verificao de treinamentos de reciclagem"},{value:"Inspeo de Competncias",category:"Treinamento",description:"Avaliao de competncias tcnicas e comportamentais"},{value:"Checklist de Ordem de Servio",category:"Ordem de Servio",description:"Verificao de cumprimento de ordens de servio"},{value:"Inspeo de Autorizao de Trabalho",category:"Ordem de Servio",description:"Verificao de autorizaes para trabalhos especiais"},{value:"Checklist de Permisso de Trabalho",category:"Ordem de Servio",description:"Verificao de permisses para trabalhos de risco"},{value:"Inspeo de Bloqueio e Etiquetagem",category:"Ordem de Servio",description:"Verificao de procedimentos LOTO"},{value:"Checklist de Trabalho a Quente",category:"Ordem de Servio",description:"Verificao de trabalhos de soldagem e corte"},{value:"Inspeo de Mquinas e Equipamentos",category:"Equipamentos",description:"Verificao do estado e funcionamento de equipamentos"},{value:"Inspeo de Instalaes Eltricas",category:"Instalaes",description:"Verificao da segurana eltrica"},{value:"Checklist de Caldeiras e Vasos de Presso",category:"Equipamentos",description:"Inspeo de equipamentos pressurizados"},{value:"Inspeo de Ventilao e Climatizao",category:"Instalaes",description:"Verificao de sistemas de ar condicionado"},{value:"Checklist de Rudo e Vibrao",category:"Segurana",description:"Avaliao de nveis de rudo e vibrao"},{value:"Inspeo de Iluminao",category:"Instalaes",description:"Verificao das condies de iluminao"},{value:"Checklist de Radiaes",category:"Segurana",description:"Monitoramento de radiaes ionizantes e no-ionizantes"},{value:"Inspeo de Trabalho em Altura",category:"Segurana",description:"Verificao de condies para trabalho em altura"},{value:"Checklist de Espaos Confinados",category:"Segurana",description:"Avaliao de segurana em espaos confinados"},{value:"Checklist de Soldagem e Corte",category:"Segurana",description:"Verificao de segurana em processos de soldagem"},{value:"Inspeo de Trabalho Noturno",category:"Segurana",description:"Verificao de condies para trabalho noturno"},{value:"Checklist de Trabalho com Produtos Qumicos",category:"Segurana",description:"Verificao do manuseio de substncias qumicas"},{value:"Inspeo de Obras e Construo",category:"Construo",description:"Verificao de segurana em obras"},{value:"Checklist de Andaimes",category:"Construo",description:"Verificao da segurana de andaimes"},{value:"Inspeo de Escavaes",category:"Construo",description:"Verificao de segurana em escavaes"},{value:"Checklist de Demolio",category:"Construo",description:"Verificao de procedimentos de demolio"},{value:"Inspeo de Estruturas Metlicas",category:"Construo",description:"Verificao de estruturas e soldas"},{value:"Inspeo de Veculos e Transporte",category:"Transporte",description:"Verificao de segurana de veculos"},{value:"Checklist de Empilhadeiras",category:"Transporte",description:"Verificao de empilhadeiras e equipamentos de movimentao"},{value:"Inspeo de Materiais Perigosos",category:"Transporte",description:"Verificao do transporte de materiais perigosos"},{value:"Checklist de NR-01 Gesto SST",category:"Normas",description:"Verificao de conformidade com NR-01"},{value:"Checklist de NR-04 SESMT",category:"Normas",description:"Verificao de conformidade com NR-04"},{value:"Checklist de NR-05 CIPA",category:"Normas",description:"Verificao de conformidade com NR-05"},{value:"Checklist de NR-06 EPI",category:"Normas",description:"Verificao de conformidade com NR-06"},{value:"Checklist de NR-07 PCMSO",category:"Normas",description:"Verificao de conformidade com NR-07"},{value:"Checklist de NR-09 PPRA",category:"Normas",description:"Verificao de conformidade com NR-09"},{value:"Checklist de NR-10 Eltrica",category:"Normas",description:"Verificao de conformidade com NR-10"},{value:"Checklist de NR-12 Mquinas",category:"Normas",description:"Verificao de conformidade com NR-12"},{value:"Checklist de NR-13 Caldeiras",category:"Normas",description:"Verificao de conformidade com NR-13"},{value:"Checklist de NR-15 Insalubridade",category:"Normas",description:"Verificao de conformidade com NR-15"},{value:"Checklist de NR-16 Periculosidade",category:"Normas",description:"Verificao de conformidade com NR-16"},{value:"Checklist de NR-17 Ergonomia",category:"Normas",description:"Verificao de conformidade com NR-17"},{value:"Inspeo de NR-18 Construo",category:"Normas",description:"Verificao de conformidade com NR-18"},{value:"Checklist de NR-20 Inflamveis",category:"Normas",description:"Verificao de conformidade com NR-20"},{value:"Checklist de NR-23 Incndio",category:"Normas",description:"Verificao de conformidade com NR-23"},{value:"Checklist de NR-24 Sanitrias",category:"Normas",description:"Verificao de conformidade com NR-24"},{value:"Checklist de NR-26 Sinalizao",category:"Normas",description:"Verificao de conformidade com NR-26"},{value:"Checklist de NR-32 Sade",category:"Normas",description:"Verificao de conformidade com NR-32"},{value:"Inspeo de NR-33 Espaos Confinados",category:"Normas",description:"Verificao de conformidade com NR-33"},{value:"Inspeo de NR-35 Trabalho em Altura",category:"Normas",description:"Verificao de conformidade com NR-35"},{value:"Checklist de NR-36 Abate e Processamento",category:"Normas",description:"Verificao de conformidade com NR-36"},{value:"Checklist ISO 9001 Qualidade",category:"ISO",description:"Verificao de conformidade com ISO 9001"},{value:"Checklist ISO 14001 Ambiental",category:"ISO",description:"Verificao de conformidade com ISO 14001"},{value:"Checklist ISO 45001 SST",category:"ISO",description:"Verificao de conformidade com ISO 45001"},{value:"Checklist OHSAS 18001",category:"ISO",description:"Verificao de conformidade com OHSAS 18001"},{value:"Inspeo de Certificao",category:"Conformidade",description:"Preparao para auditorias de certificao"}]:[{value:"Segurana do Trabalho",description:"Checklists relacionados  segurana ocupacional"},{value:"Equipamentos de Proteo",description:"Verificao de EPIs e EPCs"},{value:"Mquinas e Equipamentos",description:"Inspeo de equipamentos industriais"},{value:"Instalaes Eltricas",description:"Verificao de segurana eltrica"},{value:"Higiene Ocupacional",description:"Avaliao de condies de higiene"},{value:"Meio Ambiente",description:"Checklists ambientais e sustentabilidade"},{value:"Ergonomia",description:"Avaliao ergonmica dos postos de trabalho"},{value:"Construo Civil",description:"Inspees especficas para obras e construo"},{value:"Transporte e Logstica",description:"Verificao de veculos e processos logsticos"},{value:"Produtos Qumicos",description:"Manuseio e armazenamento de qumicos"},{value:"Trabalho em Altura",description:"Procedimentos para trabalho em altura"},{value:"Espaos Confinados",description:"Entrada e trabalho em espaos confinados"},{value:"Combate a Incndio",description:"Equipamentos e procedimentos de emergncia"},{value:"Primeiros Socorros",description:"Equipamentos e procedimentos mdicos"},{value:"Qualidade",description:"Controle e gesto da qualidade"},{value:"Manuteno",description:"Procedimentos de manuteno preventiva"},{value:"Operaes",description:"Procedimentos operacionais padro"},{value:"Treinamento",description:"Verificao de treinamentos e capacitaes"},{value:"Documentao",description:"Controle de documentos e registros"},{value:"Auditoria",description:"Checklists para auditorias internas"},{value:"Normas Regulamentadoras",description:"Conformidade com NRs do Ministrio do Trabalho"},{value:"ISO 45001",description:"Sistema de gesto de sade e segurana ocupacional"},{value:"OHSAS 18001",description:"Sistemas de gesto de segurana e sade ocupacional"},{value:"Emergncia e Contingncia",description:"Procedimentos de emergncia e planos de contingncia"}],N=T=>{if(!T.trim()){p(w.slice(0,8));return}const D=T.toLowerCase(),R=w.filter(I=>I.value.toLowerCase().includes(D)||I.description&&I.description.toLowerCase().includes(D)||I.category&&I.category.toLowerCase().includes(D));p(R.slice(0,10))},S=T=>{const D=T.target.value;s(D),N(D),u||h(!0)},j=T=>{var D;s(T.value),h(!1),(D=x.current)==null||D.blur()},k=()=>{N(r),h(!0)},A=()=>{setTimeout(()=>{h(!1)},200)};_.useEffect(()=>{const T=D=>{b.current&&!b.current.contains(D.target)&&h(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[]);const O=T=>{T.key==="Escape"&&h(!1)};return a.jsxs("div",{className:d,children:[a.jsxs("label",{htmlFor:t,className:"block text-sm font-medium text-slate-700 mb-2",children:[e," ",i&&a.jsx("span",{className:"text-red-500",children:"*"}),a.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[a.jsx(TS,{className:"w-3 h-3 text-amber-500"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Clique no campo para ver sugestes padronizadas"})]})]}),a.jsxs("div",{ref:b,className:"relative",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{ref:x,type:"text",id:t,name:t,value:r,onChange:S,onFocus:k,onBlur:A,onKeyDown:O,required:i,placeholder:n,className:"w-full px-3 py-2 pr-10 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoComplete:"off"}),a.jsxs("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:[u&&m.length>0&&a.jsx(_a,{className:"w-4 h-4 text-slate-400"}),a.jsx(qo,{className:`w-4 h-4 text-slate-400 transition-transform ${u?"rotate-180":""}`})]})]}),u&&m.length>0&&a.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-slate-300 rounded-lg shadow-lg max-h-80 overflow-y-auto",children:[a.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-slate-200",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(TS,{className:"w-4 h-4 text-amber-500"}),a.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Sugestes padronizadas (",m.length,")"]})]})}),a.jsx("div",{className:"max-h-64 overflow-y-auto",children:m.map((T,D)=>a.jsx("button",{type:"button",onMouseDown:R=>{R.preventDefault(),j(T)},className:"w-full px-4 py-3 text-left hover:bg-blue-50 active:bg-blue-100 transition-colors border-b border-slate-100 last:border-b-0 focus:outline-none focus:bg-blue-50 cursor-pointer",children:a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("span",{className:"font-medium text-slate-900 text-sm",children:T.value}),T.description&&a.jsx("span",{className:"text-xs text-slate-600 leading-relaxed",children:T.description}),T.category&&l==="name"&&a.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:["Categoria: ",T.category]})]})},D))}),m.length===0&&r.trim()!==""&&a.jsxs("div",{className:"p-4 text-center text-slate-500 text-sm",children:['Nenhuma sugesto encontrada para "',r,'"']})]})]})]})}function cR({value:e,onChange:t,fieldType:r,disabled:s=!1}){const[n,i]=_.useState([]);_.useEffect(()=>{let v=[];if(!e||e.trim()==="")v=l(r);else try{const N=JSON.parse(e);if(Array.isArray(N))v=N.filter(S=>S&&typeof S=="string"&&S.trim()!=="");else throw new Error("Not an array")}catch{const N=e.split("|").map(S=>S.trim()).filter(S=>S.length>0);v=N.length>0?N:l(r)}v.length===0&&(v=l(r)),i(v);const w=JSON.stringify(v);w!==e&&t(w)},[e,r]);const l=v=>{switch(v){case"multiselect":return["Adequado","Inadequado","No Verificado","No Aplicvel"];case"select":case"radio":return["Conforme","No Conforme","No Aplicvel"];case"checkbox":return["Sim","No"];default:return["Opo 1","Opo 2"]}},d=v=>{const w=v.filter(N=>N&&N.trim()!=="");if(w.length===0){const N=l(r);i(N),t(JSON.stringify(N));return}i(w),t(JSON.stringify(w))},u=()=>{const v=[...n,""];d(v)},h=v=>{if(n.length<=1)return;const w=n.filter((N,S)=>S!==v);d(w)},m=(v,w)=>{const N=[...n];N[v]=w,i(N),clearTimeout(p),p=setTimeout(()=>{const S=N.filter(k=>k.trim()!==""),j=S.length>0?S:l(r);t(JSON.stringify(j))},300)};let p;const x=v=>{v.key==="Enter"&&(v.preventDefault(),u(),setTimeout(()=>{const w=document.querySelector(`input[data-option-index="${n.length}"]`);w&&w.focus()},50))},b=(v,w)=>{const N=w==="up"?v-1:v+1;if(N>=0&&N<n.length){const S=[...n];[S[v],S[N]]=[S[N],S[v]],d(S)}},y=v=>{switch(v){case"multiselect":return"mltipla escolha";case"select":return"lista suspensa";case"radio":return"escolha nica";case"checkbox":return"caixa de seleo";default:return"este campo"}};return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700",children:["Opes para ",y(r)," *"]}),a.jsxs("button",{type:"button",onClick:u,disabled:s,className:"flex items-center px-3 py-1 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Kr,{className:"w-3 h-3 mr-1"}),"Adicionar"]})]}),a.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:n.map((v,w)=>a.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg p-2",children:[a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("button",{type:"button",onClick:()=>b(w,"up"),disabled:w===0||s,className:"p-0.5 text-slate-400 hover:text-slate-600 disabled:opacity-30",title:"Mover para cima",children:a.jsx(Xl,{className:"w-3 h-3 rotate-90"})}),a.jsx("button",{type:"button",onClick:()=>b(w,"down"),disabled:w===n.length-1||s,className:"p-0.5 text-slate-400 hover:text-slate-600 disabled:opacity-30",title:"Mover para baixo",children:a.jsx(Xl,{className:"w-3 h-3 -rotate-90"})})]}),a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-700 text-xs font-semibold rounded-full flex items-center justify-center",children:w+1}),a.jsx("input",{type:"text",value:v,onChange:N=>m(w,N.target.value),onKeyDown:N=>x(N),placeholder:`Opo ${w+1}`,disabled:s,"data-option-index":w,className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),a.jsx("button",{type:"button",onClick:()=>h(w),disabled:n.length<=1||s,className:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Remover opo",children:a.jsx(rr,{className:"w-4 h-4"})})]},w))}),n.length===0&&a.jsx("div",{className:"text-center py-6 text-slate-500 text-sm border-2 border-dashed border-slate-300 rounded-lg",children:'Nenhuma opo definida. Clique em "Adicionar" para comear.'}),a.jsx("div",{className:"text-xs text-slate-500 bg-slate-50 p-3 rounded-lg border",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"font-medium text-green-600",children:""}),a.jsxs("div",{children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Pressione Enter"})," no campo de texto para adicionar uma nova opo rapidamente."]}),a.jsxs("p",{className:"mt-1",children:["Campos de ",y(r)," precisam de pelo menos uma opo vlida."]})]})]})})]})}function Ose(){const e=na(),[t,r]=_.useState(!1),[s,n]=_.useState({name:"",description:"",category:"",is_public:!1}),[i,l]=_.useState([{field_name:"",field_type:"text",is_required:!1,options:"",order_index:0}]),d=[{value:"text",label:"Texto Curto"},{value:"textarea",label:"Texto Longo"},{value:"select",label:"Lista Suspensa"},{value:"multiselect",label:"Mltipla Escolha"},{value:"radio",label:"Escolha nica"},{value:"checkbox",label:"Caixa de Seleo"},{value:"boolean",label:"Conforme/No Conforme"},{value:"number",label:"Nmero"},{value:"date",label:"Data"},{value:"time",label:"Hora"},{value:"rating",label:"Avaliao (1-5)"}],u=async y=>{y.preventDefault(),r(!0);const v=["select","multiselect","radio"],w=[];if(i.forEach((N,S)=>{if(N.field_type&&v.includes(N.field_type)){let j=!1;try{if(N.options){const k=JSON.parse(N.options);j=Array.isArray(k)&&k.length>0&&k.some(A=>A&&A.trim()!=="")}}catch{j=N.options?N.options.trim().length>0:!1}j||w.push(S+1)}}),w.length>0){alert(`Os seguintes campos precisam ter opes configuradas: Campo(s) ${w.join(", ")}. Por favor, adicione as opes necessrias antes de salvar.`),r(!1);return}try{const N=await fetch("/api/checklist/checklist-templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!N.ok)throw new Error("Erro ao criar template");const j=(await N.json()).id;for(const k of i)k.field_name&&await fetch("/api/checklist/checklist-fields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...k,template_id:j})});e("/checklists")}catch(N){console.error("Erro:",N),alert("Erro ao criar template. Tente novamente.")}finally{r(!1)}},h=()=>{l([...i,{field_name:"",field_type:"text",is_required:!1,options:"",order_index:i.length}])},m=y=>{l(i.filter((v,w)=>w!==y))},p=(y,v)=>{const w=[...i];if(w[y]={...w[y],...v},v.field_type&&b(v.field_type)){const N=w[y];let S=!1;try{if(N.options){const j=JSON.parse(N.options);S=Array.isArray(j)&&j.length>0}}catch{S=N.options?N.options.trim().length>0:!1}if(!S){const j=v.field_type==="multiselect"?["Adequado","Inadequado","No Verificado","No Aplicvel"]:["Conforme","No Conforme","No Aplicvel"];w[y].options=JSON.stringify(j)}}l(w)},x=(y,v)=>{const w=[...i],N=y-1;N>=0&&N<i.length&&([w[y],w[N]]=[w[N],w[y]],w.forEach((S,j)=>{S.order_index=j}),l(w))},b=y=>["select","multiselect","radio"].includes(y);return a.jsx(Je,{children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/checklists"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:"Novo Template de Checklist"}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Crie um template personalizado para suas inspees"})]})]}),a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Informaes do Template"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(zi,{label:"Nome do Template",name:"name",value:s.name||"",onChange:y=>n({...s,name:y}),placeholder:"Ex: Checklist de EPIs",required:!0,type:"name"}),a.jsx(zi,{label:"Categoria",name:"category",value:s.category||"",onChange:y=>n({...s,category:y}),placeholder:"Ex: Segurana do Trabalho",required:!0,type:"category"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{rows:3,value:s.description,onChange:y=>n({...s,description:y.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva o objetivo e uso deste template..."})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:s.is_public,onChange:y=>n({...s,is_public:y.target.checked}),className:"mr-2 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Tornar este template pblico (outros usurios podero visualizar e usar)"})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Campos do Checklist"}),a.jsxs("button",{type:"button",onClick:h,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Adicionar Campo"]})]}),a.jsx("div",{className:"space-y-4",children:i.map((y,v)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("button",{type:"button",onClick:()=>x(v),disabled:v===0,className:"p-1 text-slate-400 hover:text-slate-600 disabled:opacity-50",children:a.jsx(Xl,{className:"w-4 h-4"})})}),a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full",children:v+1}),a.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Campo ",v+1]}),a.jsx("div",{className:"flex-1"}),a.jsx("button",{type:"button",onClick:()=>m(v),className:"p-1 text-red-500 hover:text-red-700",disabled:i.length===1,children:a.jsx(rr,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Campo"}),a.jsx("input",{type:"text",value:y.field_name,onChange:w=>p(v,{field_name:w.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Estado dos EPIs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo do Campo"}),a.jsx("select",{value:y.field_type,onChange:w=>p(v,{field_type:w.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:d.map(w=>a.jsx("option",{value:w.value,children:w.label},w.value))})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:y.is_required,onChange:w=>p(v,{is_required:w.target.checked}),className:"mr-2 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Obrigatrio"})]})})]}),b(y.field_type)&&a.jsx("div",{className:"mt-4",children:a.jsx(cR,{value:y.options||"",onChange:w=>p(v,{options:w}),fieldType:y.field_type,placeholder:y.field_type==="multiselect"?"Adequado, Inadequado, No Verificado, No Aplicvel":"Conforme, No Conforme, No Aplicvel"})})]},v))})]}),a.jsxs("div",{className:"flex items-center justify-end gap-4",children:[a.jsx("button",{type:"button",onClick:()=>e("/checklists"),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:t,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Ka,{className:"w-4 h-4 mr-2"}),t?"Criando...":"Criar Template"]})]})]})]})})}function Tse(){const e=na(),[t,r]=_.useState(!1),[s,n]=_.useState(null),[i,l]=_.useState(""),[d,u]=_.useState([]);_.useEffect(()=>{h()},[]);const h=async()=>{try{const k=await fetch("/api/checklist/tree");if(k.ok){const A=await k.json();u(A.tree||[])}}catch(k){console.error("Erro ao carregar pastas:",k)}},[m,p]=_.useState({industry:"",location_type:"",template_name:"",category:"",num_questions:10,specific_requirements:"",detail_level:"intermediario",regulation:"",custom_industry:"",custom_location:""}),x=["Construo Civil","Indstria Qumica","Indstria Alimentcia","Metalurgia","Hospitalar","Educacional","Comercial","Logstica e Transporte","Energia e Utilities","Outro"],b=["Escritrio","Fbrica","Canteiro de Obras","Laboratrio","Hospital","Escola","Armazm","rea Externa","Oficina","Outro"],y=[{value:"basico",label:"Bsico",description:"Perguntas sim/no simples e diretas"},{value:"intermediario",label:"Intermedirio",description:"Perguntas + campos de observao"},{value:"avancado",label:"Avanado",description:"Perguntas detalhadas + campos personalizados"}],v=["Nenhuma norma especfica","NR-01 - Gerenciamento de Riscos Ocupacionais","NR-04 - SESMT","NR-05 - CIPA","NR-06 - EPI","NR-07 - PCMSO","NR-09 - PPRA","NR-10 - Segurana em Eletricidade","NR-12 - Segurana em Mquinas","NR-13 - Caldeiras e Vasos","NR-15 - Insalubridade","NR-16 - Periculosidade","NR-17 - Ergonomia","NR-18 - Construo Civil","NR-20 - Inflamveis","NR-23 - Proteo Contra Incndio","NR-24 - Condies Sanitrias","NR-26 - Sinalizao de Segurana","NR-32 - Sade em Servios de Sade","NR-33 - Espaos Confinados","NR-35 - Trabalho em Altura","NR-36 - Abate e Processamento","ISO 45001 - Gesto de SST","ISO 14001 - Gesto Ambiental","ISO 9001 - Gesto da Qualidade","OHSAS 18001 - SST"],w=k=>{const T=15+k*5;let D="",R="";if(T<=30)D="~"+T+"s",R="Rpido";else if(T<=60)D="~"+T+"s",R="Mdio";else{const I=Math.floor(T/60),L=T%60;D=`~${I}min ${L}s`,R="Detalhado"}return{seconds:T,label:D,speed:R}},N=async()=>{if(!m.industry||!m.location_type||!m.template_name||!m.category){l("Por favor, preencha todos os campos obrigatrios.");return}r(!0),l("");try{console.log("Gerando checklist simples...",m);const k=await fetch("/api/checklist/checklist-templates/generate-ai-simple",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({industry:m.industry,location_type:m.location_type,template_name:m.template_name,category:m.category,num_questions:m.num_questions,specific_requirements:m.specific_requirements,detail_level:m.detail_level,regulation:m.regulation,priority_focus:"seguranca"})});if(!k.ok){let O={};try{O=await k.json(),console.error("[AI-GENERATOR] Backend error details:",O)}catch(D){console.error("[AI-GENERATOR] Failed to parse error body:",D)}const T=O==null?void 0:O.error;throw T?new Error(T):new Error(`Erro ${k.status}: ${k.statusText}`)}const A=await k.json();if(!A.success)throw new Error(A.error||"Falha ao gerar checklist");n(A),console.log("Checklist gerado com sucesso!")}catch(k){console.error("Erro detalhado:",k);const A=k instanceof Error?k.message:"Erro desconhecido";A.includes("502")||A.includes("timeout")?l(" Servidor sobrecarregado. Tente com menos perguntas (5-8) ou aguarde alguns minutos."):l(` ${A}`)}finally{r(!1)}},S=async(k,A,O)=>{r(!0);try{const T=await fetch("/api/checklist/checklist-templates/save-generated",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:k,fields:A,folder_id:O})});if(!T.ok){let R={};try{R=await T.json(),console.error("[AI-GENERATOR] Save error details:",R)}catch(L){console.error("[AI-GENERATOR] Failed to parse save error:",L)}const I=(R==null?void 0:R.details)||(R==null?void 0:R.error);throw I?new Error(I):new Error("Erro ao salvar template")}const D=await T.json();e(`/checklists/${D.id}`)}catch(T){console.error("Erro:",T),l("Erro ao salvar template. Tente novamente.")}finally{r(!1)}},j=()=>{n(null),N()};return a.jsx(Je,{children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/checklists"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h1",{className:"font-heading text-3xl font-bold text-slate-900 flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg",children:a.jsx(Oi,{className:"w-6 h-6 text-white"})}),"Gerador Simples de Checklist IA"]}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Verso simplificada para gerar checklists rapidamente"})]})]}),s?a.jsx(t1,{template:(s==null?void 0:s.template)||{},fields:(s==null?void 0:s.fields)||[],onSave:S,onCancel:()=>n(null),loading:t,title:"Preview do Checklist Gerado por IA",folders:d}):a.jsxs("div",{className:"space-y-6",children:[i&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[a.jsx(tr,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),a.jsx("p",{className:"text-red-800",children:i})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Setor/Indstria *"}),a.jsxs("select",{value:m.industry,onChange:k=>p({...m,industry:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Selecione o setor"}),x.map(k=>a.jsx("option",{value:k,children:k},k))]}),m.industry==="Outro"&&a.jsx("input",{type:"text",value:m.custom_industry,onChange:k=>p({...m,custom_industry:k.target.value}),placeholder:"Digite o setor/indstria",className:"w-full px-3 py-2 mt-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo de Local *"}),a.jsxs("select",{value:m.location_type,onChange:k=>p({...m,location_type:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Selecione o tipo de local"}),b.map(k=>a.jsx("option",{value:k,children:k},k))]}),m.location_type==="Outro"&&a.jsx("input",{type:"text",value:m.custom_location,onChange:k=>p({...m,custom_location:k.target.value}),placeholder:"Digite o tipo de local",className:"w-full px-3 py-2 mt-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-blue-50",required:!0})]}),a.jsx(zi,{label:"Nome do Template",name:"template_name",value:m.template_name,onChange:k=>p({...m,template_name:k}),placeholder:"Ex: Checklist de Segurana - Construo",required:!0,type:"name"}),a.jsx(zi,{label:"Categoria",name:"category",value:m.category,onChange:k=>p({...m,category:k}),placeholder:"Ex: Segurana, EPIs, Equipamentos",required:!0,type:"category"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-3",children:"Nvel de Detalhe"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:y.map(k=>a.jsxs("button",{type:"button",onClick:()=>p({...m,detail_level:k.value}),className:`p-4 border-2 rounded-lg transition-all text-left ${m.detail_level===k.value?"border-blue-500 bg-blue-50 ring-2 ring-blue-200":"border-slate-200 hover:border-blue-300 hover:bg-slate-50"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:`w-4 h-4 rounded-full border-2 flex items-center justify-center ${m.detail_level===k.value?"border-blue-500 bg-blue-500":"border-slate-300"}`,children:m.detail_level===k.value&&a.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),a.jsx("span",{className:"font-medium text-slate-900",children:k.label})]}),a.jsx("p",{className:"text-xs text-slate-600",children:k.description})]},k.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Baseado em Norma (Opcional)"}),a.jsx("select",{value:m.regulation,onChange:k=>p({...m,regulation:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:v.map(k=>a.jsx("option",{value:k,children:k},k))}),a.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Selecione uma norma para gerar perguntas de conformidade"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Nmero de Perguntas: ",m.num_questions]}),a.jsx("input",{type:"range",min:"5",max:"15",value:m.num_questions,onChange:k=>p({...m,num_questions:parseInt(k.target.value)}),className:"w-full accent-blue-500"}),a.jsxs("div",{className:"flex justify-between items-center text-xs mt-2",children:[a.jsx("span",{className:"text-slate-500",children:"5 (Rpido)"}),a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-full font-medium ${w(m.num_questions).seconds<=30?"bg-green-100 text-green-700":w(m.num_questions).seconds<=60?"bg-yellow-100 text-yellow-700":"bg-orange-100 text-orange-700"}`,children:[a.jsx("span",{children:""}),a.jsx("span",{children:w(m.num_questions).label}),a.jsxs("span",{className:"text-xs opacity-75",children:["(",w(m.num_questions).speed,")"]})]}),a.jsx("span",{className:"text-slate-500",children:"15 (Detalhado)"})]})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Requisitos Especficos (Opcional)"}),a.jsx("textarea",{rows:3,value:m.specific_requirements,onChange:k=>p({...m,specific_requirements:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva requisitos especficos, equipamentos especiais, etc..."})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:N,disabled:t||!m.industry||!m.location_type,className:"flex items-center px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-lg font-medium",children:t?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Gerando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Po,{className:"w-6 h-6 mr-3"}),"Gerar Checklist"]})})}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:" Dicas para melhor resultado:"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:" Use 5-10 perguntas para gerar mais rpido"}),a.jsx("li",{children:" Seja especfico no setor e tipo de local"}),a.jsx("li",{children:" Se der erro 502, tente com menos perguntas"})]})]})]}),s&&a.jsx("div",{className:"flex justify-center",children:a.jsxs("button",{onClick:j,disabled:t,className:"flex items-center px-6 py-3 text-purple-600 border border-purple-200 rounded-lg hover:bg-purple-50 transition-colors",children:[a.jsx($o,{className:`w-5 h-5 mr-2 ${t?"animate-spin":""}`}),"Gerar Novo Checklist"]})})]})})}function Pse(){const e=na(),[t,r]=_.useState(!1),[s,n]=_.useState(""),[i,l]=_.useState([]),[d,u]=_.useState(!1),[h,m]=_.useState({template_name:"",category:"",csv_data:""}),[p,x]=_.useState([]);_.useEffect(()=>{b()},[]);const b=async()=>{try{const O=await fetch("/api/checklist/tree");if(O.ok){const T=await O.json();x(T.tree||[])}}catch(O){console.error("Erro ao carregar pastas:",O)}},y=`campo,tipo,obrigatorio,opcoes
Nome do Funcionrio,text,true,
Data da Inspeo,date,true,
EPIs Adequados,boolean,true,
Estado dos Equipamentos,select,true,"Bom,Regular,Ruim"
Observaes,textarea,false,
Avaliao Geral,rating,true,`,v={text:"Texto Curto",textarea:"Texto Longo",select:"Lista Suspensa",boolean:"Conforme/No Conforme",date:"Data",time:"Hora",number:"Nmero",rating:"Avaliao (1-5)",checkbox:"Caixa de Seleo",radio:"Escolha nica",multiselect:"Mltipla Escolha",file:"Upload de Arquivo"},w=()=>{const O=new Blob([y],{type:"text/csv;charset=utf-8;"}),T=document.createElement("a"),D=URL.createObjectURL(O);T.setAttribute("href",D),T.setAttribute("download","modelo_checklist.csv"),T.style.visibility="hidden",document.body.appendChild(T),T.click(),document.body.removeChild(T)},N=O=>{var D;const T=(D=O.target.files)==null?void 0:D[0];if(T){const R=new FileReader;R.onload=I=>{var $;const L=($=I.target)==null?void 0:$.result;n(L),S(L)},R.readAsText(T)}},S=O=>{try{const T=O.trim().split(`
`),D=T[0].split(",").map(I=>I.trim().replace(/"/g,""));if(!D.includes("campo")||!D.includes("tipo")){alert('CSV deve conter pelo menos as colunas "campo" e "tipo"');return}const R=T.slice(1).map((I,L)=>{const $=I.split(",").map(P=>P.trim().replace(/"/g,"")),W={order_index:L};return D.forEach((P,U)=>{var K;P==="campo"?W.field_name=$[U]:P==="tipo"?W.field_type=$[U]:P==="obrigatorio"?W.is_required=((K=$[U])==null?void 0:K.toLowerCase())==="true":P==="opcoes"&&(W.options=$[U]?JSON.stringify($[U].split("|")):"")}),W}).filter(I=>I.field_name&&I.field_type);l(R)}catch(T){console.error("Erro ao parsear CSV:",T),alert("Erro ao processar o arquivo CSV. Verifique o formato.")}},j=O=>{n(O),O.trim()?S(O):l([])},k=()=>{if(!h.template_name||!h.category||!s){alert("Preencha todos os campos obrigatrios");return}u(!0)},A=async(O,T,D)=>{r(!0);try{const R=await fetch("/api/checklist/checklist-templates",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...O,folder_id:D})});if(!R.ok)throw new Error("Erro ao criar template");const L=(await R.json()).id;for(const $ of T)$.field_name&&await fetch("/api/checklist/checklist-fields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...$,template_id:L})});e(`/checklists/${L}`)}catch(R){console.error("Erro ao salvar template:",R),alert("Erro ao salvar template. Tente novamente.")}finally{r(!1)}};return a.jsx(Je,{children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>e("/checklists"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"font-heading text-3xl font-bold text-slate-900 flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg",children:a.jsx(Pi,{className:"w-6 h-6 text-white"})}),"Importar Checklist via CSV"]}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Importe checklists de arquivos CSV ou planilhas"})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Vy,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Como importar seu checklist"}),a.jsxs("div",{className:"text-blue-800 text-sm space-y-2",children:[a.jsx("p",{children:"1. Baixe o modelo CSV clicando no boto abaixo"}),a.jsx("p",{children:"2. Preencha o arquivo com seus campos de checklist"}),a.jsx("p",{children:"3. Faa upload do arquivo ou cole o contedo na rea de texto"}),a.jsx("p",{children:'4. Revise a prvia e clique em "Importar Template"'})]}),a.jsxs("button",{onClick:w,className:"flex items-center mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Baixar Modelo CSV"]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Informaes do Template"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(zi,{label:"Nome do Template",name:"template_name",value:h.template_name,onChange:O=>m({...h,template_name:O}),placeholder:"Ex: Checklist de Segurana Importado",required:!0,type:"name"}),a.jsx(zi,{label:"Categoria",name:"category",value:h.category,onChange:O=>m({...h,category:O}),placeholder:"Ex: Segurana, Equipamentos, Higiene",required:!0,type:"category"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Dados do Checklist"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Upload de Arquivo CSV"}),a.jsxs("div",{className:"border-2 border-dashed border-slate-300 rounded-lg p-6 text-center hover:border-blue-400 transition-colors",children:[a.jsx(jr,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"Arraste e solte seu arquivo CSV aqui ou clique para selecionar"}),a.jsx("input",{type:"file",accept:".csv",onChange:N,className:"hidden",id:"csv-upload"}),a.jsxs("label",{htmlFor:"csv-upload",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 cursor-pointer transition-colors",children:[a.jsx(Pi,{className:"w-4 h-4 mr-2"}),"Selecionar Arquivo"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ou cole os dados CSV aqui"}),a.jsx("textarea",{rows:8,value:s,onChange:O=>j(O.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:`campo,tipo,obrigatorio,opcoes
Nome do Funcionrio,text,true,
Data da Inspeo,date,true,
EPIs Adequados,boolean,true,`})]})]})]}),i.length>0&&!d&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6 flex items-center gap-2",children:[a.jsx(Ba,{className:"w-5 h-5 text-green-600"}),"CSV Processado (",i.length," campos detectados)"]}),a.jsxs("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:[i.slice(0,3).map((O,T)=>a.jsx("div",{className:"border border-slate-200 rounded-lg p-3 bg-slate-50",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{children:[a.jsxs("h4",{className:"font-medium text-slate-900 text-sm flex items-center gap-2",children:[O.field_name,O.is_required&&a.jsx("span",{className:"text-red-500 text-xs",children:"*"})]}),a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Tipo: ",v[O.field_type]||O.field_type]})]})})},T)),i.length>3&&a.jsxs("p",{className:"text-sm text-slate-500 text-center",children:["... e mais ",i.length-3," campos"]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6 pt-6 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>{n(""),l([])},className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Limpar"}),a.jsxs("button",{onClick:k,disabled:t||!h.template_name||!h.category,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[a.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Visualizar e Editar Template"]})]})]}),d&&a.jsx(t1,{template:{name:h.template_name,description:"Template importado de CSV",category:h.category,created_by:"CSV Import",is_public:!1},fields:i,onSave:A,onCancel:()=>u(!1),loading:t,title:"Preview do Template Importado",folders:p}),a.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-6",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Tipos de Campo Suportados"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:Object.entries(v).map(([O,T])=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("code",{className:"bg-slate-200 px-2 py-1 rounded text-xs",children:O}),a.jsx("span",{className:"text-slate-700",children:T})]},O))}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-300",children:[a.jsx("h4",{className:"font-medium text-slate-800 mb-2",children:"Formato das opes:"}),a.jsxs("p",{className:"text-sm text-slate-600",children:["Para campos de tipo ",a.jsx("code",{className:"bg-slate-200 px-1 rounded",children:"select"}),",",a.jsx("code",{className:"bg-slate-200 px-1 rounded mx-1",children:"radio"})," ou",a.jsx("code",{className:"bg-slate-200 px-1 rounded ml-1",children:"multiselect"}),', separe as opes com pipe (|). Exemplo: "Bom|Regular|Ruim"']})]})]})]})})}function Rse(){const{id:e}=$i(),t=na(),[r,s]=_.useState(null),[n,i]=_.useState(!0);_.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{const x=await fetch(`/api/checklist/checklist-templates/${e}`);if(x.ok){const b=await x.json();s({...b.template,fields:b.fields||[]})}}catch(x){console.error("Erro ao carregar template:",x)}finally{i(!1)}},d=async()=>{if(confirm("Tem certeza que deseja excluir este template?"))try{(await fetch(`/api/checklist/checklist-templates/${e}`,{method:"DELETE"})).ok&&t("/checklists")}catch(x){console.error("Erro ao excluir template:",x)}},u=async()=>{try{const x=await fetch(`/api/checklist/checklist-templates/${e}/duplicate`,{method:"POST"});if(x.ok){const b=await x.json();t(`/checklists/${b.id}`)}}catch(x){console.error("Erro ao duplicar template:",x)}},h=()=>{if(!r)return;const x=`campo,tipo,obrigatorio,opcoes
`+r.fields.map(w=>{const N=w.options?JSON.parse(w.options).join("|"):"";return`"${w.field_name}","${w.field_type}","${w.is_required}","${N}"`}).join(`
`),b=new Blob([x],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),v=URL.createObjectURL(b);y.setAttribute("href",v),y.setAttribute("download",`${r.name.replace(/\s+/g,"_")}.csv`),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},m=x=>{console.log("Respostas do checklist:",x),alert("Respostas salvas com sucesso! (Implementao de exemplo)")},p=(x,b,y)=>{console.log("Auto-save preview:",{responses:x,comments:b,complianceStatuses:y})};return n?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):r?a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("button",{onClick:()=>t("/checklists"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"font-heading text-2xl font-bold text-slate-900",children:r.name}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Visualizar e testar template de checklist"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:h,className:"flex items-center px-3 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm",children:[a.jsx(Fa,{className:"w-4 h-4 mr-1"}),"CSV"]}),a.jsxs("button",{onClick:u,className:"flex items-center px-3 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm",children:[a.jsx(Ti,{className:"w-4 h-4 mr-1"}),"Duplicar"]}),a.jsxs("button",{onClick:()=>t(`/checklists/${e}/edit`),className:"flex items-center px-3 py-2 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors text-sm",children:[a.jsx(Ha,{className:"w-4 h-4 mr-1"}),"Editar"]}),a.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 text-red-600 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-sm",children:[a.jsx(rr,{className:"w-4 h-4 mr-1"}),"Excluir"]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(T9,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Categoria"}),a.jsx("p",{className:"font-medium text-slate-900",children:r.category})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Criado em"}),a.jsx("p",{className:"font-medium text-slate-900",children:new Date(r.created_at).toLocaleDateString("pt-BR")})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[r.is_public?a.jsx(Dt,{className:"w-5 h-5 text-green-500"}):a.jsx(Jl,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Visibilidade"}),a.jsx("p",{className:"font-medium text-slate-900",children:r.is_public?"Pblico":"Privado"})]})]})]}),r.description&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[a.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Descrio"}),a.jsx("p",{className:"text-slate-700",children:r.description})]}),r.created_by&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wr,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{className:"text-sm text-slate-500",children:["Criado por: ",r.created_by]})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-2",children:"Preview do Checklist"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Visualize e teste como este checklist funcionar em uma inspeo real."})]}),r.fields.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ha,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhum campo definido"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Adicione campos para ver o preview do checklist"}),a.jsx("button",{onClick:()=>t(`/checklists/${e}/edit`),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Adicionar Campos"})]}):a.jsx(Qj,{fields:r.fields,onSubmit:m,readonly:!1,onAutoSave:p})]})]})}):a.jsx(Je,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(rr,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Checklist no encontrado"}),a.jsx("button",{onClick:()=>t("/checklists"),className:"text-blue-600 hover:underline",children:"Voltar para templates"})]})})}function Dse({fields:e}){const r=(()=>{const l=[],d=["select","multiselect","radio"];return e.forEach((u,h)=>{if((!u.field_name||u.field_name.trim()==="")&&l.push({type:"error",fieldIndex:h,message:`Campo ${h+1}: Nome  obrigatrio`,suggestion:"Adicione um nome descritivo para este campo"}),u.field_type&&d.includes(u.field_type)){let m=!1;try{if(u.options){const p=JSON.parse(u.options);m=Array.isArray(p)&&p.length>0&&p.some(x=>x&&x.trim()!=="")}}catch{m=u.options?u.options.trim().length>0:!1}if(!m){const p=u.field_type==="select"?"Lista Suspensa":u.field_type==="multiselect"?"Mltipla Escolha":"Escolha nica";l.push({type:"error",fieldIndex:h,message:`Campo ${h+1}: Tipo "${p}" requer opes`,suggestion:"Adicione pelo menos uma opo vlida para este campo"})}}u.field_name&&u.field_name.length>200&&l.push({type:"warning",fieldIndex:h,message:`Campo ${h+1}: Nome muito longo (${u.field_name.length} caracteres)`,suggestion:"Considere um nome mais conciso para melhor usabilidade"}),u.is_required&&(!u.field_name||u.field_name.trim()==="")&&l.push({type:"info",fieldIndex:h,message:`Campo ${h+1}: Marcado como obrigatrio`,suggestion:"Campos obrigatrios devem ser preenchidos pelos usurios"})}),l})(),s=r.filter(l=>l.type==="error"),n=r.filter(l=>l.type==="warning"),i=r.filter(l=>l.type==="info");return r.length===0?a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(aa,{className:"w-5 h-5 text-green-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Template vlido"}),a.jsx("p",{className:"text-sm text-green-600 mt-1",children:"Todos os campos esto configurados corretamente."})]})]})}):a.jsxs("div",{className:"space-y-3",children:[s.length>0&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Nt,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-sm font-medium text-red-800",children:["Erros encontrados (",s.length,")"]}),a.jsx("div",{className:"mt-2 space-y-2",children:s.map((l,d)=>a.jsxs("div",{className:"text-sm text-red-600",children:[a.jsx("p",{className:"font-medium",children:l.message}),l.suggestion&&a.jsxs("p",{className:"text-red-500 ml-4",children:[" ",l.suggestion]})]},d))})]})]})}),n.length>0&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Nt,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-sm font-medium text-yellow-800",children:["Avisos (",n.length,")"]}),a.jsx("div",{className:"mt-2 space-y-2",children:n.map((l,d)=>a.jsxs("div",{className:"text-sm text-yellow-600",children:[a.jsx("p",{className:"font-medium",children:l.message}),l.suggestion&&a.jsxs("p",{className:"text-yellow-500 ml-4",children:[" ",l.suggestion]})]},d))})]})]})}),i.length>0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Vy,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"text-sm font-medium text-blue-800",children:["Informaes (",i.length,")"]}),a.jsx("div",{className:"mt-2 space-y-2",children:i.map((l,d)=>a.jsxs("div",{className:"text-sm text-blue-600",children:[a.jsx("p",{className:"font-medium",children:l.message}),l.suggestion&&a.jsxs("p",{className:"text-blue-500 ml-4",children:[" ",l.suggestion]})]},d))})]})]})})]})}function Mse(){const{id:e}=$i(),t=na(),[r,s]=_.useState(!1),[n,i]=_.useState(!0),[l,d]=_.useState({name:"",description:"",category:"",is_public:!1}),[u,h]=_.useState([]),m=[{value:"text",label:"Texto Curto"},{value:"textarea",label:"Texto Longo"},{value:"select",label:"Lista Suspensa"},{value:"multiselect",label:"Mltipla Escolha"},{value:"radio",label:"Escolha nica"},{value:"checkbox",label:"Caixa de Seleo"},{value:"boolean",label:"Conforme/No Conforme"},{value:"number",label:"Nmero"},{value:"date",label:"Data"},{value:"time",label:"Hora"},{value:"rating",label:"Avaliao (1-5)"}];_.useEffect(()=>{e&&p()},[e]);const p=async()=>{try{const S=await fetch(`/api/checklist/checklist-templates/${e}`);if(S.ok){const j=await S.json();d(j.template),h(j.fields||[])}else throw new Error("Template no encontrado")}catch(S){console.error("Erro ao carregar template:",S),alert("Erro ao carregar template"),t("/checklists")}finally{i(!1)}},x=async S=>{S.preventDefault(),s(!0);const j=["select","multiselect","radio"],k=[];if(u.forEach((A,O)=>{if(A.field_type&&j.includes(A.field_type)){let T=!1;try{if(A.options){const D=JSON.parse(A.options);T=Array.isArray(D)&&D.length>0&&D.some(R=>R&&R.trim()!=="")}}catch{T=A.options?A.options.trim().length>0:!1}T||k.push(O+1)}}),k.length>0){alert(`Os seguintes campos precisam ter opes configuradas: Campo(s) ${k.join(", ")}. Por favor, adicione as opes necessrias antes de salvar.`),s(!1);return}try{if(!(await fetch(`/api/checklist/checklist-templates/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)})).ok)throw new Error("Erro ao atualizar template");await fetch(`/api/checklist/checklist-templates/${e}/fields`,{method:"DELETE"});for(const O of u)O.field_name&&await fetch("/api/checklist/checklist-fields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...O,template_id:parseInt(e)})});t(`/checklists/${e}`)}catch(A){console.error("Erro:",A),alert("Erro ao atualizar template. Tente novamente.")}finally{s(!1)}},b=()=>{h([...u,{field_name:"",field_type:"text",is_required:!1,options:"",order_index:u.length}])},y=S=>{h(u.filter((j,k)=>k!==S))},v=(S,j)=>{const k=[...u];if(k[S]={...k[S],...j},j.field_type&&N(j.field_type)){const A=k[S];let O=!1;try{if(A.options){const T=JSON.parse(A.options);O=Array.isArray(T)&&T.length>0}}catch{O=A.options?A.options.trim().length>0:!1}if(!O){const T=j.field_type==="multiselect"?["Adequado","Inadequado","No Verificado","No Aplicvel"]:["Conforme","No Conforme","No Aplicvel"];k[S].options=JSON.stringify(T)}}h(k)},w=(S,j)=>{const k=[...u],A=S-1;A>=0&&A<u.length&&([k[S],k[A]]=[k[A],k[S]],k.forEach((O,T)=>{O.order_index=T}),h(k))},N=S=>["select","multiselect","radio"].includes(S);return n?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>t(`/checklists/${e}`),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:["Editar Template: ",l.name]}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Modifique os campos e configuraes do template"})]})]}),a.jsxs("form",{onSubmit:x,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900 mb-6",children:"Informaes do Template"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx(zi,{label:"Nome do Template",name:"name",value:l.name||"",onChange:S=>d({...l,name:S}),placeholder:"Ex: Checklist de EPIs",required:!0,type:"name"}),a.jsx(zi,{label:"Categoria",name:"category",value:l.category||"",onChange:S=>d({...l,category:S}),placeholder:"Ex: Segurana do Trabalho",required:!0,type:"category"}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Descrio"}),a.jsx("textarea",{rows:3,value:l.description,onChange:S=>d({...l,description:S.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva o objetivo e uso deste template..."})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:l.is_public,onChange:S=>d({...l,is_public:S.target.checked}),className:"mr-2 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Tornar este template pblico (outros usurios podero visualizar e usar)"})]})})]})]}),u.length>0&&a.jsx(Dse,{fields:u}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"font-heading text-xl font-semibold text-slate-900",children:"Campos do Checklist"}),a.jsxs("button",{type:"button",onClick:b,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Adicionar Campo"]})]}),a.jsxs("div",{className:"space-y-4",children:[u.map((S,j)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4 bg-slate-50",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"flex items-center gap-1",children:a.jsx("button",{type:"button",onClick:()=>w(j),disabled:j===0,className:"p-1 text-slate-400 hover:text-slate-600 disabled:opacity-50",children:a.jsx(Xl,{className:"w-4 h-4"})})}),a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full",children:j+1}),a.jsxs("span",{className:"text-sm font-medium text-slate-700",children:["Campo ",j+1]}),a.jsx("div",{className:"flex-1"}),a.jsx("button",{type:"button",onClick:()=>y(j),className:"p-1 text-red-500 hover:text-red-700",disabled:u.length===1,children:a.jsx(rr,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome do Campo"}),a.jsx("input",{type:"text",value:S.field_name,onChange:k=>v(j,{field_name:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Estado dos EPIs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tipo do Campo"}),a.jsx("select",{value:S.field_type,onChange:k=>v(j,{field_type:k.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:m.map(k=>a.jsx("option",{value:k.value,children:k.label},k.value))})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:S.is_required,onChange:k=>v(j,{is_required:k.target.checked}),className:"mr-2 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"text-sm text-slate-700",children:"Obrigatrio"})]})})]}),N(S.field_type)&&a.jsx("div",{className:"mt-4",children:a.jsx(cR,{value:S.options||"",onChange:k=>v(j,{options:k}),fieldType:S.field_type,placeholder:S.field_type==="multiselect"?"Adequado, Inadequado, No Verificado, No Aplicvel":"Conforme, No Conforme, No Aplicvel"})})]},j)),u.length===0&&a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-slate-500",children:'Nenhum campo definido. Clique em "Adicionar Campo" para comear.'})})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-4",children:[a.jsx("button",{type:"button",onClick:()=>t(`/checklists/${e}`),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsxs("button",{type:"submit",disabled:r,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Ka,{className:"w-4 h-4 mr-2"}),r?"Salvando...":"Salvar Alteraes"]})]})]})]})})}function QA({action:e,inspection:t,onSave:r,onCancel:s}){const[n,i]=_.useState({...e}),l=u=>{u.preventDefault(),r(n)},d=(u,h)=>{i(m=>({...m,[u]:h}))};return a.jsxs("form",{onSubmit:l,className:"space-y-4 bg-slate-50 p-4 rounded-lg border border-slate-200",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Ttulo da Ao *"}),a.jsx("input",{type:"text",required:!0,value:n.title||"",onChange:u=>d("title",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Instalar equipamento de proteo"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-red-600",children:"O que?"})," (Descrio)"]}),a.jsx("textarea",{value:n.what_description||"",onChange:u=>d("what_description",u.target.value),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"O que precisa ser feito..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-green-600",children:"Onde?"})," (Local)"]}),a.jsx("input",{type:"text",value:n.where_location||"",onChange:u=>d("where_location",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Local especfico..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-blue-600",children:"Por que?"})," (Justificativa)"]}),a.jsx("textarea",{value:n.why_reason||"",onChange:u=>d("why_reason",u.target.value),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Justificativa da ao..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-indigo-600",children:"Como?"})," (Mtodo)"]}),a.jsx("textarea",{value:n.how_method||"",onChange:u=>d("how_method",u.target.value),rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Como ser executado..."})]}),(t==null?void 0:t.action_plan_type)==="5w2h"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-purple-600",children:"Quem?"})," (Responsvel)"]}),a.jsx("input",{type:"text",value:n.who_responsible||"",onChange:u=>d("who_responsible",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Responsvel pela execuo..."})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-yellow-600",children:"Quando?"})," (Prazo)"]}),a.jsx("input",{type:"date",value:n.when_deadline||"",onChange:u=>d("when_deadline",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx("span",{className:"text-orange-600",children:"Quanto?"})," (Custo)"]}),a.jsx("input",{type:"text",value:n.how_much_cost||"",onChange:u=>d("how_much_cost",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Estimativa de custo..."})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status"}),a.jsxs("select",{value:n.status||"pending",onChange:u=>d("status",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"pending",children:"Pendente"}),a.jsx("option",{value:"in_progress",children:"Em Andamento"}),a.jsx("option",{value:"completed",children:"Concluda"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Prioridade"}),a.jsxs("select",{value:n.priority||"media",onChange:u=>d("priority",u.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"baixa",children:"Baixa"}),a.jsx("option",{value:"media",children:"Mdia"}),a.jsx("option",{value:"alta",children:"Alta"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-4 border-t border-slate-200",children:[a.jsxs("button",{type:"submit",className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Salvar"]}),a.jsxs("button",{type:"button",onClick:s,className:"flex items-center px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx(ct,{className:"w-4 h-4 mr-2"}),"Cancelar"]})]})]})}function Ise(){const{id:e}=$i(),[t,r]=_.useState(null),[s,n]=_.useState([]),[i,l]=_.useState(!0),[d,u]=_.useState(null),[h,m]=_.useState(!1),[p,x]=_.useState({title:"",what_description:"",where_location:"",why_reason:"",how_method:"",who_responsible:"",when_deadline:"",how_much_cost:"",status:"pending",priority:"media",is_ai_generated:!1});_.useEffect(()=>{e&&b()},[e]),_.useEffect(()=>{const k=new URLSearchParams(window.location.search).get("highlightAction");k&&setTimeout(()=>{const A=document.getElementById(`action-${k}`);A&&(A.scrollIntoView({behavior:"smooth",block:"center"}),A.classList.add("ring-2","ring-blue-500","ring-opacity-50"),setTimeout(()=>{A.classList.remove("ring-2","ring-blue-500","ring-opacity-50")},3e3))},500)},[s]);const b=async()=>{try{const j=await fetch(`/api/inspections/${e}/action-plan`);if(j.ok){const k=await j.json();r(k.inspection),n(k.action_items||[])}}catch(j){console.error("Erro ao carregar plano de ao:",j)}finally{l(!1)}},y=async j=>{try{const k=j.id?"PUT":"POST",A=j.id?`/api/action-items/${j.id}`:`/api/inspections/${e}/action-items`,O=await fetch(A,{method:k,headers:{"Content-Type":"application/json"},body:JSON.stringify({...j,inspection_id:parseInt(e)})});if(O.ok)await b(),u(null),m(!1),x({title:"",what_description:"",where_location:"",why_reason:"",how_method:"",who_responsible:"",when_deadline:"",how_much_cost:"",status:"pending",priority:"media",is_ai_generated:!1}),alert("Ao salva com sucesso!");else{const T=await O.json();console.error("Erro no servidor:",T),alert("Erro ao salvar ao. Tente novamente.")}}catch(k){console.error("Erro ao salvar ao:",k),alert("Erro ao salvar ao. Verifique sua conexo e tente novamente.")}},v=async j=>{if(confirm("Tem certeza que deseja excluir esta ao?"))try{const k=await fetch(`/api/action-items/${j}`,{method:"DELETE"});if(k.ok)await b(),alert("Ao excluda com sucesso!");else{const A=await k.json();console.error("Erro no servidor:",A),alert("Erro ao excluir ao. Tente novamente.")}}catch(k){console.error("Erro ao excluir ao:",k),alert("Erro ao excluir ao. Verifique sua conexo e tente novamente.")}},w=j=>{switch(j){case"pending":return a.jsx(wr,{className:"w-4 h-4 text-yellow-500"});case"in_progress":return a.jsx(yr,{className:"w-4 h-4 text-blue-500"});case"completed":return a.jsx(Ct,{className:"w-4 h-4 text-green-500"});default:return a.jsx(wr,{className:"w-4 h-4 text-gray-500"})}},N=j=>{switch(j){case"pending":return"Pendente";case"in_progress":return"Em Andamento";case"completed":return"Concluda";default:return j}},S=j=>{switch(j){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return i?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):t?a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(vt,{to:`/inspections/${e}`,className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:"Plano de Ao"}),a.jsx("p",{className:"text-slate-600 mt-1",children:t.title})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${t.action_plan_type==="5w2h"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:t.action_plan_type==="5w2h"?"5W2H":"Simples"}),a.jsxs("button",{onClick:()=>m(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Nova Ao"]})]})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Local"}),a.jsx("p",{className:"font-medium text-slate-900",children:t.location})]})]}),t.company_name&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-5 h-5 text-slate-400",children:a.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Empresa"}),a.jsx("p",{className:"font-medium text-slate-900",children:t.company_name})]})]})]})}),h&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Nova Ao"}),a.jsx(QA,{action:p,inspection:t,onSave:y,onCancel:()=>m(!1)})]}),a.jsx("div",{className:"space-y-4",children:s.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center",children:[a.jsx(yr,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhuma ao definida"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Crie aes para organizar o plano de trabalho"})]}):s.map(j=>a.jsx("div",{id:`action-${j.id}`,className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 transition-all duration-300",children:(d==null?void 0:d.id)===j.id?a.jsxs("div",{children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Editar Ao"}),a.jsx(QA,{action:d||{},inspection:t,onSave:y,onCancel:()=>u(null)})]}):a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900",children:j.title}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${S(j.priority)}`,children:j.priority.charAt(0).toUpperCase()+j.priority.slice(1)}),j.is_ai_generated&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"IA"})]}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[w(j.status),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:N(j.status)}),j.when_deadline&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-300",children:""}),a.jsx(Gr,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm text-slate-600",children:new Date(j.when_deadline).toLocaleDateString("pt-BR")})]}),j.who_responsible&&a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-300",children:""}),a.jsx(Wr,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm text-slate-600",children:j.who_responsible})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>u(j),className:"p-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:a.jsx(Ha,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>v(j.id),className:"p-2 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(rr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[j.what_description&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-red-600",children:"O que:"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:j.what_description})]}),j.where_location&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-green-600",children:"Onde:"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:j.where_location})]}),j.why_reason&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Por que:"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:j.why_reason})]}),j.how_method&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-indigo-600",children:"Como:"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:j.how_method})]}),j.how_much_cost&&t.action_plan_type==="5w2h"&&a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Quanto:"}),a.jsx("p",{className:"text-sm text-slate-700 mt-1",children:j.how_much_cost})]})]})]})},j.id))})]})}):a.jsx(Je,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nt,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Inspeo no encontrada"}),a.jsx(vt,{to:"/inspections",className:"text-blue-600 hover:underline",children:"Voltar para inspees"})]})})}function zse(){const[e,t]=ju(),[r,s]=_.useState([]),[n,i]=_.useState([]),[l,d]=_.useState(!0),[u,h]=_.useState(!1),[m,p]=_.useState(e.get("org")?parseInt(e.get("org")):null),[x,b]=_.useState({total:0,pending:0,inProgress:0,completed:0,overdue:0,highPriority:0}),[y,v]=_.useState({status:"all",priority:"all",overdue:!1,aiGenerated:!1,search:""});_.useEffect(()=>{w()},[m]),_.useEffect(()=>{N()},[r,y]),_.useEffect(()=>{t(m?{org:m.toString()}:{})},[m,t]);const w=async()=>{try{let I="/api/action-plans/all";m&&(I+=`?organization_id=${m}`);const L=await fetch(I);if(L.ok){const $=await L.json();s($.action_items||[]);const W=$.action_items||[],P=new Date,U=W.filter(K=>K.when_deadline&&new Date(K.when_deadline)<P&&K.status!=="completed").length;b({total:W.length,pending:W.filter(K=>K.status==="pending").length,inProgress:W.filter(K=>K.status==="in_progress").length,completed:W.filter(K=>K.status==="completed").length,overdue:U,highPriority:W.filter(K=>K.priority==="alta"&&K.status!=="completed").length})}}catch(I){console.error("Erro ao carregar aes:",I)}finally{d(!1)}},N=()=>{let I=[...r];const L=new Date;if(y.status!=="all"&&(I=I.filter($=>$.status===y.status)),y.priority!=="all"&&(I=I.filter($=>$.priority===y.priority)),y.overdue&&(I=I.filter($=>$.when_deadline&&new Date($.when_deadline)<L&&$.status!=="completed")),y.aiGenerated&&(I=I.filter($=>$.is_ai_generated)),y.search){const $=y.search.toLowerCase();I=I.filter(W=>{var P,U,K;return W.title.toLowerCase().includes($)||((P=W.inspection_title)==null?void 0:P.toLowerCase().includes($))||((U=W.inspection_location)==null?void 0:U.toLowerCase().includes($))||((K=W.what_description)==null?void 0:K.toLowerCase().includes($))})}i(I)},S=async I=>{if(confirm("Tem certeza que deseja excluir esta ao?"))try{(await fetch(`/api/action-items/${I}`,{method:"DELETE"})).ok&&w()}catch(L){console.error("Erro ao excluir ao:",L)}},j=async()=>{h(!0);try{const $=["titulo,inspecao,local_inspecao,empresa,o_que,onde,por_que,como,quem,quando,quanto,status,prioridade,gerado_ia,criado_em",...n.map(K=>({titulo:K.title,inspecao:K.inspection_title||"",local_inspecao:K.inspection_location||"",empresa:K.inspection_company||"",o_que:K.what_description||"",onde:K.where_location||"",por_que:K.why_reason||"",como:K.how_method||"",quem:K.who_responsible||"",quando:K.when_deadline||"",quanto:K.how_much_cost||"",status:O(K.status),prioridade:K.priority,gerado_ia:K.is_ai_generated?"Sim":"No",criado_em:new Date(K.created_at).toLocaleDateString("pt-BR")})).map(K=>Object.values(K).map(G=>`"${G}"`).join(","))].join(`
`),W=new Blob([$],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a"),U=URL.createObjectURL(W);P.setAttribute("href",U),P.setAttribute("download",`plano_acao_${new Date().toISOString().split("T")[0]}.csv`),P.style.visibility="hidden",document.body.appendChild(P),P.click(),document.body.removeChild(P)}catch(I){console.error("Erro ao exportar plano de ao:",I),alert("Erro ao exportar dados. Tente novamente.")}finally{h(!1)}},k=async()=>{alert("Importao de itens de ao no est disponvel. Os itens so criados atravs das inspees.")},A=I=>{switch(I){case"pending":return a.jsx(wr,{className:"w-4 h-4 text-yellow-500"});case"in_progress":return a.jsx(yr,{className:"w-4 h-4 text-blue-500"});case"completed":return a.jsx(Ct,{className:"w-4 h-4 text-green-500"});default:return a.jsx(wr,{className:"w-4 h-4 text-gray-500"})}},O=I=>{switch(I){case"pending":return"Pendente";case"in_progress":return"Em Andamento";case"completed":return"Concluda";default:return I}},T=I=>{switch(I){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},D=I=>I?new Date(I)<new Date&&I!=="":!1,R=I=>{if(!I)return null;const L=new Date,W=new Date(I).getTime()-L.getTime(),P=Math.ceil(W/(1e3*60*60*24));return P<0?`Atrasada ${Math.abs(P)} dia(s)`:P===0?"Vence hoje":P<=7?`${P} dia(s) restantes`:null};return l?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-2xl sm:text-3xl font-bold text-slate-900",children:"Plano de Ao Global"}),a.jsx("p",{className:"text-slate-600 mt-1 text-sm sm:text-base",children:"Gesto centralizada de todos os planos de ao"})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("span",{className:"text-sm text-slate-500",children:[n.length," de ",r.length," aes"]})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-slate-900",children:x.total})]}),a.jsx(yr,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Pendentes"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x.pending})]}),a.jsx(wr,{className:"w-8 h-8 text-yellow-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Em Andamento"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:x.inProgress})]}),a.jsx(yr,{className:"w-8 h-8 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Concludas"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.completed})]}),a.jsx(Ct,{className:"w-8 h-8 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Atrasadas"}),a.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.overdue})]}),a.jsx(tr,{className:"w-8 h-8 text-red-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Alta Prioridade"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x.highPriority})]}),a.jsx(ec,{className:"w-8 h-8 text-orange-500"})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(tp,{className:"w-5 h-5 text-slate-600"}),a.jsx("h2",{className:"font-heading text-lg font-semibold text-slate-900",children:"Filtros"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-7 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_a,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),a.jsx("input",{type:"text",placeholder:"Buscar aes...",value:y.search,onChange:I=>v({...y,search:I.target.value}),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),a.jsx("div",{children:a.jsx(Eu,{selectedOrgId:m,onOrganizationChange:p,showAllOption:!0})}),a.jsxs("select",{value:y.status,onChange:I=>v({...y,status:I.target.value}),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"all",children:"Todos os Status"}),a.jsx("option",{value:"pending",children:"Pendente"}),a.jsx("option",{value:"in_progress",children:"Em Andamento"}),a.jsx("option",{value:"completed",children:"Concluda"})]}),a.jsxs("select",{value:y.priority,onChange:I=>v({...y,priority:I.target.value}),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",children:[a.jsx("option",{value:"all",children:"Todas Prioridades"}),a.jsx("option",{value:"baixa",children:"Baixa"}),a.jsx("option",{value:"media",children:"Mdia"}),a.jsx("option",{value:"alta",children:"Alta"})]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:y.overdue,onChange:I=>v({...y,overdue:I.target.checked}),className:"rounded border-slate-300 text-red-600 focus:ring-red-500"}),"Apenas Atrasadas"]}),a.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[a.jsx("input",{type:"checkbox",checked:y.aiGenerated,onChange:I=>v({...y,aiGenerated:I.target.checked}),className:"rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),"Geradas por IA"]}),a.jsx("button",{onClick:()=>v({status:"all",priority:"all",overdue:!1,aiGenerated:!1,search:""}),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm",children:"Limpar Filtros"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Exportar Plano de Ao"}),a.jsx(Jj,{type:"action-items",onExport:j,onImport:k,isLoading:u}),a.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Nota: A importao de itens de ao no est disponvel. Os itens so criados atravs das inspees."})]}),a.jsx("div",{className:"space-y-4",children:n.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center",children:[a.jsx(yr,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:r.length===0?"Nenhuma ao encontrada no sistema":"Nenhuma ao corresponde aos filtros aplicados"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:r.length===0?"Crie aes atravs das inspees para comear":"Tente ajustar os filtros para encontrar as aes desejadas"})]}):n.map(I=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900",children:I.title}),a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(I.priority)}`,children:I.priority.charAt(0).toUpperCase()+I.priority.slice(1)}),I.is_ai_generated&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:"IA"}),D(I.when_deadline)&&a.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Atrasada"})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[A(I.status),a.jsx("span",{children:O(I.status)})]}),I.when_deadline&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gr,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{children:[new Date(I.when_deadline).toLocaleDateString("pt-BR"),R(I.when_deadline)&&a.jsxs("span",{className:`ml-2 ${D(I.when_deadline)?"text-red-600":"text-amber-600"}`,children:["(",R(I.when_deadline),")"]})]})]}),I.who_responsible&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wr,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{children:I.who_responsible})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lt,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{children:I.inspection_company})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Na,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{children:I.inspection_location})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vt,{to:`/inspections/${I.inspection_id}`,className:"p-2 text-slate-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Ver inspeo",children:a.jsx(Ds,{className:"w-4 h-4"})}),a.jsx(vt,{to:`/inspections/${I.inspection_id}/action-plan`,className:"p-2 text-slate-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Editar no plano de ao",children:a.jsx(Ha,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>S(I.id),className:"p-2 text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir ao",children:a.jsx(rr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"text-sm text-slate-600 mb-3",children:[a.jsx("strong",{children:"Inspeo:"})," ",I.inspection_title]}),(I.what_description||I.where_location||I.how_method)&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[I.what_description&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-red-600",children:"O que:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:I.what_description})]}),I.where_location&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-green-600",children:"Onde:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:I.where_location})]}),I.how_method&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-indigo-600",children:"Como:"}),a.jsx("p",{className:"text-slate-700 mt-1",children:I.how_method})]})]})]},I.id))})]})})}function $se({isOpen:e,onClose:t,onTaskCreated:r,defaultOrgId:s}){const[n,i]=_.useState(!1),[l,d]=_.useState([]),[u,h]=_.useState([]),[m,p]=_.useState([]),[x,b]=_.useState({title:"",description:"",priority:"media",type:"manual_task",when_deadline:"",assignee_id:"",organization_id:s,inspection_id:""});_.useEffect(()=>{e&&(v(),y(),w())},[e]),_.useEffect(()=>{x.organization_id&&w()},[x.organization_id]),_.useEffect(()=>{s&&b(S=>({...S,organization_id:s}))},[s]);const y=async()=>{try{const S=await fetch("/api/organizations");if(S.ok){const j=await S.json();h(j.organizations||[])}}catch(S){console.error("Error fetching organizations:",S)}},v=async()=>{try{let S="/api/users/simple-list";x.organization_id&&(S+=`?organization_id=${x.organization_id}`);const j=await fetch(S);if(j.ok){const k=await j.json();d(k.users||[])}}catch(S){console.error("Error fetching users:",S)}},w=async()=>{try{let S="/api/inspections/simple-list";const j=x.organization_id||s;j&&(S+=`?organization_id=${j}`);const k=await fetch(S);if(k.ok){const A=await k.json();p(A.inspections||[])}}catch(S){console.error("Error fetching inspections:",S)}},N=async S=>{S.preventDefault(),i(!0);try{const{data:{session:j}}=await zl.auth.getSession(),k=j==null?void 0:j.provider_token,A={...x,type:x.inspection_id?"inspection_action":x.type,google_token:k};(await fetch("/api/action-plans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)})).ok&&(r(),t(),b({title:"",description:"",priority:"media",type:"manual_task",when_deadline:"",assignee_id:"",organization_id:s,inspection_id:""}))}catch(j){console.error("Error creating task:",j)}finally{i(!1)}};return e?a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-100 bg-slate-50",children:[a.jsx("h2",{className:"font-heading font-semibold text-lg text-slate-800",children:"Nova Tarefa"}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600",children:a.jsx(ct,{size:20})})]}),a.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[!s&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Organizao"}),a.jsxs("div",{className:"relative",children:[a.jsx(yr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsxs("select",{className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none bg-white text-sm",value:x.organization_id||"",onChange:S=>b({...x,organization_id:S.target.value?Number(S.target.value):void 0}),children:[a.jsx("option",{value:"",children:"Selecione uma organizao..."}),u.map(S=>a.jsxs("option",{value:S.id,children:[S.name," ",S.address?` - ${S.address}`:""]},S.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Ttulo"}),a.jsx("input",{type:"text",required:!0,placeholder:"O que precisa ser feito?",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500",value:x.title,onChange:S=>b({...x,title:S.target.value})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tipo de Tarefa"}),a.jsxs("div",{className:"relative",children:[a.jsx(yr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsxs("select",{className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none bg-white text-sm",value:x.type,onChange:S=>b({...x,type:S.target.value}),disabled:!!x.inspection_id,children:[a.jsx("option",{value:"manual_task",children:"Tarefa Manual"}),a.jsx("option",{value:"inspection_order",children:"Ordem de Inspeo (Global)"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Descrio"}),a.jsxs("div",{className:"relative",children:[a.jsx(e7,{size:16,className:"absolute left-3 top-3 text-slate-400"}),a.jsx("textarea",{className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",rows:3,placeholder:"Detalhes adicionais...",value:x.description,onChange:S=>b({...x,description:S.target.value})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prioridade"}),a.jsxs("div",{className:"relative",children:[a.jsx(aL,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsxs("select",{className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none bg-white text-sm",value:x.priority,onChange:S=>b({...x,priority:S.target.value}),children:[a.jsx("option",{value:"baixa",children:"Baixa"}),a.jsx("option",{value:"media",children:"Mdia"}),a.jsx("option",{value:"alta",children:"Alta"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Prazo"}),a.jsxs("div",{className:"relative",children:[a.jsx(Gr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsx("input",{type:"date",className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-sm",value:x.when_deadline,onChange:S=>b({...x,when_deadline:S.target.value})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Responsvel"}),a.jsxs("div",{className:"relative",children:[a.jsx(Wr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsxs("select",{className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none bg-white text-sm",value:x.assignee_id,onChange:S=>b({...x,assignee_id:S.target.value}),children:[a.jsx("option",{value:"",children:"Sem responsvel"}),a.jsx("option",{value:"me",children:"Atribuir a mim"}),l.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Vincular a Inspeo (Opcional)"}),a.jsxs("div",{className:"relative",children:[a.jsx(yr,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsxs("select",{className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 appearance-none bg-white text-sm",value:x.inspection_id,onChange:S=>b({...x,inspection_id:S.target.value}),children:[a.jsx("option",{value:"",children:"Nenhuma"}),m.map(S=>a.jsxs("option",{value:S.id,children:[S.title," (",new Date(S.created_at).toLocaleDateString(),")"]},S.id))]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors font-medium text-sm",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors font-medium text-sm disabled:opacity-50 flex items-center gap-2",children:n?"Criando...":"Criar Tarefa"})]})]})]})}):null}function Lse(){const[e,t]=_.useState(null),[r,s]=_.useState([]),[n,i]=_.useState("me");_.useEffect(()=>{l(),d()},[]);const l=async()=>{try{const h=await fetch("/api/gamification/me");h.ok&&t(await h.json())}catch(h){console.error("Error fetching gamification stats",h)}},d=async()=>{try{const h=await fetch("/api/gamification/leaderboard");if(h.ok){const m=await h.json();s(m.leaderboard||[])}}catch(h){console.error("Error fetching leaderboard",h)}},u=h=>h<=10?"Observador":h<=30?"Inspetor":h<=60?"Especialista":"Guardio";return e?a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-full",children:[a.jsxs("div",{className:"p-4 bg-gradient-to-r from-indigo-500 to-purple-600 text-white shrink-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[a.jsx(L9,{size:20,className:"text-yellow-300"}),"Engajamento"]}),a.jsxs("div",{className:"text-xs font-semibold bg-white/20 px-2 py-1 rounded-full",children:["Nvel ",e.level]})]}),a.jsxs("div",{className:"flex items-end justify-between mb-1",children:[a.jsx("p",{className:"text-sm font-medium text-white/90",children:u(e.level)}),a.jsxs("p",{className:"text-xs text-white/80",children:[e.current_xp," XP"]})]}),a.jsx("div",{className:"h-2 bg-black/20 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-yellow-400 rounded-full transition-all duration-500",style:{width:`${e.progress.percentage}%`}})}),a.jsxs("p",{className:"text-[10px] text-right mt-1 text-white/70",children:["Prximo nvel: ",e.progress.max-e.progress.current," XP"]})]}),a.jsxs("div",{className:"flex border-b border-slate-100 shrink-0",children:[a.jsx("button",{onClick:()=>i("me"),className:`flex-1 py-3 text-sm font-medium transition-colors ${n==="me"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:"Meu Progresso"}),a.jsx("button",{onClick:()=>i("ranking"),className:`flex-1 py-3 text-sm font-medium transition-colors ${n==="ranking"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-500 hover:text-slate-700"}`,children:"Ranking Mensal"})]}),a.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:n==="me"?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"bg-green-100 p-2 rounded-full text-green-600",children:a.jsx(Zs,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Pontos este ms"}),a.jsx("p",{className:"font-bold text-slate-800",children:e.points_this_month})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"bg-orange-100 p-2 rounded-full text-orange-600",children:a.jsx(Fy,{size:20})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Conquistas"}),a.jsx("p",{className:"font-bold text-slate-800",children:e.achievements_count})]})]})]}):a.jsxs("div",{className:"space-y-3",children:[r.map((h,m)=>a.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-slate-50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-6 h-6 flex items-center justify-center rounded-full text-xs font-bold
                                    ${m===0?"bg-yellow-100 text-yellow-700":m===1?"bg-slate-200 text-slate-700":m===2?"bg-orange-100 text-orange-700":"text-slate-400"}
                                `,children:m+1}),a.jsxs("div",{className:"flex items-center gap-2",children:[h.avatar_url?a.jsx("img",{src:h.avatar_url,className:"w-8 h-8 rounded-full"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:h.name.substring(0,2).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800 line-clamp-1",children:h.name}),a.jsxs("p",{className:"text-[10px] text-slate-500",children:["Nvel ",h.level]})]})]})]}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[h.current_xp," XP"]})]},h.user_id)),r.length===0&&a.jsx("p",{className:"text-center text-sm text-slate-500 py-4",children:"Nenhum dado ainda."})]})})]}):null}function Bse(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _.useMemo(()=>s=>{t.forEach(n=>n(s))},t)}const Mp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ac(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function r1(e){return"nodeType"in e}function ua(e){var t,r;return e?Ac(e)?e:r1(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function a1(e){const{Document:t}=ua(e);return e instanceof t}function Hu(e){return Ac(e)?!1:e instanceof ua(e).HTMLElement}function dR(e){return e instanceof ua(e).SVGElement}function Oc(e){return e?Ac(e)?e.document:r1(e)?a1(e)?e:Hu(e)||dR(e)?e.ownerDocument:document:document:document}const Ms=Mp?_.useLayoutEffect:_.useEffect;function Ip(e){const t=_.useRef(e);return Ms(()=>{t.current=e}),_.useCallback(function(){for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return t.current==null?void 0:t.current(...s)},[])}function Use(){const e=_.useRef(null),t=_.useCallback((s,n)=>{e.current=setInterval(s,n)},[]),r=_.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function gu(e,t){t===void 0&&(t=[e]);const r=_.useRef(e);return Ms(()=>{r.current!==e&&(r.current=e)},t),r}function Vu(e,t){const r=_.useRef();return _.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...t])}function Fm(e){const t=Ip(e),r=_.useRef(null),s=_.useCallback(n=>{n!==r.current&&(t==null||t(n,r.current)),r.current=n},[]);return[r,s]}function Hm(e){const t=_.useRef();return _.useEffect(()=>{t.current=e},[e]),t.current}let Zb={};function Gu(e,t){return _.useMemo(()=>{if(t)return t;const r=Zb[e]==null?0:Zb[e]+1;return Zb[e]=r,e+"-"+r},[e,t])}function uR(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];return s.reduce((i,l)=>{const d=Object.entries(l);for(const[u,h]of d){const m=i[u];m!=null&&(i[u]=m+e*h)}return i},{...t})}}const Gl=uR(1),xu=uR(-1);function qse(e){return"clientX"in e&&"clientY"in e}function zp(e){if(!e)return!1;const{KeyboardEvent:t}=ua(e.target);return t&&e instanceof t}function Fse(e){if(!e)return!1;const{TouchEvent:t}=ua(e.target);return t&&e instanceof t}function Vm(e){if(Fse(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return qse(e)?{x:e.clientX,y:e.clientY}:null}const Ln=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Ln.Translate.toString(e),Ln.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),e5="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Hse(e){return e.matches(e5)?e:e.querySelector(e5)}const Vse={display:"none"};function Gse(e){let{id:t,value:r}=e;return ut.createElement("div",{id:t,style:Vse},r)}function Kse(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;const n={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ut.createElement("div",{id:t,style:n,role:"status","aria-live":s,"aria-atomic":!0},r)}function Wse(){const[e,t]=_.useState("");return{announce:_.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const hR=_.createContext(null);function Yse(e){const t=_.useContext(hR);_.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Xse(){const[e]=_.useState(()=>new Set),t=_.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[_.useCallback(s=>{let{type:n,event:i}=s;e.forEach(l=>{var d;return(d=l[n])==null?void 0:d.call(l,i)})},[e]),t]}const Jse={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Zse={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Qse(e){let{announcements:t=Zse,container:r,hiddenTextDescribedById:s,screenReaderInstructions:n=Jse}=e;const{announce:i,announcement:l}=Wse(),d=Gu("DndLiveRegion"),[u,h]=_.useState(!1);if(_.useEffect(()=>{h(!0)},[]),Yse(_.useMemo(()=>({onDragStart(p){let{active:x}=p;i(t.onDragStart({active:x}))},onDragMove(p){let{active:x,over:b}=p;t.onDragMove&&i(t.onDragMove({active:x,over:b}))},onDragOver(p){let{active:x,over:b}=p;i(t.onDragOver({active:x,over:b}))},onDragEnd(p){let{active:x,over:b}=p;i(t.onDragEnd({active:x,over:b}))},onDragCancel(p){let{active:x,over:b}=p;i(t.onDragCancel({active:x,over:b}))}}),[i,t])),!u)return null;const m=ut.createElement(ut.Fragment,null,ut.createElement(Gse,{id:s,value:n.draggable}),ut.createElement(Kse,{id:d,announcement:l}));return r?Ei.createPortal(m,r):m}var vr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(vr||(vr={}));function Gm(){}function t5(e,t){return _.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ene(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Is=Object.freeze({x:0,y:0});function tne(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rne(e,t){const r=Vm(e);if(!r)return"0 0";const s={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function ane(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return r-s}function sne(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function r5(e){let{left:t,top:r,height:s,width:n}=e;return[{x:t,y:r},{x:t+n,y:r},{x:t,y:r+s},{x:t+n,y:r+s}]}function fR(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}const mR=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const n=r5(t),i=[];for(const l of s){const{id:d}=l,u=r.get(d);if(u){const h=r5(u),m=n.reduce((x,b,y)=>x+tne(h[y],b),0),p=Number((m/4).toFixed(4));i.push({id:d,data:{droppableContainer:l,value:p}})}}return i.sort(ane)};function nne(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),l=n-s,d=i-r;if(s<n&&r<i){const u=t.width*t.height,h=e.width*e.height,m=l*d,p=m/(u+h-m);return Number(p.toFixed(4))}return 0}const ine=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const n=[];for(const i of s){const{id:l}=i,d=r.get(l);if(d){const u=nne(d,t);u>0&&n.push({id:l,data:{droppableContainer:i,value:u}})}}return n.sort(sne)};function one(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function pR(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Is}function lne(e){return function(r){for(var s=arguments.length,n=new Array(s>1?s-1:0),i=1;i<s;i++)n[i-1]=arguments[i];return n.reduce((l,d)=>({...l,top:l.top+e*d.y,bottom:l.bottom+e*d.y,left:l.left+e*d.x,right:l.right+e*d.x}),{...r})}}const cne=lne(1);function gR(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function dne(e,t,r){const s=gR(t);if(!s)return e;const{scaleX:n,scaleY:i,x:l,y:d}=s,u=e.left-l-(1-n)*parseFloat(r),h=e.top-d-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),m=n?e.width/n:e.width,p=i?e.height/i:e.height;return{width:m,height:p,top:h,right:u+m,bottom:h+p,left:u}}const une={ignoreTransform:!1};function Tc(e,t){t===void 0&&(t=une);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:h,transformOrigin:m}=ua(e).getComputedStyle(e);h&&(r=dne(r,h,m))}const{top:s,left:n,width:i,height:l,bottom:d,right:u}=r;return{top:s,left:n,width:i,height:l,bottom:d,right:u}}function a5(e){return Tc(e,{ignoreTransform:!0})}function hne(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function fne(e,t){return t===void 0&&(t=ua(e).getComputedStyle(e)),t.position==="fixed"}function mne(e,t){t===void 0&&(t=ua(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(n=>{const i=t[n];return typeof i=="string"?r.test(i):!1})}function $p(e,t){const r=[];function s(n){if(t!=null&&r.length>=t||!n)return r;if(a1(n)&&n.scrollingElement!=null&&!r.includes(n.scrollingElement))return r.push(n.scrollingElement),r;if(!Hu(n)||dR(n)||r.includes(n))return r;const i=ua(e).getComputedStyle(n);return n!==e&&mne(n,i)&&r.push(n),fne(n,i)?r:s(n.parentNode)}return e?s(e):r}function xR(e){const[t]=$p(e,1);return t??null}function Qb(e){return!Mp||!e?null:Ac(e)?e:r1(e)?a1(e)||e===Oc(e).scrollingElement?window:Hu(e)?e:null:null}function bR(e){return Ac(e)?e.scrollX:e.scrollLeft}function vR(e){return Ac(e)?e.scrollY:e.scrollTop}function Ny(e){return{x:bR(e),y:vR(e)}}var Mr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Mr||(Mr={}));function yR(e){return!Mp||!e?!1:e===document.scrollingElement}function wR(e){const t={x:0,y:0},r=yR(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},n=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,l=e.scrollTop>=s.y,d=e.scrollLeft>=s.x;return{isTop:n,isLeft:i,isBottom:l,isRight:d,maxScroll:s,minScroll:t}}const pne={x:.2,y:.2};function gne(e,t,r,s,n){let{top:i,left:l,right:d,bottom:u}=r;s===void 0&&(s=10),n===void 0&&(n=pne);const{isTop:h,isBottom:m,isLeft:p,isRight:x}=wR(e),b={x:0,y:0},y={x:0,y:0},v={height:t.height*n.y,width:t.width*n.x};return!h&&i<=t.top+v.height?(b.y=Mr.Backward,y.y=s*Math.abs((t.top+v.height-i)/v.height)):!m&&u>=t.bottom-v.height&&(b.y=Mr.Forward,y.y=s*Math.abs((t.bottom-v.height-u)/v.height)),!x&&d>=t.right-v.width?(b.x=Mr.Forward,y.x=s*Math.abs((t.right-v.width-d)/v.width)):!p&&l<=t.left+v.width&&(b.x=Mr.Backward,y.x=s*Math.abs((t.left+v.width-l)/v.width)),{direction:b,speed:y}}function xne(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:l}=window;return{top:0,left:0,right:i,bottom:l,width:i,height:l}}const{top:t,left:r,right:s,bottom:n}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:n,width:e.clientWidth,height:e.clientHeight}}function jR(e){return e.reduce((t,r)=>Gl(t,Ny(r)),Is)}function bne(e){return e.reduce((t,r)=>t+bR(r),0)}function vne(e){return e.reduce((t,r)=>t+vR(r),0)}function NR(e,t){if(t===void 0&&(t=Tc),!e)return;const{top:r,left:s,bottom:n,right:i}=t(e);xR(e)&&(n<=0||i<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const yne=[["x",["left","right"],bne],["y",["top","bottom"],vne]];class s1{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=$p(r),n=jR(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,l,d]of yne)for(const u of l)Object.defineProperty(this,u,{get:()=>{const h=d(s),m=n[i]-h;return this.rect[u]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yd{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=t}add(t,r,s){var n;(n=this.target)==null||n.addEventListener(t,r,s),this.listeners.push([t,r,s])}}function wne(e){const{EventTarget:t}=ua(e);return e instanceof t?e:Oc(e)}function ev(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t?s>t.y:!1}var fs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(fs||(fs={}));function s5(e){e.preventDefault()}function jne(e){e.stopPropagation()}var nt;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(nt||(nt={}));const _R={start:[nt.Space,nt.Enter],cancel:[nt.Esc],end:[nt.Space,nt.Enter,nt.Tab]},Nne=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case nt.Right:return{...r,x:r.x+25};case nt.Left:return{...r,x:r.x-25};case nt.Down:return{...r,y:r.y+25};case nt.Up:return{...r,y:r.y-25}}};class n1{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Yd(Oc(r)),this.windowListeners=new Yd(ua(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fs.Resize,this.handleCancel),this.windowListeners.add(fs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,s=t.node.current;s&&NR(s),r(Is)}handleKeyDown(t){if(zp(t)){const{active:r,context:s,options:n}=this.props,{keyboardCodes:i=_R,coordinateGetter:l=Nne,scrollBehavior:d="smooth"}=n,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:h}=s.current,m=h?{x:h.left,y:h.top}:Is;this.referenceCoordinates||(this.referenceCoordinates=m);const p=l(t,{active:r,context:s.current,currentCoordinates:m});if(p){const x=xu(p,m),b={x:0,y:0},{scrollableAncestors:y}=s.current;for(const v of y){const w=t.code,{isTop:N,isRight:S,isLeft:j,isBottom:k,maxScroll:A,minScroll:O}=wR(v),T=xne(v),D={x:Math.min(w===nt.Right?T.right-T.width/2:T.right,Math.max(w===nt.Right?T.left:T.left+T.width/2,p.x)),y:Math.min(w===nt.Down?T.bottom-T.height/2:T.bottom,Math.max(w===nt.Down?T.top:T.top+T.height/2,p.y))},R=w===nt.Right&&!S||w===nt.Left&&!j,I=w===nt.Down&&!k||w===nt.Up&&!N;if(R&&D.x!==p.x){const L=v.scrollLeft+x.x,$=w===nt.Right&&L<=A.x||w===nt.Left&&L>=O.x;if($&&!x.y){v.scrollTo({left:L,behavior:d});return}$?b.x=v.scrollLeft-L:b.x=w===nt.Right?v.scrollLeft-A.x:v.scrollLeft-O.x,b.x&&v.scrollBy({left:-b.x,behavior:d});break}else if(I&&D.y!==p.y){const L=v.scrollTop+x.y,$=w===nt.Down&&L<=A.y||w===nt.Up&&L>=O.y;if($&&!x.x){v.scrollTo({top:L,behavior:d});return}$?b.y=v.scrollTop-L:b.y=w===nt.Down?v.scrollTop-A.y:v.scrollTop-O.y,b.y&&v.scrollBy({top:-b.y,behavior:d});break}}this.handleMove(t,Gl(xu(p,this.referenceCoordinates),b))}}}handleMove(t,r){const{onMove:s}=this.props;t.preventDefault(),s(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}n1.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=_R,onActivation:n}=t,{active:i}=r;const{code:l}=e.nativeEvent;if(s.start.includes(l)){const d=i.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),n==null||n({event:e.nativeEvent}),!0)}return!1}}];function n5(e){return!!(e&&"distance"in e)}function i5(e){return!!(e&&"delay"in e)}class i1{constructor(t,r,s){var n;s===void 0&&(s=wne(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:l}=i;this.props=t,this.events=r,this.document=Oc(l),this.documentListeners=new Yd(this.document),this.listeners=new Yd(s),this.windowListeners=new Yd(ua(l)),this.initialCoordinates=(n=Vm(i))!=null?n:Is,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(fs.Resize,this.handleCancel),this.windowListeners.add(fs.DragStart,s5),this.windowListeners.add(fs.VisibilityChange,this.handleCancel),this.windowListeners.add(fs.ContextMenu,s5),this.documentListeners.add(fs.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(i5(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(n5(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:s,onPending:n}=this.props;n(s,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(fs.Click,jne,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fs.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:s,initialCoordinates:n,props:i}=this,{onMove:l,options:{activationConstraint:d}}=i;if(!n)return;const u=(r=Vm(t))!=null?r:Is,h=xu(n,u);if(!s&&d){if(n5(d)){if(d.tolerance!=null&&ev(h,d.tolerance))return this.handleCancel();if(ev(h,d.distance))return this.handleStart()}if(i5(d)&&ev(h,d.tolerance))return this.handleCancel();this.handlePending(d,h);return}t.cancelable&&t.preventDefault(),l(u)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===nt.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const _ne={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class o1 extends i1{constructor(t){const{event:r}=t,s=Oc(r.target);super(t,_ne,s)}}o1.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!r.isPrimary||r.button!==0?!1:(s==null||s({event:r}),!0)}}];const Sne={move:{name:"mousemove"},end:{name:"mouseup"}};var _y;(function(e){e[e.RightClick=2]="RightClick"})(_y||(_y={}));class Ene extends i1{constructor(t){super(t,Sne,Oc(t.event.target))}}Ene.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button===_y.RightClick?!1:(s==null||s({event:r}),!0)}}];const tv={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class kne extends i1{constructor(t){super(t,tv)}static setup(){return window.addEventListener(tv.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(tv.move.name,t)};function t(){}}}kne.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:n}=r;return n.length>1?!1:(s==null||s({event:r}),!0)}}];var Xd;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Xd||(Xd={}));var Km;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Km||(Km={}));function Cne(e){let{acceleration:t,activator:r=Xd.Pointer,canScroll:s,draggingRect:n,enabled:i,interval:l=5,order:d=Km.TreeOrder,pointerCoordinates:u,scrollableAncestors:h,scrollableAncestorRects:m,delta:p,threshold:x}=e;const b=One({delta:p,disabled:!i}),[y,v]=Use(),w=_.useRef({x:0,y:0}),N=_.useRef({x:0,y:0}),S=_.useMemo(()=>{switch(r){case Xd.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Xd.DraggableRect:return n}},[r,n,u]),j=_.useRef(null),k=_.useCallback(()=>{const O=j.current;if(!O)return;const T=w.current.x*N.current.x,D=w.current.y*N.current.y;O.scrollBy(T,D)},[]),A=_.useMemo(()=>d===Km.TreeOrder?[...h].reverse():h,[d,h]);_.useEffect(()=>{if(!i||!h.length||!S){v();return}for(const O of A){if((s==null?void 0:s(O))===!1)continue;const T=h.indexOf(O),D=m[T];if(!D)continue;const{direction:R,speed:I}=gne(O,D,S,t,x);for(const L of["x","y"])b[L][R[L]]||(I[L]=0,R[L]=0);if(I.x>0||I.y>0){v(),j.current=O,y(k,l),w.current=I,N.current=R;return}}w.current={x:0,y:0},N.current={x:0,y:0},v()},[t,k,s,v,i,l,JSON.stringify(S),JSON.stringify(b),y,h,A,m,JSON.stringify(x)])}const Ane={x:{[Mr.Backward]:!1,[Mr.Forward]:!1},y:{[Mr.Backward]:!1,[Mr.Forward]:!1}};function One(e){let{delta:t,disabled:r}=e;const s=Hm(t);return Vu(n=>{if(r||!s||!n)return Ane;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[Mr.Backward]:n.x[Mr.Backward]||i.x===-1,[Mr.Forward]:n.x[Mr.Forward]||i.x===1},y:{[Mr.Backward]:n.y[Mr.Backward]||i.y===-1,[Mr.Forward]:n.y[Mr.Forward]||i.y===1}}},[r,t,s])}function Tne(e,t){const r=t!=null?e.get(t):void 0,s=r?r.node.current:null;return Vu(n=>{var i;return t==null?null:(i=s??n)!=null?i:null},[s,t])}function Pne(e,t){return _.useMemo(()=>e.reduce((r,s)=>{const{sensor:n}=s,i=n.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,s)}));return[...r,...i]},[]),[e,t])}var bu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(bu||(bu={}));var Sy;(function(e){e.Optimized="optimized"})(Sy||(Sy={}));const o5=new Map;function Rne(e,t){let{dragging:r,dependencies:s,config:n}=t;const[i,l]=_.useState(null),{frequency:d,measure:u,strategy:h}=n,m=_.useRef(e),p=w(),x=gu(p),b=_.useCallback(function(N){N===void 0&&(N=[]),!x.current&&l(S=>S===null?N:S.concat(N.filter(j=>!S.includes(j))))},[x]),y=_.useRef(null),v=Vu(N=>{if(p&&!r)return o5;if(!N||N===o5||m.current!==e||i!=null){const S=new Map;for(let j of e){if(!j)continue;if(i&&i.length>0&&!i.includes(j.id)&&j.rect.current){S.set(j.id,j.rect.current);continue}const k=j.node.current,A=k?new s1(u(k),k):null;j.rect.current=A,A&&S.set(j.id,A)}return S}return N},[e,i,r,p,u]);return _.useEffect(()=>{m.current=e},[e]),_.useEffect(()=>{p||b()},[r,p]),_.useEffect(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),_.useEffect(()=>{p||typeof d!="number"||y.current!==null||(y.current=setTimeout(()=>{b(),y.current=null},d))},[d,p,b,...s]),{droppableRects:v,measureDroppableContainers:b,measuringScheduled:i!=null};function w(){switch(h){case bu.Always:return!1;case bu.BeforeDragging:return r;default:return!r}}}function l1(e,t){return Vu(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function Dne(e,t){return l1(e,t)}function Mne(e){let{callback:t,disabled:r}=e;const s=Ip(t),n=_.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,r]);return _.useEffect(()=>()=>n==null?void 0:n.disconnect(),[n]),n}function Lp(e){let{callback:t,disabled:r}=e;const s=Ip(t),n=_.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[r]);return _.useEffect(()=>()=>n==null?void 0:n.disconnect(),[n]),n}function Ine(e){return new s1(Tc(e),e)}function l5(e,t,r){t===void 0&&(t=Ine);const[s,n]=_.useState(null);function i(){n(u=>{if(!e)return null;if(e.isConnected===!1){var h;return(h=u??r)!=null?h:null}const m=t(e);return JSON.stringify(u)===JSON.stringify(m)?u:m})}const l=Mne({callback(u){if(e)for(const h of u){const{type:m,target:p}=h;if(m==="childList"&&p instanceof HTMLElement&&p.contains(e)){i();break}}}}),d=Lp({callback:i});return Ms(()=>{i(),e?(d==null||d.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(d==null||d.disconnect(),l==null||l.disconnect())},[e]),s}function zne(e){const t=l1(e);return pR(e,t)}const c5=[];function $ne(e){const t=_.useRef(e),r=Vu(s=>e?s&&s!==c5&&e&&t.current&&e.parentNode===t.current.parentNode?s:$p(e):c5,[e]);return _.useEffect(()=>{t.current=e},[e]),r}function Lne(e){const[t,r]=_.useState(null),s=_.useRef(e),n=_.useCallback(i=>{const l=Qb(i.target);l&&r(d=>d?(d.set(l,Ny(l)),new Map(d)):null)},[]);return _.useEffect(()=>{const i=s.current;if(e!==i){l(i);const d=e.map(u=>{const h=Qb(u);return h?(h.addEventListener("scroll",n,{passive:!0}),[h,Ny(h)]):null}).filter(u=>u!=null);r(d.length?new Map(d):null),s.current=e}return()=>{l(e),l(i)};function l(d){d.forEach(u=>{const h=Qb(u);h==null||h.removeEventListener("scroll",n)})}},[n,e]),_.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,l)=>Gl(i,l),Is):jR(e):Is,[e,t])}function d5(e,t){t===void 0&&(t=[]);const r=_.useRef(null);return _.useEffect(()=>{r.current=null},t),_.useEffect(()=>{const s=e!==Is;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?xu(e,r.current):Is}function Bne(e){_.useEffect(()=>{if(!Mp)return;const t=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function Une(e,t){return _.useMemo(()=>e.reduce((r,s)=>{let{eventName:n,handler:i}=s;return r[n]=l=>{i(l,t)},r},{}),[e,t])}function SR(e){return _.useMemo(()=>e?hne(e):null,[e])}const u5=[];function qne(e,t){t===void 0&&(t=Tc);const[r]=e,s=SR(r?ua(r):null),[n,i]=_.useState(u5);function l(){i(()=>e.length?e.map(u=>yR(u)?s:new s1(t(u),u)):u5)}const d=Lp({callback:l});return Ms(()=>{d==null||d.disconnect(),l(),e.forEach(u=>d==null?void 0:d.observe(u))},[e]),n}function ER(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Hu(t)?t:e}function Fne(e){let{measure:t}=e;const[r,s]=_.useState(null),n=_.useCallback(h=>{for(const{target:m}of h)if(Hu(m)){s(p=>{const x=t(m);return p?{...p,width:x.width,height:x.height}:x});break}},[t]),i=Lp({callback:n}),l=_.useCallback(h=>{const m=ER(h);i==null||i.disconnect(),m&&(i==null||i.observe(m)),s(m?t(m):null)},[t,i]),[d,u]=Fm(l);return _.useMemo(()=>({nodeRef:d,rect:r,setRef:u}),[r,d,u])}const Hne=[{sensor:o1,options:{}},{sensor:n1,options:{}}],Vne={current:{}},Ff={draggable:{measure:a5},droppable:{measure:a5,strategy:bu.WhileDragging,frequency:Sy.Optimized},dragOverlay:{measure:Tc}};class Jd extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,s;return(r=(s=this.get(t))==null?void 0:s.node.current)!=null?r:void 0}}const Gne={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Jd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Gm},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ff,measureDroppableContainers:Gm,windowRect:null,measuringScheduled:!1},kR={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Gm,draggableNodes:new Map,over:null,measureDroppableContainers:Gm},Ku=_.createContext(kR),CR=_.createContext(Gne);function Kne(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Jd}}}function Wne(e,t){switch(t.type){case vr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case vr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case vr.DragEnd:case vr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case vr.RegisterDroppable:{const{element:r}=t,{id:s}=r,n=new Jd(e.droppable.containers);return n.set(s,r),{...e,droppable:{...e.droppable,containers:n}}}case vr.SetDroppableDisabled:{const{id:r,key:s,disabled:n}=t,i=e.droppable.containers.get(r);if(!i||s!==i.key)return e;const l=new Jd(e.droppable.containers);return l.set(r,{...i,disabled:n}),{...e,droppable:{...e.droppable,containers:l}}}case vr.UnregisterDroppable:{const{id:r,key:s}=t,n=e.droppable.containers.get(r);if(!n||s!==n.key)return e;const i=new Jd(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Yne(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:n}=_.useContext(Ku),i=Hm(s),l=Hm(r==null?void 0:r.id);return _.useEffect(()=>{if(!t&&!s&&i&&l!=null){if(!zp(i)||document.activeElement===i.target)return;const d=n.get(l);if(!d)return;const{activatorNode:u,node:h}=d;if(!u.current&&!h.current)return;requestAnimationFrame(()=>{for(const m of[u.current,h.current]){if(!m)continue;const p=Hse(m);if(p){p.focus();break}}})}},[s,t,n,l,i]),null}function AR(e,t){let{transform:r,...s}=t;return e!=null&&e.length?e.reduce((n,i)=>i({transform:n,...s}),r):r}function Xne(e){return _.useMemo(()=>({draggable:{...Ff.draggable,...e==null?void 0:e.draggable},droppable:{...Ff.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Ff.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Jne(e){let{activeNode:t,measure:r,initialRect:s,config:n=!0}=e;const i=_.useRef(!1),{x:l,y:d}=typeof n=="boolean"?{x:n,y:n}:n;Ms(()=>{if(!l&&!d||!t){i.current=!1;return}if(i.current||!s)return;const h=t==null?void 0:t.node.current;if(!h||h.isConnected===!1)return;const m=r(h),p=pR(m,s);if(l||(p.x=0),d||(p.y=0),i.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const x=xR(h);x&&x.scrollBy({top:p.y,left:p.x})}},[t,l,d,s,r])}const Bp=_.createContext({...Is,scaleX:1,scaleY:1});var wi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(wi||(wi={}));const Zne=_.memo(function(t){var r,s,n,i;let{id:l,accessibility:d,autoScroll:u=!0,children:h,sensors:m=Hne,collisionDetection:p=ine,measuring:x,modifiers:b,...y}=t;const v=_.useReducer(Wne,void 0,Kne),[w,N]=v,[S,j]=Xse(),[k,A]=_.useState(wi.Uninitialized),O=k===wi.Initialized,{draggable:{active:T,nodes:D,translate:R},droppable:{containers:I}}=w,L=T!=null?D.get(T):null,$=_.useRef({initial:null,translated:null}),W=_.useMemo(()=>{var _t;return T!=null?{id:T,data:(_t=L==null?void 0:L.data)!=null?_t:Vne,rect:$}:null},[T,L]),P=_.useRef(null),[U,K]=_.useState(null),[G,Q]=_.useState(null),le=gu(y,Object.values(y)),H=Gu("DndDescribedBy",l),V=_.useMemo(()=>I.getEnabled(),[I]),B=Xne(x),{droppableRects:ne,measureDroppableContainers:ie,measuringScheduled:ee}=Rne(V,{dragging:O,dependencies:[R.x,R.y],config:B.droppable}),Z=Tne(D,T),re=_.useMemo(()=>G?Vm(G):null,[G]),J=rn(),F=Dne(Z,B.draggable.measure);Jne({activeNode:T!=null?D.get(T):null,config:J.layoutShiftCompensation,initialRect:F,measure:B.draggable.measure});const de=l5(Z,B.draggable.measure,F),_e=l5(Z?Z.parentElement:null),se=_.useRef({activatorEvent:null,active:null,activeNode:Z,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:I,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=I.getNodeFor((r=se.current.over)==null?void 0:r.id),M=Fne({measure:B.dragOverlay.measure}),xe=(s=M.nodeRef.current)!=null?s:Z,pe=O?(n=M.rect)!=null?n:de:null,X=!!(M.nodeRef.current&&M.rect),Y=zne(X?null:de),ue=SR(xe?ua(xe):null),Ee=$ne(O?Te??Z:null),te=qne(Ee),oe=AR(b,{transform:{x:R.x-Y.x,y:R.y-Y.y,scaleX:1,scaleY:1},activatorEvent:G,active:W,activeNodeRect:de,containerNodeRect:_e,draggingNodeRect:pe,over:se.current.over,overlayNodeRect:M.rect,scrollableAncestors:Ee,scrollableAncestorRects:te,windowRect:ue}),be=re?Gl(re,R):null,ke=Lne(Ee),we=d5(ke),Pe=d5(ke,[de]),Ge=Gl(oe,we),Re=pe?cne(pe,oe):null,Qe=W&&Re?p({active:W,collisionRect:Re,droppableRects:ne,droppableContainers:V,pointerCoordinates:be}):null,gt=fR(Qe,"id"),[he,Oe]=_.useState(null),Me=X?oe:Gl(oe,Pe),Ye=one(Me,(i=he==null?void 0:he.rect)!=null?i:null,de),Cr=_.useRef(null),dt=_.useCallback((_t,At)=>{let{sensor:Ar,options:fa}=At;if(P.current==null)return;const ma=D.get(P.current);if(!ma)return;const Xr=_t.nativeEvent,ka=new Ar({active:P.current,activeNode:ma,event:Xr,options:fa,context:se,onAbort(qt){if(!D.get(qt))return;const{onDragAbort:Ca}=le.current,Xa={id:qt};Ca==null||Ca(Xa),S({type:"onDragAbort",event:Xa})},onPending(qt,Bs,Ca,Xa){if(!D.get(qt))return;const{onDragPending:Wn}=le.current,Us={id:qt,constraint:Bs,initialCoordinates:Ca,offset:Xa};Wn==null||Wn(Us),S({type:"onDragPending",event:Us})},onStart(qt){const Bs=P.current;if(Bs==null)return;const Ca=D.get(Bs);if(!Ca)return;const{onDragStart:Xa}=le.current,Kn={activatorEvent:Xr,active:{id:Bs,data:Ca.data,rect:$}};Ei.unstable_batchedUpdates(()=>{Xa==null||Xa(Kn),A(wi.Initializing),N({type:vr.DragStart,initialCoordinates:qt,active:Bs}),S({type:"onDragStart",event:Kn}),K(Cr.current),Q(Xr)})},onMove(qt){N({type:vr.DragMove,coordinates:qt})},onEnd:Ls(vr.DragEnd),onCancel:Ls(vr.DragCancel)});Cr.current=ka;function Ls(qt){return async function(){const{active:Ca,collisions:Xa,over:Kn,scrollAdjustedTranslate:Wn}=se.current;let Us=null;if(Ca&&Wn){const{cancelDrop:pa}=le.current;Us={activatorEvent:Xr,active:Ca,collisions:Xa,delta:Wn,over:Kn},qt===vr.DragEnd&&typeof pa=="function"&&await Promise.resolve(pa(Us))&&(qt=vr.DragCancel)}P.current=null,Ei.unstable_batchedUpdates(()=>{N({type:qt}),A(wi.Uninitialized),Oe(null),K(null),Q(null),Cr.current=null;const pa=qt===vr.DragEnd?"onDragEnd":"onDragCancel";if(Us){const ir=le.current[pa];ir==null||ir(Us),S({type:pa,event:Us})}})}}},[D]),Wt=_.useCallback((_t,At)=>(Ar,fa)=>{const ma=Ar.nativeEvent,Xr=D.get(fa);if(P.current!==null||!Xr||ma.dndKit||ma.defaultPrevented)return;const ka={active:Xr};_t(Ar,At.options,ka)===!0&&(ma.dndKit={capturedBy:At.sensor},P.current=fa,dt(Ar,At))},[D,dt]),nr=Pne(m,Wt);Bne(m),Ms(()=>{de&&k===wi.Initializing&&A(wi.Initialized)},[de,k]),_.useEffect(()=>{const{onDragMove:_t}=le.current,{active:At,activatorEvent:Ar,collisions:fa,over:ma}=se.current;if(!At||!Ar)return;const Xr={active:At,activatorEvent:Ar,collisions:fa,delta:{x:Ge.x,y:Ge.y},over:ma};Ei.unstable_batchedUpdates(()=>{_t==null||_t(Xr),S({type:"onDragMove",event:Xr})})},[Ge.x,Ge.y]),_.useEffect(()=>{const{active:_t,activatorEvent:At,collisions:Ar,droppableContainers:fa,scrollAdjustedTranslate:ma}=se.current;if(!_t||P.current==null||!At||!ma)return;const{onDragOver:Xr}=le.current,ka=fa.get(gt),Ls=ka&&ka.rect.current?{id:ka.id,rect:ka.rect.current,data:ka.data,disabled:ka.disabled}:null,qt={active:_t,activatorEvent:At,collisions:Ar,delta:{x:ma.x,y:ma.y},over:Ls};Ei.unstable_batchedUpdates(()=>{Oe(Ls),Xr==null||Xr(qt),S({type:"onDragOver",event:qt})})},[gt]),Ms(()=>{se.current={activatorEvent:G,active:W,activeNode:Z,collisionRect:Re,collisions:Qe,droppableRects:ne,draggableNodes:D,draggingNode:xe,draggingNodeRect:pe,droppableContainers:I,over:he,scrollableAncestors:Ee,scrollAdjustedTranslate:Ge},$.current={initial:pe,translated:Re}},[W,Z,Qe,Re,D,xe,pe,ne,I,he,Ee,Ge]),Cne({...J,delta:R,draggingRect:Re,pointerCoordinates:be,scrollableAncestors:Ee,scrollableAncestorRects:te});const ha=_.useMemo(()=>({active:W,activeNode:Z,activeNodeRect:de,activatorEvent:G,collisions:Qe,containerNodeRect:_e,dragOverlay:M,draggableNodes:D,droppableContainers:I,droppableRects:ne,over:he,measureDroppableContainers:ie,scrollableAncestors:Ee,scrollableAncestorRects:te,measuringConfiguration:B,measuringScheduled:ee,windowRect:ue}),[W,Z,de,G,Qe,_e,M,D,I,ne,he,ie,Ee,te,B,ee,ue]),Hi=_.useMemo(()=>({activatorEvent:G,activators:nr,active:W,activeNodeRect:de,ariaDescribedById:{draggable:H},dispatch:N,draggableNodes:D,over:he,measureDroppableContainers:ie}),[G,nr,W,de,N,H,D,he,ie]);return ut.createElement(hR.Provider,{value:j},ut.createElement(Ku.Provider,{value:Hi},ut.createElement(CR.Provider,{value:ha},ut.createElement(Bp.Provider,{value:Ye},h)),ut.createElement(Yne,{disabled:(d==null?void 0:d.restoreFocus)===!1})),ut.createElement(Qse,{...d,hiddenTextDescribedById:H}));function rn(){const _t=(U==null?void 0:U.autoScrollEnabled)===!1,At=typeof u=="object"?u.enabled===!1:u===!1,Ar=O&&!_t&&!At;return typeof u=="object"?{...u,enabled:Ar}:{enabled:Ar}}}),Qne=_.createContext(null),h5="button",eie="Draggable";function tie(e){let{id:t,data:r,disabled:s=!1,attributes:n}=e;const i=Gu(eie),{activators:l,activatorEvent:d,active:u,activeNodeRect:h,ariaDescribedById:m,draggableNodes:p,over:x}=_.useContext(Ku),{role:b=h5,roleDescription:y="draggable",tabIndex:v=0}=n??{},w=(u==null?void 0:u.id)===t,N=_.useContext(w?Bp:Qne),[S,j]=Fm(),[k,A]=Fm(),O=Une(l,t),T=gu(r);Ms(()=>(p.set(t,{id:t,key:i,node:S,activatorNode:k,data:T}),()=>{const R=p.get(t);R&&R.key===i&&p.delete(t)}),[p,t]);const D=_.useMemo(()=>({role:b,tabIndex:v,"aria-disabled":s,"aria-pressed":w&&b===h5?!0:void 0,"aria-roledescription":y,"aria-describedby":m.draggable}),[s,b,v,w,y,m.draggable]);return{active:u,activatorEvent:d,activeNodeRect:h,attributes:D,isDragging:w,listeners:s?void 0:O,node:S,over:x,setNodeRef:j,setActivatorNodeRef:A,transform:N}}function OR(){return _.useContext(CR)}const rie="Droppable",aie={timeout:25};function sie(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:n}=e;const i=Gu(rie),{active:l,dispatch:d,over:u,measureDroppableContainers:h}=_.useContext(Ku),m=_.useRef({disabled:r}),p=_.useRef(!1),x=_.useRef(null),b=_.useRef(null),{disabled:y,updateMeasurementsFor:v,timeout:w}={...aie,...n},N=gu(v??s),S=_.useCallback(()=>{if(!p.current){p.current=!0;return}b.current!=null&&clearTimeout(b.current),b.current=setTimeout(()=>{h(Array.isArray(N.current)?N.current:[N.current]),b.current=null},w)},[w]),j=Lp({callback:S,disabled:y||!l}),k=_.useCallback((D,R)=>{j&&(R&&(j.unobserve(R),p.current=!1),D&&j.observe(D))},[j]),[A,O]=Fm(k),T=gu(t);return _.useEffect(()=>{!j||!A.current||(j.disconnect(),p.current=!1,j.observe(A.current))},[A,j]),_.useEffect(()=>(d({type:vr.RegisterDroppable,element:{id:s,key:i,disabled:r,node:A,rect:x,data:T}}),()=>d({type:vr.UnregisterDroppable,key:i,id:s})),[s]),_.useEffect(()=>{r!==m.current.disabled&&(d({type:vr.SetDroppableDisabled,id:s,key:i,disabled:r}),m.current.disabled=r)},[s,i,r,d]),{active:l,rect:x,isOver:(u==null?void 0:u.id)===s,node:A,over:u,setNodeRef:O}}function nie(e){let{animation:t,children:r}=e;const[s,n]=_.useState(null),[i,l]=_.useState(null),d=Hm(r);return!r&&!s&&d&&n(d),Ms(()=>{if(!i)return;const u=s==null?void 0:s.key,h=s==null?void 0:s.props.id;if(u==null||h==null){n(null);return}Promise.resolve(t(h,i)).then(()=>{n(null)})},[t,s,i]),ut.createElement(ut.Fragment,null,r,s?_.cloneElement(s,{ref:l}):null)}const iie={x:0,y:0,scaleX:1,scaleY:1};function oie(e){let{children:t}=e;return ut.createElement(Ku.Provider,{value:kR},ut.createElement(Bp.Provider,{value:iie},t))}const lie={position:"fixed",touchAction:"none"},cie=e=>zp(e)?"transform 250ms ease":void 0,die=_.forwardRef((e,t)=>{let{as:r,activatorEvent:s,adjustScale:n,children:i,className:l,rect:d,style:u,transform:h,transition:m=cie}=e;if(!d)return null;const p=n?h:{...h,scaleX:1,scaleY:1},x={...lie,width:d.width,height:d.height,top:d.top,left:d.left,transform:Ln.Transform.toString(p),transformOrigin:n&&s?rne(s,d):void 0,transition:typeof m=="function"?m(s):m,...u};return ut.createElement(r,{className:l,style:x,ref:t},i)}),TR=e=>t=>{let{active:r,dragOverlay:s}=t;const n={},{styles:i,className:l}=e;if(i!=null&&i.active)for(const[d,u]of Object.entries(i.active))u!==void 0&&(n[d]=r.node.style.getPropertyValue(d),r.node.style.setProperty(d,u));if(i!=null&&i.dragOverlay)for(const[d,u]of Object.entries(i.dragOverlay))u!==void 0&&s.node.style.setProperty(d,u);return l!=null&&l.active&&r.node.classList.add(l.active),l!=null&&l.dragOverlay&&s.node.classList.add(l.dragOverlay),function(){for(const[u,h]of Object.entries(n))r.node.style.setProperty(u,h);l!=null&&l.active&&r.node.classList.remove(l.active)}},uie=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Ln.Transform.toString(t)},{transform:Ln.Transform.toString(r)}]},hie={duration:250,easing:"ease",keyframes:uie,sideEffects:TR({styles:{active:{opacity:"0"}}})};function fie(e){let{config:t,draggableNodes:r,droppableContainers:s,measuringConfiguration:n}=e;return Ip((i,l)=>{if(t===null)return;const d=r.get(i);if(!d)return;const u=d.node.current;if(!u)return;const h=ER(l);if(!h)return;const{transform:m}=ua(l).getComputedStyle(l),p=gR(m);if(!p)return;const x=typeof t=="function"?t:mie(t);return NR(u,n.draggable.measure),x({active:{id:i,data:d.data,node:u,rect:n.draggable.measure(u)},draggableNodes:r,dragOverlay:{node:l,rect:n.dragOverlay.measure(h)},droppableContainers:s,measuringConfiguration:n,transform:p})})}function mie(e){const{duration:t,easing:r,sideEffects:s,keyframes:n}={...hie,...e};return i=>{let{active:l,dragOverlay:d,transform:u,...h}=i;if(!t)return;const m={x:d.rect.left-l.rect.left,y:d.rect.top-l.rect.top},p={scaleX:u.scaleX!==1?l.rect.width*u.scaleX/d.rect.width:1,scaleY:u.scaleY!==1?l.rect.height*u.scaleY/d.rect.height:1},x={x:u.x-m.x,y:u.y-m.y,...p},b=n({...h,active:l,dragOverlay:d,transform:{initial:u,final:x}}),[y]=b,v=b[b.length-1];if(JSON.stringify(y)===JSON.stringify(v))return;const w=s==null?void 0:s({active:l,dragOverlay:d,...h}),N=d.node.animate(b,{duration:t,easing:r,fill:"forwards"});return new Promise(S=>{N.onfinish=()=>{w==null||w(),S()}})}}let f5=0;function pie(e){return _.useMemo(()=>{if(e!=null)return f5++,f5},[e])}const gie=ut.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:s,style:n,transition:i,modifiers:l,wrapperElement:d="div",className:u,zIndex:h=999}=e;const{activatorEvent:m,active:p,activeNodeRect:x,containerNodeRect:b,draggableNodes:y,droppableContainers:v,dragOverlay:w,over:N,measuringConfiguration:S,scrollableAncestors:j,scrollableAncestorRects:k,windowRect:A}=OR(),O=_.useContext(Bp),T=pie(p==null?void 0:p.id),D=AR(l,{activatorEvent:m,active:p,activeNodeRect:x,containerNodeRect:b,draggingNodeRect:w.rect,over:N,overlayNodeRect:w.rect,scrollableAncestors:j,scrollableAncestorRects:k,transform:O,windowRect:A}),R=l1(x),I=fie({config:s,draggableNodes:y,droppableContainers:v,measuringConfiguration:S}),L=R?w.setRef:void 0;return ut.createElement(oie,null,ut.createElement(nie,{animation:I},p&&T?ut.createElement(die,{key:T,id:p.id,ref:L,as:d,activatorEvent:m,adjustScale:t,className:u,transition:i,rect:R,style:{zIndex:h,...n},transform:D},r):null))});function c1(e,t,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(t,1)[0]),s}function xie(e,t){return e.reduce((r,s,n)=>{const i=t.get(s);return i&&(r[n]=i),r},Array(e.length))}function Pf(e){return e!==null&&e>=0}function bie(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function vie(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Rf={scaleX:1,scaleY:1},yie=e=>{var t;let{rects:r,activeNodeRect:s,activeIndex:n,overIndex:i,index:l}=e;const d=(t=r[n])!=null?t:s;if(!d)return null;const u=wie(r,l,n);if(l===n){const h=r[i];return h?{x:n<i?h.left+h.width-(d.left+d.width):h.left-d.left,y:0,...Rf}:null}return l>n&&l<=i?{x:-d.width-u,y:0,...Rf}:l<n&&l>=i?{x:d.width+u,y:0,...Rf}:{x:0,y:0,...Rf}};function wie(e,t,r){const s=e[t],n=e[t-1],i=e[t+1];return!s||!n&&!i?0:r<t?n?s.left-(n.left+n.width):i.left-(s.left+s.width):i?i.left-(s.left+s.width):s.left-(n.left+n.width)}const PR=e=>{let{rects:t,activeIndex:r,overIndex:s,index:n}=e;const i=c1(t,s,r),l=t[n],d=i[n];return!d||!l?null:{x:d.left-l.left,y:d.top-l.top,scaleX:d.width/l.width,scaleY:d.height/l.height}},Df={scaleX:1,scaleY:1},jie=e=>{var t;let{activeIndex:r,activeNodeRect:s,index:n,rects:i,overIndex:l}=e;const d=(t=i[r])!=null?t:s;if(!d)return null;if(n===r){const h=i[l];return h?{x:0,y:r<l?h.top+h.height-(d.top+d.height):h.top-d.top,...Df}:null}const u=Nie(i,n,r);return n>r&&n<=l?{x:0,y:-d.height-u,...Df}:n<r&&n>=l?{x:0,y:d.height+u,...Df}:{x:0,y:0,...Df}};function Nie(e,t,r){const s=e[t],n=e[t-1],i=e[t+1];return s?r<t?n?s.top-(n.top+n.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):n?s.top-(n.top+n.height):0:0}const RR="Sortable",DR=ut.createContext({activeIndex:-1,containerId:RR,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:PR,disabled:{draggable:!1,droppable:!1}});function MR(e){let{children:t,id:r,items:s,strategy:n=PR,disabled:i=!1}=e;const{active:l,dragOverlay:d,droppableRects:u,over:h,measureDroppableContainers:m}=OR(),p=Gu(RR,r),x=d.rect!==null,b=_.useMemo(()=>s.map(O=>typeof O=="object"&&"id"in O?O.id:O),[s]),y=l!=null,v=l?b.indexOf(l.id):-1,w=h?b.indexOf(h.id):-1,N=_.useRef(b),S=!bie(b,N.current),j=w!==-1&&v===-1||S,k=vie(i);Ms(()=>{S&&y&&m(b)},[S,b,y,m]),_.useEffect(()=>{N.current=b},[b]);const A=_.useMemo(()=>({activeIndex:v,containerId:p,disabled:k,disableTransforms:j,items:b,overIndex:w,useDragOverlay:x,sortedRects:xie(b,u),strategy:n}),[v,p,k.draggable,k.droppable,j,b,w,u,x,n]);return ut.createElement(DR.Provider,{value:A},t)}const _ie=e=>{let{id:t,items:r,activeIndex:s,overIndex:n}=e;return c1(r,s,n).indexOf(t)},Sie=e=>{let{containerId:t,isSorting:r,wasDragging:s,index:n,items:i,newIndex:l,previousItems:d,previousContainerId:u,transition:h}=e;return!h||!s||d!==i&&n===l?!1:r?!0:l!==n&&t===u},Eie={duration:200,easing:"ease"},IR="transform",kie=Ln.Transition.toString({property:IR,duration:0,easing:"linear"}),Cie={roleDescription:"sortable"};function Aie(e){let{disabled:t,index:r,node:s,rect:n}=e;const[i,l]=_.useState(null),d=_.useRef(r);return Ms(()=>{if(!t&&r!==d.current&&s.current){const u=n.current;if(u){const h=Tc(s.current,{ignoreTransform:!0}),m={x:u.left-h.left,y:u.top-h.top,scaleX:u.width/h.width,scaleY:u.height/h.height};(m.x||m.y)&&l(m)}}r!==d.current&&(d.current=r)},[t,r,s,n]),_.useEffect(()=>{i&&l(null)},[i]),i}function zR(e){let{animateLayoutChanges:t=Sie,attributes:r,disabled:s,data:n,getNewIndex:i=_ie,id:l,strategy:d,resizeObserverConfig:u,transition:h=Eie}=e;const{items:m,containerId:p,activeIndex:x,disabled:b,disableTransforms:y,sortedRects:v,overIndex:w,useDragOverlay:N,strategy:S}=_.useContext(DR),j=Oie(s,b),k=m.indexOf(l),A=_.useMemo(()=>({sortable:{containerId:p,index:k,items:m},...n}),[p,n,k,m]),O=_.useMemo(()=>m.slice(m.indexOf(l)),[m,l]),{rect:T,node:D,isOver:R,setNodeRef:I}=sie({id:l,data:A,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...u}}),{active:L,activatorEvent:$,activeNodeRect:W,attributes:P,setNodeRef:U,listeners:K,isDragging:G,over:Q,setActivatorNodeRef:le,transform:H}=tie({id:l,data:A,attributes:{...Cie,...r},disabled:j.draggable}),V=Bse(I,U),B=!!L,ne=B&&!y&&Pf(x)&&Pf(w),ie=!N&&G,ee=ie&&ne?H:null,re=ne?ee??(d??S)({rects:v,activeNodeRect:W,activeIndex:x,overIndex:w,index:k}):null,J=Pf(x)&&Pf(w)?i({id:l,items:m,activeIndex:x,overIndex:w}):k,F=L==null?void 0:L.id,de=_.useRef({activeId:F,items:m,newIndex:J,containerId:p}),_e=m!==de.current.items,se=t({active:L,containerId:p,isDragging:G,isSorting:B,id:l,index:k,items:m,newIndex:de.current.newIndex,previousItems:de.current.items,previousContainerId:de.current.containerId,transition:h,wasDragging:de.current.activeId!=null}),Te=Aie({disabled:!se,index:k,node:D,rect:T});return _.useEffect(()=>{B&&de.current.newIndex!==J&&(de.current.newIndex=J),p!==de.current.containerId&&(de.current.containerId=p),m!==de.current.items&&(de.current.items=m)},[B,J,p,m]),_.useEffect(()=>{if(F===de.current.activeId)return;if(F!=null&&de.current.activeId==null){de.current.activeId=F;return}const xe=setTimeout(()=>{de.current.activeId=F},50);return()=>clearTimeout(xe)},[F]),{active:L,activeIndex:x,attributes:P,data:A,rect:T,index:k,newIndex:J,items:m,isOver:R,isSorting:B,isDragging:G,listeners:K,node:D,overIndex:w,over:Q,setNodeRef:V,setActivatorNodeRef:le,setDroppableNodeRef:I,setDraggableNodeRef:U,transform:Te??re,transition:M()};function M(){if(Te||_e&&de.current.newIndex===k)return kie;if(!(ie&&!zp($)||!h)&&(B||se))return Ln.Transition.toString({...h,property:IR})}}function Oie(e,t){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}function Wm(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Tie=[nt.Down,nt.Right,nt.Up,nt.Left],Pie=(e,t)=>{let{context:{active:r,collisionRect:s,droppableRects:n,droppableContainers:i,over:l,scrollableAncestors:d}}=t;if(Tie.includes(e.code)){if(e.preventDefault(),!r||!s)return;const u=[];i.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const x=n.get(p.id);if(x)switch(e.code){case nt.Down:s.top<x.top&&u.push(p);break;case nt.Up:s.top>x.top&&u.push(p);break;case nt.Left:s.left>x.left&&u.push(p);break;case nt.Right:s.left<x.left&&u.push(p);break}});const h=mR({collisionRect:s,droppableRects:n,droppableContainers:u});let m=fR(h,"id");if(m===(l==null?void 0:l.id)&&h.length>1&&(m=h[1].id),m!=null){const p=i.get(r.id),x=i.get(m),b=x?n.get(x.id):null,y=x==null?void 0:x.node.current;if(y&&b&&p&&x){const w=$p(y).some((O,T)=>d[T]!==O),N=$R(p,x),S=Rie(p,x),j=w||!N?{x:0,y:0}:{x:S?s.width-b.width:0,y:S?s.height-b.height:0},k={x:b.left,y:b.top};return j.x&&j.y?k:xu(k,j)}}}};function $R(e,t){return!Wm(e)||!Wm(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Rie(e,t){return!Wm(e)||!Wm(t)||!$R(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function Die({item:e}){var u;const{setNodeRef:t,attributes:r,listeners:s,transform:n,transition:i,isDragging:l}=zR({id:e.id,data:{type:"Item",item:e}}),d={transform:Ln.Transform.toString(n),transition:i};return l?a.jsx("div",{ref:t,style:d,className:"bg-slate-50 opacity-40 border border-dashed border-slate-300 rounded-lg h-24 mb-3"}):a.jsxs("div",{ref:t,style:d,...r,...s,className:"bg-white p-4 rounded-lg shadow-sm border border-slate-200 hover:shadow-md transition-shadow cursor-grab mb-3 group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${e.priority==="alta"?"bg-red-100 text-red-800":e.priority==="media"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:(u=e.priority)==null?void 0:u.toUpperCase()}),a.jsx(Xl,{size:14,className:"text-slate-300 opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsx("h4",{className:"font-semibold text-slate-800 text-sm mb-1 line-clamp-2",children:e.title})]})}function Mie({column:e,items:t}){const{setNodeRef:r,attributes:s,listeners:n,transform:i,transition:l,isDragging:d}=zR({id:e.id,data:{type:"Column",column:e}}),u={transform:Ln.Transform.toString(i),transition:l},h=_.useMemo(()=>t.map(m=>m.id),[t]);return d?a.jsx("div",{ref:r,style:u,className:"bg-slate-100 opacity-40 border-2 border-dashed border-slate-300 rounded-xl w-[300px] h-[500px] flex-shrink-0 mr-4"}):a.jsxs("div",{ref:r,style:u,className:"bg-slate-50 w-[300px] rounded-xl flex flex-col h-full border border-slate-200 flex-shrink-0 mr-4",children:[a.jsxs("div",{...s,...n,className:`p-4 rounded-t-xl cursor-grab flex items-center justify-between border-b border-slate-100 ${e.color||"bg-slate-100"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-bold text-slate-700",children:e.title}),a.jsx("span",{className:"bg-white px-2 py-0.5 rounded-full text-xs font-medium text-slate-500 border border-slate-200 shadow-sm",children:t.length})]}),a.jsx("button",{className:"text-slate-400 hover:text-slate-600",children:a.jsx(G7,{size:16})})]}),a.jsx("div",{className:"flex-1 p-3 overflow-y-auto min-h-[100px]",children:a.jsx(MR,{items:h,strategy:jie,children:t.map(m=>a.jsx(Die,{item:m},m.id))})}),a.jsx("div",{className:"p-3 border-t border-slate-100",children:a.jsxs("button",{className:"w-full py-2 flex items-center justify-center gap-1 text-slate-500 hover:bg-slate-100 rounded-lg transition-colors text-sm font-medium",children:[a.jsx(Kr,{size:16})," Adicionar Item"]})})]})}function Iie({items:e,orgId:t,onItemMove:r,onColumnChange:s}){const[n,i]=_.useState([]),[l,d]=_.useState(null),[u,h]=_.useState(null),[m,p]=_.useState(!1),[x,b]=_.useState(""),y=async()=>{if(x.trim())try{(await fetch(`/api/kanban/${t}/columns`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x.trim()})})).ok?(b(""),p(!1),s(),w()):console.error("Failed to create column")}catch(O){console.error("Error creating column:",O)}},v=ene(t5(o1,{activationConstraint:{distance:10}}),t5(n1,{coordinateGetter:Pie}));_.useEffect(()=>{t&&w()},[t]);const w=async()=>{try{const O=await fetch(`/api/kanban/${t}/columns`);if(O.ok){const T=await O.json();i(T.columns||[])}}catch(O){console.error("Error fetching columns:",O)}},N=_.useMemo(()=>n.map(O=>O.id),[n]);function S(O){var T,D;if(((T=O.active.data.current)==null?void 0:T.type)==="Column"){h(O.active.data.current.column);return}if(((D=O.active.data.current)==null?void 0:D.type)==="Item"){d(O.active.data.current.item);return}}function j(O){var $;const{active:T,over:D}=O;if(!D)return;const R=T.id,I=D.id;R===I||(($=T.data.current)==null||$.type)}function k(O){var L,$,W,P;h(null),d(null);const{active:T,over:D}=O;if(!D)return;const R=T.id,I=D.id;if(((L=T.data.current)==null?void 0:L.type)==="Column"){if(R!==I){const U=n.findIndex(Q=>Q.id===R),K=n.findIndex(Q=>Q.id===I),G=c1(n,U,K);i(G),A(G)}return}if((($=T.data.current)==null?void 0:$.type)==="Item"){let U="";((W=D.data.current)==null?void 0:W.type)==="Column"?U=D.data.current.column.status_key:((P=D.data.current)==null?void 0:P.type)==="Item"&&(U=D.data.current.item.status),U&&U!==T.data.current.item.status&&r(Number(R),U)}}const A=async O=>{try{await fetch(`/api/kanban/${t}/columns/reorder`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({columnIds:O.map(T=>T.id)})})}catch(T){console.error("Error reordering columns:",T)}};return a.jsxs(Zne,{sensors:v,collisionDetection:mR,onDragStart:S,onDragOver:j,onDragEnd:k,children:[a.jsxs("div",{className:"flex h-full overflow-x-auto pb-4 px-2",children:[a.jsx(MR,{items:N,strategy:yie,children:n.map(O=>a.jsx(Mie,{column:O,items:e.filter(T=>T.status===O.status_key)},O.id))}),m?a.jsxs("div",{className:"min-w-[300px] h-auto p-4 bg-slate-50 border border-slate-300 rounded-xl flex flex-col gap-3 shadow-lg",children:[a.jsx("h4",{className:"font-bold text-slate-700 text-sm",children:"Nova Etapa"}),a.jsx("input",{type:"text",value:x,onChange:O=>b(O.target.value),placeholder:"Nome da etapa...",className:"w-full px-3 py-2 border border-slate-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>p(!1),className:"px-3 py-1.5 text-xs font-medium text-slate-600 hover:bg-slate-200 rounded-md",children:"Cancelar"}),a.jsx("button",{onClick:y,disabled:!x.trim(),className:"px-3 py-1.5 text-xs font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md disabled:opacity-50",children:"Criar"})]})]}):a.jsx("div",{onClick:()=>p(!0),className:"min-w-[300px] h-[100px] flex items-center justify-center border-2 border-dashed border-slate-200 rounded-xl hover:border-slate-300 hover:bg-slate-50 transition-colors cursor-pointer",children:a.jsxs("button",{className:"flex items-center gap-2 text-slate-500 font-medium",children:[a.jsx(Kr,{size:20})," Nova Etapa"]})})]}),Ei.createPortal(a.jsxs(gie,{dropAnimation:{sideEffects:TR({styles:{active:{opacity:"0.5"}}})},children:[u&&a.jsx("div",{className:"bg-slate-50 w-[300px] rounded-xl flex flex-col h-[500px] border border-slate-200 shadow-xl opacity-80 cursor-grabbing",children:a.jsx("div",{className:`p-4 rounded-t-xl flex items-center justify-between border-b border-slate-100 ${u.color}`,children:a.jsx("h3",{className:"font-bold text-slate-700",children:u.title})})}),l&&a.jsx("div",{className:"bg-white p-4 rounded-lg shadow-xl border border-slate-200 w-[280px] cursor-grabbing transform rotate-2",children:a.jsx("h4",{className:"font-semibold text-slate-800 text-sm mb-1",children:l.title})})]}),document.body)]})}function zie(){const[e]=ju(),[t,r]=_.useState("list"),[s,n]=_.useState([]),[i,l]=_.useState([]),[d,u]=_.useState(!0),[h,m]=_.useState(e.get("org")?parseInt(e.get("org")):null),[p,x]=_.useState(!1),[b,y]=_.useState({status:"all",priority:"all",type:"all",overdue:!1,search:""});_.useEffect(()=>{v()},[h]),_.useEffect(()=>{w()},[s,b]);const v=async()=>{try{let A="/api/action-plans/all";h&&(A+=`?organization_id=${h}`);const O=await fetch(A);if(O.ok){const T=await O.json();n(T.action_items||[])}}catch(A){console.error("Error fetching activities:",A)}finally{u(!1)}},w=()=>{let A=[...s];const O=new Date;if(b.status!=="all"&&(A=A.filter(T=>T.status===b.status)),b.priority!=="all"&&(A=A.filter(T=>T.priority===b.priority)),b.type!=="all"&&(A=A.filter(T=>T.type===b.type)),b.overdue&&(A=A.filter(T=>T.when_deadline&&new Date(T.when_deadline)<O&&T.status!=="completed")),b.search){const T=b.search.toLowerCase();A=A.filter(D=>{var R;return D.title.toLowerCase().includes(T)||((R=D.description)==null?void 0:R.toLowerCase().includes(T))})}l(A)},N=A=>{switch(A){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=A=>{if(!A)return null;try{return JSON.parse(A).picture}catch{return null}},j=async(A,O)=>{const T=s.map(D=>D.id===A?{...D,status:O}:D);n(T);try{await fetch(`/api/kanban/${h||1}/items/${A}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:O})})}catch(D){console.error("Failed to move item:",D),v()}},k=()=>{};return a.jsx(Je,{children:a.jsxs("div",{className:"h-[calc(100vh-140px)] flex flex-col space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-2xl sm:text-3xl font-bold text-slate-900",children:"Central de Atividades"}),a.jsx("p",{className:"text-slate-600 mt-1 text-sm sm:text-base",children:"Gerencie todas as tarefas e pendncias."})]}),a.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[a.jsxs("div",{className:"flex bg-slate-100 p-1 rounded-lg border border-slate-200",children:[a.jsx("button",{onClick:()=>r("list"),className:`p-2 rounded-md transition-all ${t==="list"?"bg-white shadow text-slate-800":"text-slate-500 hover:text-slate-700"}`,children:a.jsx(Gy,{size:20})}),a.jsx("button",{onClick:()=>r("kanban"),className:`p-2 rounded-md transition-all ${t==="kanban"?"bg-white shadow text-slate-800":"text-slate-500 hover:text-slate-700"}`,children:a.jsx(SL,{size:20})})]}),a.jsxs("button",{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 sm:px-4 py-2 rounded-lg font-medium flex items-center gap-2 transition-colors text-sm sm:text-base",children:[a.jsx(Kr,{size:18}),a.jsx("span",{className:"hidden sm:inline",children:"Nova Tarefa"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-3 sm:p-4 shrink-0 flex flex-col sm:flex-row flex-wrap gap-3 sm:gap-4 items-stretch sm:items-center",children:[a.jsxs("div",{className:"relative w-full sm:w-64",children:[a.jsx(_a,{className:"w-4 h-4 text-slate-400 absolute left-3 top-1/2 -translate-y-1/2"}),a.jsx("input",{type:"text",placeholder:"Buscar atividades...",className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500",value:b.search,onChange:A=>y({...b,search:A.target.value})})]}),a.jsx(Eu,{selectedOrgId:h,onOrganizationChange:m,showAllOption:!0}),a.jsxs("select",{className:"px-3 py-2 border border-slate-300 rounded-lg text-sm bg-white w-full sm:w-auto",value:b.type,onChange:A=>y({...b,type:A.target.value}),children:[a.jsx("option",{value:"all",children:"Todos os Tipos"}),a.jsx("option",{value:"inspection_action",children:"Planos de Ao"}),a.jsx("option",{value:"manual_task",children:"Tarefas Manuais"})]})]}),d&&a.jsx("div",{className:"flex justify-center p-4",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),!d&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 flex-1 hover:overflow-hidden",children:[a.jsx("div",{className:"lg:col-span-3 flex flex-col h-full overflow-hidden",children:t==="kanban"?a.jsx("div",{className:"flex-1 overflow-hidden h-full",children:a.jsx(Iie,{items:i.map(A=>({...A,id:Number(A.id)})),orgId:h||1,onItemMove:j,onColumnChange:k})}):a.jsx("div",{className:"flex-1 overflow-auto bg-white rounded-xl shadow-sm border border-slate-200",children:a.jsxs("table",{className:"w-full text-sm text-left text-slate-600",children:[a.jsx("thead",{className:"text-xs text-slate-700 uppercase bg-slate-50 border-b border-slate-200 sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3",children:"Ttulo"}),a.jsx("th",{className:"px-6 py-3",children:"Tipo"}),a.jsx("th",{className:"px-6 py-3",children:"Prioridade"}),a.jsx("th",{className:"px-6 py-3",children:"Responsvel"}),a.jsx("th",{className:"px-6 py-3",children:"Status"}),a.jsx("th",{className:"px-6 py-3",children:"Prazo"})]})}),a.jsx("tbody",{children:i.map(A=>{const O=S(A.assigned_to_google_data);return a.jsxs("tr",{className:"bg-white border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:A.title}),a.jsx("td",{className:"px-6 py-4",children:A.type==="inspection_action"?"Plano de Ao":"Tarefa"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${N(A.priority)}`,children:A.priority})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center gap-2",children:A.assigned_to_name?a.jsxs(a.Fragment,{children:[O?a.jsx("img",{src:O,className:"w-6 h-6 rounded-full"}):a.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:A.assigned_to_name.substring(0,2).toUpperCase()}),a.jsx("span",{className:"truncate max-w-[100px]",children:A.assigned_to_name})]}):"-"})}),a.jsx("td",{className:"px-6 py-4",children:A.status}),a.jsx("td",{className:"px-6 py-4",children:A.when_deadline?new Date(A.when_deadline).toLocaleDateString("pt-BR"):"-"})]},A.id)})})]})})}),a.jsx("div",{className:"hidden lg:flex flex-col gap-4",children:a.jsx(Lse,{})})]}),a.jsx($se,{isOpen:p,onClose:()=>x(!1),onTaskCreated:v,defaultOrgId:h})]})})}function $ie(){var w,N;const{user:e,isPending:t,redirectToLogin:r}=da(),s=Ga(),n=na(),i=((N=(w=s.state)==null?void 0:w.from)==null?void 0:N.pathname)||"/",[l,d]=_.useState(!1),[u,h]=_.useState(""),[m,p]=_.useState(""),[x,b]=_.useState("");_.useEffect(()=>{e&&!t&&(console.log("User authenticated, redirecting to:",i),n(i,{replace:!0}))},[e,t,i,n]);const y=async()=>{try{d(!0),await r()}catch(S){console.error("Login error:",S),d(!1)}},v=async S=>{if(S.preventDefault(),!u||!m){b("Por favor, preencha email e senha.");return}d(!0),b("");try{const j=await Fe("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:m})}),k=await j.json();j.ok?window.location.reload():(k.code==="APPROVAL_PENDING"?b("Sua conta aguarda aprovao do administrador."):k.code==="APPROVAL_REJECTED"?b("Sua solicitao de cadastro foi recusada."):b(k.error||"Credenciais invlidas."),d(!1))}catch(j){console.error("Erro no login:",j),b("Erro de conexo. Tente novamente."),d(!1)}};return t?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(It,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Verificando autenticao..."})]})}):e?a.jsx(Vf,{to:i,replace:!0}):a.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-slate-50 font-sans transition-colors duration-300 relative overflow-x-hidden",children:a.jsxs("main",{className:"w-full flex flex-col items-center justify-center p-4 lg:p-8 z-10 max-w-md",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center mb-6 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("img",{src:"/compia-logo.png",alt:"Compia Logo",className:"w-[60px] h-[60px] object-contain"}),a.jsx("span",{className:"font-heading font-bold text-slate-800 text-4xl tracking-tight -ml-3",children:"Compia"})]}),a.jsx("p",{className:"text-sm font-medium text-slate-500 mt-2",children:"Sua Plataforma Inteligente de Inspees."})]}),a.jsxs("div",{className:"w-full bg-white p-8 lg:p-10 rounded-2xl shadow-xl transition-all duration-300 border border-slate-100",children:[a.jsxs("div",{className:"mb-8 text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Bem-vindo de volta"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Acesse sua conta corporativa."})]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[x&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start text-left",children:[a.jsx(Nt,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-red-600 font-medium",children:x})]}),a.jsxs("button",{type:"button",onClick:y,disabled:l,className:"ripple w-full flex items-center justify-center gap-3 p-3 rounded-lg border border-slate-300 bg-white hover:bg-slate-50 transition-all duration-300 shadow-sm hover:shadow-md group",children:[a.jsx(_7,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 group-hover:text-primary transition-colors"}),a.jsx("span",{className:"text-slate-700 dark:text-white font-semibold",children:"Entrar com Google"})]}),a.jsxs("div",{className:"my-8 flex items-center justify-between gap-4",children:[a.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"}),a.jsx("span",{className:"text-slate-400 dark:text-slate-500 text-sm font-medium uppercase tracking-wide",children:"OU E-MAIL"}),a.jsx("div",{className:"h-px bg-slate-200 dark:bg-slate-700 flex-1"})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{id:"email",type:"email",required:!0,value:u,onChange:S=>h(S.target.value),placeholder:" ",className:"input-no-icon block px-4 pb-2.5 pt-5 w-full text-base text-slate-900 bg-slate-50 dark:bg-slate-800/50 rounded-lg border-0 border-b-2 border-slate-300 appearance-none dark:text-white dark:border-slate-600 dark:focus:border-primary focus:outline-none focus:ring-0 focus:border-primary peer transition-colors"}),a.jsx("label",{htmlFor:"email",className:"absolute text-sm text-slate-500 dark:text-slate-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] left-4 peer-focus:text-primary peer-focus:dark:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4",children:"E-mail"})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{id:"password",type:"password",required:!0,value:m,onChange:S=>p(S.target.value),placeholder:" ",className:"input-no-icon block px-4 pb-2.5 pt-5 w-full text-base text-slate-900 bg-slate-50 dark:bg-slate-800/50 rounded-lg border-0 border-b-2 border-slate-300 appearance-none dark:text-white dark:border-slate-600 dark:focus:border-primary focus:outline-none focus:ring-0 focus:border-primary peer transition-colors"}),a.jsx("label",{htmlFor:"password",className:"absolute text-sm text-slate-500 dark:text-slate-400 duration-300 transform -translate-y-4 scale-75 top-4 z-10 origin-[0] left-4 peer-focus:text-primary peer-focus:dark:text-primary peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-4",children:"Senha"})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",className:"w-5 h-5 rounded border-slate-300 text-primary focus:ring-primary dark:bg-slate-700 dark:border-slate-600 transition-all"}),a.jsx("span",{className:"text-slate-600 dark:text-slate-300 group-hover:text-primary dark:group-hover:text-primary-light transition-colors font-medium",children:"Lembrar de mim"})]}),a.jsx("a",{className:"text-primary hover:text-primary-hover font-semibold transition-colors decoration-2 hover:underline underline-offset-4",href:"#",children:"Esqueceu a senha?"})]}),a.jsx("button",{type:"submit",disabled:l,className:"ripple w-full bg-primary hover:bg-primary-hover active:bg-primary-focus text-white font-bold py-4 px-6 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-0.5 active:translate-y-0 uppercase tracking-wider text-sm flex items-center justify-center gap-2 mt-4",children:l?a.jsx(It,{className:"w-5 h-5 animate-spin"}):"ENTRAR NA PLATAFORMA"})]}),a.jsxs("div",{className:"pt-8 text-center text-sm",children:[a.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Novo na Compia? "}),a.jsx(vt,{to:"/register",className:"text-primary hover:text-primary-hover font-semibold transition-colors decoration-2 hover:underline underline-offset-4",children:"Solicite seu acesso"})]})]}),a.jsxs("footer",{className:"mt-8 text-center text-xs text-slate-500 dark:text-slate-400",children:[a.jsx("a",{className:"hover:underline",href:"#",children:"Termos de Uso"}),a.jsx("span",{className:"mx-2",children:"|"}),a.jsx("a",{className:"hover:underline",href:"#",children:"Poltica de Privacidade"})]})]})})}function Lie(){const e=na(),[t,r]=_.useState("freelancer"),[s,n]=_.useState({name:"",email:"",password:"",confirmPassword:"",organizationName:""}),[i,l]=_.useState(!1),[d,u]=_.useState(""),[h,m]=_.useState(!1),p=v=>{const{name:w,value:N}=v.target;n(S=>({...S,[w]:N})),u("")},x=()=>!s.name||!s.email||!s.password?(u("Por favor, preencha todos os campos obrigatrios."),!1):s.password.length<6?(u("A senha deve ter pelo menos 6 caracteres."),!1):s.password!==s.confirmPassword?(u("As senhas no coincidem."),!1):t==="business"&&!s.organizationName?(u("Para conta empresarial, o nome da empresa  obrigatrio."),!1):!0,b=()=>{switch(t){case"business":return"org_admin";case"manager":return"manager";case"freelancer":return"inspector";default:return"inspector"}},y=async v=>{if(v.preventDefault(),!!x()){l(!0);try{const w=b(),N=t==="business"?s.organizationName:void 0,S=await Fe("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s.name,email:s.email,password:s.password,organization_name:N,role:w})}),j=await S.json();S.ok?(m(!0),setTimeout(()=>{e("/login")},5e3)):u(j.error||"Erro ao criar conta. Tente novamente.")}catch(w){console.error("Erro no registro:",w),u("Erro de conexo. Verifique sua internet.")}finally{l(!1)}}};return h?a.jsx("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow-xl sm:rounded-2xl sm:px-10 text-center border border-slate-100",children:[a.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-6 animate-in zoom-in duration-300",children:a.jsx(Ct,{className:"h-8 w-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4 leading-snug",children:"Sucesso! Sua solicitao de acesso foi enviada para anlise."}),a.jsx("div",{className:"bg-blue-50 rounded-lg p-5 mb-6 text-left border border-blue-100",children:a.jsx("p",{className:"text-slate-700 text-sm leading-relaxed",children:"Um administrador do sistema revisar seus dados. Voc receber uma notificao por e-mail assim que sua conta for aprovada. Obrigado por sua pacincia."})}),a.jsx(vt,{to:"/login",className:"inline-flex items-center justify-center w-full px-4 py-3 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors font-semibold",children:"Voltar para o Login"})]})})}):a.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 tracking-tight",children:"Solicitar Acesso  Plataforma Compia"}),a.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["J possui cadastro aprovado?"," ",a.jsx(vt,{to:"/login",className:"font-bold text-blue-600 hover:text-blue-500 transition-colors",children:"Fazer login"})]})]})}),a.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:a.jsxs("div",{className:"bg-white py-8 px-4 shadow-[0_8px_30px_rgb(0,0,0,0.04)] sm:rounded-2xl sm:px-10 border border-slate-100",children:[a.jsxs("form",{className:"space-y-6",onSubmit:y,children:[a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Qual  o seu perfil de acesso?"}),a.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[a.jsxs("button",{type:"button",onClick:()=>r("freelancer"),className:`relative flex items-center p-3 rounded-lg border-2 transition-all ${t==="freelancer"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[a.jsx("div",{className:`p-2 rounded-full ${t==="freelancer"?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-500"}`,children:a.jsx(Q4,{className:"w-5 h-5"})}),a.jsxs("div",{className:"ml-3 text-left",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Tcnico de Campo"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Realizar inspees e checklists"})]}),t==="freelancer"&&a.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-blue-500 rounded-full"})]}),a.jsxs("button",{type:"button",onClick:()=>r("manager"),className:`relative flex items-center p-3 rounded-lg border-2 transition-all ${t==="manager"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[a.jsx("div",{className:`p-2 rounded-full ${t==="manager"?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-500"}`,children:a.jsx(Ev,{className:"w-5 h-5"})}),a.jsxs("div",{className:"ml-3 text-left",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Gestor de Equipe"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Gerenciar tcnicos e relatrios"})]}),t==="manager"&&a.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-blue-500 rounded-full"})]}),a.jsxs("button",{type:"button",onClick:()=>r("business"),className:`relative flex items-center p-3 rounded-lg border-2 transition-all ${t==="business"?"border-blue-500 bg-blue-50":"border-slate-200 hover:border-slate-300 bg-white"}`,children:[a.jsx("div",{className:`p-2 rounded-full ${t==="business"?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-500"}`,children:a.jsx(lt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"ml-3 text-left",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:"Dono de Empresa"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Criar organizao e gerenciar tudo"})]}),t==="business"&&a.jsx("div",{className:"absolute top-3 right-3 w-3 h-3 bg-blue-500 rounded-full"})]})]})]}),d&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start animate-in fade-in slide-in-from-top-2",children:[a.jsx(Ev,{className:"w-5 h-5 text-red-600 mr-2 mt-0.5 shrink-0"}),a.jsx("span",{className:"text-sm text-red-700",children:d})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Nome Completo"}),a.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Wr,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{name:"name",type:"text",required:!0,value:s.name,onChange:p,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-lg py-2.5",placeholder:"Seu nome"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Email Profissional"}),a.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(sa,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{name:"email",type:"email",required:!0,value:s.email,onChange:p,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-lg py-2.5",placeholder:"seu@empresa.com"})]})]}),t==="business"&&a.jsxs("div",{className:"animate-in fade-in slide-in-from-top-4 duration-300",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Nome da Empresa"}),a.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(h7,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{name:"organizationName",type:"text",value:s.organizationName,onChange:p,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-lg py-2.5 bg-blue-50/50",placeholder:"Nome da sua empresa"})]}),a.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Uma nova rea de trabalho ser criada para sua empresa."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Senha"}),a.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Jl,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{name:"password",type:"password",required:!0,value:s.password,onChange:p,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-lg py-2.5",placeholder:"Mnimo 6 caracteres"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"Confirmar Senha"}),a.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Jl,{className:"h-5 w-5 text-slate-400"})}),a.jsx("input",{name:"confirmPassword",type:"password",required:!0,value:s.confirmPassword,onChange:p,className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-slate-300 rounded-lg py-2.5",placeholder:"Repita a senha"})]})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-semibold text-white bg-slate-900 hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-900 disabled:opacity-70 disabled:cursor-not-allowed transition-all",children:i?a.jsx(a.Fragment,{children:"Solicitando acesso..."}):a.jsxs(a.Fragment,{children:["Solicitar Cadastro",a.jsx(_n,{className:"ml-2 w-4 h-4"})]})})})]}),a.jsx("div",{className:"mt-6 text-center text-xs text-slate-500",children:"Ao criar uma conta, voc concorda com nossos Termos de Servio e Poltica de Privacidade."})]})})]})}function Bie(){const{exchangeCodeForSessionToken:e}=da(),[t,r]=_.useState("idle"),[s,n]=_.useState(""),i=_.useRef(!1),l=_.useMemo(()=>{const d=new URLSearchParams(window.location.search);return{code:d.get("code"),state:d.get("state"),error:d.get("error"),error_description:d.get("error_description"),redirect:d.get("redirect")||"/"}},[]);if(_.useEffect(()=>{if(i.current)return;i.current=!0,(async()=>{if(l.error){r("error"),n(`Provider retornou erro: ${l.error}${l.error_description?`  ${l.error_description}`:""}`);return}if(!l.code){r("error"),n("Cdigo de autorizao no encontrado na URL");return}try{r("loading"),await(e==null?void 0:e()),r("success")}catch(u){console.error("Auth callback error:",u),r("error");const h=(u==null?void 0:u.message)||"Erro durante autenticao. Possvel causa: falha na troca do code por token de sesso no backend.";n(h)}})()},[e,l.code,l.error,l.error_description,l.state]),t==="success"){const u=new URLSearchParams(window.location.search).get("redirect")||"/";return a.jsx(Vf,{to:u,replace:!0})}return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-blue-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Gt,{className:"w-8 h-8 text-blue-600"})}),(t==="idle"||t==="loading")&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(It,{className:"w-5 h-5 animate-spin text-blue-600"}),a.jsx("span",{className:"text-slate-700 font-medium",children:"Finalizando login..."})]}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Aguarde enquanto configuramos sua conta"})]}),t==="success"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(Ct,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-slate-700 font-medium",children:"Login realizado com sucesso!"})]}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Redirecionando voc para o sistema..."})]}),t==="error"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(tr,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"text-slate-700 font-medium",children:"Erro no login"})]}),a.jsx("p",{className:"text-slate-500 text-sm mb-4 whitespace-pre-wrap",children:s||"Ocorreu um erro durante o processo de autenticao"}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Tentar novamente"})]})]})})}function m5({onRetry:e}){const[t,r]=_.useState("checking"),[s,n]=_.useState(0),i=async()=>{try{r("checking");const d=await fetch("/api/health");return d.ok&&(await d.json()).database==="connected"?(r("healthy"),n(0),!0):(r("error"),!1)}catch(d){return console.error("Database health check failed:",d),r("error"),!1}},l=async()=>{n(u=>u+1),await i()&&e&&e()};return _.useEffect(()=>{i();const d=setInterval(()=>{t==="error"&&i()},1e4);return()=>clearInterval(d)},[t]),t==="healthy"?null:t==="checking"&&s===0?a.jsxs("div",{className:"fixed top-4 right-4 bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50",children:[a.jsx($o,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"text-sm font-medium",children:"Verificando conexo..."})]}):a.jsx("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg shadow-lg max-w-sm z-50",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Nt,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-sm",children:"Problema de Conectividade"}),a.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Banco de dados temporariamente indisponvel.",s>0&&` (Tentativa ${s})`]}),a.jsx("div",{className:"flex items-center gap-2 mt-2",children:a.jsxs("button",{onClick:l,disabled:t==="checking",className:"inline-flex items-center gap-1 text-xs bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded-md transition-colors disabled:opacity-50",children:[t==="checking"?a.jsx($o,{className:"w-3 h-3 animate-spin"}):a.jsx(Si,{className:"w-3 h-3"}),t==="checking"?"Tentando...":"Tentar novamente"]})})]})]})})}function Zt({children:e,requiredRole:t,requiredRoles:r}){var j;const{user:s,isPending:n,fetchUser:i}=da(),l=s,d=Ga(),[u,h]=ut.useState(null);ut.useEffect(()=>{const k=localStorage.getItem("demo-auth"),A=localStorage.getItem("demo-user");if(k==="true"&&A)try{const O=JSON.parse(A);h(O)}catch(O){console.error("Error parsing demo user:",O),localStorage.removeItem("demo-auth"),localStorage.removeItem("demo-user")}},[]);const[m,p]=ut.useState(!1),[x,b]=ut.useState(0),[y,v]=ut.useState(!1),w=async()=>{v(!0),b(k=>k+1),p(!1);try{await i()}catch(k){console.error("Auth retry failed:",k)}finally{v(!1)}};if(ut.useEffect(()=>{if(n){const k=setTimeout(()=>{p(!0)},15e3);return()=>clearTimeout(k)}else p(!1)},[n]),ut.useEffect(()=>{if(m&&x<3){const k=setTimeout(()=>{w()},5e3);return()=>clearTimeout(k)}},[m,x]),n&&!m||y)return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:[a.jsx(m5,{onRetry:w}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-blue-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Gt,{className:"w-8 h-8 text-blue-600"})}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx(It,{className:"w-5 h-5 animate-spin text-blue-600"}),a.jsx("span",{className:"text-slate-700",children:y?"Tentando reconectar...":"Verificando autenticao..."})]}),a.jsxs("p",{className:"text-slate-500 text-sm",children:[y?"Reconectando com o servidor":"Aguarde enquanto validamos suas credenciais",x>0&&` (Tentativa ${x})`]})]})]});if(m&&x>=3)return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:[a.jsx(m5,{onRetry:w}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-red-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Nt,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Problema de Conectividade"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"No foi possvel conectar com o servidor aps vrias tentativas."}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:w,disabled:y,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium disabled:opacity-50 flex items-center justify-center gap-2",children:[y?a.jsx(It,{className:"w-4 h-4 animate-spin"}):a.jsx($o,{className:"w-4 h-4"}),"Tentar Novamente"]}),a.jsx("button",{onClick:()=>window.location.href="/login",className:"w-full bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg font-medium",children:"Ir para Login"})]})]})]});if(!s&&!n&&!y&&!u)return a.jsx(Vf,{to:"/login",state:{from:d},replace:!0});if(!s&&!u)return a.jsx(Vf,{to:"/login",state:{from:d},replace:!0});const N=u||l;if(!(()=>{var A;if(u)return!0;const k=((A=N.profile)==null?void 0:A.role)||N.role;return k==="admin"||k==="system_admin"||k==="sys_admin"?!0:t?k===t:r&&r.length>0?r.includes(k||""):!0})()){const k=t||(r?r.join(", "):"Indefinido"),A=((j=N.profile)==null?void 0:j.role)||N.role;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-red-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Gt,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Acesso Negado"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"Voc no tem permisso para acessar esta pgina."}),a.jsxs("p",{className:"text-sm text-slate-500",children:["Perfil necessrio: ",a.jsx("span",{className:"font-medium",children:k}),a.jsx("br",{}),"Seu perfil: ",a.jsx("span",{className:"font-medium",children:A})]}),u&&a.jsx("button",{onClick:()=>{localStorage.removeItem("demo-auth"),localStorage.removeItem("demo-user"),window.location.href="/login"},className:"mt-4 bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg font-medium",children:"Sair do Demo"})]})})}return a.jsx(a.Fragment,{children:e})}function Uie({user:e,isOpen:t,onClose:r,onSave:s,organizations:n}){var y,v,w;const{user:i}=da(),l=i,[d,u]=_.useState(!1),[h,m]=_.useState({name:e.name||"",phone:e.phone||"",role:e.role||"",organization_id:((y=e.organization_id)==null?void 0:y.toString())||"",is_active:e.is_active});_.useEffect(()=>{var N;e&&m({name:e.name||"",phone:e.phone||"",role:e.role||"",organization_id:((N=e.organization_id)==null?void 0:N.toString())||"",is_active:e.is_active})},[e]);const p=async N=>{N.preventDefault(),u(!0);try{const S=await fetch(`/api/users/admin/${e.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({name:h.name,phone:h.phone||null,role:h.role,organization_id:h.organization_id?parseInt(h.organization_id):null,is_active:h.is_active})});if(S.ok){const j={...e,name:h.name,phone:h.phone,role:h.role,organization_id:h.organization_id?parseInt(h.organization_id):void 0,is_active:h.is_active};alert("Usurio atualizado com sucesso!"),r(),s(j)}else{const j=await S.json();throw new Error(j.error||"Erro ao atualizar usurio")}}catch(S){console.error("Error updating user:",S),alert(S instanceof Error?S.message:"Erro ao atualizar usurio. Tente novamente.")}finally{u(!1)}},x=()=>{var S;const N=[{value:Hr.INSPECTOR,label:"Tcnico"},{value:Hr.CLIENT,label:"Cliente"},{value:Hr.MANAGER,label:"Gerente"}];return((S=l==null?void 0:l.profile)==null?void 0:S.role)===Hr.SYSTEM_ADMIN&&N.unshift({value:Hr.ORG_ADMIN,label:"Administrador da Organizao"}),N},b=()=>{var N,S;return((N=l==null?void 0:l.profile)==null?void 0:N.role)===Hr.SYSTEM_ADMIN?n:((S=l==null?void 0:l.profile)==null?void 0:S.role)===Hr.ORG_ADMIN?n.filter(j=>{var k;return j.id===((k=l.profile)==null?void 0:k.managed_organization_id)}):[]};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",role:"dialog","aria-labelledby":"user-edit-modal-title","aria-describedby":"user-edit-modal-description",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Wr,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{id:"user-edit-modal-title",className:"font-heading text-xl font-bold text-slate-900",children:"Editar Usurio"}),a.jsx("p",{id:"user-edit-modal-description",className:"text-sm text-slate-600",children:"Alterar informaes e permisses do usurio"})]})]}),a.jsx("button",{onClick:r,className:"text-slate-500 hover:text-slate-700",disabled:d,children:a.jsx(ct,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.avatar_url?a.jsx("img",{src:e.avatar_url,alt:e.name,className:"w-12 h-12 rounded-full"}):a.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-slate-600 font-medium",children:((w=(v=e.name)==null?void 0:v.charAt(0))==null?void 0:w.toUpperCase())||"U"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-slate-900",children:e.name}),a.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[a.jsx(sa,{className:"w-3 h-3 mr-1"}),e.email]})]})]}),a.jsxs("div",{className:"text-xs text-slate-500",children:["Conta criada em: ",new Date(e.created_at).toLocaleDateString("pt-BR"),e.last_login_at&&a.jsxs("span",{className:"ml-4",children:["ltimo acesso: ",new Date(e.last_login_at).toLocaleDateString("pt-BR")]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx(Wr,{className:"w-4 h-4 inline mr-1"}),"Nome Completo *"]}),a.jsx("input",{type:"text",value:h.name,onChange:N=>m({...h,name:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do usurio",required:!0,disabled:d})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx(Fo,{className:"w-4 h-4 inline mr-1"}),"Telefone"]}),a.jsx("input",{type:"tel",value:h.phone,onChange:N=>m({...h,phone:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 99999-9999",disabled:d})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx(Gt,{className:"w-4 h-4 inline mr-1"}),"Perfil de Acesso *"]}),a.jsxs("select",{value:h.role,onChange:N=>m({...h,role:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:d,children:[a.jsx("option",{value:"",children:"Selecione um perfil"}),x().map(N=>a.jsx("option",{value:N.value,children:N.label},N.value))]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Define as permisses do usurio no sistema"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[a.jsx(lt,{className:"w-4 h-4 inline mr-1"}),"Organizao"]}),a.jsxs("select",{value:h.organization_id,onChange:N=>m({...h,organization_id:N.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:d,children:[a.jsx("option",{value:"",children:"Sem organizao"}),b().map(N=>a.jsx("option",{value:N.id,children:N.name},N.id))]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Organizao  qual o usurio pertence"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:h.is_active,onChange:N=>m({...h,is_active:N.target.checked}),className:"rounded border-slate-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",disabled:d}),a.jsx("span",{className:"ml-2 text-sm font-medium text-slate-700",children:"Conta ativa"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Usurios inativos no podem fazer login no sistema"})]}),a.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-slate-200",children:[a.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",disabled:d,children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:d||!h.name.trim()||!h.role,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Salvar Alteraes"]})})]})]})]})})}):null}function qie(){const{user:e}=da(),t=e,[r,s]=_.useState([]),[n,i]=_.useState([]),[l,d]=_.useState([]),[u,h]=_.useState(!0),[m,p]=_.useState(""),[x,b]=_.useState("all"),[y,v]=_.useState("users"),[w,N]=_.useState(null),[S,j]=_.useState(null),[k,A]=_.useState(!1);_.useEffect(()=>{console.log("[USERS_PAGE] useEffect executando..."),O(),T(),D()},[]);const O=async()=>{var B,ne,ie,ee;try{console.log("[USERS_PAGE] Buscando usuarios - usuario atual:",e==null?void 0:e.email,"role:",(B=t==null?void 0:t.profile)==null?void 0:B.role);let Z="/api/users";(((ne=t==null?void 0:t.profile)==null?void 0:ne.role)==="system_admin"||((ie=t==null?void 0:t.profile)==null?void 0:ie.role)==="sys_admin")&&(Z+="?include_unassigned=true"),console.log("[USERS_PAGE] URL da requisicao:",Z);const re=await Fe(Z,{headers:{"Content-Type":"application/json"}});if(re.ok){const J=await re.json();console.log("[USERS_PAGE] Resposta recebida:",J),console.log("[USERS_PAGE] Numero de usuarios:",((ee=J.users)==null?void 0:ee.length)||0),J.users&&J.users.length>0&&console.log("[USERS_PAGE] Primeiros usuarios recebidos:",J.users.slice(0,3).map(F=>({email:F.email,name:F.name,role:F.role,organization_id:F.organization_id,organization_name:F.organization_name}))),s(J.users||[])}else{console.error("[USERS_PAGE] Failed to fetch users:",re.status,re.statusText);const J=await re.json().catch(()=>({}));console.error("[USERS_PAGE] Error details:",J)}}catch(Z){console.error("Error fetching users:",Z)}finally{h(!1)}},T=async()=>{try{const B=await Fe("/api/organizations",{headers:{"Content-Type":"application/json"}});if(B.ok){const ne=await B.json();i(ne.organizations||[])}else console.error("Failed to fetch organizations:",B.status,B.statusText)}catch(B){console.error("Error fetching organizations:",B)}},D=async()=>{try{const B=await Fe("/api/users/pending-invitations",{headers:{"Content-Type":"application/json"}});if(B.ok){const ne=await B.json();d(ne.invitations||[])}else console.error("Failed to fetch pending invitations:",B.status,B.statusText)}catch(B){console.error("Error fetching pending invitations:",B)}},R=async B=>{try{if((await Fe(`/api/users/${B}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)N(null),alert("Usurio excludo com sucesso!"),await O(),await T();else throw new Error("Erro ao excluir usurio")}catch(ne){console.error("Error deleting user:",ne),alert("Erro ao excluir usurio. Tente novamente.")}},I=async(B,ne)=>{try{if((await Fe(`/api/users/admin/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!ne})})).ok)s(ee=>ee.map(Z=>Z.id===B?{...Z,is_active:!ne}:Z)),await O();else throw new Error("Erro ao alterar status do usurio")}catch(ie){console.error("Error updating user status:",ie),alert("Erro ao alterar status do usurio. Tente novamente.")}},L=async B=>{if(confirm("Tem certeza que deseja APROVAR este usurio?"))try{const ne=await Fe(`/api/admin/users/${B}/approve`,{method:"POST",headers:{"Content-Type":"application/json"}});if(ne.ok)alert("Usurio aprovado com sucesso!"),s(ie=>ie.map(ee=>ee.id===B?{...ee,approval_status:"approved"}:ee)),await O();else{const ie=await ne.json();throw new Error(ie.error||"Erro ao aprovar usurio")}}catch(ne){console.error("Error approving user:",ne),alert("Erro ao aprovar usurio. Verifique se voc tem permisso de administrador.")}},$=async()=>{A(!0);try{const ie=["email,nome,cargo,organizacao,telefone,ativo,ultimo_acesso,criado_em",...r.map(J=>({email:J.email,nome:J.name,cargo:le(J.role),organizacao:V(J.organization_id),telefone:J.phone||"",ativo:J.is_active?"Sim":"No",ultimo_acesso:J.last_login_at?new Date(J.last_login_at).toLocaleDateString("pt-BR"):"Nunca",criado_em:new Date(J.created_at).toLocaleDateString("pt-BR")})).map(J=>Object.values(J).map(F=>`"${F}"`).join(","))].join(`
`),ee=new Blob([ie],{type:"text/csv;charset=utf-8;"}),Z=document.createElement("a"),re=URL.createObjectURL(ee);Z.setAttribute("href",re),Z.setAttribute("download",`usuarios_${new Date().toISOString().split("T")[0]}.csv`),Z.style.visibility="hidden",document.body.appendChild(Z),Z.click(),document.body.removeChild(Z)}catch(B){console.error("Erro ao exportar usurios:",B),alert("Erro ao exportar dados. Tente novamente.")}finally{A(!1)}},W=async()=>{alert("Importao de usurios no est disponvel. Os usurios so criados automaticamente no primeiro login.")},P=B=>{j(B)},U=async B=>{s(ne=>ne.map(ie=>ie.id===B.id?B:ie)),await O(),await T()},K=async B=>{try{const ne=await Fe(`/api/users/invitations/${B}/token`);if(ne.ok){const ie=await ne.json(),ee=`${window.location.origin}/accept-invitation/${ie.token}`;await navigator.clipboard.writeText(ee),alert("Link de convite copiado para a rea de transferncia!")}else throw new Error("Erro ao obter token do convite")}catch(ne){console.error("Erro ao copiar link:",ne),alert("Erro ao copiar link do convite. Tente novamente.")}},G=async B=>{if(confirm("Tem certeza que deseja revogar este convite?"))try{if((await Fe(`/api/users/invitations/${B}/revoke`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok)alert("Convite revogado com sucesso!"),await D(),await T(),await O();else throw new Error("Erro ao revogar convite")}catch(ne){console.error("Error revoking invitation:",ne),alert("Erro ao revogar convite. Tente novamente.")}},Q=r.filter(B=>{const ne=B.name||"",ie=B.email||"",ee=ne.toLowerCase().includes(m.toLowerCase())||ie.toLowerCase().includes(m.toLowerCase()),Z=x==="all"||B.role===x;return ee&&Z}),le=B=>{switch(B){case"system_admin":case"sys_admin":return"Admin Sistema";case"org_admin":return"Admin Organizao";case"admin":return"Administrador";case"manager":return"Gerente";case"inspector":return"Tcnico";case"client":return"Cliente";default:return B}},H=B=>{switch(B){case"system_admin":case"sys_admin":return"bg-purple-100 text-purple-800";case"org_admin":return"bg-red-100 text-red-800";case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"inspector":return"bg-green-100 text-green-800";case"client":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},V=B=>{const ne=n.find(ie=>ie.id===B);return(ne==null?void 0:ne.name)||"Sem organizao"};return u?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:"Gerenciar Usurios"}),a.jsx("p",{className:"text-slate-600 mt-1",children:"Controle de acesso e permisses dos usurios do sistema"})]}),a.jsx("div",{className:"text-sm text-slate-500",children:"Usurios so criados automaticamente no primeiro login"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:a.jsx(Dt,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:r.length}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Total de Usurios"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:a.jsx(Ct,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:r.filter(B=>B.is_active).length}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Usurios Ativos"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:a.jsx(Gt,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:r.filter(B=>B.role==="admin").length}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Administradores"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx(lt,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900",children:n.length}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Organizaes"})]})]})})]}),a.jsx("div",{className:"border-b border-slate-200",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsxs("button",{onClick:()=>v("users"),className:`py-2 px-1 border-b-2 font-medium text-sm ${y==="users"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[a.jsx(Dt,{className:"w-4 h-4 inline mr-2"}),"Usurios (",r.length,")"]}),a.jsxs("button",{onClick:()=>v("invitations"),className:`py-2 px-1 border-b-2 font-medium text-sm ${y==="invitations"?"border-blue-500 text-blue-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[a.jsx(Ql,{className:"w-4 h-4 inline mr-2"}),"Convites Pendentes (",l.length,")"]})]})}),y==="users"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:m,onChange:B=>p(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tp,{className:"w-4 h-4 text-slate-400"}),a.jsxs("select",{value:x,onChange:B=>b(B.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"Todos os Perfis"}),a.jsx("option",{value:"system_admin",children:"Admin Sistema"}),a.jsx("option",{value:"org_admin",children:"Admin Organizao"}),a.jsx("option",{value:"manager",children:"Gerente"}),a.jsx("option",{value:"inspector",children:"Tcnico"}),a.jsx("option",{value:"client",children:"Cliente"})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Exportar Usurios"}),a.jsx(Jj,{type:"users",onExport:$,onImport:W,isLoading:k}),a.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Nota: A importao de usurios no est disponvel. Os usurios so criados automaticamente no primeiro login."})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Usurio"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Perfil"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Organizao"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"ltimo Acesso"}),a.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-slate-900",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:Q.map(B=>a.jsxs("tr",{className:`hover:bg-slate-50 ${B.organization_id?"":"bg-amber-50"}`,children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[B.avatar_url?a.jsx("img",{src:B.avatar_url,alt:B.name,className:"w-10 h-10 rounded-full mr-3"}):a.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center mr-3",children:a.jsx("span",{className:"text-slate-600 font-medium text-sm",children:(B.name||B.email||"?").charAt(0).toUpperCase()})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-medium text-slate-900",children:B.name}),!B.organization_id&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[10px] font-medium rounded-full bg-amber-100 text-amber-800",title:"Sem organizao",children:"Sem Org"}),B.approval_status==="pending"&&a.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[10px] font-medium rounded-full bg-purple-100 text-purple-800 border border-purple-200",title:"Aprovao Pendente",children:"Pendente"})]}),a.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[a.jsx(sa,{className:"w-3 h-3 mr-1"}),B.email]}),B.phone&&a.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[a.jsx(Fo,{className:"w-3 h-3 mr-1"}),B.phone]})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${H(B.role)}`,children:le(B.role)})}),a.jsx("td",{className:"px-6 py-4",children:B.organization_name?a.jsx("span",{className:"text-sm text-slate-900",children:B.organization_name}):a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Nt,{className:"w-3 h-3 text-amber-500"}),a.jsx("span",{className:"text-sm text-amber-600 font-medium",children:"No atribudo"})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{onClick:()=>I(B.id,B.is_active),className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${B.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-red-100 text-red-800 hover:bg-red-200"} transition-colors`,children:B.is_active?a.jsxs(a.Fragment,{children:[a.jsx(Ct,{className:"w-3 h-3 mr-1"}),"Ativo"]}):a.jsxs(a.Fragment,{children:[a.jsx(J4,{className:"w-3 h-3 mr-1"}),"Inativo"]})})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm text-slate-600",children:B.last_active_at||B.last_login_at?new Date(B.last_active_at||B.last_login_at||"").toLocaleString("pt-BR"):"Nunca"})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>P(B),className:`p-2 transition-colors ${B.organization_id?"text-slate-500 hover:text-blue-600 hover:bg-blue-50":"text-amber-500 hover:text-amber-600 hover:bg-amber-50"} rounded-lg`,title:B.organization_id?"Editar usurio":"Configurar usurio",children:a.jsx(Ha,{className:"w-4 h-4"})}),B.approval_status==="pending"&&a.jsx("button",{onClick:()=>L(B.id),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Aprovar Usurio",children:a.jsx(Ct,{className:"w-4 h-4"})}),B.id!==(e==null?void 0:e.id)&&a.jsx("button",{onClick:()=>N(B.id),className:"p-2 text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Excluir usurio",children:a.jsx(rr,{className:"w-4 h-4"})})]})})]},B.id))})]})}),Q.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Dt,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:r.length===0?"Nenhum usurio encontrado":"Nenhum usurio corresponde aos filtros"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:r.length===0?"Os usurios sero criados automaticamente no primeiro login":"Tente ajustar os filtros ou termo de busca"})]})]})]}),y==="invitations"&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Convites Pendentes"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Usurios que foram convidados mas ainda no aceitaram o convite"})]}),l.length>0?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Email Convidado"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Perfil"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Organizao"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Convidado por"}),a.jsx("th",{className:"px-6 py-4 text-left text-sm font-medium text-slate-900",children:"Expira em"}),a.jsx("th",{className:"px-6 py-4 text-right text-sm font-medium text-slate-900",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-200",children:l.map(B=>a.jsxs("tr",{className:"hover:bg-slate-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex items-center justify-center mr-3",children:a.jsx(sa,{className:"w-4 h-4 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-900",children:B.email}),a.jsxs("p",{className:"text-sm text-slate-500",children:["Enviado em ",new Date(B.created_at).toLocaleDateString("pt-BR")]})]})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${H(B.role)}`,children:le(B.role)})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm text-slate-900",children:B.organization_name||"Sem organizao"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm text-slate-600",children:B.inviter_name||B.invited_by})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsxs("div",{className:"flex items-center text-sm",children:[a.jsx(wr,{className:"w-3 h-3 mr-1 text-slate-400"}),a.jsx("span",{className:`${new Date(B.expires_at)<new Date?"text-red-600 font-medium":"text-slate-600"}`,children:new Date(B.expires_at).toLocaleDateString("pt-BR")})]}),new Date(B.expires_at)<new Date&&a.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Expirado"})]}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>K(B.id),className:"px-3 py-1 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors text-sm",title:"Copiar link de convite",children:"Copiar Link"}),a.jsx("button",{onClick:()=>G(B.id),className:"px-3 py-1 text-red-600 border border-red-200 rounded-lg hover:bg-red-50 transition-colors text-sm",title:"Revogar convite",children:"Revogar"})]})})]},B.id))})]})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ql,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhum convite pendente"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Todos os convites enviados foram aceitos ou expiraram"})]})]}),w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:a.jsx(rr,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-heading text-lg font-semibold text-slate-900",children:"Confirmar Excluso"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Esta ao no pode ser desfeita."})]})]}),a.jsx("p",{className:"text-slate-700 mb-6",children:"Tem certeza que deseja excluir este usurio? Todos os dados relacionados sero permanentemente removidos."}),a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>R(w),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Excluir Usurio"})]})]})}),S&&a.jsx(Uie,{user:S,isOpen:!!S,onClose:()=>j(null),onSave:U,organizations:n})]})})}function Fie(){var N,S;const{user:e}=da(),t=e,[r,s]=_.useState(null),[n,i]=_.useState([]),[l,d]=_.useState(!0),[u,h]=_.useState(!1),[m,p]=_.useState({name:"",phone:"",organization_id:""});_.useEffect(()=>{var j;if(t!=null&&t.profile){const k=t.profile;s(k),p({name:k.name||"",phone:k.phone||"",organization_id:((j=k.organization_id)==null?void 0:j.toString())||""})}x()},[e]);const x=async()=>{try{const j=await Fe("/api/organizations");if(j.ok){const k=await j.json();i(k.organizations||[])}}catch(j){console.error("Error fetching organizations:",j)}finally{d(!1)}},b=async j=>{if(j.preventDefault(),!!r){h(!0);try{if((await Fe(`/api/users/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m.name,phone:m.phone||void 0,organization_id:m.organization_id?parseInt(m.organization_id):void 0})})).ok){const A={...r,name:m.name,phone:m.phone,organization_id:m.organization_id?parseInt(m.organization_id):void 0};s(A),alert("Perfil atualizado com sucesso!")}else throw new Error("Erro ao atualizar perfil")}catch(k){console.error("Error updating profile:",k),alert("Erro ao atualizar perfil. Tente novamente.")}finally{h(!1)}}},y=j=>{switch(j){case"system_admin":case"sys_admin":return"Admin Sistema";case"admin":return"Administrador";case"manager":return"Gerente";case"inspector":return"Tcnico";case"client":return"Cliente";default:return j}},v=j=>{switch(j){case"system_admin":case"sys_admin":return"bg-purple-100 text-purple-800";case"admin":return"bg-red-100 text-red-800";case"manager":return"bg-blue-100 text-blue-800";case"inspector":return"bg-green-100 text-green-800";case"client":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},w=j=>{const k=n.find(A=>A.id===j);return(k==null?void 0:k.name)||"Sem organizao"};return l||!r?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"font-heading text-2xl font-bold text-slate-900",children:"Meu Perfil"}),a.jsx("p",{className:"text-slate-600 text-sm mt-1",children:"Gerencie suas informaes pessoais e configuraes de conta"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative inline-block mb-4",children:[r.avatar_url||(N=e==null?void 0:e.google_user_data)!=null&&N.picture?a.jsx("img",{src:r.avatar_url||((S=e==null?void 0:e.google_user_data)==null?void 0:S.picture)||void 0,alt:r.name??"Profile",className:"w-24 h-24 rounded-full object-cover"}):a.jsx("div",{className:"w-24 h-24 bg-slate-200 rounded-full flex items-center justify-center",children:a.jsx(Wr,{className:"w-10 h-10 text-slate-500"})}),a.jsx("button",{className:"absolute bottom-0 right-0 p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors",children:a.jsx(Yl,{className:"w-4 h-4"})})]}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-1",children:r.name||"Sem nome"}),a.jsx("p",{className:"text-slate-600 mb-3",children:r.email}),a.jsxs("span",{className:`inline-flex items-center px-3 py-1 text-sm font-medium rounded-full ${v(r.role)}`,children:[a.jsx(Gt,{className:"w-4 h-4 mr-1"}),y(r.role)]})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200 space-y-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[a.jsx(lt,{className:"w-4 h-4 mr-2"}),w(r.organization_id)]}),a.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[a.jsx(Gr,{className:"w-4 h-4 mr-2"}),"Membro desde ",new Date(r.created_at).toLocaleDateString("pt-BR")]}),r.last_login_at&&a.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[a.jsx(qy,{className:"w-4 h-4 mr-2"}),"ltimo acesso: ",new Date(r.last_login_at).toLocaleDateString("pt-BR")]})]})]}),a.jsxs("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Informaes Pessoais"}),a.jsxs("form",{onSubmit:b,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Completo"}),a.jsxs("div",{className:"relative",children:[a.jsx(Wr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsx("input",{type:"text",value:m.name,onChange:j=>p({...m,name:j.target.value}),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(sa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsx("input",{type:"email",value:r.email,disabled:!0,className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-500 cursor-not-allowed"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"O email no pode ser alterado pois  vinculado  sua conta Google"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone"}),a.jsxs("div",{className:"relative",children:[a.jsx(Fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsx("input",{type:"tel",value:m.phone,onChange:j=>p({...m,phone:j.target.value}),placeholder:"(11) 99999-9999",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Organizao"}),a.jsxs("div",{className:"relative",children:[a.jsx(lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),a.jsxs("select",{value:m.organization_id,onChange:j=>p({...m,organization_id:j.target.value}),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Selecione uma organizao"}),n.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})]})]})]}),a.jsx("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-slate-200",children:a.jsxs("button",{type:"submit",disabled:u,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[u?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):a.jsx(Ka,{className:"w-4 h-4 mr-2"}),u?"Salvando...":"Salvar Alteraes"]})})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Informaes da Conta"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"ID do Usurio"}),a.jsx("div",{className:"px-3 py-2 bg-slate-50 border border-slate-200 rounded-lg text-slate-600 font-mono text-sm",children:r.id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Status da Conta"}),a.jsx("div",{className:`inline-flex items-center px-3 py-1 text-sm font-medium rounded-full ${r.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r.is_active?"Ativa":"Inativa"})]})]})]})]})})}function Hie({isOpen:e,onClose:t,organization:r,onUpdate:s}){const[n,i]=_.useState("basic"),[l,d]=_.useState(!1),[u,h]=_.useState("idle"),[m,p]=_.useState({name:"",type:"company",description:"",contact_email:"",contact_phone:"",address:"",website:"",cnpj:"",razao_social:"",nome_fantasia:"",cnae_principal:"",cnae_descricao:"",natureza_juridica:"",data_abertura:"",capital_social:"",porte_empresa:"",situacao_cadastral:"",numero_funcionarios:"",setor_industria:"",subsetor_industria:"",certificacoes_seguranca:"",data_ultima_auditoria:"",nivel_risco:"medio",contato_seguranca_nome:"",contato_seguranca_email:"",contato_seguranca_telefone:"",historico_incidentes:"",observacoes_compliance:"",faturamento_anual:"",subscription_plan:"basic",max_users:50,max_subsidiaries:0,is_active:!0,logo_url:""}),[x,b]=_.useState({}),[y,v]=_.useState(!1);_.useEffect(()=>{var j,k,A;r&&(p({name:r.name||"",type:r.type||"company",description:r.description||"",contact_email:r.contact_email||"",contact_phone:r.contact_phone||"",address:r.address||"",website:r.website||"",cnpj:r.cnpj||"",razao_social:r.razao_social||"",nome_fantasia:r.nome_fantasia||"",cnae_principal:r.cnae_principal||"",cnae_descricao:r.cnae_descricao||"",natureza_juridica:r.natureza_juridica||"",data_abertura:r.data_abertura||"",capital_social:((j=r.capital_social)==null?void 0:j.toString())||"",porte_empresa:r.porte_empresa||"",situacao_cadastral:r.situacao_cadastral||"",numero_funcionarios:((k=r.numero_funcionarios)==null?void 0:k.toString())||"",setor_industria:r.setor_industria||"",subsetor_industria:r.subsetor_industria||"",certificacoes_seguranca:r.certificacoes_seguranca||"",data_ultima_auditoria:r.data_ultima_auditoria||"",nivel_risco:r.nivel_risco||"medio",contato_seguranca_nome:r.contato_seguranca_nome||"",contato_seguranca_email:r.contato_seguranca_email||"",contato_seguranca_telefone:r.contato_seguranca_telefone||"",historico_incidentes:r.historico_incidentes||"",observacoes_compliance:r.observacoes_compliance||"",faturamento_anual:((A=r.faturamento_anual)==null?void 0:A.toString())||"",subscription_plan:r.subscription_plan||"basic",max_users:r.max_users||50,max_subsidiaries:r.max_subsidiaries||0,is_active:r.is_active??!0,logo_url:r.logo_url||""}),b({}),h("idle"))},[r]);const w=async()=>{if(!m.cnpj.trim()){alert("Digite um CNPJ para buscar");return}d(!0),h("idle");try{const j=m.cnpj.replace(/[.\-/\s]/g,""),k=await fetch(`/api/cnpj/${j}`);if(k.ok){const A=await k.json();if(A&&A.success&&A.data){const O=A.data;p(T=>({...T,razao_social:O.razao_social||T.razao_social,nome_fantasia:O.nome_fantasia||T.nome_fantasia,cnae_principal:O.cnae_principal||T.cnae_principal,cnae_descricao:O.cnae_descricao||T.cnae_descricao,natureza_juridica:O.natureza_juridica||T.natureza_juridica,data_abertura:O.data_abertura||T.data_abertura,capital_social:O.capital_social?O.capital_social.toString():T.capital_social,porte_empresa:O.porte_empresa||T.porte_empresa,situacao_cadastral:O.situacao_cadastral||T.situacao_cadastral,address:O.address||T.address,contact_email:O.contact_email||T.contact_email,contact_phone:O.contact_phone||T.contact_phone,website:O.website||T.website}))}h("success")}else{const A=await k.json();alert(A.error||"Erro ao buscar CNPJ"),h("error")}}catch(j){console.error("CNPJ lookup error:",j),alert("Erro ao buscar CNPJ. Verifique sua conexo."),h("error")}finally{d(!1)}},N=()=>{const j={};return m.name.trim()||(j.name="Nome da organizao  obrigatrio"),m.contact_email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.contact_email)&&(j.contact_email="Email invlido"),m.website&&!m.website.startsWith("http")&&(j.website="Website deve comear com http:// ou https://"),m.cnpj&&!/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/.test(m.cnpj)&&(j.cnpj="CNPJ deve estar no formato XX.XXX.XXX/XXXX-XX"),b(j),Object.keys(j).length===0},S=async j=>{if(j.preventDefault(),!!N()){v(!0);try{const k={...m,numero_funcionarios:m.numero_funcionarios?parseInt(m.numero_funcionarios):void 0,capital_social:m.capital_social?parseFloat(m.capital_social):void 0,faturamento_anual:m.faturamento_anual?parseFloat(m.faturamento_anual):void 0};await s(r.id,k),t()}catch(k){console.error("Erro ao atualizar organizao:",k),b({submit:"Erro ao atualizar organizao. Tente novamente."})}finally{v(!1)}}};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[95vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(lt,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Editar Organizao"}),a.jsx("p",{className:"text-sm text-gray-600",children:r.name})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ct,{className:"h-5 w-5 text-gray-400"})})]}),a.jsxs("div",{className:"p-6",children:[x.submit&&a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 mb-6",children:[a.jsx(tr,{className:"h-5 w-5"}),a.jsx("span",{className:"text-sm",children:x.submit})]}),a.jsx("div",{className:"border-b border-gray-200 mb-6",children:a.jsxs("nav",{className:"-mb-px flex space-x-8",children:[a.jsxs("button",{onClick:()=>i("basic"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="basic"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(jr,{className:"w-4 h-4 inline mr-2"}),"Dados Bsicos"]}),a.jsxs("button",{onClick:()=>i("company"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="company"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(lt,{className:"w-4 h-4 inline mr-2"}),"Informaes Empresariais"]}),a.jsxs("button",{onClick:()=>i("safety"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="safety"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Gt,{className:"w-4 h-4 inline mr-2"}),"Segurana & Compliance"]}),a.jsxs("button",{onClick:()=>i("subscription"),className:`py-2 px-1 border-b-2 font-medium text-sm ${n==="subscription"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Nv,{className:"w-4 h-4 inline mr-2"}),"Configuraes"]})]})}),a.jsxs("form",{onSubmit:S,className:"space-y-6",children:[n==="basic"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(_a,{className:"w-5 h-5 text-blue-600"}),"Busca Automtica por CNPJ"]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("input",{type:"text",value:m.cnpj,onChange:j=>p({...m,cnpj:j.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.cnpj?"border-red-300":"border-gray-300"}`,placeholder:"Digite o CNPJ (apenas nmeros ou com formatao)",maxLength:18}),x.cnpj&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.cnpj})]}),a.jsx("button",{type:"button",onClick:w,disabled:l||!m.cnpj.trim(),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?a.jsx(It,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(_a,{className:"w-4 h-4 mr-2"}),"Atualizar"]})})]}),u==="success"&&a.jsxs("div",{className:"mt-3 flex items-center text-green-700 text-sm",children:[a.jsx(aa,{className:"w-4 h-4 mr-2"}),"Dados da empresa atualizados com sucesso!"]}),u==="error"&&a.jsxs("div",{className:"mt-3 flex items-center text-red-700 text-sm",children:[a.jsx(tr,{className:"w-4 h-4 mr-2"}),"No foi possvel carregar os dados. Verifique o CNPJ."]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome da Organizao *"}),a.jsx("input",{type:"text",value:m.name,onChange:j=>p({...m,name:j.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.name?"border-red-300":"border-gray-300"}`,placeholder:"Ex: Empresa ABC Ltda",required:!0}),x.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.name})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),a.jsxs("select",{value:m.type,onChange:j=>p({...m,type:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"company",children:"Empresa"}),a.jsx("option",{value:"consultancy",children:"Consultoria"}),a.jsx("option",{value:"client",children:"Cliente"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio"}),a.jsx("textarea",{value:m.description,onChange:j=>p({...m,description:j.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descrio da organizao"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(sa,{className:"inline h-4 w-4 mr-1"}),"Email de Contato"]}),a.jsx("input",{type:"email",value:m.contact_email,onChange:j=>p({...m,contact_email:j.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.contact_email?"border-red-300":"border-gray-300"}`,placeholder:"contato@empresa.com"}),x.contact_email&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.contact_email})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Fo,{className:"inline h-4 w-4 mr-1"}),"Telefone"]}),a.jsx("input",{type:"tel",value:m.contact_phone,onChange:j=>p({...m,contact_phone:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 99999-9999"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Su,{className:"inline h-4 w-4 mr-1"}),"Website"]}),a.jsx("input",{type:"url",value:m.website,onChange:j=>p({...m,website:j.target.value}),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${x.website?"border-red-300":"border-gray-300"}`,placeholder:"https://www.empresa.com"}),x.website&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.website})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Na,{className:"inline h-4 w-4 mr-1"}),"Endereo"]}),a.jsx("input",{type:"text",value:m.address,onChange:j=>p({...m,address:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Endereo completo"})]}),a.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[a.jsx(vs,{className:"inline h-4 w-4 mr-1"}),"Logo da Organizao"]}),a.jsxs("div",{className:"flex items-start gap-4",children:[m.logo_url?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:m.logo_url,alt:"Logo",className:"w-24 h-24 object-contain border border-gray-200 rounded-lg bg-white p-1"}),a.jsx("button",{type:"button",onClick:()=>p({...m,logo_url:""}),className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Remover logo",children:a.jsx(rr,{className:"w-3 h-3"})})]}):a.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center bg-white",children:a.jsx(vs,{className:"w-8 h-8 text-gray-300"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("label",{className:"flex items-center justify-center px-4 py-2 bg-white border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[a.jsx(Pi,{className:"w-4 h-4 mr-2 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:"Escolher imagem"}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:j=>{var A;const k=(A=j.target.files)==null?void 0:A[0];if(k){const O=new FileReader;O.onload=T=>{var R;const D=(R=T.target)==null?void 0:R.result;p({...m,logo_url:D})},O.readAsDataURL(k)}}})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"PNG, JPG ou SVG. Mx 2MB. A logo aparecer nos relatrios de inspeo."})]})]})]})]}),n==="company"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Razo Social"}),a.jsx("input",{type:"text",value:m.razao_social,onChange:j=>p({...m,razao_social:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Razo social da empresa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Fantasia"}),a.jsx("input",{type:"text",value:m.nome_fantasia,onChange:j=>p({...m,nome_fantasia:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome fantasia"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CNAE Principal"}),a.jsx("input",{type:"text",value:m.cnae_principal,onChange:j=>p({...m,cnae_principal:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Cdigo CNAE"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Porte da Empresa"}),a.jsxs("select",{value:m.porte_empresa,onChange:j=>p({...m,porte_empresa:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Selecione o porte"}),a.jsx("option",{value:"MEI",children:"MEI"}),a.jsx("option",{value:"ME",children:"Microempresa"}),a.jsx("option",{value:"EPP",children:"Empresa de Pequeno Porte"}),a.jsx("option",{value:"MEDIA",children:"Mdia Empresa"}),a.jsx("option",{value:"GRANDE",children:"Grande Empresa"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descrio CNAE"}),a.jsx("textarea",{value:m.cnae_descricao,onChange:j=>p({...m,cnae_descricao:j.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descrio da atividade principal"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Dt,{className:"w-4 h-4 inline mr-1"}),"Nmero de Funcionrios"]}),a.jsx("input",{type:"number",value:m.numero_funcionarios,onChange:j=>p({...m,numero_funcionarios:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 50",min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Abertura"}),a.jsx("input",{type:"date",value:m.data_abertura,onChange:j=>p({...m,data_abertura:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Zs,{className:"w-4 h-4 inline mr-1"}),"Faturamento Anual (R$)"]}),a.jsx("input",{type:"number",value:m.faturamento_anual,onChange:j=>p({...m,faturamento_anual:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 1000000",min:"0",step:"0.01"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Setor da Indstria"}),a.jsxs("select",{value:m.setor_industria,onChange:j=>p({...m,setor_industria:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"",children:"Selecione o setor"}),a.jsx("option",{value:"Construo Civil",children:"Construo Civil"}),a.jsx("option",{value:"Indstria",children:"Indstria"}),a.jsx("option",{value:"Petrleo e Gs",children:"Petrleo e Gs"}),a.jsx("option",{value:"Minerao",children:"Minerao"}),a.jsx("option",{value:"Qumica",children:"Qumica"}),a.jsx("option",{value:"Metalrgica",children:"Metalrgica"}),a.jsx("option",{value:"Alimentcia",children:"Alimentcia"}),a.jsx("option",{value:"Txtil",children:"Txtil"}),a.jsx("option",{value:"Logstica",children:"Logstica"}),a.jsx("option",{value:"Sade",children:"Sade"}),a.jsx("option",{value:"Educao",children:"Educao"}),a.jsx("option",{value:"Tecnologia",children:"Tecnologia"}),a.jsx("option",{value:"Servios",children:"Servios"}),a.jsx("option",{value:"Outros",children:"Outros"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subsetor"}),a.jsx("input",{type:"text",value:m.subsetor_industria,onChange:j=>p({...m,subsetor_industria:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Construo Pesada, Offshore, etc."})]})]})]}),n==="safety"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Gt,{className:"w-4 h-4 inline mr-1"}),"Nvel de Risco"]}),a.jsxs("select",{value:m.nivel_risco,onChange:j=>p({...m,nivel_risco:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"baixo",children:"Baixo"}),a.jsx("option",{value:"medio",children:"Mdio"}),a.jsx("option",{value:"alto",children:"Alto"}),a.jsx("option",{value:"critico",children:"Crtico"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data da ltima Auditoria de SST"}),a.jsx("input",{type:"date",value:m.data_ultima_auditoria,onChange:j=>p({...m,data_ultima_auditoria:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Certificaes de Segurana"}),a.jsx("textarea",{value:m.certificacoes_seguranca,onChange:j=>p({...m,certificacoes_seguranca:j.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: ISO 45001, OHSAS 18001, ISO 14001, etc."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Responsvel pela Segurana"}),a.jsx("input",{type:"text",value:m.contato_seguranca_nome,onChange:j=>p({...m,contato_seguranca_nome:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do responsvel"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email do Responsvel"}),a.jsx("input",{type:"email",value:m.contato_seguranca_email,onChange:j=>p({...m,contato_seguranca_email:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"seguranca@empresa.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telefone do Responsvel"}),a.jsx("input",{type:"tel",value:m.contato_seguranca_telefone,onChange:j=>p({...m,contato_seguranca_telefone:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 9999-9999"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Histrico de Incidentes Relevantes"}),a.jsx("textarea",{value:m.historico_incidentes,onChange:j=>p({...m,historico_incidentes:j.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Resumo de incidentes graves ou estatsticas relevantes..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaes de Compliance"}),a.jsx("textarea",{value:m.observacoes_compliance,onChange:j=>p({...m,observacoes_compliance:j.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Informaes sobre conformidade regulatria, pendncias, etc."})]})]}),n==="subscription"&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 space-y-6",children:[a.jsxs("h3",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[a.jsx(Js,{className:"w-4 h-4 text-blue-600"}),"Configuraes de Assinatura"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Plano de Assinatura"}),a.jsxs("select",{value:m.subscription_plan,onChange:j=>p({...m,subscription_plan:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[a.jsx("option",{value:"basic",children:"Bsico"}),a.jsx("option",{value:"pro",children:"Profissional"}),a.jsx("option",{value:"enterprise",children:"Empresarial"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mximo de Usurios"}),a.jsx("input",{type:"number",min:"1",max:"1000",value:m.max_users,onChange:j=>p({...m,max_users:parseInt(j.target.value)||50}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mximo de Subsidirias"}),a.jsx("input",{type:"number",min:"0",max:"100",value:m.max_subsidiaries,onChange:j=>p({...m,max_subsidiaries:parseInt(j.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"is_active",checked:m.is_active,onChange:j=>p({...m,is_active:j.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-700",children:"Organizao ativa"})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[n!=="basic"&&a.jsx("button",{type:"button",onClick:()=>{const j=["basic","company","safety","subscription"],k=j.indexOf(n);k>0&&i(j[k-1])},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Anterior"}),n!=="subscription"&&a.jsx("button",{type:"button",onClick:()=>{const j=["basic","company","safety","subscription"],k=j.indexOf(n);k<j.length-1&&i(j[k+1])},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Prximo"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:y,children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:y,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:y?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ka,{className:"h-4 w-4"}),"Salvar Alteraes"]})})]})]})]})]})]})}):null}function Vie({isOpen:e,onClose:t,organization:r,onDelete:s,organizationStats:n}){const[i,l]=_.useState(""),[d,u]=_.useState(!1),h=n&&(n.userCount>0||n.inspectionCount>0||n.subsidiaryCount>0),m=async()=>{if(i===r.name){u(!0);try{await s(r.id),t()}catch(x){console.error("Erro ao excluir organizao:",x)}finally{u(!1)}}},p=()=>{l(""),t()};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md",children:[a.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[a.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-3",children:[a.jsx(Nt,{className:"h-6 w-6 text-red-600"}),"Excluir Organizao"]}),a.jsx("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ct,{className:"h-5 w-5 text-gray-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Nt,{className:"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Esta ao no pode ser desfeita"}),a.jsxs("p",{className:"text-sm text-red-700 mt-1",children:["Voc est prestes a excluir permanentemente a organizao"," ",a.jsxs("strong",{children:['"',r.name,'"']})," e todos os dados associados."]})]})]})}),h&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Os seguintes dados sero perdidos permanentemente:"}),a.jsxs("div",{className:"space-y-2",children:[(n==null?void 0:n.userCount)>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsxs("span",{children:[n.userCount," usurio(s)"]})]}),(n==null?void 0:n.inspectionCount)>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(jr,{className:"h-4 w-4"}),a.jsxs("span",{children:[n.inspectionCount," inspeo(es)"]})]}),(n==null?void 0:n.subsidiaryCount)>0&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(lt,{className:"h-4 w-4"}),a.jsxs("span",{children:[n.subsidiaryCount," subsidiria(s)"]})]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Para confirmar, digite o nome da organizao: ",a.jsx("strong",{children:r.name})]}),a.jsx("input",{type:"text",value:i,onChange:x=>l(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Digite o nome da organizao"})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),a.jsx("button",{type:"button",onClick:m,disabled:i!==r.name||d,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Excluindo..."]}):a.jsxs(a.Fragment,{children:[a.jsx(rr,{className:"h-4 w-4"}),"Excluir Permanentemente"]})})]})]})]})}):null}function Gie({selectedOrganizations:e,onClearSelection:t,onBulkDelete:r,onBulkActivate:s,onBulkDeactivate:n,onBulkExport:i,onBulkInviteUsers:l}){const[d,u]=_.useState(!1);if(e.length===0)return null;const h=e.filter(p=>p.is_active).length,m=e.length-h;return a.jsx("div",{className:"fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-lg px-4 py-3 flex items-center gap-4 min-w-96",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:a.jsx(Ba,{className:"h-4 w-4 text-blue-600"})}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.length," organizao(es) selecionada(s)"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[m>0&&a.jsx("button",{onClick:()=>s(e.filter(p=>!p.is_active).map(p=>p.id)),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Ativar organizaes",children:a.jsx(Wy,{className:"h-4 w-4"})}),h>0&&a.jsx("button",{onClick:()=>n(e.filter(p=>p.is_active).map(p=>p.id)),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Desativar organizaes",children:a.jsx(X4,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>l(e.map(p=>p.id)),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Convidar usurios em lote",children:a.jsx(Ql,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>i(e.map(p=>p.id)),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Exportar dados",children:a.jsx(Fa,{className:"h-4 w-4"})}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>u(!d),className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors flex items-center gap-1",title:"Mais aes",children:[a.jsx(Js,{className:"h-4 w-4"}),a.jsx(qo,{className:"h-3 w-3"})]}),d&&a.jsx("div",{className:"absolute bottom-full mb-2 right-0 bg-white border border-gray-200 rounded-lg shadow-lg py-1 min-w-48",children:a.jsxs("button",{onClick:()=>{r(e.map(p=>p.id)),u(!1)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[a.jsx(rr,{className:"h-4 w-4"}),"Excluir selecionadas"]})})]}),a.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:bg-gray-50 rounded-lg transition-colors",title:"Limpar seleo",children:a.jsx(ct,{className:"h-4 w-4"})})]})]})})}function Kie({searchTerm:e,onSearchChange:t,filters:r,onFiltersChange:s,onClearFilters:n}){const[i,l]=_.useState(!1),d=r.type.length>0||r.status.length>0||r.plan.length>0||r.userCountRange[0]>0||r.userCountRange[1]<1e3||r.dateRange[0]!==""||r.dateRange[1]!=="",u=p=>{const x=r.type.includes(p)?r.type.filter(b=>b!==p):[...r.type,p];s({...r,type:x})},h=p=>{const x=r.status.includes(p)?r.status.filter(b=>b!==p):[...r.status,p];s({...r,status:x})},m=p=>{const x=r.plan.includes(p)?r.plan.filter(b=>b!==p):[...r.plan,p];s({...r,plan:x})};return a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(_a,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),a.jsx("input",{type:"text",value:e,onChange:p=>t(p.target.value),placeholder:"Buscar por nome, CNPJ, email...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e&&a.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-100 rounded",children:a.jsx(ct,{className:"h-4 w-4 text-gray-400"})})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 items-center",children:[a.jsx("div",{className:"flex gap-2",children:["company","consultancy","client"].map(p=>a.jsxs("button",{onClick:()=>u(p),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${r.type.includes(p)?"bg-blue-100 text-blue-700 border border-blue-200":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"}`,children:[a.jsx(lt,{className:"inline h-3 w-3 mr-1"}),p==="company"?"Empresa":p==="consultancy"?"Consultoria":"Cliente"]},p))}),a.jsx("div",{className:"flex gap-2",children:[{key:"active",label:"Ativo",color:"green"},{key:"inactive",label:"Inativo",color:"red"}].map(({key:p,label:x,color:b})=>a.jsxs("button",{onClick:()=>h(p),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${r.status.includes(p)?`bg-${b}-100 text-${b}-700 border border-${b}-200`:"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"}`,children:[a.jsx(qy,{className:"inline h-3 w-3 mr-1"}),x]},p))}),a.jsxs("button",{onClick:()=>l(!i),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${i||d?"bg-blue-50 text-blue-700 border border-blue-200":"bg-gray-50 text-gray-600 border border-gray-200 hover:bg-gray-100"}`,children:[a.jsx(y9,{className:"h-3 w-3"}),"Filtros Avanados",a.jsx(qo,{className:`h-3 w-3 transition-transform ${i?"rotate-180":""}`}),d&&a.jsx("span",{className:"bg-blue-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:"!"})]}),(d||e)&&a.jsxs("button",{onClick:()=>{n(),t("")},className:"px-3 py-1.5 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:[a.jsx(ct,{className:"inline h-3 w-3 mr-1"}),"Limpar tudo"]})]}),i&&a.jsx("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Planos de Assinatura"}),a.jsx("div",{className:"space-y-2",children:["basic","pro","enterprise"].map(p=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:r.plan.includes(p),onChange:()=>m(p),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("span",{className:"ml-2 text-sm text-gray-600",children:p==="basic"?"Bsico":p==="pro"?"Profissional":"Empresarial"})]},p))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Dt,{className:"inline h-4 w-4 mr-1"}),"Nmero de Usurios"]}),a.jsx("div",{className:"space-y-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"number",min:"0",max:"1000",value:r.userCountRange[0],onChange:p=>s({...r,userCountRange:[parseInt(p.target.value)||0,r.userCountRange[1]]}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Min"}),a.jsx("span",{className:"text-gray-400",children:"at"}),a.jsx("input",{type:"number",min:"0",max:"1000",value:r.userCountRange[1],onChange:p=>s({...r,userCountRange:[r.userCountRange[0],parseInt(p.target.value)||1e3]}),className:"w-20 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Max"})]})})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a.jsx(Gr,{className:"inline h-4 w-4 mr-1"}),"Perodo de Criao"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("input",{type:"date",value:r.dateRange[0],onChange:p=>s({...r,dateRange:[p.target.value,r.dateRange[1]]}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"}),a.jsx("input",{type:"date",value:r.dateRange[1],onChange:p=>s({...r,dateRange:[r.dateRange[0],p.target.value]}),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]})]})]})})]})}function LR({organization:e,children:t,level:r,isExpanded:s,onToggleExpand:n,selectedOrganization:i,selectedOrganizations:l,onOrganizationSelect:d,onToggleSelection:u,onEdit:h,onDelete:m,onAssignUser:p,onToggleActive:x,userCounts:b}){const[y,v]=_.useState(!1),w=(i==null?void 0:i.id)===e.id,N=l.some(D=>D.id===e.id),S=b[e.id]||0,j=D=>{D.stopPropagation(),n(e.id)},k=()=>{d(e)},A=D=>{switch(D){case"consultancy":return a.jsx(Hy,{className:"h-4 w-4"});case"client":return a.jsx(Dt,{className:"h-4 w-4"});default:return a.jsx(lt,{className:"h-4 w-4"})}},O=D=>{switch(D){case"consultancy":return"text-purple-600 bg-purple-50 border-purple-200";case"client":return"text-green-600 bg-green-50 border-green-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}},T=D=>D?"text-green-600 bg-green-50":"text-red-600 bg-red-50";return a.jsxs("div",{className:"relative",children:[r>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute left-0 top-6 w-6 h-px bg-gray-300",style:{left:`${(r-1)*24+12}px`}}),a.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-300",style:{left:`${(r-1)*24+12}px`}})]}),a.jsx("div",{className:`relative mb-2 p-4 border-2 rounded-xl transition-all duration-200 cursor-pointer group hover:shadow-md ${w?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300"}`,style:{marginLeft:`${r*24}px`},onClick:k,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:N,onChange:()=>u(e.id),onClick:D=>D.stopPropagation(),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.length>0&&a.jsx("button",{onClick:j,className:"p-1 hover:bg-gray-100 rounded transition-colors",children:s?a.jsx(qo,{className:"h-4 w-4 text-gray-600"}):a.jsx(zo,{className:"h-4 w-4 text-gray-600"})}),a.jsx("div",{className:`p-2 rounded-lg border ${O(e.type)}`,children:A(e.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:e.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${T(e.is_active)}`,children:e.is_active?"Ativo":"Inativo"})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Dt,{className:"h-3 w-3"}),S," usurio",S!==1?"s":""]}),t.length>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(lt,{className:"h-3 w-3"}),t.length," subsidiria",t.length!==1?"s":""]}),e.subscription_plan&&a.jsx("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:e.subscription_plan==="basic"?"Bsico":e.subscription_plan==="pro"?"Pro":"Enterprise"})]})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:D=>{D.stopPropagation(),v(!y)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:a.jsx(Z4,{className:"h-4 w-4 text-gray-600"})}),y&&a.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-10 min-w-48",children:[a.jsxs("button",{onClick:D=>{D.stopPropagation(),d(e),v(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[a.jsx(Ds,{className:"h-4 w-4"}),"Ver Detalhes"]}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),h(e),v(!1)},className:"w-full px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[a.jsx(Ha,{className:"h-4 w-4"}),"Editar"]}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),p(e),v(!1)},className:"w-full px-3 py-2 text-left text-sm text-blue-600 hover:bg-blue-50 flex items-center gap-2",children:[a.jsx(Ql,{className:"h-4 w-4"}),"Atribuir Usurio"]}),a.jsx("div",{className:"border-t border-gray-100 my-1"}),a.jsx("button",{onClick:D=>{D.stopPropagation(),x(e),v(!1)},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 ${e.is_active?"text-orange-600":"text-green-600"}`,children:e.is_active?a.jsxs(a.Fragment,{children:[a.jsx(X4,{className:"h-4 w-4"}),"Desativar"]}):a.jsxs(a.Fragment,{children:[a.jsx(Wy,{className:"h-4 w-4"}),"Ativar"]})}),a.jsxs("button",{onClick:D=>{D.stopPropagation(),m(e),v(!1)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[a.jsx(rr,{className:"h-4 w-4"}),"Excluir"]})]})]})]})}),s&&t.length>0&&a.jsx("div",{className:"relative",children:t.map(D=>a.jsx(LR,{organization:D,children:D.children||[],level:r+1,isExpanded:s,onToggleExpand:n,selectedOrganization:i,selectedOrganizations:l,onOrganizationSelect:d,onToggleSelection:u,onEdit:h,onDelete:m,onAssignUser:p,onToggleActive:x,userCounts:b},D.id))})]})}function Wie({organizations:e,selectedOrganization:t,selectedOrganizations:r,onOrganizationSelect:s,onToggleSelection:n,onEdit:i,onDelete:l,onAssignUser:d,onToggleActive:u,userCounts:h,viewMode:m}){const[p,x]=_.useState(()=>{const j=new Set;return e.forEach(k=>{k.parent_organization_id&&j.add(k.parent_organization_id)}),j}),b=j=>{const k=new Set(p);k.has(j)?k.delete(j):k.add(j),x(k)},v=(j=>{const k=j.filter(O=>!O.parent_organization_id),A=O=>j.filter(D=>D.parent_organization_id===O).map(D=>({...D,children:A(D.id)}));return k.map(O=>({...O,children:A(O.id)}))})(e),w=j=>{switch(j){case"consultancy":return a.jsx(Hy,{className:"h-4 w-4"});case"client":return a.jsx(Dt,{className:"h-4 w-4"});default:return a.jsx(lt,{className:"h-4 w-4"})}},N=j=>{switch(j){case"consultancy":return"text-purple-600 bg-purple-50 border-purple-200";case"client":return"text-green-600 bg-green-50 border-green-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}},S=j=>j?"text-green-600 bg-green-50":"text-red-600 bg-red-50";return m==="cards"?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(j=>a.jsxs("div",{className:`p-6 border-2 rounded-xl transition-all duration-200 cursor-pointer hover:shadow-md ${(t==null?void 0:t.id)===j.id?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>s(j),children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:`p-3 rounded-lg border ${N(j.type)}`,children:w(j.type)}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(j.is_active)}`,children:j.is_active?"Ativo":"Inativo"})]}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:j.name}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"h-4 w-4"}),a.jsxs("span",{children:[h[j.id]||0," usurios"]})]}),j.contact_email&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"h-4 w-4"}),a.jsx("span",{className:"truncate",children:j.contact_email})]}),j.subscription_plan&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:j.subscription_plan==="basic"?"Bsico":j.subscription_plan==="pro"?"Pro":"Enterprise"})})]})]},j.id))}):m==="list"?a.jsx("div",{className:"space-y-2",children:e.map(j=>a.jsx("div",{className:`p-4 border rounded-lg transition-all duration-200 cursor-pointer hover:shadow-sm ${(t==null?void 0:t.id)===j.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>s(j),children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:r.some(k=>k.id===j.id),onChange:()=>n(j.id),onClick:k=>k.stopPropagation(),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("div",{className:`p-2 rounded-lg border ${N(j.type)}`,children:w(j.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-medium text-gray-900 truncate",children:j.name}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[a.jsxs("span",{children:[h[j.id]||0," usurios"]}),j.contact_email&&a.jsx("span",{className:"truncate",children:j.contact_email})]})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(j.is_active)}`,children:j.is_active?"Ativo":"Inativo"})]})})},j.id))}):a.jsx("div",{className:"space-y-1",children:v.map(j=>a.jsx(LR,{organization:j,children:j.children||[],level:0,isExpanded:p.has(j.id),onToggleExpand:b,selectedOrganization:t,selectedOrganizations:r,onOrganizationSelect:s,onToggleSelection:n,onEdit:i,onDelete:l,onAssignUser:d,onToggleActive:u,userCounts:h},j.id))})}function Yie({organizationId:e,organizationName:t,isOpen:r,onClose:s,onSuccess:n}){const{success:i,error:l}=Yy(),[d,u]=_.useState(!1),[h,m]=_.useState(!1),[p,x]=_.useState([]),[b,y]=_.useState(""),[v,w]=_.useState(null),[N,S]=_.useState("inspector");_.useEffect(()=>{r&&(j(),w(null),y(""),S("inspector"))},[r]);const j=async()=>{try{m(!0);const O=await fetch("/api/users?include_unassigned=true"),T=await O.json();if(O.ok){const D=T.users.filter(R=>R.role!=="sys_admin"&&R.role!=="system_admin");x(D)}}catch(O){console.error("Erro ao buscar usurios:",O),l("Erro","No foi possvel carregar a lista de usurios.")}finally{m(!1)}},k=p.filter(O=>{var T,D;return((T=O.name)==null?void 0:T.toLowerCase().includes(b.toLowerCase()))||((D=O.email)==null?void 0:D.toLowerCase().includes(b.toLowerCase()))}),A=async O=>{if(O.preventDefault(),!v){l("Ateno","Selecione um usurio para atribuir.");return}u(!0);try{const T=await fetch(`/api/users/admin/${v}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({organization_id:e,role:N})});if(T.ok)i("Sucesso","Usurio atribudo  organizao com sucesso."),n(),s();else{const D=await T.json();l("Erro",D.error||"Erro ao atribuir usurio.")}}catch(T){console.error("Erro ao atribuir usurio:",T),l("Erro","Erro de comunicao com o servidor.")}finally{u(!1)}};return r?a.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:a.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:a.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:s})}),a.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),a.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[a.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-10 w-10 rounded-full bg-blue-100 sm:mx-0",children:a.jsx(Ql,{className:"h-5 w-5 text-blue-600"})}),a.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Atribuir Usurio"})]}),a.jsx("button",{onClick:s,className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none",children:a.jsx(ct,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"mt-2",children:[a.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Selecione um usurio para atribuir  organizao ",a.jsx("span",{className:"font-semibold text-gray-800",children:t}),"."]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Buscar Usurio"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(_a,{className:"h-4 w-4 text-gray-400"})}),a.jsx("input",{type:"text",className:"focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 sm:text-sm border-gray-300 rounded-md py-2",placeholder:"Nome ou email...",value:b,onChange:O=>y(O.target.value)})]})]}),a.jsx("div",{className:"border rounded-md max-h-48 overflow-y-auto",children:h?a.jsx("div",{className:"flex justify-center py-4",children:a.jsx(It,{className:"w-5 h-5 animate-spin text-blue-500"})}):k.length===0?a.jsx("div",{className:"p-4 text-center text-sm text-gray-500",children:"Nenhum usurio encontrado."}):a.jsx("ul",{className:"divide-y divide-gray-200",children:k.map(O=>{var T;return a.jsxs("li",{className:`p-3 cursor-pointer hover:bg-gray-50 transition-colors flex items-center justify-between ${v===O.id?"bg-blue-50 border-l-4 border-blue-500":""}`,onClick:()=>w(O.id),children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 text-xs font-bold mr-3",children:((T=O.name)==null?void 0:T.charAt(0).toUpperCase())||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:O.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs text-gray-500",children:O.email}),O.organization_id&&a.jsx("span",{className:"text-xs text-orange-600 bg-orange-50 px-1 rounded",children:"(Em outra Org)"})]})]})]}),v===O.id&&a.jsx(Ba,{className:"h-4 w-4 text-blue-600"})]},O.id)})})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Perfil de Acesso"}),a.jsxs("select",{id:"role",value:N,onChange:O=>S(O.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[a.jsx("option",{value:"org_admin",children:"Administrador da Organizao"}),a.jsx("option",{value:"manager",children:"Gerente"}),a.jsx("option",{value:"inspector",children:"Inspetor / Tcnico"}),a.jsx("option",{value:"client_viewer",children:"Visualizador (Cliente)"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Define as permisses do usurio dentro desta organizao."})]})]})]})]}),a.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[a.jsx("button",{type:"button",onClick:A,disabled:d||!v,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"w-4 h-4 mr-2 animate-spin"}),"Salvando..."]}):"Atribuir Usurio"}),a.jsx("button",{type:"button",onClick:s,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancelar"})]})]})]})}):null}function Xie(){const{user:e}=da(),t=!!e,[r,s]=_.useState([]),[n,i]=_.useState({}),[l,d]=_.useState(null),[u,h]=_.useState([]),[m,p]=_.useState(!1),[x,b]=_.useState(!1),[y,v]=_.useState(!1),[w,N]=_.useState(null),[S,j]=_.useState(null),[k,A]=_.useState(!1),[O,T]=_.useState(null),[D,R]=_.useState(!0),[I,L]=_.useState("tree"),[$,W]=_.useState(""),[P,U]=_.useState({type:[],status:[],plan:[],userCountRange:[0,1e3],dateRange:["",""]}),[K,G]=_.useState({totalOrganizations:0,masterOrganizations:0,clientCompanies:0,subsidiaries:0,totalUsers:0,myOrgUsers:0,mySubsidiaries:0,pendingInspections:0,activeInspections:0}),Q=R8(e);_.useEffect(()=>{t&&(le(),H())},[t]);const le=async()=>{try{R(!0);const se=await Fe("/api/organizations");if(!se.ok)throw new Error("Erro ao carregar organizaes");const Te=await se.json();s(Te.organizations||[]),i(Te.userCounts||{})}catch(se){console.error("Erro ao carregar organizaes:",se)}finally{R(!1)}},H=async()=>{try{const se=await Fe("/api/organizations/stats");if(se.ok){const Te=await se.json();G(Te)}}catch(se){console.error("Erro ao carregar estatsticas:",se)}},V=async(se,Te)=>{try{if(!(await Fe(`/api/organizations/${se}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)})).ok)throw new Error("Erro ao atualizar organizao");await Promise.all([le(),H()]),d(null),b(!1),N(null)}catch(M){throw console.error("Erro ao atualizar organizao:",M),M}},B=async se=>{try{const Te=await Fe(`/api/organizations/${se}`,{method:"DELETE"});if(!Te.ok){const xe=(await Te.json().catch(()=>({}))).error||"Erro ao excluir organizao";throw new Error(xe)}await Promise.all([le(),H()]),d(null),v(!1),j(null)}catch(Te){throw console.error("Erro ao excluir organizao:",Te),Te}},ne=async se=>{try{await V(se.id,{is_active:!se.is_active}),(l==null?void 0:l.id)===se.id&&d({...l,is_active:!l.is_active})}catch(Te){console.error("Erro ao alterar status da organizao:",Te)}},ie=async se=>{console.log("Excluir organizaes:",se)},ee=async se=>{try{await Promise.all(se.map(Te=>Fe(`/api/organizations/${Te}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!0})}))),await le(),h([])}catch(Te){console.error("Erro ao ativar organizaes:",Te)}},Z=async se=>{try{await Promise.all(se.map(Te=>Fe(`/api/organizations/${Te}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({is_active:!1})}))),await le(),h([])}catch(Te){console.error("Erro ao desativar organizaes:",Te)}},re=async se=>{console.log("Exportar organizaes:",se)},J=async se=>{console.log("Convidar usurios para organizaes:",se)},F=r.filter(se=>{var M,xe,pe;if($){const X=$.toLowerCase();if(!(se.name.toLowerCase().includes(X)||((M=se.contact_email)==null?void 0:M.toLowerCase().includes(X))||((xe=se.cnpj)==null?void 0:xe.includes($))||((pe=se.razao_social)==null?void 0:pe.toLowerCase().includes(X))))return!1}if(P.type.length>0&&!P.type.includes(se.type))return!1;if(P.status.length>0){const X=se.is_active?"active":"inactive";if(!P.status.includes(X))return!1}if(P.plan.length>0&&!P.plan.includes(se.subscription_plan||"basic"))return!1;const Te=n[se.id]||0;if(Te<P.userCountRange[0]||Te>P.userCountRange[1])return!1;if(P.dateRange[0]||P.dateRange[1]){const X=new Date(se.created_at).toISOString().split("T")[0];if(P.dateRange[0]&&X<P.dateRange[0]||P.dateRange[1]&&X>P.dateRange[1])return!1}return!0}),de=se=>{const Te=r.find(xe=>xe.id===se);if(!Te)return;const M=u.some(xe=>xe.id===se);h(M?xe=>xe.filter(pe=>pe.id!==se):xe=>[...xe,Te])},_e=()=>{U({type:[],status:[],plan:[],userCountRange:[0,1e3],dateRange:["",""]})};return D?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[a.jsx(lt,{className:"h-7 w-7 text-blue-600"}),"Gesto Organizacional"]}),a.jsx("p",{className:"text-gray-600 mt-1",children:Q?"Gerencie todas as organizaes do sistema":"Gerencie sua organizao e subsidirias"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[a.jsx("button",{onClick:()=>L("tree"),className:`p-2 rounded transition-colors ${I==="tree"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Visualizao em rvore",children:a.jsx(M9,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>L("cards"),className:`p-2 rounded transition-colors ${I==="cards"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Visualizao em cartes",children:a.jsx(uL,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>L("list"),className:`p-2 rounded transition-colors ${I==="list"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,title:"Visualizao em lista",children:a.jsx(Gy,{className:"h-4 w-4"})})]}),a.jsxs("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 font-medium",children:[a.jsx(Kr,{className:"h-4 w-4"}),"Nova Organizao"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Q?a.jsxs(a.Fragment,{children:[a.jsx(hr,{title:"Organizaes Master",value:K.masterOrganizations,icon:lt,color:"blue",change:"Empresas consultoras",onClick:()=>U({...P,type:["consultancy"]}),clickable:!0}),a.jsx(hr,{title:"Empresas Cliente",value:K.clientCompanies,icon:Dt,color:"green",change:"Clientes ativos",onClick:()=>U({...P,type:["client"]}),clickable:!0}),a.jsx(hr,{title:"Subsidirias",value:K.subsidiaries,icon:lt,color:"purple",change:"Total no sistema",onClick:()=>U({...P,type:["company"]}),clickable:!0}),a.jsx(hr,{title:"Total de Usurios",value:K.totalUsers,icon:Dt,color:"orange",change:"Em todas as orgs",clickable:!0})]}):a.jsxs(a.Fragment,{children:[a.jsx(hr,{title:"Usurios da Minha Org",value:K.myOrgUsers,icon:Dt,color:"blue",change:"Membros ativos",clickable:!0}),a.jsx(hr,{title:"Minhas Subsidirias",value:K.mySubsidiaries,icon:lt,color:"green",change:"Organizaes filhas",clickable:!0}),a.jsx(hr,{title:"Inspees Pendentes",value:K.pendingInspections,icon:wr,color:"orange",change:"Aguardando execuo",clickable:!0}),a.jsx(hr,{title:"Inspees Ativas",value:K.activeInspections,icon:aa,color:"purple",change:"Em andamento",clickable:!0})]})}),a.jsx(Kie,{searchTerm:$,onSearchChange:W,filters:P,onFiltersChange:U,onClearFilters:_e}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Hierarquia Organizacional"}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("span",{className:"text-sm text-gray-500",children:[F.length," de ",r.length," organizaes"]})})]}),a.jsx(Wie,{organizations:F,selectedOrganization:l,selectedOrganizations:u,onOrganizationSelect:se=>d(se),onToggleSelection:de,onEdit:se=>{N(se),b(!0)},onDelete:se=>{j(se),v(!0)},onAssignUser:se=>{T(se),A(!0)},onToggleActive:se=>ne(se),userCounts:n,viewMode:I})]})}),l&&a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 sticky top-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Viso Rpida"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.is_active?"text-green-600 bg-green-50":"text-red-600 bg-red-50"}`,children:l.is_active?"Ativo":"Inativo"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-lg mb-2",children:l.name}),a.jsx("p",{className:"text-sm text-gray-600 capitalize",children:l.type==="company"?"Empresa":l.type==="consultancy"?"Consultoria":"Cliente"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Dt,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"text-sm text-blue-600",children:"Usurios"})]}),a.jsx("p",{className:"text-xl font-semibold text-blue-900 mt-1",children:n[l.id]||0})]}),a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lt,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-sm text-green-600",children:"Subsidirias"})]}),a.jsx("p",{className:"text-xl font-semibold text-green-900 mt-1",children:r.filter(se=>se.parent_organization_id===l.id).length})]}),a.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(yr,{className:"h-4 w-4 text-purple-600"}),a.jsx("span",{className:"text-sm text-purple-600",children:"Plano"})]}),a.jsx("p",{className:"text-sm font-semibold text-purple-900 mt-1 capitalize",children:l.subscription_plan==="basic"?"Bsico":l.subscription_plan==="pro"?"Profissional":"Empresarial"})]}),a.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gr,{className:"h-4 w-4 text-orange-600"}),a.jsx("span",{className:"text-sm text-orange-600",children:"Criada em"})]}),a.jsx("p",{className:"text-sm font-semibold text-orange-900 mt-1",children:new Date(l.created_at).toLocaleDateString("pt-BR")})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:"Informaes de Contato"}),l.contact_email&&a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(sa,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:l.contact_email})]}),l.contact_phone&&a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(Fo,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:l.contact_phone})]}),l.address&&a.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[a.jsx(Na,{className:"h-4 w-4 text-gray-400 mt-0.5"}),a.jsx("span",{className:"text-gray-600",children:l.address})]}),l.website&&a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx(Su,{className:"h-4 w-4 text-gray-400"}),a.jsx("a",{href:l.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:l.website})]})]}),a.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-200",children:[a.jsxs("button",{onClick:()=>{T(l),A(!0)},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[a.jsx(Ql,{className:"h-4 w-4"}),"Atribuir Usurio"]}),a.jsxs("button",{onClick:()=>{N(l),b(!0)},className:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center justify-center gap-2",children:[a.jsx(Ds,{className:"h-4 w-4"}),"Ver Detalhes"]})]})]})]})})]}),a.jsx(Gie,{selectedOrganizations:u,onClearSelection:()=>h([]),onBulkDelete:ie,onBulkActivate:ee,onBulkDeactivate:Z,onBulkExport:re,onBulkInviteUsers:J}),a.jsx(Zj,{isOpen:m,onClose:()=>p(!1),onSuccess:()=>{le(),H()},parentOrganizations:r}),w&&a.jsx(Hie,{isOpen:x,onClose:()=>{b(!1),N(null)},organization:w,onUpdate:V}),S&&a.jsx(Vie,{isOpen:y,onClose:()=>{v(!1),j(null)},organization:S,onDelete:B,organizationStats:{userCount:n[S.id]||0,inspectionCount:0,subsidiaryCount:r.filter(se=>se.parent_organization_id===S.id).length}}),a.jsx(Yie,{organizationId:(O==null?void 0:O.id)||0,organizationName:(O==null?void 0:O.name)||"",isOpen:k,onClose:()=>{A(!1),T(null)},onSuccess:()=>{le(),H()}})]})})}function Jie(){const{id:e}=$i(),[t,r]=_.useState(null),[s,n]=_.useState(null),[i,l]=_.useState(!0);_.useEffect(()=>{e&&d()},[e]);const d=async()=>{try{const[p,x]=await Promise.all([Fe(`/api/organizations/${e}`),Fe(`/api/organizations/${e}/stats`)]);if(p.ok){const b=await p.json();r(b.organization)}if(x.ok){const b=await x.json();n(b)}}catch(p){console.error("Error fetching organization data:",p)}finally{l(!1)}},u=p=>{switch(p){case"company":return"Empresa";case"consultancy":return"Consultoria";case"client":return"Cliente";default:return p}},h=p=>{switch(p){case"company":return"bg-blue-100 text-blue-800";case"consultancy":return"bg-purple-100 text-purple-800";case"client":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},m=p=>{switch(p){case"pendente":return a.jsx(wr,{className:"w-4 h-4 text-yellow-500"});case"em_andamento":return a.jsx(Zs,{className:"w-4 h-4 text-blue-500"});case"concluida":return a.jsx(Ct,{className:"w-4 h-4 text-green-500"});default:return a.jsx(tr,{className:"w-4 h-4 text-gray-500"})}};return i?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):t?a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(vt,{to:"/organizations",className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(xs,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-4 bg-slate-100 rounded-xl",children:t.logo_url?a.jsx("img",{src:t.logo_url,alt:t.name,className:"w-12 h-12 object-contain"}):a.jsx(lt,{className:"w-12 h-12 text-slate-600"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h1",{className:"font-heading text-3xl font-bold text-slate-900",children:t.name}),a.jsx("span",{className:`inline-flex items-center px-3 py-1 text-sm font-medium rounded-full ${h(t.type)}`,children:u(t.type)}),a.jsx("div",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Ativa":"Inativa"})]}),t.description&&a.jsx("p",{className:"text-slate-600",children:t.description})]})]})}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs(vt,{to:`/inspections?org=${t.id}`,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(ki,{className:"w-4 h-4 mr-2"}),"Ver Inspees"]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-6",children:"Informaes da Empresa"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-medium text-slate-800 pb-2 border-b border-slate-200",children:"Dados Bsicos"}),t.cnpj&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"CNPJ:"}),a.jsx("span",{className:"text-sm text-slate-900 font-mono",children:t.cnpj})]}),t.razao_social&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Razo Social:"}),a.jsx("span",{className:"text-sm text-slate-900",children:t.razao_social})]}),t.nome_fantasia&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Nome Fantasia:"}),a.jsx("span",{className:"text-sm text-slate-900",children:t.nome_fantasia})]}),t.porte_empresa&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Porte:"}),a.jsx("span",{className:"text-sm text-slate-900",children:t.porte_empresa})]}),t.situacao_cadastral&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Situao:"}),a.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full text-xs ${t.situacao_cadastral.toLowerCase().includes("ativa")?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.situacao_cadastral})]}),t.data_abertura&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Data de Abertura:"}),a.jsx("span",{className:"text-sm text-slate-900",children:new Date(t.data_abertura).toLocaleDateString("pt-BR")})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-medium text-slate-800 pb-2 border-b border-slate-200",children:"Detalhes do Negcio"}),t.setor_industria&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Setor:"}),a.jsx("span",{className:"text-sm text-slate-900",children:t.setor_industria})]}),t.subsetor_industria&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Subsetor:"}),a.jsx("span",{className:"text-sm text-slate-900",children:t.subsetor_industria})]}),t.cnae_principal&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"CNAE:"}),a.jsx("span",{className:"text-sm text-slate-900 font-mono",children:t.cnae_principal})]}),t.numero_funcionarios&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Funcionrios:"}),a.jsx("span",{className:"text-sm text-slate-900 font-semibold",children:t.numero_funcionarios.toLocaleString("pt-BR")})]}),t.faturamento_anual&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Faturamento Anual:"}),a.jsxs("span",{className:"text-sm text-slate-900 font-semibold",children:["R$ ",t.faturamento_anual.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),t.nivel_risco&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Nvel de Risco:"}),a.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full text-xs ${t.nivel_risco==="baixo"?"bg-green-100 text-green-800":t.nivel_risco==="medio"?"bg-yellow-100 text-yellow-800":t.nivel_risco==="alto"?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:t.nivel_risco.charAt(0).toUpperCase()+t.nivel_risco.slice(1)})]})]})]}),t.cnae_descricao&&a.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200",children:[a.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Atividade Principal (CNAE):"}),a.jsx("p",{className:"text-sm text-slate-700",children:t.cnae_descricao})]})]}),(t.certificacoes_seguranca||t.contato_seguranca_nome||t.data_ultima_auditoria)&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-6 flex items-center gap-2",children:[a.jsx(Gt,{className:"w-5 h-5 text-green-600"}),"Segurana e Compliance"]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-medium text-slate-800 pb-2 border-b border-slate-200",children:"Certificaes e Auditorias"}),t.certificacoes_seguranca&&a.jsxs("div",{children:[a.jsx("span",{className:"text-sm font-medium text-slate-600 block mb-1",children:"Certificaes:"}),a.jsx("p",{className:"text-sm text-slate-900",children:t.certificacoes_seguranca})]}),t.data_ultima_auditoria&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"ltima Auditoria:"}),a.jsx("span",{className:"text-sm text-slate-900",children:new Date(t.data_ultima_auditoria).toLocaleDateString("pt-BR")})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-medium text-slate-800 pb-2 border-b border-slate-200",children:"Responsvel pela Segurana"}),t.contato_seguranca_nome&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Nome:"}),a.jsx("span",{className:"text-sm text-slate-900",children:t.contato_seguranca_nome})]}),t.contato_seguranca_email&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Email:"}),a.jsx("a",{href:`mailto:${t.contato_seguranca_email}`,className:"text-sm text-blue-600 hover:text-blue-700",children:t.contato_seguranca_email})]}),t.contato_seguranca_telefone&&a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Telefone:"}),a.jsx("a",{href:`tel:${t.contato_seguranca_telefone}`,className:"text-sm text-blue-600 hover:text-blue-700",children:t.contato_seguranca_telefone})]})]})]}),(t.historico_incidentes||t.observacoes_compliance)&&a.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-200 space-y-4",children:[t.historico_incidentes&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Histrico de Incidentes:"}),a.jsx("p",{className:"text-sm text-slate-700 bg-amber-50 p-3 rounded-lg",children:t.historico_incidentes})]}),t.observacoes_compliance&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-slate-600 mb-2",children:"Observaes de Compliance:"}),a.jsx("p",{className:"text-sm text-slate-700 bg-blue-50 p-3 rounded-lg",children:t.observacoes_compliance})]})]})]}),(t.contact_email||t.contact_phone||t.address||t.website)&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Informaes de Contato"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[t.contact_email&&a.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[a.jsx(sa,{className:"w-4 h-4 mr-2 text-blue-500"}),a.jsx("a",{href:`mailto:${t.contact_email}`,className:"hover:text-blue-600 transition-colors",children:t.contact_email})]}),t.contact_phone&&a.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[a.jsx(Fo,{className:"w-4 h-4 mr-2 text-green-500"}),a.jsx("a",{href:`tel:${t.contact_phone}`,className:"hover:text-blue-600 transition-colors",children:t.contact_phone})]}),t.website&&a.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[a.jsx(Su,{className:"w-4 h-4 mr-2 text-purple-500"}),a.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"hover:text-blue-600 transition-colors",children:"Website"})]}),t.address&&a.jsxs("div",{className:"flex items-center text-sm text-slate-600",children:[a.jsx(Na,{className:"w-4 h-4 mr-2 text-red-500"}),a.jsx("span",{children:t.address})]})]})]}),s&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(hr,{title:"Usurios",value:s.users_count,icon:Dt,color:"blue"}),a.jsx(hr,{title:"Inspees",value:s.inspections_count,icon:ki,color:"green"}),a.jsx(hr,{title:"Aes Ativas",value:s.active_actions,icon:yr,color:"yellow"}),a.jsx(hr,{title:"Aes Atrasadas",value:s.overdue_actions,icon:tr,color:"red"})]}),s&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Status das Inspees"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-amber-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wr,{className:"w-5 h-5 text-amber-600 mr-3"}),a.jsx("span",{className:"font-medium text-amber-900",children:"Pendentes"})]}),a.jsx("span",{className:"text-xl font-bold text-amber-600",children:s.pending_inspections})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ct,{className:"w-5 h-5 text-green-600 mr-3"}),a.jsx("span",{className:"font-medium text-green-900",children:"Concludas"})]}),a.jsx("span",{className:"text-xl font-bold text-green-600",children:s.completed_inspections})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Informaes da Organizao"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Tipo"}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${h(t.type)}`,children:u(t.type)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Status"}),a.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-medium rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.is_active?"Ativa":"Inativa"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Criada em"}),a.jsxs("div",{className:"flex items-center text-sm text-slate-900",children:[a.jsx(Gr,{className:"w-4 h-4 mr-1"}),new Date(t.created_at).toLocaleDateString("pt-BR")]})]})]})]})]}),(s==null?void 0:s.recent_inspections)&&s.recent_inspections.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Inspees Recentes"}),a.jsxs(vt,{to:`/inspections?org=${t.id}`,className:"flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:["Ver todas",a.jsx(_v,{className:"w-4 h-4 ml-1"})]})]}),a.jsx("div",{className:"space-y-3",children:s.recent_inspections.map(p=>a.jsxs("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[m(p.status),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:p.title})]}),a.jsxs("span",{className:"text-xs text-slate-500",children:["por ",p.inspector_name]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs text-slate-500",children:new Date(p.created_at).toLocaleDateString("pt-BR")}),a.jsx(vt,{to:`/inspections/${p.id}`,className:"flex items-center px-3 py-1 text-blue-600 border border-blue-200 rounded-lg hover:bg-blue-50 transition-colors text-sm",children:"Ver"})]})]},p.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Aes Rpidas"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs(vt,{to:`/inspections/new?org=${t.id}`,className:"flex items-center gap-3 p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(ki,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-900",children:"Nova Inspeo"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Criar inspeo para esta organizao"})]})]}),a.jsxs(vt,{to:`/action-plans?org=${t.id}`,className:"flex items-center gap-3 p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:a.jsx(yr,{className:"w-5 h-5 text-orange-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-900",children:"Planos de Ao"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Ver aes corretivas"})]})]}),a.jsxs(vt,{to:`/reports?org=${t.id}`,className:"flex items-center gap-3 p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(Gt,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-900",children:"Relatrios"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Anlises e mtricas"})]})]})]})]})]})}):a.jsx(Je,{children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx(tr,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Organizao no encontrada"}),a.jsx("p",{className:"text-slate-600 mb-6",children:"A organizao solicitada no existe ou voc no tem acesso a ela."}),a.jsxs(vt,{to:"/organizations",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(xs,{className:"w-4 h-4 mr-2"}),"Voltar para Organizaes"]})]})})}function Zie(){const{token:e}=$i(),[t,r]=_.useState(null),[s,n]=_.useState([]),[i,l]=_.useState([]),[d,u]=_.useState([]),[h,m]=_.useState(null),[p,x]=_.useState(!0),[b,y]=_.useState(""),[v,w]=_.useState({});_.useEffect(()=>{e&&N()},[e]);const N=async()=>{try{const O=await fetch(`/api/shared/${e}`);if(O.ok){const T=await O.json();if(T.expired){y("Este link de compartilhamento expirou.");return}if(!T.active){y("Este link de compartilhamento foi desativado.");return}m(T.share),r(T.inspection);const D=T.items||[],R=D.filter($=>!$.template_id),I=D.filter($=>$.template_id);n(R),l(I),u(T.media||[]);const L=I.reduce(($,W)=>{if(W.field_responses)try{const P=JSON.parse(W.field_responses);P.response_value!==void 0&&($[P.field_id]=P.response_value)}catch(P){console.error("Error parsing field response:",P)}return $},{});w(L),await fetch(`/api/shared/${e}/access`,{method:"POST"})}else O.status===404?y("Link de compartilhamento no encontrado."):y("Erro ao carregar inspeo compartilhada.")}catch(O){console.error("Error fetching shared inspection:",O),y("Erro ao carregar inspeo compartilhada.")}finally{x(!1)}},S=async O=>{if((h==null?void 0:h.permission)!=="edit"){alert("Voc no tem permisso para editar esta inspeo.");return}try{if(!(await fetch(`/api/shared/${e}/responses`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({responses:O})})).ok)throw new Error("Erro ao salvar respostas");alert("Respostas salvas com sucesso!"),await N()}catch(T){console.error("Error saving responses:",T),alert("Erro ao salvar respostas. Tente novamente.")}},j=O=>{switch(O){case"pendente":return a.jsx(wr,{className:"w-5 h-5 text-yellow-500"});case"em_andamento":return a.jsx(Nt,{className:"w-5 h-5 text-blue-500"});case"concluida":return a.jsx(Ct,{className:"w-5 h-5 text-green-500"});default:return a.jsx(wr,{className:"w-5 h-5 text-gray-500"})}},k=O=>{switch(O){case"pendente":return"Pendente";case"em_andamento":return"Em Andamento";case"concluida":return"Concluda";default:return O}},A=O=>{switch(O){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-orange-100 text-orange-800";case"critica":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Carregando inspeo compartilhada..."})]})}):b?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-red-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Nt,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Acesso Negado"}),a.jsx("p",{className:"text-slate-600 mb-4",children:b}),a.jsx(vt,{to:"/login",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Fazer Login"})]})}):t?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",children:a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Zl,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"font-heading text-2xl font-bold text-slate-900",children:t.title}),a.jsx("p",{className:"text-slate-600",children:"Inspeo Compartilhada"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`inline-flex items-center gap-1 px-3 py-1 text-sm font-medium rounded-full ${A(t.priority)}`,children:t.priority.charAt(0).toUpperCase()+t.priority.slice(1)}),a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-slate-50 rounded-lg",children:[j(t.status),a.jsx("span",{className:"text-sm font-medium text-slate-700",children:k(t.status)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 p-4 bg-blue-50 rounded-lg",children:[a.jsx(Ds,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900",children:(h==null?void 0:h.permission)==="edit"?"Voc pode visualizar e editar esta inspeo":"Voc pode apenas visualizar esta inspeo"}),a.jsxs("p",{className:"text-sm text-blue-700",children:[(h==null?void 0:h.access_count)>0&&`Acessada ${h.access_count} vez(es)  `,(h==null?void 0:h.expires_at)&&`Expira em ${new Date(h.expires_at).toLocaleDateString("pt-BR")}`]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Informaes da Inspeo"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.company_name&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(lt,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Empresa"}),a.jsx("p",{className:"font-medium text-slate-900",children:t.company_name})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Na,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Local"}),a.jsx("p",{className:"font-medium text-slate-900",children:t.location}),t.address&&a.jsx("p",{className:"text-sm text-slate-500",children:t.address})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Wr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Inspetor"}),a.jsx("p",{className:"font-medium text-slate-900",children:t.inspector_name}),t.inspector_email&&a.jsx("p",{className:"text-sm text-slate-500",children:t.inspector_email})]})]}),t.scheduled_date&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gr,{className:"w-5 h-5 text-slate-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-slate-500",children:"Data Agendada"}),a.jsx("p",{className:"font-medium text-slate-900",children:new Date(t.scheduled_date).toLocaleDateString("pt-BR")})]})]})]}),t.description&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-slate-200",children:[a.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Descrio"}),a.jsx("p",{className:"text-slate-700",children:t.description})]})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Checklist da Inspeo"}),i.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"font-heading text-base font-semibold text-slate-900 mb-4",children:"Checklist do Template"}),a.jsx("div",{className:"bg-slate-50 rounded-lg p-4",children:a.jsx(Qj,{fields:i.map(O=>{const T=JSON.parse(O.field_responses);return{id:T.field_id,field_name:O.item_description,field_type:T.field_type,is_required:T.is_required,options:T.options,order_index:0,template_id:O.template_id,compliance_enabled:T.compliance_enabled??!0,compliance_mode:T.compliance_mode??"auto",compliance_config:T.compliance_config}}),onSubmit:S,initialValues:v,readonly:(h==null?void 0:h.permission)!=="edit"})})]}),s.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"font-heading text-base font-semibold text-slate-900",children:"Itens Manuais"}),s.map(O=>a.jsxs("div",{className:"flex items-start gap-4 p-4 border border-slate-200 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs rounded",children:O.category})}),a.jsx("p",{className:"font-medium text-slate-900 mb-1",children:O.item_description}),O.observations&&a.jsx("p",{className:"text-sm text-slate-600",children:O.observations})]}),O.is_compliant!==null&&a.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-lg ${O.is_compliant?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[O.is_compliant?a.jsx(Ct,{className:"w-4 h-4"}):a.jsx(Nt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:O.is_compliant?"Conforme":"No Conforme"})]})]},O.id))]}),s.length===0&&i.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Nt,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Nenhum item de checklist encontrado"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Esta inspeo ainda no possui itens de checklist"})]})]}),d.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsx("h2",{className:"font-heading text-lg font-semibold text-slate-900 mb-4",children:"Mdias da Inspeo"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(O=>a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[O.media_type==="image"&&a.jsx("img",{src:O.file_url,alt:O.file_name,className:"w-full h-48 object-cover"}),a.jsxs("div",{className:"p-3",children:[a.jsx("p",{className:"font-medium text-slate-900 text-sm truncate",children:O.file_name}),O.description&&a.jsx("p",{className:"text-slate-600 text-sm mt-1",children:O.description})]})]},O.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 text-center",children:[a.jsx("p",{className:"text-slate-600 mb-4",children:"Esta inspeo foi compartilhada atravs do sistema Compia"}),a.jsxs(vt,{to:"/login",className:"inline-flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Acessar Sistema Completo"]})]})]})})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-slate-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Gt,{className:"w-8 h-8 text-slate-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Inspeo no encontrada"}),a.jsx("p",{className:"text-slate-600",children:"A inspeo compartilhada no pde ser carregada."})]})})}function Qie(){const{token:e}=$i(),t=na(),{user:r}=da(),[s,n]=_.useState(null),[i,l]=_.useState(!0),[d,u]=_.useState(!1),[h,m]=_.useState(""),[p,x]=_.useState(!1);_.useEffect(()=>{e&&b()},[e]);const b=async()=>{try{const N=await fetch(`/api/invitations/${e}/details`);if(N.ok){const S=await N.json();n(S.invitation)}else N.status===404?m("Convite no encontrado ou expirado"):m("Erro ao carregar convite")}catch(N){console.error("Error fetching invitation:",N),m("Erro ao carregar convite")}finally{l(!1)}},y=async()=>{if(!r||!e){m("Voc precisa estar logado para aceitar o convite");return}if(r.email!==(s==null?void 0:s.email)){m("Este convite foi enviado para outro email. Faa login com o email correto.");return}u(!0);try{const N=await fetch(`/api/invitations/${e}/accept`,{method:"POST",headers:{"Content-Type":"application/json"}});if(N.ok)x(!0),setTimeout(()=>{t("/")},2e3);else{const S=await N.json();m(S.error||"Erro ao aceitar convite")}}catch(N){console.error("Error accepting invitation:",N),m("Erro ao aceitar convite")}finally{u(!1)}},v=N=>{switch(N){case"system_admin":return"Administrador do Sistema";case"org_admin":return"Administrador da Organizao";case"manager":return"Gerente";case"inspector":return"Tcnico";case"client":return"Cliente";default:return N}},w=N=>{switch(N){case"system_admin":return"text-red-600 bg-red-100";case"org_admin":return"text-purple-600 bg-purple-100";case"manager":return"text-blue-600 bg-blue-100";case"inspector":return"text-green-600 bg-green-100";case"client":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}};return i?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-blue-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(It,{className:"w-8 h-8 text-blue-600 animate-spin"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Carregando Convite"}),a.jsx("p",{className:"text-slate-600",children:"Verificando os detalhes do seu convite..."})]})}):h?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-red-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(tr,{className:"w-8 h-8 text-red-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Erro no Convite"}),a.jsx("p",{className:"text-slate-600 mb-4",children:h}),a.jsxs("button",{onClick:()=>t("/login"),className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors mx-auto",children:[a.jsx(_v,{className:"w-4 h-4 mr-2"}),"Ir para Login"]})]})}):p?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-green-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(Ct,{className:"w-8 h-8 text-green-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Convite Aceito!"}),a.jsxs("p",{className:"text-slate-600 mb-4",children:["Bem-vindo  ",s==null?void 0:s.organization_name,"! Voc ser redirecionado em instantes."]}),a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(It,{className:"w-4 h-4 animate-spin text-blue-600"}),a.jsx("span",{className:"ml-2 text-sm text-slate-600",children:"Redirecionando..."})]})]})}):r?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"p-4 bg-blue-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(sa,{className:"w-8 h-8 text-blue-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Convite de Organizao"}),a.jsx("p",{className:"text-slate-600",children:"Voc foi convidado para participar de uma organizao"})]}),s&&a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-medium text-slate-900 mb-3",children:"Detalhes do Convite"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Email:"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.email})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Organizao:"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.organization_name||"Carregando..."})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Perfil:"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(s.role)}`,children:v(s.role)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Convidado por:"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.inviter_name||"Sistema"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-slate-600",children:"Expira em:"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:new Date(s.expires_at).toLocaleDateString("pt-BR")})]})]})]}),r.email!==s.email&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(tr,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Email Diferente"}),a.jsxs("p",{className:"text-sm text-yellow-700",children:["Este convite foi enviado para ",a.jsx("strong",{children:s.email}),", mas voc est logado como ",a.jsx("strong",{children:r.email}),"."]})]})]})})]}),a.jsxs("div",{className:"flex items-center justify-between gap-4",children:[a.jsx("button",{onClick:()=>t("/login"),className:"flex-1 py-2 px-4 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:y,disabled:d||r.email!==(s==null?void 0:s.email),className:"flex-1 flex items-center justify-center py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?a.jsxs(a.Fragment,{children:[a.jsx(It,{className:"w-4 h-4 mr-2 animate-spin"}),"Aceitando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ct,{className:"w-4 h-4 mr-2"}),"Aceitar Convite"]})})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-slate-200",children:a.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Ao aceitar este convite, voc concorda em participar da organizao com o perfil especificado."})})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center max-w-md",children:[a.jsx("div",{className:"p-4 bg-yellow-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:a.jsx(sO,{className:"w-8 h-8 text-yellow-600"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-2",children:"Login Necessrio"}),a.jsx("p",{className:"text-slate-600 mb-4",children:"Voc precisa fazer login para aceitar este convite."}),s&&a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 mb-4 text-left",children:[a.jsx("h3",{className:"font-medium text-slate-900 mb-2",children:"Detalhes do Convite:"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(sa,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{className:"text-slate-600",children:["Email: ",s.email]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(lt,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{className:"text-slate-600",children:["Organizao: ",s.organization_name||"Carregando..."]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Gt,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w(s.role)}`,children:v(s.role)})]})]})]}),a.jsxs("button",{onClick:()=>t("/login"),className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors mx-auto",children:[a.jsx(_v,{className:"w-4 h-4 mr-2"}),"Fazer Login"]})]})})}const eoe=[{category:"Checklists",permissions:[{type:"checklist_create",label:"Criar Checklists",description:"Permite criar novos templates de checklist"},{type:"checklist_edit_own",label:"Editar Prprios",description:"Permite editar checklists criados pelo prprio usurio"},{type:"checklist_edit_org",label:"Editar da Organizao",description:"Permite editar checklists da organizao"},{type:"checklist_edit_all",label:"Editar Todos",description:"Permite editar qualquer checklist no sistema"},{type:"checklist_delete_own",label:"Excluir Prprios",description:"Permite excluir checklists criados pelo prprio usurio"},{type:"checklist_delete_org",label:"Excluir da Organizao",description:"Permite excluir checklists da organizao"},{type:"checklist_delete_all",label:"Excluir Todos",description:"Permite excluir qualquer checklist no sistema"},{type:"checklist_view_org",label:"Ver da Organizao",description:"Permite visualizar checklists da organizao"},{type:"checklist_view_all",label:"Ver Todos",description:"Permite visualizar todos os checklists do sistema"}]},{category:"Inspees",permissions:[{type:"inspection_create",label:"Criar Inspees",description:"Permite criar novas inspees"},{type:"inspection_edit_own",label:"Editar Prprias",description:"Permite editar inspees criadas pelo prprio usurio"},{type:"inspection_edit_org",label:"Editar da Organizao",description:"Permite editar inspees da organizao"},{type:"inspection_edit_all",label:"Editar Todas",description:"Permite editar qualquer inspeo no sistema"},{type:"inspection_delete_own",label:"Excluir Prprias",description:"Permite excluir inspees criadas pelo prprio usurio"},{type:"inspection_delete_org",label:"Excluir da Organizao",description:"Permite excluir inspees da organizao"},{type:"inspection_delete_all",label:"Excluir Todas",description:"Permite excluir qualquer inspeo no sistema"},{type:"inspection_view_org",label:"Ver da Organizao",description:"Permite visualizar inspees da organizao"},{type:"inspection_view_all",label:"Ver Todas",description:"Permite visualizar todas as inspees do sistema"}]},{category:"Inteligncia Artificial",permissions:[{type:"ai_analysis",label:"Anlise de Conformidade",description:"Permite solicitar anlise de IA para itens de inspeo"},{type:"ai_checklist_create",label:"Criar Checklist com IA",description:"Permite gerar checklists automaticamente usando IA"},{type:"ai_action_plan",label:"Plano de Ao com IA",description:"Permite gerar planos de ao automaticamente usando IA"},{type:"ai_transcription",label:"Transcrio de udio",description:"Permite transcrever udios usando IA"}]},{category:"Planos de Ao",permissions:[{type:"action_plan_create",label:"Criar Planos",description:"Permite criar novos planos de ao"},{type:"action_plan_edit_own",label:"Editar Prprios",description:"Permite editar planos criados pelo prprio usurio"},{type:"action_plan_edit_org",label:"Editar da Organizao",description:"Permite editar planos da organizao"},{type:"action_plan_edit_all",label:"Editar Todos",description:"Permite editar qualquer plano no sistema"}]},{category:"Relatrios",permissions:[{type:"report_view",label:"Visualizar Relatrios",description:"Permite visualizar relatrios e dashboards"},{type:"report_export",label:"Exportar Relatrios",description:"Permite exportar relatrios em PDF/Excel"}]},{category:"Usurios",permissions:[{type:"users_view",label:"Visualizar Usurios",description:"Permite visualizar lista de usurios"},{type:"users_manage",label:"Gerenciar Usurios",description:"Permite criar, editar e desativar usurios"},{type:"users_approve",label:"Aprovar Cadastros",description:"Permite aprovar ou rejeitar novos cadastros"}]},{category:"Organizaes",permissions:[{type:"org_view",label:"Visualizar Organizaes",description:"Permite visualizar dados da organizao"},{type:"org_manage",label:"Gerenciar Organizaes",description:"Permite criar e editar organizaes"}]},{category:"Sistema",permissions:[{type:"settings_view",label:"Visualizar Configuraes",description:"Permite visualizar configuraes do sistema"},{type:"settings_manage",label:"Gerenciar Configuraes",description:"Permite alterar configuraes do sistema"},{type:"permissions_manage",label:"Gerenciar Permisses",description:"Permite configurar permisses de papis"}]}],p5=[{value:"system_admin",label:"Administrador do Sistema",color:"bg-red-100 text-red-800"},{value:"org_admin",label:"Administrador da Organizao",color:"bg-blue-100 text-blue-800"},{value:"manager",label:"Gerente",color:"bg-green-100 text-green-800"},{value:"inspector",label:"Inspetor/Tcnico",color:"bg-yellow-100 text-yellow-800"},{value:"client",label:"Cliente",color:"bg-gray-100 text-gray-800"}];function toe(){const[e,t]=_.useState([]),[r,s]=_.useState(!0),[n,i]=_.useState(!1),[l,d]=_.useState({});_.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await fetch("/api/role-permissions");if(y.ok){const v=await y.json();t(v.permissions||[])}}catch(y){console.error("Erro ao carregar permisses:",y)}finally{s(!1)}},h=(y,v)=>{const w=e.find(S=>S.role===y&&S.permission_type===v),N=`${y}-${v}`;return N in l?l[N]:(w==null?void 0:w.is_allowed)||!1},m=(y,v)=>{const w=`${y}-${v}`,N=h(y,v);d(S=>({...S,[w]:!N}))},p=async()=>{i(!0);try{const y=Object.entries(l).map(([w,N])=>{const[S,j]=w.split("-");return{role:S,permission_type:j,is_allowed:N}});if((await fetch("/api/role-permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({updates:y})})).ok)d({}),await u(),alert("Permisses salvas com sucesso!");else throw new Error("Erro ao salvar permisses")}catch(y){console.error("Erro ao salvar:",y),alert("Erro ao salvar permisses. Tente novamente.")}finally{i(!1)}},x=()=>{d({})},b=Object.keys(l).length>0;return r?a.jsx(Je,{children:a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsx(Je,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"font-heading text-2xl font-bold text-slate-900",children:"Configurao de Permisses"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Configure as permisses especficas para cada perfil de usurio"})]}),b&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:x,className:"flex items-center px-3 py-2 text-slate-600 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors text-sm",children:[a.jsx($o,{className:"w-4 h-4 mr-1"}),"Cancelar"]}),a.jsxs("button",{onClick:p,disabled:n,className:"flex items-center px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors text-sm",children:[n?a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-1"}):a.jsx(Ka,{className:"w-4 h-4 mr-1"}),"Salvar"]})]})]}),b&&a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Nt,{className:"w-5 h-5 text-amber-600 mr-2"}),a.jsxs("span",{className:"text-amber-800 font-medium",children:["Voc tem ",Object.keys(l).length," alterao(es) no salva(s)"]})]})}),eoe.map(y=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200",children:[a.jsx("div",{className:"px-6 py-4 border-b border-slate-200",children:a.jsxs("h2",{className:"font-heading text-xl font-semibold text-slate-900 flex items-center",children:[a.jsx(Gt,{className:"w-5 h-5 mr-2 text-blue-600"}),y.category]})}),a.jsx("div",{className:"p-6",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-200",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-700",children:"Permisso"}),p5.map(v=>a.jsx("th",{className:"text-center py-3 px-4",children:a.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${v.color}`,children:v.label})},v.value))]})}),a.jsx("tbody",{children:y.permissions.map(v=>a.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:v.label}),a.jsx("div",{className:"text-sm text-slate-500",children:v.description})]})}),p5.map(w=>{const N=h(w.value,v.type),j=`${w.value}-${v.type}`in l;return a.jsx("td",{className:"py-4 px-4 text-center",children:a.jsx("button",{onClick:()=>m(w.value,v.type),className:`flex items-center justify-center w-8 h-8 rounded-full transition-all ${j?"ring-2 ring-blue-500 ring-offset-2":""} ${N?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"}`,title:N?"Permitido":"Negado",children:N?a.jsx(aa,{className:"w-5 h-5"}):a.jsx(J4,{className:"w-5 h-5"})})},w.value)})]},v.type))})]})})})]},y.category)),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Js,{className:"w-6 h-6 text-blue-600 mr-3 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Como funcionam as permisses"}),a.jsxs("ul",{className:"text-blue-800 text-sm space-y-1",children:[a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Sistema de herana:"})," Permisses mais especficas sobrescrevem as gerais"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Prprios:"})," Permite aes apenas em itens criados pelo usurio"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Organizao:"})," Permite aes em itens da mesma organizao"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Todos:"})," Permite aes em qualquer item do sistema"]}),a.jsxs("li",{children:[" ",a.jsx("strong",{children:"Alteraes:"})," So aplicadas imediatamente aps salvar"]})]})]})]})})]})})}function roe(){const{user:e}=da(),t=e,[r,s]=_.useState(!1),[n,i]=_.useState(null),[l,d]=_.useState(null),[u,h]=_.useState(null);if(!(t!=null&&t.profile)||t.profile.role!=="system_admin"&&t.profile.role!=="sys_admin")return a.jsx(Je,{children:a.jsx("div",{className:"max-w-2xl mx-auto p-6",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[a.jsx(Nt,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Acesso Negado"}),a.jsx("p",{className:"text-red-700",children:"Apenas administradores do sistema podem acessar esta funcionalidade."})]})})});const m=async()=>{s(!0),d(null);try{const v=await fetch("/api/admin/export-all-data");if(!v.ok)throw new Error(`HTTP ${v.status}: ${v.statusText}`);const w=await v.json();i(w),d({type:"success",text:`Dados exportados com sucesso! Total de ${w.total_counts.inspections} inspees encontradas.`})}catch(v){console.error("Erro ao exportar dados:",v),d({type:"error",text:`Erro ao exportar dados: ${v instanceof Error?v.message:"Erro desconhecido"}`})}finally{s(!1)}},p=()=>{if(!n)return;const v=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),w=URL.createObjectURL(v),N=document.createElement("a");N.href=w,N.download=`compia-data-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(N),N.click(),document.body.removeChild(N),URL.revokeObjectURL(w)},x=async()=>{s(!0),d(null);try{const v=await fetch("/api/admin/inspections-all");if(!v.ok)throw new Error(`HTTP ${v.status}: ${v.statusText}`);const w=await v.json();d({type:"info",text:`Produo tem ${w.total_count} inspees totais (bypass de filtros ativo).`})}catch(v){console.error("Erro ao verificar dados da produo:",v),d({type:"error",text:`Erro ao verificar dados: ${v instanceof Error?v.message:"Erro desconhecido"}`})}finally{s(!1)}},b=async()=>{var v,w;if(!u){d({type:"error",text:"Selecione um arquivo JSON para importar."});return}s(!0),d(null);try{const N=await u.text();let S;try{S=JSON.parse(N)}catch{throw new Error("Arquivo JSON invlido")}if(!S.data||!S.total_counts)throw new Error("Formato de arquivo invlido. Use apenas arquivos exportados do COMPIA.");const j=await fetch("/api/admin/import-all-data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)});if(!j.ok){const A=await j.json();throw new Error(A.error||`HTTP ${j.status}: ${j.statusText}`)}const k=await j.json();d({type:"success",text:`Dados importados com sucesso! ${((v=k.imported_counts)==null?void 0:v.inspections)||0} inspees, ${((w=k.imported_counts)==null?void 0:w.organizations)||0} organizaes importadas.`}),h(null)}catch(N){console.error("Erro ao importar dados:",N),d({type:"error",text:`Erro ao importar dados: ${N instanceof Error?N.message:"Erro desconhecido"}`})}finally{s(!1)}},y=v=>{var N;const w=(N=v.target.files)==null?void 0:N[0];if(w){if(!w.name.endsWith(".json")){d({type:"error",text:"Selecione apenas arquivos JSON."});return}h(w),d({type:"info",text:`Arquivo selecionado: ${w.name} (${(w.size/1024/1024).toFixed(2)} MB)`})}};return a.jsx(Je,{children:a.jsx("div",{className:"max-w-4xl mx-auto p-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Si,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Sincronizao de Dados - Produo para Desenvolvimento"}),a.jsx("p",{className:"text-slate-600",children:"Ferramentas administrativas para sincronizar dados entre ambientes"})]})]}),a.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(Nt,{className:"w-5 h-5 text-amber-600 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-amber-900",children:"Ateno"}),a.jsx("p",{className:"text-amber-800 text-sm",children:"Esta funcionalidade est disponvel apenas para SYSTEM_ADMIN e ir contornar todos os filtros de permisso para exportar dados da produo."})]})]})}),l&&a.jsx("div",{className:`rounded-lg p-4 mb-6 ${l.type==="success"?"bg-green-50 border border-green-200":l.type==="error"?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"}`,children:a.jsxs("div",{className:"flex items-start gap-3",children:[l.type==="success"&&a.jsx(aa,{className:"w-5 h-5 text-green-600 mt-0.5"}),l.type==="error"&&a.jsx(Nt,{className:"w-5 h-5 text-red-600 mt-0.5"}),l.type==="info"&&a.jsx(Si,{className:"w-5 h-5 text-blue-600 mt-0.5"}),a.jsx("p",{className:`text-sm ${l.type==="success"?"text-green-800":l.type==="error"?"text-red-800":"text-blue-800"}`,children:l.text})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[a.jsxs("button",{onClick:x,disabled:r,className:"flex items-center justify-center gap-3 p-4 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg transition-colors disabled:opacity-50",children:[r?a.jsx(It,{className:"w-5 h-5 text-blue-600 animate-spin"}):a.jsx(Si,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"font-medium text-blue-900",children:"Verificar Dados da Produo"})]}),a.jsxs("button",{onClick:m,disabled:r,className:"flex items-center justify-center gap-3 p-4 bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg transition-colors disabled:opacity-50",children:[r?a.jsx(It,{className:"w-5 h-5 text-green-600 animate-spin"}):a.jsx(Fa,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"font-medium text-green-900",children:"Exportar Todos os Dados"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"file",accept:".json",onChange:y,className:`block w-full text-sm text-slate-500
                  file:mr-4 file:py-2 file:px-4
                  file:rounded-lg file:border-0
                  file:text-sm file:font-medium
                  file:bg-orange-50 file:text-orange-700
                  hover:file:bg-orange-100`}),a.jsxs("button",{onClick:b,disabled:r||!u,className:"flex items-center justify-center gap-3 p-4 bg-orange-50 hover:bg-orange-100 border border-orange-200 rounded-lg transition-colors disabled:opacity-50 w-full",children:[r?a.jsx(It,{className:"w-5 h-5 text-orange-600 animate-spin"}):a.jsx(Si,{className:"w-5 h-5 text-orange-600"}),a.jsx("span",{className:"font-medium text-orange-900",children:"Importar Dados de Produo"})]})]})]}),n&&a.jsxs("div",{className:"border border-slate-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Dados Exportados"}),a.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Fa,{className:"w-4 h-4"}),"Baixar JSON"]})]}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total_counts.inspections}),a.jsx("div",{className:"text-sm text-slate-600",children:"Inspees"})]}),a.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total_counts.inspection_items}),a.jsx("div",{className:"text-sm text-slate-600",children:"Itens"})]}),a.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total_counts.action_items}),a.jsx("div",{className:"text-sm text-slate-600",children:"Aes"})]}),a.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total_counts.organizations}),a.jsx("div",{className:"text-sm text-slate-600",children:"Organizaes"})]}),a.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total_counts.users}),a.jsx("div",{className:"text-sm text-slate-600",children:"Usurios"})]}),a.jsxs("div",{className:"text-center p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:n.total_counts.checklist_templates}),a.jsx("div",{className:"text-sm text-slate-600",children:"Templates"})]})]}),a.jsxs("div",{className:"text-xs text-slate-500 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Exportado por:"})," ",n.exported_by]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Data/Hora:"})," ",new Date(n.timestamp).toLocaleString("pt-BR")]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-slate-50 rounded-lg",children:[a.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Instrues:"}),a.jsxs("ol",{className:"text-sm text-slate-700 space-y-1 list-decimal list-inside",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Exportar:"}),' Clique em "Exportar Todos os Dados" para extrair dados de produo']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Download:"}),' Use "Baixar JSON" para salvar o arquivo de exportao']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Importar:"}),' Selecione o arquivo JSON exportado e clique em "Importar"']}),a.jsxs("li",{children:[a.jsx("strong",{children:"Sincronizao:"})," A importao substituir todos os dados de desenvolvimento pelos de produo"]})]}),a.jsx("div",{className:"mt-3 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:a.jsxs("p",{className:"text-amber-800 text-sm",children:[a.jsx("strong",{children:" Ateno:"})," A importao ir substituir TODOS os dados existentes no ambiente de desenvolvimento pelos dados da produo, exceto seu usurio atual."]})})]})]})})})}function aoe(){return a.jsx(G$,{children:a.jsx(nB,{children:a.jsx(N8,{children:a.jsxs(QI,{children:[a.jsx(xt,{path:"/landing",element:a.jsx(KP,{})}),a.jsx(xt,{path:"/login",element:a.jsx($ie,{})}),a.jsx(xt,{path:"/register",element:a.jsx(Lie,{})}),a.jsx(xt,{path:"/auth/callback",element:a.jsx(Bie,{})}),a.jsx(xt,{path:"/shared/:token",element:a.jsx(Zie,{})}),a.jsx(xt,{path:"/accept-invitation/:token",element:a.jsx(Qie,{})}),a.jsx(xt,{path:"/",element:a.jsx(Zt,{children:a.jsx(mae,{})})}),a.jsx(xt,{path:"/inspections",element:a.jsx(Zt,{children:a.jsx(pae,{})})}),a.jsx(xt,{path:"/inspections/new",element:a.jsx(Zt,{children:a.jsx(xae,{})})}),a.jsx(xt,{path:"/inspections/:id/edit",element:a.jsx(Zt,{children:a.jsx(bae,{})})}),a.jsx(xt,{path:"/inspections/:id",element:a.jsx(Zt,{children:a.jsx(Pae,{})})}),a.jsx(xt,{path:"/reports",element:a.jsx(Zt,{children:a.jsx(Rae,{})})}),a.jsx(xt,{path:"/settings",element:a.jsx(Zt,{children:a.jsx(Dae,{})})}),a.jsx(xt,{path:"/settings/permissions",element:a.jsx(Zt,{requiredRole:"system_admin",children:a.jsx(toe,{})})}),a.jsx(xt,{path:"/admin/data-sync",element:a.jsx(Zt,{requiredRole:"system_admin",children:a.jsx(roe,{})})}),a.jsx(xt,{path:"/checklists",element:a.jsx(Zt,{children:a.jsx(Ase,{})})}),a.jsx(xt,{path:"/checklists/new",element:a.jsx(Zt,{children:a.jsx(Ose,{})})}),a.jsx(xt,{path:"/checklists/ai-generate",element:a.jsx(Zt,{children:a.jsx(Tse,{})})}),a.jsx(xt,{path:"/checklists/import",element:a.jsx(Zt,{children:a.jsx(Pse,{})})}),a.jsx(xt,{path:"/checklists/:id",element:a.jsx(Zt,{children:a.jsx(Rse,{})})}),a.jsx(xt,{path:"/checklists/:id/edit",element:a.jsx(Zt,{children:a.jsx(Mse,{})})}),a.jsx(xt,{path:"/inspections/:id/action-plan",element:a.jsx(Zt,{children:a.jsx(Ise,{})})}),a.jsx(xt,{path:"/action-plans",element:a.jsx(Zt,{children:a.jsx(zse,{})})}),a.jsx(xt,{path:"/activities",element:a.jsx(Zt,{children:a.jsx(zie,{})})}),a.jsx(xt,{path:"/users",element:a.jsx(Zt,{requiredRoles:["system_admin","admin"],children:a.jsx(qie,{})})}),a.jsx(xt,{path:"/organizations",element:a.jsx(Zt,{requiredRoles:["system_admin","admin","org_admin","manager"],children:a.jsx(Xie,{})})}),a.jsx(xt,{path:"/organizations/:id",element:a.jsx(Zt,{requiredRoles:["system_admin","admin","org_admin","manager"],children:a.jsx(Jie,{})})}),a.jsx(xt,{path:"/profile",element:a.jsx(Zt,{children:a.jsx(Fie,{})})})]})})})})}iI.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(aoe,{})}));
